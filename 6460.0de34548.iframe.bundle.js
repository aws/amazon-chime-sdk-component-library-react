/*! For license information please see 6460.0de34548.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkamazon_chime_sdk_component_library_react=self.webpackChunkamazon_chime_sdk_component_library_react||[]).push([[6460],{"./node_modules/@aws-crypto/crc32/build/aws_crc32.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AwsCrc32=void 0;var tslib_1=__webpack_require__("./node_modules/@aws-crypto/crc32/node_modules/tslib/tslib.es6.js"),util_1=__webpack_require__("./node_modules/@aws-crypto/crc32/node_modules/@aws-crypto/util/build/index.js"),index_1=__webpack_require__("./node_modules/@aws-crypto/crc32/build/index.js"),AwsCrc32=function(){function AwsCrc32(){this.crc32=new index_1.Crc32}return AwsCrc32.prototype.update=function(toHash){(0,util_1.isEmptyData)(toHash)||this.crc32.update((0,util_1.convertToBuffer)(toHash))},AwsCrc32.prototype.digest=function(){return tslib_1.__awaiter(this,void 0,void 0,(function(){return tslib_1.__generator(this,(function(_a){return[2,(0,util_1.numToUint8)(this.crc32.digest())]}))}))},AwsCrc32.prototype.reset=function(){this.crc32=new index_1.Crc32},AwsCrc32}();exports.AwsCrc32=AwsCrc32},"./node_modules/@aws-crypto/crc32/build/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AwsCrc32=exports.Crc32=exports.crc32=void 0;var tslib_1=__webpack_require__("./node_modules/@aws-crypto/crc32/node_modules/tslib/tslib.es6.js"),util_1=__webpack_require__("./node_modules/@aws-crypto/crc32/node_modules/@aws-crypto/util/build/index.js");exports.crc32=function crc32(data){return(new Crc32).update(data).digest()};var Crc32=function(){function Crc32(){this.checksum=4294967295}return Crc32.prototype.update=function(data){var e_1,_a;try{for(var data_1=tslib_1.__values(data),data_1_1=data_1.next();!data_1_1.done;data_1_1=data_1.next()){var byte=data_1_1.value;this.checksum=this.checksum>>>8^lookupTable[255&(this.checksum^byte)]}}catch(e_1_1){e_1={error:e_1_1}}finally{try{data_1_1&&!data_1_1.done&&(_a=data_1.return)&&_a.call(data_1)}finally{if(e_1)throw e_1.error}}return this},Crc32.prototype.digest=function(){return(4294967295^this.checksum)>>>0},Crc32}();exports.Crc32=Crc32;var lookupTable=(0,util_1.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),aws_crc32_1=__webpack_require__("./node_modules/@aws-crypto/crc32/build/aws_crc32.js");Object.defineProperty(exports,"AwsCrc32",{enumerable:!0,get:function(){return aws_crc32_1.AwsCrc32}})},"./node_modules/@aws-crypto/crc32/node_modules/@aws-crypto/util/build/convertToBuffer.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertToBuffer=void 0;var util_utf8_browser_1=__webpack_require__("./node_modules/@aws-sdk/util-utf8-browser/dist-es/index.js"),fromUtf8="undefined"!=typeof Buffer&&Buffer.from?function(input){return Buffer.from(input,"utf8")}:util_utf8_browser_1.fromUtf8;exports.convertToBuffer=function convertToBuffer(data){return data instanceof Uint8Array?data:"string"==typeof data?fromUtf8(data):ArrayBuffer.isView(data)?new Uint8Array(data.buffer,data.byteOffset,data.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(data)}},"./node_modules/@aws-crypto/crc32/node_modules/@aws-crypto/util/build/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uint32ArrayFrom=exports.numToUint8=exports.isEmptyData=exports.convertToBuffer=void 0;var convertToBuffer_1=__webpack_require__("./node_modules/@aws-crypto/crc32/node_modules/@aws-crypto/util/build/convertToBuffer.js");Object.defineProperty(exports,"convertToBuffer",{enumerable:!0,get:function(){return convertToBuffer_1.convertToBuffer}});var isEmptyData_1=__webpack_require__("./node_modules/@aws-crypto/crc32/node_modules/@aws-crypto/util/build/isEmptyData.js");Object.defineProperty(exports,"isEmptyData",{enumerable:!0,get:function(){return isEmptyData_1.isEmptyData}});var numToUint8_1=__webpack_require__("./node_modules/@aws-crypto/crc32/node_modules/@aws-crypto/util/build/numToUint8.js");Object.defineProperty(exports,"numToUint8",{enumerable:!0,get:function(){return numToUint8_1.numToUint8}});var uint32ArrayFrom_1=__webpack_require__("./node_modules/@aws-crypto/crc32/node_modules/@aws-crypto/util/build/uint32ArrayFrom.js");Object.defineProperty(exports,"uint32ArrayFrom",{enumerable:!0,get:function(){return uint32ArrayFrom_1.uint32ArrayFrom}})},"./node_modules/@aws-crypto/crc32/node_modules/@aws-crypto/util/build/isEmptyData.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEmptyData=void 0,exports.isEmptyData=function isEmptyData(data){return"string"==typeof data?0===data.length:0===data.byteLength}},"./node_modules/@aws-crypto/crc32/node_modules/@aws-crypto/util/build/numToUint8.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.numToUint8=void 0,exports.numToUint8=function numToUint8(num){return new Uint8Array([(4278190080&num)>>24,(16711680&num)>>16,(65280&num)>>8,255&num])}},"./node_modules/@aws-crypto/crc32/node_modules/@aws-crypto/util/build/uint32ArrayFrom.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uint32ArrayFrom=void 0,exports.uint32ArrayFrom=function uint32ArrayFrom(a_lookUpTable){if(!Uint32Array.from){for(var return_array=new Uint32Array(a_lookUpTable.length),a_index=0;a_index<a_lookUpTable.length;)return_array[a_index]=a_lookUpTable[a_index],a_index+=1;return return_array}return Uint32Array.from(a_lookUpTable)}},"./node_modules/@aws-crypto/crc32/node_modules/tslib/tslib.es6.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{!function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}(g[n](v))}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function settle(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},"./node_modules/@aws-crypto/ie11-detection/build/CryptoOperation.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@aws-crypto/ie11-detection/build/Key.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@aws-crypto/ie11-detection/build/KeyOperation.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@aws-crypto/ie11-detection/build/MsSubtleCrypto.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},"./node_modules/@aws-crypto/ie11-detection/build/MsWindow.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMsWindow=void 0;var msSubtleCryptoMethods=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];exports.isMsWindow=function isMsWindow(window){if(function quacksLikeAnMsWindow(window){return"MSInputMethodContext"in window&&"msCrypto"in window}(window)&&void 0!==window.msCrypto.subtle){var _a=window.msCrypto,getRandomValues=_a.getRandomValues,subtle_1=_a.subtle;return msSubtleCryptoMethods.map((function(methodName){return subtle_1[methodName]})).concat(getRandomValues).every((function(method){return"function"==typeof method}))}return!1}},"./node_modules/@aws-crypto/ie11-detection/build/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=__webpack_require__("./node_modules/@aws-crypto/ie11-detection/node_modules/tslib/tslib.es6.js");tslib_1.__exportStar(__webpack_require__("./node_modules/@aws-crypto/ie11-detection/build/CryptoOperation.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@aws-crypto/ie11-detection/build/Key.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@aws-crypto/ie11-detection/build/KeyOperation.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@aws-crypto/ie11-detection/build/MsSubtleCrypto.js"),exports),tslib_1.__exportStar(__webpack_require__("./node_modules/@aws-crypto/ie11-detection/build/MsWindow.js"),exports)},"./node_modules/@aws-crypto/ie11-detection/node_modules/tslib/tslib.es6.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{!function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}(g[n](v))}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function settle(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},"./node_modules/@aws-crypto/sha256-browser/build/constants.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EMPTY_DATA_SHA_256=exports.SHA_256_HMAC_ALGO=exports.SHA_256_HASH=void 0,exports.SHA_256_HASH={name:"SHA-256"},exports.SHA_256_HMAC_ALGO={name:"HMAC",hash:exports.SHA_256_HASH},exports.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},"./node_modules/@aws-crypto/sha256-browser/build/crossPlatformSha256.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var ie11Sha256_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/build/ie11Sha256.js"),webCryptoSha256_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/build/webCryptoSha256.js"),sha256_js_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/sha256-js/build/index.js"),supports_web_crypto_1=__webpack_require__("./node_modules/@aws-crypto/supports-web-crypto/build/index.js"),ie11_detection_1=__webpack_require__("./node_modules/@aws-crypto/ie11-detection/build/index.js"),util_locate_window_1=__webpack_require__("./node_modules/@aws-sdk/util-locate-window/dist-es/index.js"),util_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/index.js"),Sha256=function(){function Sha256(secret){(0,supports_web_crypto_1.supportsWebCrypto)((0,util_locate_window_1.locateWindow)())?this.hash=new webCryptoSha256_1.Sha256(secret):(0,ie11_detection_1.isMsWindow)((0,util_locate_window_1.locateWindow)())?this.hash=new ie11Sha256_1.Sha256(secret):this.hash=new sha256_js_1.Sha256(secret)}return Sha256.prototype.update=function(data,encoding){this.hash.update((0,util_1.convertToBuffer)(data))},Sha256.prototype.digest=function(){return this.hash.digest()},Sha256.prototype.reset=function(){this.hash.reset()},Sha256}();exports.Sha256=Sha256},"./node_modules/@aws-crypto/sha256-browser/build/ie11Sha256.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var isEmptyData_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/build/isEmptyData.js"),constants_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/build/constants.js"),util_utf8_browser_1=__webpack_require__("./node_modules/@aws-sdk/util-utf8-browser/dist-es/index.js"),util_locate_window_1=__webpack_require__("./node_modules/@aws-sdk/util-locate-window/dist-es/index.js"),Sha256=function(){function Sha256(secret){this.secret=secret,this.reset()}return Sha256.prototype.update=function(toHash){var _this=this;(0,isEmptyData_1.isEmptyData)(toHash)||(this.operation=this.operation.then((function(operation){return operation.onerror=function(){_this.operation=Promise.reject(new Error("Error encountered updating hash"))},operation.process(toArrayBufferView(toHash)),operation})),this.operation.catch((function(){})))},Sha256.prototype.digest=function(){return this.operation.then((function(operation){return new Promise((function(resolve,reject){operation.onerror=function(){reject(new Error("Error encountered finalizing hash"))},operation.oncomplete=function(){operation.result&&resolve(new Uint8Array(operation.result)),reject(new Error("Error encountered finalizing hash"))},operation.finish()}))}))},Sha256.prototype.reset=function(){this.secret?(this.operation=function getKeyPromise(secret){return new Promise((function(resolve,reject){var keyOperation=(0,util_locate_window_1.locateWindow)().msCrypto.subtle.importKey("raw",toArrayBufferView(secret),constants_1.SHA_256_HMAC_ALGO,!1,["sign"]);keyOperation.oncomplete=function(){keyOperation.result&&resolve(keyOperation.result),reject(new Error("ImportKey completed without importing key."))},keyOperation.onerror=function(){reject(new Error("ImportKey failed to import key."))}}))}(this.secret).then((function(keyData){return(0,util_locate_window_1.locateWindow)().msCrypto.subtle.sign(constants_1.SHA_256_HMAC_ALGO,keyData)})),this.operation.catch((function(){}))):this.operation=Promise.resolve((0,util_locate_window_1.locateWindow)().msCrypto.subtle.digest("SHA-256"))},Sha256}();function toArrayBufferView(data){return"string"==typeof data?(0,util_utf8_browser_1.fromUtf8)(data):ArrayBuffer.isView(data)?new Uint8Array(data.buffer,data.byteOffset,data.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(data)}exports.Sha256=Sha256},"./node_modules/@aws-crypto/sha256-browser/build/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebCryptoSha256=exports.Ie11Sha256=void 0,__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/tslib/tslib.es6.js").__exportStar(__webpack_require__("./node_modules/@aws-crypto/sha256-browser/build/crossPlatformSha256.js"),exports);var ie11Sha256_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/build/ie11Sha256.js");Object.defineProperty(exports,"Ie11Sha256",{enumerable:!0,get:function(){return ie11Sha256_1.Sha256}});var webCryptoSha256_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/build/webCryptoSha256.js");Object.defineProperty(exports,"WebCryptoSha256",{enumerable:!0,get:function(){return webCryptoSha256_1.Sha256}})},"./node_modules/@aws-crypto/sha256-browser/build/isEmptyData.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEmptyData=void 0,exports.isEmptyData=function isEmptyData(data){return"string"==typeof data?0===data.length:0===data.byteLength}},"./node_modules/@aws-crypto/sha256-browser/build/webCryptoSha256.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var util_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/index.js"),constants_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/build/constants.js"),util_locate_window_1=__webpack_require__("./node_modules/@aws-sdk/util-locate-window/dist-es/index.js"),Sha256=function(){function Sha256(secret){this.toHash=new Uint8Array(0),this.secret=secret,this.reset()}return Sha256.prototype.update=function(data){if(!(0,util_1.isEmptyData)(data)){var update=(0,util_1.convertToBuffer)(data),typedArray=new Uint8Array(this.toHash.byteLength+update.byteLength);typedArray.set(this.toHash,0),typedArray.set(update,this.toHash.byteLength),this.toHash=typedArray}},Sha256.prototype.digest=function(){var _this=this;return this.key?this.key.then((function(key){return(0,util_locate_window_1.locateWindow)().crypto.subtle.sign(constants_1.SHA_256_HMAC_ALGO,key,_this.toHash).then((function(data){return new Uint8Array(data)}))})):(0,util_1.isEmptyData)(this.toHash)?Promise.resolve(constants_1.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return(0,util_locate_window_1.locateWindow)().crypto.subtle.digest(constants_1.SHA_256_HASH,_this.toHash)})).then((function(data){return Promise.resolve(new Uint8Array(data))}))},Sha256.prototype.reset=function(){var _this=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise((function(resolve,reject){(0,util_locate_window_1.locateWindow)().crypto.subtle.importKey("raw",(0,util_1.convertToBuffer)(_this.secret),constants_1.SHA_256_HMAC_ALGO,!1,["sign"]).then(resolve,reject)})),this.key.catch((function(){})))},Sha256}();exports.Sha256=Sha256},"./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/sha256-js/build/RawSha256.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RawSha256=void 0;var constants_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/sha256-js/build/constants.js"),RawSha256=function(){function RawSha256(){this.state=Int32Array.from(constants_1.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return RawSha256.prototype.update=function(data){if(this.finished)throw new Error("Attempted to update an already finished hash.");var position=0,byteLength=data.byteLength;if(this.bytesHashed+=byteLength,8*this.bytesHashed>constants_1.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;byteLength>0;)this.buffer[this.bufferLength++]=data[position++],byteLength--,this.bufferLength===constants_1.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},RawSha256.prototype.digest=function(){if(!this.finished){var bitsHashed=8*this.bytesHashed,bufferView=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),undecoratedLength=this.bufferLength;if(bufferView.setUint8(this.bufferLength++,128),undecoratedLength%constants_1.BLOCK_SIZE>=constants_1.BLOCK_SIZE-8){for(var i=this.bufferLength;i<constants_1.BLOCK_SIZE;i++)bufferView.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<constants_1.BLOCK_SIZE-8;i++)bufferView.setUint8(i,0);bufferView.setUint32(constants_1.BLOCK_SIZE-8,Math.floor(bitsHashed/4294967296),!0),bufferView.setUint32(constants_1.BLOCK_SIZE-4,bitsHashed),this.hashBuffer(),this.finished=!0}var out=new Uint8Array(constants_1.DIGEST_LENGTH);for(i=0;i<8;i++)out[4*i]=this.state[i]>>>24&255,out[4*i+1]=this.state[i]>>>16&255,out[4*i+2]=this.state[i]>>>8&255,out[4*i+3]=this.state[i]>>>0&255;return out},RawSha256.prototype.hashBuffer=function(){for(var buffer=this.buffer,state=this.state,state0=state[0],state1=state[1],state2=state[2],state3=state[3],state4=state[4],state5=state[5],state6=state[6],state7=state[7],i=0;i<constants_1.BLOCK_SIZE;i++){if(i<16)this.temp[i]=(255&buffer[4*i])<<24|(255&buffer[4*i+1])<<16|(255&buffer[4*i+2])<<8|255&buffer[4*i+3];else{var u=this.temp[i-2],t1_1=(u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10,t2_1=((u=this.temp[i-15])>>>7|u<<25)^(u>>>18|u<<14)^u>>>3;this.temp[i]=(t1_1+this.temp[i-7]|0)+(t2_1+this.temp[i-16]|0)}var t1=(((state4>>>6|state4<<26)^(state4>>>11|state4<<21)^(state4>>>25|state4<<7))+(state4&state5^~state4&state6)|0)+(state7+(constants_1.KEY[i]+this.temp[i]|0)|0)|0,t2=((state0>>>2|state0<<30)^(state0>>>13|state0<<19)^(state0>>>22|state0<<10))+(state0&state1^state0&state2^state1&state2)|0;state7=state6,state6=state5,state5=state4,state4=state3+t1|0,state3=state2,state2=state1,state1=state0,state0=t1+t2|0}state[0]+=state0,state[1]+=state1,state[2]+=state2,state[3]+=state3,state[4]+=state4,state[5]+=state5,state[6]+=state6,state[7]+=state7},RawSha256}();exports.RawSha256=RawSha256},"./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/sha256-js/build/constants.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAX_HASHABLE_LENGTH=exports.INIT=exports.KEY=exports.DIGEST_LENGTH=exports.BLOCK_SIZE=void 0,exports.BLOCK_SIZE=64,exports.DIGEST_LENGTH=32,exports.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),exports.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],exports.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},"./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/sha256-js/build/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/tslib/tslib.es6.js").__exportStar(__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/sha256-js/build/jsSha256.js"),exports)},"./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/sha256-js/build/jsSha256.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var tslib_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/tslib/tslib.es6.js"),constants_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/sha256-js/build/constants.js"),RawSha256_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/sha256-js/build/RawSha256.js"),util_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/index.js"),Sha256=function(){function Sha256(secret){this.secret=secret,this.hash=new RawSha256_1.RawSha256,this.reset()}return Sha256.prototype.update=function(toHash){if(!(0,util_1.isEmptyData)(toHash)&&!this.error)try{this.hash.update((0,util_1.convertToBuffer)(toHash))}catch(e){this.error=e}},Sha256.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},Sha256.prototype.digest=function(){return tslib_1.__awaiter(this,void 0,void 0,(function(){return tslib_1.__generator(this,(function(_a){return[2,this.digestSync()]}))}))},Sha256.prototype.reset=function(){if(this.hash=new RawSha256_1.RawSha256,this.secret){this.outer=new RawSha256_1.RawSha256;var inner=function bufferFromSecret(secret){var input=(0,util_1.convertToBuffer)(secret);if(input.byteLength>constants_1.BLOCK_SIZE){var bufferHash=new RawSha256_1.RawSha256;bufferHash.update(input),input=bufferHash.digest()}var buffer=new Uint8Array(constants_1.BLOCK_SIZE);return buffer.set(input),buffer}(this.secret),outer=new Uint8Array(constants_1.BLOCK_SIZE);outer.set(inner);for(var i=0;i<constants_1.BLOCK_SIZE;i++)inner[i]^=54,outer[i]^=92;this.hash.update(inner),this.outer.update(outer);for(i=0;i<inner.byteLength;i++)inner[i]=0}},Sha256}();exports.Sha256=Sha256},"./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/convertToBuffer.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertToBuffer=void 0;var util_utf8_browser_1=__webpack_require__("./node_modules/@aws-sdk/util-utf8-browser/dist-es/index.js"),fromUtf8="undefined"!=typeof Buffer&&Buffer.from?function(input){return Buffer.from(input,"utf8")}:util_utf8_browser_1.fromUtf8;exports.convertToBuffer=function convertToBuffer(data){return data instanceof Uint8Array?data:"string"==typeof data?fromUtf8(data):ArrayBuffer.isView(data)?new Uint8Array(data.buffer,data.byteOffset,data.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(data)}},"./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uint32ArrayFrom=exports.numToUint8=exports.isEmptyData=exports.convertToBuffer=void 0;var convertToBuffer_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/convertToBuffer.js");Object.defineProperty(exports,"convertToBuffer",{enumerable:!0,get:function(){return convertToBuffer_1.convertToBuffer}});var isEmptyData_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/isEmptyData.js");Object.defineProperty(exports,"isEmptyData",{enumerable:!0,get:function(){return isEmptyData_1.isEmptyData}});var numToUint8_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/numToUint8.js");Object.defineProperty(exports,"numToUint8",{enumerable:!0,get:function(){return numToUint8_1.numToUint8}});var uint32ArrayFrom_1=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/uint32ArrayFrom.js");Object.defineProperty(exports,"uint32ArrayFrom",{enumerable:!0,get:function(){return uint32ArrayFrom_1.uint32ArrayFrom}})},"./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/isEmptyData.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEmptyData=void 0,exports.isEmptyData=function isEmptyData(data){return"string"==typeof data?0===data.length:0===data.byteLength}},"./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/numToUint8.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.numToUint8=void 0,exports.numToUint8=function numToUint8(num){return new Uint8Array([(4278190080&num)>>24,(16711680&num)>>16,(65280&num)>>8,255&num])}},"./node_modules/@aws-crypto/sha256-browser/node_modules/@aws-crypto/util/build/uint32ArrayFrom.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uint32ArrayFrom=void 0,exports.uint32ArrayFrom=function uint32ArrayFrom(a_lookUpTable){if(!Uint32Array.from){for(var return_array=new Uint32Array(a_lookUpTable.length),a_index=0;a_index<a_lookUpTable.length;)return_array[a_index]=a_lookUpTable[a_index],a_index+=1;return return_array}return Uint32Array.from(a_lookUpTable)}},"./node_modules/@aws-crypto/sha256-browser/node_modules/tslib/tslib.es6.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{!function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}(g[n](v))}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function settle(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},"./node_modules/@aws-crypto/sha256-js/build/RawSha256.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RawSha256=void 0;var constants_1=__webpack_require__("./node_modules/@aws-crypto/sha256-js/build/constants.js"),RawSha256=function(){function RawSha256(){this.state=Int32Array.from(constants_1.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return RawSha256.prototype.update=function(data){if(this.finished)throw new Error("Attempted to update an already finished hash.");var position=0,byteLength=data.byteLength;if(this.bytesHashed+=byteLength,8*this.bytesHashed>constants_1.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;byteLength>0;)this.buffer[this.bufferLength++]=data[position++],byteLength--,this.bufferLength===constants_1.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},RawSha256.prototype.digest=function(){if(!this.finished){var bitsHashed=8*this.bytesHashed,bufferView=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),undecoratedLength=this.bufferLength;if(bufferView.setUint8(this.bufferLength++,128),undecoratedLength%constants_1.BLOCK_SIZE>=constants_1.BLOCK_SIZE-8){for(var i=this.bufferLength;i<constants_1.BLOCK_SIZE;i++)bufferView.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<constants_1.BLOCK_SIZE-8;i++)bufferView.setUint8(i,0);bufferView.setUint32(constants_1.BLOCK_SIZE-8,Math.floor(bitsHashed/4294967296),!0),bufferView.setUint32(constants_1.BLOCK_SIZE-4,bitsHashed),this.hashBuffer(),this.finished=!0}var out=new Uint8Array(constants_1.DIGEST_LENGTH);for(i=0;i<8;i++)out[4*i]=this.state[i]>>>24&255,out[4*i+1]=this.state[i]>>>16&255,out[4*i+2]=this.state[i]>>>8&255,out[4*i+3]=this.state[i]>>>0&255;return out},RawSha256.prototype.hashBuffer=function(){for(var buffer=this.buffer,state=this.state,state0=state[0],state1=state[1],state2=state[2],state3=state[3],state4=state[4],state5=state[5],state6=state[6],state7=state[7],i=0;i<constants_1.BLOCK_SIZE;i++){if(i<16)this.temp[i]=(255&buffer[4*i])<<24|(255&buffer[4*i+1])<<16|(255&buffer[4*i+2])<<8|255&buffer[4*i+3];else{var u=this.temp[i-2],t1_1=(u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10,t2_1=((u=this.temp[i-15])>>>7|u<<25)^(u>>>18|u<<14)^u>>>3;this.temp[i]=(t1_1+this.temp[i-7]|0)+(t2_1+this.temp[i-16]|0)}var t1=(((state4>>>6|state4<<26)^(state4>>>11|state4<<21)^(state4>>>25|state4<<7))+(state4&state5^~state4&state6)|0)+(state7+(constants_1.KEY[i]+this.temp[i]|0)|0)|0,t2=((state0>>>2|state0<<30)^(state0>>>13|state0<<19)^(state0>>>22|state0<<10))+(state0&state1^state0&state2^state1&state2)|0;state7=state6,state6=state5,state5=state4,state4=state3+t1|0,state3=state2,state2=state1,state1=state0,state0=t1+t2|0}state[0]+=state0,state[1]+=state1,state[2]+=state2,state[3]+=state3,state[4]+=state4,state[5]+=state5,state[6]+=state6,state[7]+=state7},RawSha256}();exports.RawSha256=RawSha256},"./node_modules/@aws-crypto/sha256-js/build/constants.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAX_HASHABLE_LENGTH=exports.INIT=exports.KEY=exports.DIGEST_LENGTH=exports.BLOCK_SIZE=void 0,exports.BLOCK_SIZE=64,exports.DIGEST_LENGTH=32,exports.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),exports.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],exports.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},"./node_modules/@aws-crypto/sha256-js/build/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__("./node_modules/@aws-crypto/sha256-js/node_modules/tslib/tslib.es6.js").__exportStar(__webpack_require__("./node_modules/@aws-crypto/sha256-js/build/jsSha256.js"),exports)},"./node_modules/@aws-crypto/sha256-js/build/jsSha256.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var tslib_1=__webpack_require__("./node_modules/@aws-crypto/sha256-js/node_modules/tslib/tslib.es6.js"),constants_1=__webpack_require__("./node_modules/@aws-crypto/sha256-js/build/constants.js"),RawSha256_1=__webpack_require__("./node_modules/@aws-crypto/sha256-js/build/RawSha256.js"),util_1=__webpack_require__("./node_modules/@aws-crypto/util/build/index.js"),Sha256=function(){function Sha256(secret){if(this.hash=new RawSha256_1.RawSha256,secret){this.outer=new RawSha256_1.RawSha256;var inner=function bufferFromSecret(secret){var input=(0,util_1.convertToBuffer)(secret);if(input.byteLength>constants_1.BLOCK_SIZE){var bufferHash=new RawSha256_1.RawSha256;bufferHash.update(input),input=bufferHash.digest()}var buffer=new Uint8Array(constants_1.BLOCK_SIZE);return buffer.set(input),buffer}(secret),outer=new Uint8Array(constants_1.BLOCK_SIZE);outer.set(inner);for(var i=0;i<constants_1.BLOCK_SIZE;i++)inner[i]^=54,outer[i]^=92;this.hash.update(inner),this.outer.update(outer);for(i=0;i<inner.byteLength;i++)inner[i]=0}}return Sha256.prototype.update=function(toHash){if(!(0,util_1.isEmptyData)(toHash)&&!this.error)try{this.hash.update((0,util_1.convertToBuffer)(toHash))}catch(e){this.error=e}},Sha256.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},Sha256.prototype.digest=function(){return tslib_1.__awaiter(this,void 0,void 0,(function(){return tslib_1.__generator(this,(function(_a){return[2,this.digestSync()]}))}))},Sha256}();exports.Sha256=Sha256},"./node_modules/@aws-crypto/sha256-js/node_modules/tslib/tslib.es6.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{!function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}(g[n](v))}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function settle(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},"./node_modules/@aws-crypto/supports-web-crypto/build/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__("./node_modules/@aws-crypto/supports-web-crypto/node_modules/tslib/tslib.es6.js").__exportStar(__webpack_require__("./node_modules/@aws-crypto/supports-web-crypto/build/supportsWebCrypto.js"),exports)},"./node_modules/@aws-crypto/supports-web-crypto/build/supportsWebCrypto.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.supportsZeroByteGCM=exports.supportsSubtleCrypto=exports.supportsSecureRandom=exports.supportsWebCrypto=void 0;var tslib_1=__webpack_require__("./node_modules/@aws-crypto/supports-web-crypto/node_modules/tslib/tslib.es6.js"),subtleCryptoMethods=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function supportsSecureRandom(window){return"object"==typeof window&&"object"==typeof window.crypto&&"function"==typeof window.crypto.getRandomValues}function supportsSubtleCrypto(subtle){return subtle&&subtleCryptoMethods.every((function(methodName){return"function"==typeof subtle[methodName]}))}exports.supportsWebCrypto=function supportsWebCrypto(window){return!(!supportsSecureRandom(window)||"object"!=typeof window.crypto.subtle)&&supportsSubtleCrypto(window.crypto.subtle)},exports.supportsSecureRandom=supportsSecureRandom,exports.supportsSubtleCrypto=supportsSubtleCrypto,exports.supportsZeroByteGCM=function supportsZeroByteGCM(subtle){return tslib_1.__awaiter(this,void 0,void 0,(function(){var key;return tslib_1.__generator(this,(function(_b){switch(_b.label){case 0:if(!supportsSubtleCrypto(subtle))return[2,!1];_b.label=1;case 1:return _b.trys.push([1,4,,5]),[4,subtle.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return key=_b.sent(),[4,subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},key,new Uint8Array(0))];case 3:return[2,16===_b.sent().byteLength];case 4:return _b.sent(),[2,!1];case 5:return[2]}}))}))}},"./node_modules/@aws-crypto/supports-web-crypto/node_modules/tslib/tslib.es6.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});var extendStatics=function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},extendStatics(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{!function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}(g[n](v))}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){(function settle(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)})(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value}},"./node_modules/@aws-crypto/util/build/convertToBuffer.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertToBuffer=void 0;var util_utf8_browser_1=__webpack_require__("./node_modules/@aws-sdk/util-utf8-browser/dist-es/index.js"),fromUtf8="undefined"!=typeof Buffer&&Buffer.from?function(input){return Buffer.from(input,"utf8")}:util_utf8_browser_1.fromUtf8;exports.convertToBuffer=function convertToBuffer(data){return data instanceof Uint8Array?data:"string"==typeof data?fromUtf8(data):ArrayBuffer.isView(data)?new Uint8Array(data.buffer,data.byteOffset,data.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(data)}},"./node_modules/@aws-crypto/util/build/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uint32ArrayFrom=exports.numToUint8=exports.isEmptyData=exports.convertToBuffer=void 0;var convertToBuffer_1=__webpack_require__("./node_modules/@aws-crypto/util/build/convertToBuffer.js");Object.defineProperty(exports,"convertToBuffer",{enumerable:!0,get:function(){return convertToBuffer_1.convertToBuffer}});var isEmptyData_1=__webpack_require__("./node_modules/@aws-crypto/util/build/isEmptyData.js");Object.defineProperty(exports,"isEmptyData",{enumerable:!0,get:function(){return isEmptyData_1.isEmptyData}});var numToUint8_1=__webpack_require__("./node_modules/@aws-crypto/util/build/numToUint8.js");Object.defineProperty(exports,"numToUint8",{enumerable:!0,get:function(){return numToUint8_1.numToUint8}});var uint32ArrayFrom_1=__webpack_require__("./node_modules/@aws-crypto/util/build/uint32ArrayFrom.js");Object.defineProperty(exports,"uint32ArrayFrom",{enumerable:!0,get:function(){return uint32ArrayFrom_1.uint32ArrayFrom}})},"./node_modules/@aws-crypto/util/build/isEmptyData.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEmptyData=void 0,exports.isEmptyData=function isEmptyData(data){return"string"==typeof data?0===data.length:0===data.byteLength}},"./node_modules/@aws-crypto/util/build/numToUint8.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.numToUint8=void 0,exports.numToUint8=function numToUint8(num){return new Uint8Array([(4278190080&num)>>24,(16711680&num)>>16,(65280&num)>>8,255&num])}},"./node_modules/@aws-crypto/util/build/uint32ArrayFrom.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uint32ArrayFrom=void 0,exports.uint32ArrayFrom=function uint32ArrayFrom(a_lookUpTable){if(!Uint32Array.from){for(var return_array=new Uint32Array(a_lookUpTable.length),a_index=0;a_index<a_lookUpTable.length;)return_array[a_index]=a_lookUpTable[a_index],a_index+=1;return return_array}return Uint32Array.from(a_lookUpTable)}},"./node_modules/@aws-sdk/client-chime-sdk-messaging/dist-es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{$Command:()=>Command,AllowNotifications:()=>AllowNotifications,AssociateChannelFlowCommand:()=>AssociateChannelFlowCommand,BadRequestException:()=>BadRequestException,BatchChannelMembershipsFilterSensitiveLog:()=>BatchChannelMembershipsFilterSensitiveLog,BatchCreateChannelMembershipCommand:()=>BatchCreateChannelMembershipCommand,BatchCreateChannelMembershipResponseFilterSensitiveLog:()=>BatchCreateChannelMembershipResponseFilterSensitiveLog,ChannelAssociatedWithFlowSummaryFilterSensitiveLog:()=>ChannelAssociatedWithFlowSummaryFilterSensitiveLog,ChannelBanFilterSensitiveLog:()=>ChannelBanFilterSensitiveLog,ChannelBanSummaryFilterSensitiveLog:()=>ChannelBanSummaryFilterSensitiveLog,ChannelFilterSensitiveLog:()=>ChannelFilterSensitiveLog,ChannelFlowCallbackCommand:()=>ChannelFlowCallbackCommand,ChannelFlowCallbackRequestFilterSensitiveLog:()=>ChannelFlowCallbackRequestFilterSensitiveLog,ChannelFlowFilterSensitiveLog:()=>ChannelFlowFilterSensitiveLog,ChannelFlowSummaryFilterSensitiveLog:()=>ChannelFlowSummaryFilterSensitiveLog,ChannelMembershipFilterSensitiveLog:()=>ChannelMembershipFilterSensitiveLog,ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog:()=>ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog,ChannelMembershipPreferencesFilterSensitiveLog:()=>ChannelMembershipPreferencesFilterSensitiveLog,ChannelMembershipSummaryFilterSensitiveLog:()=>ChannelMembershipSummaryFilterSensitiveLog,ChannelMembershipType:()=>ChannelMembershipType,ChannelMessageCallbackFilterSensitiveLog:()=>ChannelMessageCallbackFilterSensitiveLog,ChannelMessageFilterSensitiveLog:()=>ChannelMessageFilterSensitiveLog,ChannelMessagePersistenceType:()=>ChannelMessagePersistenceType,ChannelMessageStatus:()=>ChannelMessageStatus,ChannelMessageSummaryFilterSensitiveLog:()=>ChannelMessageSummaryFilterSensitiveLog,ChannelMessageType:()=>ChannelMessageType,ChannelMode:()=>ChannelMode,ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog:()=>ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog,ChannelModeratorFilterSensitiveLog:()=>ChannelModeratorFilterSensitiveLog,ChannelModeratorSummaryFilterSensitiveLog:()=>ChannelModeratorSummaryFilterSensitiveLog,ChannelPrivacy:()=>ChannelPrivacy,ChannelSummaryFilterSensitiveLog:()=>ChannelSummaryFilterSensitiveLog,ChimeSDKMessaging:()=>ChimeSDKMessaging,ChimeSDKMessagingClient:()=>ChimeSDKMessagingClient,ChimeSDKMessagingServiceException:()=>ChimeSDKMessagingServiceException,ConflictException:()=>ConflictException,CreateChannelBanCommand:()=>CreateChannelBanCommand,CreateChannelBanResponseFilterSensitiveLog:()=>CreateChannelBanResponseFilterSensitiveLog,CreateChannelCommand:()=>CreateChannelCommand,CreateChannelFlowCommand:()=>CreateChannelFlowCommand,CreateChannelFlowRequestFilterSensitiveLog:()=>CreateChannelFlowRequestFilterSensitiveLog,CreateChannelMembershipCommand:()=>CreateChannelMembershipCommand,CreateChannelMembershipResponseFilterSensitiveLog:()=>CreateChannelMembershipResponseFilterSensitiveLog,CreateChannelModeratorCommand:()=>CreateChannelModeratorCommand,CreateChannelModeratorResponseFilterSensitiveLog:()=>CreateChannelModeratorResponseFilterSensitiveLog,CreateChannelRequestFilterSensitiveLog:()=>CreateChannelRequestFilterSensitiveLog,DeleteChannelBanCommand:()=>DeleteChannelBanCommand,DeleteChannelCommand:()=>DeleteChannelCommand,DeleteChannelFlowCommand:()=>DeleteChannelFlowCommand,DeleteChannelMembershipCommand:()=>DeleteChannelMembershipCommand,DeleteChannelMessageCommand:()=>DeleteChannelMessageCommand,DeleteChannelModeratorCommand:()=>DeleteChannelModeratorCommand,DeleteMessagingStreamingConfigurationsCommand:()=>DeleteMessagingStreamingConfigurationsCommand,DescribeChannelBanCommand:()=>DescribeChannelBanCommand,DescribeChannelBanResponseFilterSensitiveLog:()=>DescribeChannelBanResponseFilterSensitiveLog,DescribeChannelCommand:()=>DescribeChannelCommand,DescribeChannelFlowCommand:()=>DescribeChannelFlowCommand,DescribeChannelFlowResponseFilterSensitiveLog:()=>DescribeChannelFlowResponseFilterSensitiveLog,DescribeChannelMembershipCommand:()=>DescribeChannelMembershipCommand,DescribeChannelMembershipForAppInstanceUserCommand:()=>DescribeChannelMembershipForAppInstanceUserCommand,DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog:()=>DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog,DescribeChannelMembershipResponseFilterSensitiveLog:()=>DescribeChannelMembershipResponseFilterSensitiveLog,DescribeChannelModeratedByAppInstanceUserCommand:()=>DescribeChannelModeratedByAppInstanceUserCommand,DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog,DescribeChannelModeratorCommand:()=>DescribeChannelModeratorCommand,DescribeChannelModeratorResponseFilterSensitiveLog:()=>DescribeChannelModeratorResponseFilterSensitiveLog,DescribeChannelResponseFilterSensitiveLog:()=>DescribeChannelResponseFilterSensitiveLog,DisassociateChannelFlowCommand:()=>DisassociateChannelFlowCommand,ErrorCode:()=>ErrorCode,ExpirationCriterion:()=>ExpirationCriterion,FallbackAction:()=>FallbackAction,ForbiddenException:()=>ForbiddenException,GetChannelMembershipPreferencesCommand:()=>GetChannelMembershipPreferencesCommand,GetChannelMembershipPreferencesResponseFilterSensitiveLog:()=>GetChannelMembershipPreferencesResponseFilterSensitiveLog,GetChannelMessageCommand:()=>GetChannelMessageCommand,GetChannelMessageResponseFilterSensitiveLog:()=>GetChannelMessageResponseFilterSensitiveLog,GetChannelMessageStatusCommand:()=>GetChannelMessageStatusCommand,GetMessagingSessionEndpointCommand:()=>GetMessagingSessionEndpointCommand,GetMessagingStreamingConfigurationsCommand:()=>GetMessagingStreamingConfigurationsCommand,IdentityFilterSensitiveLog:()=>IdentityFilterSensitiveLog,InvocationType:()=>InvocationType,ListChannelBansCommand:()=>ListChannelBansCommand,ListChannelBansRequestFilterSensitiveLog:()=>ListChannelBansRequestFilterSensitiveLog,ListChannelBansResponseFilterSensitiveLog:()=>ListChannelBansResponseFilterSensitiveLog,ListChannelFlowsCommand:()=>ListChannelFlowsCommand,ListChannelFlowsRequestFilterSensitiveLog:()=>ListChannelFlowsRequestFilterSensitiveLog,ListChannelFlowsResponseFilterSensitiveLog:()=>ListChannelFlowsResponseFilterSensitiveLog,ListChannelMembershipsCommand:()=>ListChannelMembershipsCommand,ListChannelMembershipsForAppInstanceUserCommand:()=>ListChannelMembershipsForAppInstanceUserCommand,ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog:()=>ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog,ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog:()=>ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog,ListChannelMembershipsRequestFilterSensitiveLog:()=>ListChannelMembershipsRequestFilterSensitiveLog,ListChannelMembershipsResponseFilterSensitiveLog:()=>ListChannelMembershipsResponseFilterSensitiveLog,ListChannelMessagesCommand:()=>ListChannelMessagesCommand,ListChannelMessagesRequestFilterSensitiveLog:()=>ListChannelMessagesRequestFilterSensitiveLog,ListChannelMessagesResponseFilterSensitiveLog:()=>ListChannelMessagesResponseFilterSensitiveLog,ListChannelModeratorsCommand:()=>ListChannelModeratorsCommand,ListChannelModeratorsRequestFilterSensitiveLog:()=>ListChannelModeratorsRequestFilterSensitiveLog,ListChannelModeratorsResponseFilterSensitiveLog:()=>ListChannelModeratorsResponseFilterSensitiveLog,ListChannelsAssociatedWithChannelFlowCommand:()=>ListChannelsAssociatedWithChannelFlowCommand,ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog:()=>ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog,ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog:()=>ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog,ListChannelsCommand:()=>ListChannelsCommand,ListChannelsModeratedByAppInstanceUserCommand:()=>ListChannelsModeratedByAppInstanceUserCommand,ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog:()=>ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog,ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog:()=>ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog,ListChannelsRequestFilterSensitiveLog:()=>ListChannelsRequestFilterSensitiveLog,ListChannelsResponseFilterSensitiveLog:()=>ListChannelsResponseFilterSensitiveLog,ListSubChannelsCommand:()=>ListSubChannelsCommand,ListSubChannelsRequestFilterSensitiveLog:()=>ListSubChannelsRequestFilterSensitiveLog,ListSubChannelsResponseFilterSensitiveLog:()=>ListSubChannelsResponseFilterSensitiveLog,ListTagsForResourceCommand:()=>ListTagsForResourceCommand,ListTagsForResourceResponseFilterSensitiveLog:()=>ListTagsForResourceResponseFilterSensitiveLog,MessageAttributeValueFilterSensitiveLog:()=>MessageAttributeValueFilterSensitiveLog,MessagingDataType:()=>MessagingDataType,NotFoundException:()=>NotFoundException,ProcessorFilterSensitiveLog:()=>ProcessorFilterSensitiveLog,PushNotificationConfigurationFilterSensitiveLog:()=>PushNotificationConfigurationFilterSensitiveLog,PushNotificationPreferencesFilterSensitiveLog:()=>PushNotificationPreferencesFilterSensitiveLog,PushNotificationType:()=>PushNotificationType,PutChannelExpirationSettingsCommand:()=>PutChannelExpirationSettingsCommand,PutChannelMembershipPreferencesCommand:()=>PutChannelMembershipPreferencesCommand,PutChannelMembershipPreferencesRequestFilterSensitiveLog:()=>PutChannelMembershipPreferencesRequestFilterSensitiveLog,PutChannelMembershipPreferencesResponseFilterSensitiveLog:()=>PutChannelMembershipPreferencesResponseFilterSensitiveLog,PutMessagingStreamingConfigurationsCommand:()=>PutMessagingStreamingConfigurationsCommand,RedactChannelMessageCommand:()=>RedactChannelMessageCommand,ResourceLimitExceededException:()=>ResourceLimitExceededException,SearchChannelsCommand:()=>SearchChannelsCommand,SearchChannelsRequestFilterSensitiveLog:()=>SearchChannelsRequestFilterSensitiveLog,SearchChannelsResponseFilterSensitiveLog:()=>SearchChannelsResponseFilterSensitiveLog,SearchFieldKey:()=>SearchFieldKey,SearchFieldOperator:()=>SearchFieldOperator,SendChannelMessageCommand:()=>SendChannelMessageCommand,SendChannelMessageRequestFilterSensitiveLog:()=>SendChannelMessageRequestFilterSensitiveLog,ServiceFailureException:()=>ServiceFailureException,ServiceUnavailableException:()=>ServiceUnavailableException,SortOrder:()=>SortOrder,TagFilterSensitiveLog:()=>TagFilterSensitiveLog,TagResourceCommand:()=>TagResourceCommand,TagResourceRequestFilterSensitiveLog:()=>TagResourceRequestFilterSensitiveLog,ThrottledClientException:()=>ThrottledClientException,UnauthorizedClientException:()=>UnauthorizedClientException,UntagResourceCommand:()=>UntagResourceCommand,UntagResourceRequestFilterSensitiveLog:()=>UntagResourceRequestFilterSensitiveLog,UpdateChannelCommand:()=>UpdateChannelCommand,UpdateChannelFlowCommand:()=>UpdateChannelFlowCommand,UpdateChannelFlowRequestFilterSensitiveLog:()=>UpdateChannelFlowRequestFilterSensitiveLog,UpdateChannelMessageCommand:()=>UpdateChannelMessageCommand,UpdateChannelMessageRequestFilterSensitiveLog:()=>UpdateChannelMessageRequestFilterSensitiveLog,UpdateChannelReadMarkerCommand:()=>UpdateChannelReadMarkerCommand,UpdateChannelRequestFilterSensitiveLog:()=>UpdateChannelRequestFilterSensitiveLog,__Client:()=>Client,paginateListChannelBans:()=>paginateListChannelBans,paginateListChannelFlows:()=>paginateListChannelFlows,paginateListChannelMemberships:()=>paginateListChannelMemberships,paginateListChannelMembershipsForAppInstanceUser:()=>paginateListChannelMembershipsForAppInstanceUser,paginateListChannelMessages:()=>paginateListChannelMessages,paginateListChannelModerators:()=>paginateListChannelModerators,paginateListChannels:()=>paginateListChannels,paginateListChannelsAssociatedWithChannelFlow:()=>paginateListChannelsAssociatedWithChannelFlow,paginateListChannelsModeratedByAppInstanceUser:()=>paginateListChannelsModeratedByAppInstanceUser,paginateListSubChannels:()=>paginateListSubChannels,paginateSearchChannels:()=>paginateSearchChannels});const getHttpHandlerExtensionConfiguration=runtimeConfig=>{let httpHandler=runtimeConfig.httpHandler;return{setHttpHandler(handler){httpHandler=handler},httpHandler:()=>httpHandler,updateHttpClientConfig(key,value){httpHandler.updateHttpClientConfig(key,value)},httpHandlerConfigs:()=>httpHandler.httpHandlerConfigs()}};var HttpAuthLocation,HttpApiKeyAuth_HttpApiKeyAuthLocation,EndpointURLScheme,AlgorithmId;!function(HttpAuthLocation){HttpAuthLocation.HEADER="header",HttpAuthLocation.QUERY="query"}(HttpAuthLocation||(HttpAuthLocation={})),function(HttpApiKeyAuthLocation){HttpApiKeyAuthLocation.HEADER="header",HttpApiKeyAuthLocation.QUERY="query"}(HttpApiKeyAuth_HttpApiKeyAuthLocation||(HttpApiKeyAuth_HttpApiKeyAuthLocation={})),function(EndpointURLScheme){EndpointURLScheme.HTTP="http",EndpointURLScheme.HTTPS="https"}(EndpointURLScheme||(EndpointURLScheme={})),function(AlgorithmId){AlgorithmId.MD5="md5",AlgorithmId.CRC32="crc32",AlgorithmId.CRC32C="crc32c",AlgorithmId.SHA1="sha1",AlgorithmId.SHA256="sha256"}(AlgorithmId||(AlgorithmId={}));var http_FieldPosition;!function(FieldPosition){FieldPosition[FieldPosition.HEADER=0]="HEADER",FieldPosition[FieldPosition.TRAILER=1]="TRAILER"}(http_FieldPosition||(http_FieldPosition={}));var IniSectionType,RequestHandlerProtocol;!function(IniSectionType){IniSectionType.PROFILE="profile",IniSectionType.SSO_SESSION="sso-session",IniSectionType.SERVICES="services"}(IniSectionType||(IniSectionType={})),function(RequestHandlerProtocol){RequestHandlerProtocol.HTTP_0_9="http/0.9",RequestHandlerProtocol.HTTP_1_0="http/1.0",RequestHandlerProtocol.TDS_8_0="tds/8.0"}(RequestHandlerProtocol||(RequestHandlerProtocol={}));class httpRequest_HttpRequest{constructor(options){this.method=options.method||"GET",this.hostname=options.hostname||"localhost",this.port=options.port,this.query=options.query||{},this.headers=options.headers||{},this.body=options.body,this.protocol=options.protocol?":"!==options.protocol.slice(-1)?`${options.protocol}:`:options.protocol:"https:",this.path=options.path?"/"!==options.path.charAt(0)?`/${options.path}`:options.path:"/",this.username=options.username,this.password=options.password,this.fragment=options.fragment}static isInstance(request){if(!request)return!1;const req=request;return"method"in req&&"protocol"in req&&"hostname"in req&&"path"in req&&"object"==typeof req.query&&"object"==typeof req.headers}clone(){const cloned=new httpRequest_HttpRequest({...this,headers:{...this.headers}});return cloned.query&&(cloned.query=function cloneQuery(query){return Object.keys(query).reduce(((carry,paramName)=>{const param=query[paramName];return{...carry,[paramName]:Array.isArray(param)?[...param]:param}}),{})}(cloned.query)),cloned}}class HttpResponse{constructor(options){this.statusCode=options.statusCode,this.reason=options.reason,this.headers=options.headers||{},this.body=options.body}static isInstance(response){if(!response)return!1;const resp=response;return"number"==typeof resp.statusCode&&"object"==typeof resp.headers}}const hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},getHostHeaderPlugin=options=>({applyToStack:clientStack=>{clientStack.add((options=>next=>async args=>{if(!httpRequest_HttpRequest.isInstance(args.request))return next(args);const{request}=args,{handlerProtocol=""}=options.requestHandler.metadata||{};if(handlerProtocol.indexOf("h2")>=0&&!request.headers[":authority"])delete request.headers.host,request.headers[":authority"]=request.hostname+(request.port?":"+request.port:"");else if(!request.headers.host){let host=request.hostname;null!=request.port&&(host+=`:${request.port}`),request.headers.host=host}return next(args)})(options),hostHeaderMiddlewareOptions)}}),loggerMiddlewareOptions={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0};var process=__webpack_require__("./node_modules/process/browser.js");const addRecursionDetectionMiddlewareOptions={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},getRecursionDetectionPlugin=options=>({applyToStack:clientStack=>{clientStack.add((options=>next=>async args=>{const{request}=args;if(!httpRequest_HttpRequest.isInstance(request)||"node"!==options.runtime||request.headers.hasOwnProperty("X-Amzn-Trace-Id"))return next(args);const functionName=process.env.AWS_LAMBDA_FUNCTION_NAME,traceId=process.env._X_AMZN_TRACE_ID,nonEmptyString=str=>"string"==typeof str&&str.length>0;return nonEmptyString(functionName)&&nonEmptyString(traceId)&&(request.headers["X-Amzn-Trace-Id"]=traceId),next({...args,request})})(options),addRecursionDetectionMiddlewareOptions)}});const IP_V4_REGEX=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),isIpAddress=value=>IP_V4_REGEX.test(value)||value.startsWith("[")&&value.endsWith("]"),VALID_HOST_LABEL_REGEX=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),isValidHostLabel=(value,allowSubDomains=!1)=>{if(!allowSubDomains)return VALID_HOST_LABEL_REGEX.test(value);const labels=value.split(".");for(const label of labels)if(!isValidHostLabel(label))return!1;return!0},customEndpointFunctions={};function toDebugString(input){return"object"!=typeof input||null==input?input:"ref"in input?`$${toDebugString(input.ref)}`:"fn"in input?`${input.fn}(${(input.argv||[]).map(toDebugString).join(", ")})`:JSON.stringify(input,null,2)}class EndpointError extends Error{constructor(message){super(message),this.name="EndpointError"}}const getAttr=(value,path)=>(path=>{const parts=path.split("."),pathList=[];for(const part of parts){const squareBracketIndex=part.indexOf("[");if(-1!==squareBracketIndex){if(part.indexOf("]")!==part.length-1)throw new EndpointError(`Path: '${path}' does not end with ']'`);const arrayIndex=part.slice(squareBracketIndex+1,-1);if(Number.isNaN(parseInt(arrayIndex)))throw new EndpointError(`Invalid array index: '${arrayIndex}' in path: '${path}'`);0!==squareBracketIndex&&pathList.push(part.slice(0,squareBracketIndex)),pathList.push(arrayIndex)}else pathList.push(part)}return pathList})(path).reduce(((acc,index)=>{if("object"!=typeof acc)throw new EndpointError(`Index '${index}' in '${path}' not found in '${JSON.stringify(value)}'`);return Array.isArray(acc)?acc[parseInt(index)]:acc[index]}),value),DEFAULT_PORTS={[EndpointURLScheme.HTTP]:80,[EndpointURLScheme.HTTPS]:443},endpointFunctions={booleanEquals:(value1,value2)=>value1===value2,getAttr,isSet:value=>null!=value,isValidHostLabel,not:value=>!value,parseURL:value=>{const whatwgURL=(()=>{try{if(value instanceof URL)return value;if("object"==typeof value&&"hostname"in value){const{hostname,port,protocol="",path="",query={}}=value,url=new URL(`${protocol}//${hostname}${port?`:${port}`:""}${path}`);return url.search=Object.entries(query).map((([k,v])=>`${k}=${v}`)).join("&"),url}return new URL(value)}catch(error){return null}})();if(!whatwgURL)return console.error(`Unable to parse ${JSON.stringify(value)} as a whatwg URL.`),null;const urlString=whatwgURL.href,{host,hostname,pathname,protocol,search}=whatwgURL;if(search)return null;const scheme=protocol.slice(0,-1);if(!Object.values(EndpointURLScheme).includes(scheme))return null;const isIp=isIpAddress(hostname);return{scheme,authority:`${host}${urlString.includes(`${host}:${DEFAULT_PORTS[scheme]}`)||"string"==typeof value&&value.includes(`${host}:${DEFAULT_PORTS[scheme]}`)?`:${DEFAULT_PORTS[scheme]}`:""}`,path:pathname,normalizedPath:pathname.endsWith("/")?pathname:`${pathname}/`,isIp}},stringEquals:(value1,value2)=>value1===value2,substring:(input,start,stop,reverse)=>start>=stop||input.length<stop?null:reverse?input.substring(input.length-stop,input.length-start):input.substring(start,stop),uriEncode:value=>encodeURIComponent(value).replace(/[!*'()]/g,(c=>`%${c.charCodeAt(0).toString(16).toUpperCase()}`))},evaluateTemplate=(template,options)=>{const evaluatedTemplateArr=[],templateContext={...options.endpointParams,...options.referenceRecord};let currentIndex=0;for(;currentIndex<template.length;){const openingBraceIndex=template.indexOf("{",currentIndex);if(-1===openingBraceIndex){evaluatedTemplateArr.push(template.slice(currentIndex));break}evaluatedTemplateArr.push(template.slice(currentIndex,openingBraceIndex));const closingBraceIndex=template.indexOf("}",openingBraceIndex);if(-1===closingBraceIndex){evaluatedTemplateArr.push(template.slice(openingBraceIndex));break}"{"===template[openingBraceIndex+1]&&"}"===template[closingBraceIndex+1]&&(evaluatedTemplateArr.push(template.slice(openingBraceIndex+1,closingBraceIndex)),currentIndex=closingBraceIndex+2);const parameterName=template.substring(openingBraceIndex+1,closingBraceIndex);if(parameterName.includes("#")){const[refName,attrName]=parameterName.split("#");evaluatedTemplateArr.push(getAttr(templateContext[refName],attrName))}else evaluatedTemplateArr.push(templateContext[parameterName]);currentIndex=closingBraceIndex+1}return evaluatedTemplateArr.join("")},evaluateExpression=(obj,keyName,options)=>{if("string"==typeof obj)return evaluateTemplate(obj,options);if(obj.fn)return callFunction(obj,options);if(obj.ref)return(({ref},options)=>({...options.endpointParams,...options.referenceRecord}[ref]))(obj,options);throw new EndpointError(`'${keyName}': ${String(obj)} is not a string, function or reference.`)},callFunction=({fn,argv},options)=>{const evaluatedArgs=argv.map((arg=>["boolean","number"].includes(typeof arg)?arg:evaluateExpression(arg,"arg",options))),fnSegments=fn.split(".");return fnSegments[0]in customEndpointFunctions&&null!=fnSegments[1]?customEndpointFunctions[fnSegments[0]][fnSegments[1]](...evaluatedArgs):endpointFunctions[fn](...evaluatedArgs)},evaluateCondition=({assign,...fnArgs},options)=>{if(assign&&assign in options.referenceRecord)throw new EndpointError(`'${assign}' is already defined in Reference Record.`);const value=callFunction(fnArgs,options);return options.logger?.debug?.("endpoints",`evaluateCondition: ${toDebugString(fnArgs)} = ${toDebugString(value)}`),{result:""===value||!!value,...null!=assign&&{toAssign:{name:assign,value}}}},evaluateConditions=(conditions=[],options)=>{const conditionsReferenceRecord={};for(const condition of conditions){const{result,toAssign}=evaluateCondition(condition,{...options,referenceRecord:{...options.referenceRecord,...conditionsReferenceRecord}});if(!result)return{result};toAssign&&(conditionsReferenceRecord[toAssign.name]=toAssign.value,options.logger?.debug?.("endpoints",`assign: ${toAssign.name} := ${toDebugString(toAssign.value)}`))}return{result:!0,referenceRecord:conditionsReferenceRecord}},getEndpointHeaders=(headers,options)=>Object.entries(headers).reduce(((acc,[headerKey,headerVal])=>({...acc,[headerKey]:headerVal.map((headerValEntry=>{const processedExpr=evaluateExpression(headerValEntry,"Header value entry",options);if("string"!=typeof processedExpr)throw new EndpointError(`Header '${headerKey}' value '${processedExpr}' is not a string`);return processedExpr}))})),{}),getEndpointProperty=(property,options)=>{if(Array.isArray(property))return property.map((propertyEntry=>getEndpointProperty(propertyEntry,options)));switch(typeof property){case"string":return evaluateTemplate(property,options);case"object":if(null===property)throw new EndpointError(`Unexpected endpoint property: ${property}`);return getEndpointProperties(property,options);case"boolean":return property;default:throw new EndpointError("Unexpected endpoint property type: "+typeof property)}},getEndpointProperties=(properties,options)=>Object.entries(properties).reduce(((acc,[propertyKey,propertyVal])=>({...acc,[propertyKey]:getEndpointProperty(propertyVal,options)})),{}),getEndpointUrl=(endpointUrl,options)=>{const expression=evaluateExpression(endpointUrl,"Endpoint URL",options);if("string"==typeof expression)try{return new URL(expression)}catch(error){throw console.error(`Failed to construct URL with ${expression}`,error),error}throw new EndpointError("Endpoint URL must be a string, got "+typeof expression)},evaluateEndpointRule=(endpointRule,options)=>{const{conditions,endpoint}=endpointRule,{result,referenceRecord}=evaluateConditions(conditions,options);if(!result)return;const endpointRuleOptions={...options,referenceRecord:{...options.referenceRecord,...referenceRecord}},{url,properties,headers}=endpoint;return options.logger?.debug?.("endpoints",`Resolving endpoint from template: ${toDebugString(endpoint)}`),{...null!=headers&&{headers:getEndpointHeaders(headers,endpointRuleOptions)},...null!=properties&&{properties:getEndpointProperties(properties,endpointRuleOptions)},url:getEndpointUrl(url,endpointRuleOptions)}},evaluateErrorRule=(errorRule,options)=>{const{conditions,error}=errorRule,{result,referenceRecord}=evaluateConditions(conditions,options);if(result)throw new EndpointError(evaluateExpression(error,"Error",{...options,referenceRecord:{...options.referenceRecord,...referenceRecord}}))},evaluateTreeRule=(treeRule,options)=>{const{conditions,rules}=treeRule,{result,referenceRecord}=evaluateConditions(conditions,options);if(result)return evaluateRules(rules,{...options,referenceRecord:{...options.referenceRecord,...referenceRecord}})},evaluateRules=(rules,options)=>{for(const rule of rules)if("endpoint"===rule.type){const endpointOrUndefined=evaluateEndpointRule(rule,options);if(endpointOrUndefined)return endpointOrUndefined}else if("error"===rule.type)evaluateErrorRule(rule,options);else{if("tree"!==rule.type)throw new EndpointError(`Unknown endpoint rule: ${rule}`);{const endpointOrUndefined=evaluateTreeRule(rule,options);if(endpointOrUndefined)return endpointOrUndefined}}throw new EndpointError("Rules evaluation failed")},isVirtualHostableS3Bucket=(value,allowSubDomains=!1)=>{if(allowSubDomains){for(const label of value.split("."))if(!isVirtualHostableS3Bucket(label))return!1;return!0}return!!isValidHostLabel(value)&&(!(value.length<3||value.length>63)&&(value===value.toLowerCase()&&!isIpAddress(value)))};let selectedPartitionsInfo=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-east-1","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af|il)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"ca-west-1":{"description":"Canada West (Calgary)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"il-central-1":{"description":"Israel (Tel Aviv)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","implicitGlobalRegion":"cn-northwest-1","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","implicitGlobalRegion":"us-gov-west-1","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","implicitGlobalRegion":"us-iso-east-1","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","implicitGlobalRegion":"us-isob-east-1","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","implicitGlobalRegion":"eu-isoe-west-1","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{}},{"id":"aws-iso-f","outputs":{"dnsSuffix":"csp.hci.ic.gov","dualStackDnsSuffix":"csp.hci.ic.gov","implicitGlobalRegion":"us-isof-south-1","name":"aws-iso-f","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isof\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}'),selectedUserAgentPrefix="";const awsEndpointFunctions={isVirtualHostableS3Bucket,parseArn:value=>{const segments=value.split(":");if(segments.length<6)return null;const[arn,partition,service,region,accountId,...resourceId]=segments;return"arn"!==arn||""===partition||""===service||""===resourceId[0]?null:{partition,service,region,accountId,resourceId:resourceId[0].includes("/")?resourceId[0].split("/"):resourceId}},partition:value=>{const{partitions}=selectedPartitionsInfo;for(const partition of partitions){const{regions,outputs}=partition;for(const[region,regionData]of Object.entries(regions))if(region===value)return{...outputs,...regionData}}for(const partition of partitions){const{regionRegex,outputs}=partition;if(new RegExp(regionRegex).test(value))return{...outputs}}const DEFAULT_PARTITION=partitions.find((partition=>"aws"===partition.id));if(!DEFAULT_PARTITION)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...DEFAULT_PARTITION.outputs}}};customEndpointFunctions.aws=awsEndpointFunctions;const UA_NAME_ESCAPE_REGEX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,UA_VALUE_ESCAPE_REGEX=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,userAgentMiddleware=options=>(next,context)=>async args=>{const{request}=args;if(!httpRequest_HttpRequest.isInstance(request))return next(args);const{headers}=request,userAgent=context?.userAgent?.map(escapeUserAgent)||[],defaultUserAgent=(await options.defaultUserAgentProvider()).map(escapeUserAgent),customUserAgent=options?.customUserAgent?.map(escapeUserAgent)||[],sdkUserAgentValue=(selectedUserAgentPrefix?[selectedUserAgentPrefix]:[]).concat([...defaultUserAgent,...userAgent,...customUserAgent]).join(" "),normalUAValue=[...defaultUserAgent.filter((section=>section.startsWith("aws-sdk-"))),...customUserAgent].join(" ");return"browser"!==options.runtime?(normalUAValue&&(headers["x-amz-user-agent"]=headers["x-amz-user-agent"]?`${headers["user-agent"]} ${normalUAValue}`:normalUAValue),headers["user-agent"]=sdkUserAgentValue):headers["x-amz-user-agent"]=sdkUserAgentValue,next({...args,request})},escapeUserAgent=userAgentPair=>{const name=userAgentPair[0].split("/").map((part=>part.replace(UA_NAME_ESCAPE_REGEX,"-"))).join("/"),version=userAgentPair[1]?.replace(UA_VALUE_ESCAPE_REGEX,"-"),prefixSeparatorIndex=name.indexOf("/"),prefix=name.substring(0,prefixSeparatorIndex);let uaName=name.substring(prefixSeparatorIndex+1);return"api"===prefix&&(uaName=uaName.toLowerCase()),[prefix,uaName,version].filter((item=>item&&item.length>0)).reduce(((acc,item,index)=>{switch(index){case 0:return item;case 1:return`${acc}/${item}`;default:return`${acc}#${item}`}}),"")},getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0};var SelectorType;!function(SelectorType){SelectorType.ENV="env",SelectorType.CONFIG="shared config entry"}(SelectorType||(SelectorType={}));const getSmithyContext=context=>context.__smithy_context||(context.__smithy_context={}),normalizeProvider_normalizeProvider=input=>{if("function"==typeof input)return input;const promisified=Promise.resolve(input);return()=>promisified},isFipsRegion=region=>"string"==typeof region&&(region.startsWith("fips-")||region.endsWith("-fips")),getRealRegion=region=>isFipsRegion(region)?["fips-aws-global","aws-fips"].includes(region)?"us-east-1":region.replace(/fips-(dkr-|prod-)?|-fips/,""):region;const httpAuthSchemeMiddleware_httpAuthSchemeMiddleware=(config,mwOptions)=>(next,context)=>async args=>{const options=config.httpAuthSchemeProvider(await mwOptions.httpAuthSchemeParametersProvider(config,context,args.input)),authSchemes=function convertHttpAuthSchemesToMap(httpAuthSchemes){const map=new Map;for(const scheme of httpAuthSchemes)map.set(scheme.schemeId,scheme);return map}(config.httpAuthSchemes),smithyContext=getSmithyContext(context),failureReasons=[];for(const option of options){const scheme=authSchemes.get(option.schemeId);if(!scheme){failureReasons.push(`HttpAuthScheme \`${option.schemeId}\` was not enabled for this service.`);continue}const identityProvider=scheme.identityProvider(await mwOptions.identityProviderConfigProvider(config));if(!identityProvider){failureReasons.push(`HttpAuthScheme \`${option.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties={},signingProperties={}}=option.propertiesExtractor?.(config,context)||{};option.identityProperties=Object.assign(option.identityProperties||{},identityProperties),option.signingProperties=Object.assign(option.signingProperties||{},signingProperties),smithyContext.selectedHttpAuthScheme={httpAuthOption:option,identity:await identityProvider(option.identityProperties),signer:scheme.signer};break}if(!smithyContext.selectedHttpAuthScheme)throw new Error(failureReasons.join("\n"));return next(args)},DOMAIN_PATTERN=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,IP_ADDRESS_PATTERN=/(\d+\.){3}\d+/,DOTS_PATTERN=/\.\./,isDnsCompatibleBucketName=bucketName=>DOMAIN_PATTERN.test(bucketName)&&!IP_ADDRESS_PATTERN.test(bucketName)&&!DOTS_PATTERN.test(bucketName),isArnBucketName=bucketName=>{const[arn,partition,service,region,account,typeOrId]=bucketName.split(":"),isArn="arn"===arn&&bucketName.split(":").length>=6,isValidArn=5===[arn,partition,service,account,typeOrId].filter(Boolean).length;if(isArn&&!isValidArn)throw new Error(`Invalid ARN: ${bucketName} was an invalid ARN.`);return!!("arn"===arn&&partition&&service&&account&&typeOrId)},createConfigValueProvider=(configKey,canonicalEndpointParamKey,config)=>{const configProvider=async()=>{const configValue=config[configKey]??config[canonicalEndpointParamKey];return"function"==typeof configValue?configValue():configValue};return"credentialScope"===configKey||"CredentialScope"===canonicalEndpointParamKey?async()=>{const credentials="function"==typeof config.credentials?await config.credentials():config.credentials;return credentials?.credentialScope??credentials?.CredentialScope}:"endpoint"===configKey||"endpoint"===canonicalEndpointParamKey?async()=>{const endpoint=await configProvider();if(endpoint&&"object"==typeof endpoint){if("url"in endpoint)return endpoint.url.href;if("hostname"in endpoint){const{protocol,hostname,port,path}=endpoint;return`${protocol}//${hostname}${port?":"+port:""}${path}`}}return endpoint}:configProvider};const parseUrl=url=>{if("string"==typeof url)return parseUrl(new URL(url));const{hostname,pathname,port,protocol,search}=url;let query;return search&&(query=function parseQueryString(querystring){const query={};if(querystring=querystring.replace(/^\?/,""))for(const pair of querystring.split("&")){let[key,value=null]=pair.split("=");key=decodeURIComponent(key),value&&(value=decodeURIComponent(value)),key in query?Array.isArray(query[key])?query[key].push(value):query[key]=[query[key],value]:query[key]=value}return query}(search)),{hostname,port:port?parseInt(port):void 0,protocol,path:pathname,query}},toEndpointV1=endpoint=>"object"==typeof endpoint?"url"in endpoint?parseUrl(endpoint.url):endpoint:parseUrl(endpoint),resolveParams=async(commandInput,instructionsSupplier,clientConfig)=>{const endpointParams={},instructions=instructionsSupplier?.getEndpointParameterInstructions?.()||{};for(const[name,instruction]of Object.entries(instructions))switch(instruction.type){case"staticContextParams":endpointParams[name]=instruction.value;break;case"contextParams":endpointParams[name]=commandInput[instruction.name];break;case"clientContextParams":case"builtInParams":endpointParams[name]=await createConfigValueProvider(instruction.name,name,clientConfig)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(instruction))}return 0===Object.keys(instructions).length&&Object.assign(endpointParams,clientConfig),"s3"===String(clientConfig.serviceId).toLowerCase()&&await(async endpointParams=>{const bucket=endpointParams?.Bucket||"";if("string"==typeof endpointParams.Bucket&&(endpointParams.Bucket=bucket.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),isArnBucketName(bucket)){if(!0===endpointParams.ForcePathStyle)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!isDnsCompatibleBucketName(bucket)||-1!==bucket.indexOf(".")&&!String(endpointParams.Endpoint).startsWith("http:")||bucket.toLowerCase()!==bucket||bucket.length<3)&&(endpointParams.ForcePathStyle=!0);return endpointParams.DisableMultiRegionAccessPoints&&(endpointParams.disableMultiRegionAccessPoints=!0,endpointParams.DisableMRAP=!0),endpointParams})(endpointParams),endpointParams},endpointMiddleware=({config,instructions})=>(next,context)=>async args=>{const endpoint=await(async(commandInput,instructionsSupplier,clientConfig,context)=>{if(!clientConfig.endpoint){const endpointFromConfig=await(async serviceId=>{})(clientConfig.serviceId);endpointFromConfig&&(clientConfig.endpoint=()=>Promise.resolve(toEndpointV1(endpointFromConfig)))}const endpointParams=await resolveParams(commandInput,instructionsSupplier,clientConfig);if("function"!=typeof clientConfig.endpointProvider)throw new Error("config.endpointProvider is not set.");return clientConfig.endpointProvider(endpointParams,context)})(args.input,{getEndpointParameterInstructions:()=>instructions},{...config},context);context.endpointV2=endpoint,context.authSchemes=endpoint.properties?.authSchemes;const authScheme=context.authSchemes?.[0];if(authScheme){context.signing_region=authScheme.signingRegion,context.signing_service=authScheme.signingName;const smithyContext=getSmithyContext(context),httpAuthOption=smithyContext?.selectedHttpAuthScheme?.httpAuthOption;httpAuthOption&&(httpAuthOption.signingProperties=Object.assign(httpAuthOption.signingProperties||{},{signing_region:authScheme.signingRegion,signingRegion:authScheme.signingRegion,signing_service:authScheme.signingName,signingName:authScheme.signingName,signingRegionSet:authScheme.signingRegionSet},authScheme.properties))}return next({...args})},deserializerMiddlewareOption={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},serializerMiddlewareOption={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function getSerdePlugin(config,serializer,deserializer){return{applyToStack:commandStack=>{commandStack.add(((options,deserializer)=>(next,context)=>async args=>{const{response}=await next(args);try{return{response,output:await deserializer(response,options)}}catch(error){if(Object.defineProperty(error,"$response",{value:response}),!("$metadata"in error)){const hint="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";error.message+="\n  "+hint}throw error}})(config,deserializer),deserializerMiddlewareOption),commandStack.add(((options,serializer)=>(next,context)=>async args=>{const endpoint=context.endpointV2?.url&&options.urlParser?async()=>options.urlParser(context.endpointV2.url):options.endpoint;if(!endpoint)throw new Error("No valid endpoint provider available.");const request=await serializer(args.input,{...options,endpoint});return next({...args,request})})(config,serializer),serializerMiddlewareOption)}}}const endpointMiddlewareOptions={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:serializerMiddlewareOption.name},getEndpointPlugin=(config,instructions)=>({applyToStack:clientStack=>{clientStack.addRelativeTo(endpointMiddleware({config,instructions}),endpointMiddlewareOptions)}}),httpAuthSchemeEndpointRuleSetMiddlewareOptions={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:endpointMiddlewareOptions.name},defaultErrorHandler=signingProperties=>error=>{throw error},defaultSuccessHandler=(httpResponse,signingProperties)=>{};var RETRY_MODES;!function(RETRY_MODES){RETRY_MODES.STANDARD="standard",RETRY_MODES.ADAPTIVE="adaptive"}(RETRY_MODES||(RETRY_MODES={}));const DEFAULT_RETRY_MODE=RETRY_MODES.STANDARD,THROTTLING_ERROR_CODES=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],TRANSIENT_ERROR_CODES=["TimeoutError","RequestTimeout","RequestTimeoutException"],TRANSIENT_ERROR_STATUS_CODES=[500,502,503,504],NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],isThrottlingError=error=>429===error.$metadata?.httpStatusCode||THROTTLING_ERROR_CODES.includes(error.name)||1==error.$retryable?.throttling,isTransientError=error=>(error=>error.$metadata?.clockSkewCorrected)(error)||TRANSIENT_ERROR_CODES.includes(error.name)||NODEJS_TIMEOUT_ERROR_CODES.includes(error?.code||"")||TRANSIENT_ERROR_STATUS_CODES.includes(error.$metadata?.httpStatusCode||0);class DefaultRateLimiter{constructor(options){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=options?.beta??.7,this.minCapacity=options?.minCapacity??1,this.minFillRate=options?.minFillRate??.5,this.scaleConstant=options?.scaleConstant??.4,this.smooth=options?.smooth??.8;const currentTimeInSeconds=this.getCurrentTimeInSeconds();this.lastThrottleTime=currentTimeInSeconds,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(amount){if(this.enabled){if(this.refillTokenBucket(),amount>this.currentCapacity){const delay=(amount-this.currentCapacity)/this.fillRate*1e3;await new Promise((resolve=>setTimeout(resolve,delay)))}this.currentCapacity=this.currentCapacity-amount}}refillTokenBucket(){const timestamp=this.getCurrentTimeInSeconds();if(!this.lastTimestamp)return void(this.lastTimestamp=timestamp);const fillAmount=(timestamp-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+fillAmount),this.lastTimestamp=timestamp}updateClientSendingRate(response){let calculatedRate;if(this.updateMeasuredRate(),isThrottlingError(response)){const rateToUse=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=rateToUse,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),calculatedRate=this.cubicThrottle(rateToUse),this.enableTokenBucket()}else this.calculateTimeWindow(),calculatedRate=this.cubicSuccess(this.getCurrentTimeInSeconds());const newRate=Math.min(calculatedRate,2*this.measuredTxRate);this.updateTokenBucketRate(newRate)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(rateToUse){return this.getPrecise(rateToUse*this.beta)}cubicSuccess(timestamp){return this.getPrecise(this.scaleConstant*Math.pow(timestamp-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(newRate){this.refillTokenBucket(),this.fillRate=Math.max(newRate,this.minFillRate),this.maxCapacity=Math.max(newRate,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),timeBucket=Math.floor(2*t)/2;if(this.requestCount++,timeBucket>this.lastTxRateBucket){const currentRate=this.requestCount/(timeBucket-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(currentRate*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=timeBucket}}getPrecise(num){return parseFloat(num.toFixed(8))}}const createDefaultRetryToken=({retryDelay,retryCount,retryCost})=>({getRetryCount:()=>retryCount,getRetryDelay:()=>Math.min(2e4,retryDelay),getRetryCost:()=>retryCost});class StandardRetryStrategy{constructor(maxAttempts){this.maxAttempts=maxAttempts,this.mode=RETRY_MODES.STANDARD,this.capacity=500,this.retryBackoffStrategy=(()=>{let delayBase=100;return{computeNextBackoffDelay:attempts=>Math.floor(Math.min(2e4,Math.random()*2**attempts*delayBase)),setDelayBase:delay=>{delayBase=delay}}})(),this.maxAttemptsProvider="function"==typeof maxAttempts?maxAttempts:async()=>maxAttempts}async acquireInitialRetryToken(retryTokenScope){return createDefaultRetryToken({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(token,errorInfo){const maxAttempts=await this.getMaxAttempts();if(this.shouldRetry(token,errorInfo,maxAttempts)){const errorType=errorInfo.errorType;this.retryBackoffStrategy.setDelayBase("THROTTLING"===errorType?500:100);const delayFromErrorType=this.retryBackoffStrategy.computeNextBackoffDelay(token.getRetryCount()),retryDelay=errorInfo.retryAfterHint?Math.max(errorInfo.retryAfterHint.getTime()-Date.now()||0,delayFromErrorType):delayFromErrorType,capacityCost=this.getCapacityCost(errorType);return this.capacity-=capacityCost,createDefaultRetryToken({retryDelay,retryCount:token.getRetryCount()+1,retryCost:capacityCost})}throw new Error("No retry token available")}recordSuccess(token){this.capacity=Math.max(500,this.capacity+(token.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(error){return console.warn("Max attempts provider could not resolve. Using default of 3"),3}}shouldRetry(tokenToRenew,errorInfo,maxAttempts){return tokenToRenew.getRetryCount()+1<maxAttempts&&this.capacity>=this.getCapacityCost(errorInfo.errorType)&&this.isRetryableError(errorInfo.errorType)}getCapacityCost(errorType){return"TRANSIENT"===errorType?10:5}isRetryableError(errorType){return"THROTTLING"===errorType||"TRANSIENT"===errorType}}class AdaptiveRetryStrategy{constructor(maxAttemptsProvider,options){this.maxAttemptsProvider=maxAttemptsProvider,this.mode=RETRY_MODES.ADAPTIVE;const{rateLimiter}=options??{};this.rateLimiter=rateLimiter??new DefaultRateLimiter,this.standardRetryStrategy=new StandardRetryStrategy(maxAttemptsProvider)}async acquireInitialRetryToken(retryTokenScope){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(retryTokenScope)}async refreshRetryTokenForRetry(tokenToRenew,errorInfo){return this.rateLimiter.updateClientSendingRate(errorInfo),this.standardRetryStrategy.refreshRetryTokenForRetry(tokenToRenew,errorInfo)}recordSuccess(token){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(token)}}var v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const asSdkError=error=>error instanceof Error?error:error instanceof Object?Object.assign(new Error,error):"string"==typeof error?new Error(error):new Error(`AWS SDK error wrapper for ${error}`);class NoOpLogger{trace(){}debug(){}info(){}warn(){}error(){}}const getAllAliases=(name,aliases)=>{const _aliases=[];if(name&&_aliases.push(name),aliases)for(const alias of aliases)_aliases.push(alias);return _aliases},getMiddlewareNameWithAliases=(name,aliases)=>`${name||"anonymous"}${aliases&&aliases.length>0?` (a.k.a. ${aliases.join(",")})`:""}`,constructStack=()=>{let absoluteEntries=[],relativeEntries=[],identifyOnResolve=!1;const entriesNameSet=new Set,cloneTo=toStack=>(absoluteEntries.forEach((entry=>{toStack.add(entry.middleware,{...entry})})),relativeEntries.forEach((entry=>{toStack.addRelativeTo(entry.middleware,{...entry})})),toStack.identifyOnResolve?.(stack.identifyOnResolve()),toStack),expandRelativeMiddlewareList=from=>{const expandedMiddlewareList=[];return from.before.forEach((entry=>{0===entry.before.length&&0===entry.after.length?expandedMiddlewareList.push(entry):expandedMiddlewareList.push(...expandRelativeMiddlewareList(entry))})),expandedMiddlewareList.push(from),from.after.reverse().forEach((entry=>{0===entry.before.length&&0===entry.after.length?expandedMiddlewareList.push(entry):expandedMiddlewareList.push(...expandRelativeMiddlewareList(entry))})),expandedMiddlewareList},getMiddlewareList=(debug=!1)=>{const normalizedAbsoluteEntries=[],normalizedRelativeEntries=[],normalizedEntriesNameMap={};absoluteEntries.forEach((entry=>{const normalizedEntry={...entry,before:[],after:[]};for(const alias of getAllAliases(normalizedEntry.name,normalizedEntry.aliases))normalizedEntriesNameMap[alias]=normalizedEntry;normalizedAbsoluteEntries.push(normalizedEntry)})),relativeEntries.forEach((entry=>{const normalizedEntry={...entry,before:[],after:[]};for(const alias of getAllAliases(normalizedEntry.name,normalizedEntry.aliases))normalizedEntriesNameMap[alias]=normalizedEntry;normalizedRelativeEntries.push(normalizedEntry)})),normalizedRelativeEntries.forEach((entry=>{if(entry.toMiddleware){const toMiddleware=normalizedEntriesNameMap[entry.toMiddleware];if(void 0===toMiddleware){if(debug)return;throw new Error(`${entry.toMiddleware} is not found when adding ${getMiddlewareNameWithAliases(entry.name,entry.aliases)} middleware ${entry.relation} ${entry.toMiddleware}`)}"after"===entry.relation&&toMiddleware.after.push(entry),"before"===entry.relation&&toMiddleware.before.push(entry)}}));const mainChain=(entries=normalizedAbsoluteEntries,entries.sort(((a,b)=>stepWeights[b.step]-stepWeights[a.step]||priorityWeights[b.priority||"normal"]-priorityWeights[a.priority||"normal"]))).map(expandRelativeMiddlewareList).reduce(((wholeList,expandedMiddlewareList)=>(wholeList.push(...expandedMiddlewareList),wholeList)),[]);var entries;return mainChain},stack={add:(middleware,options={})=>{const{name,override,aliases:_aliases}=options,entry={step:"initialize",priority:"normal",middleware,...options},aliases=getAllAliases(name,_aliases);if(aliases.length>0){if(aliases.some((alias=>entriesNameSet.has(alias)))){if(!override)throw new Error(`Duplicate middleware name '${getMiddlewareNameWithAliases(name,_aliases)}'`);for(const alias of aliases){const toOverrideIndex=absoluteEntries.findIndex((entry=>entry.name===alias||entry.aliases?.some((a=>a===alias))));if(-1===toOverrideIndex)continue;const toOverride=absoluteEntries[toOverrideIndex];if(toOverride.step!==entry.step||entry.priority!==toOverride.priority)throw new Error(`"${getMiddlewareNameWithAliases(toOverride.name,toOverride.aliases)}" middleware with ${toOverride.priority} priority in ${toOverride.step} step cannot be overridden by "${getMiddlewareNameWithAliases(name,_aliases)}" middleware with ${entry.priority} priority in ${entry.step} step.`);absoluteEntries.splice(toOverrideIndex,1)}}for(const alias of aliases)entriesNameSet.add(alias)}absoluteEntries.push(entry)},addRelativeTo:(middleware,options)=>{const{name,override,aliases:_aliases}=options,entry={middleware,...options},aliases=getAllAliases(name,_aliases);if(aliases.length>0){if(aliases.some((alias=>entriesNameSet.has(alias)))){if(!override)throw new Error(`Duplicate middleware name '${getMiddlewareNameWithAliases(name,_aliases)}'`);for(const alias of aliases){const toOverrideIndex=relativeEntries.findIndex((entry=>entry.name===alias||entry.aliases?.some((a=>a===alias))));if(-1===toOverrideIndex)continue;const toOverride=relativeEntries[toOverrideIndex];if(toOverride.toMiddleware!==entry.toMiddleware||toOverride.relation!==entry.relation)throw new Error(`"${getMiddlewareNameWithAliases(toOverride.name,toOverride.aliases)}" middleware ${toOverride.relation} "${toOverride.toMiddleware}" middleware cannot be overridden by "${getMiddlewareNameWithAliases(name,_aliases)}" middleware ${entry.relation} "${entry.toMiddleware}" middleware.`);relativeEntries.splice(toOverrideIndex,1)}}for(const alias of aliases)entriesNameSet.add(alias)}relativeEntries.push(entry)},clone:()=>cloneTo(constructStack()),use:plugin=>{plugin.applyToStack(stack)},remove:toRemove=>"string"==typeof toRemove?(toRemove=>{let isRemoved=!1;const filterCb=entry=>{const aliases=getAllAliases(entry.name,entry.aliases);if(aliases.includes(toRemove)){isRemoved=!0;for(const alias of aliases)entriesNameSet.delete(alias);return!1}return!0};return absoluteEntries=absoluteEntries.filter(filterCb),relativeEntries=relativeEntries.filter(filterCb),isRemoved})(toRemove):(toRemove=>{let isRemoved=!1;const filterCb=entry=>{if(entry.middleware===toRemove){isRemoved=!0;for(const alias of getAllAliases(entry.name,entry.aliases))entriesNameSet.delete(alias);return!1}return!0};return absoluteEntries=absoluteEntries.filter(filterCb),relativeEntries=relativeEntries.filter(filterCb),isRemoved})(toRemove),removeByTag:toRemove=>{let isRemoved=!1;const filterCb=entry=>{const{tags,name,aliases:_aliases}=entry;if(tags&&tags.includes(toRemove)){const aliases=getAllAliases(name,_aliases);for(const alias of aliases)entriesNameSet.delete(alias);return isRemoved=!0,!1}return!0};return absoluteEntries=absoluteEntries.filter(filterCb),relativeEntries=relativeEntries.filter(filterCb),isRemoved},concat:from=>{const cloned=cloneTo(constructStack());return cloned.use(from),cloned.identifyOnResolve(identifyOnResolve||cloned.identifyOnResolve()||(from.identifyOnResolve?.()??!1)),cloned},applyToStack:cloneTo,identify:()=>getMiddlewareList(!0).map((mw=>{const step=mw.step??mw.relation+" "+mw.toMiddleware;return getMiddlewareNameWithAliases(mw.name,mw.aliases)+" - "+step})),identifyOnResolve:toggle=>("boolean"==typeof toggle&&(identifyOnResolve=toggle),identifyOnResolve),resolve:(handler,context)=>{for(const middleware of getMiddlewareList().map((entry=>entry.middleware)).reverse())handler=middleware(handler,context);return identifyOnResolve&&console.log(stack.identify()),handler}};return stack},stepWeights={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},priorityWeights={high:3,normal:2,low:1};class Client{constructor(config){this.middlewareStack=constructStack(),this.config=config}send(command,optionsOrCb,cb){const options="function"!=typeof optionsOrCb?optionsOrCb:void 0,callback="function"==typeof optionsOrCb?optionsOrCb:cb,handler=command.resolveMiddleware(this.middlewareStack,this.config,options);if(!callback)return handler(command).then((result=>result.output));handler(command).then((result=>callback(null,result.output)),(err=>callback(err))).catch((()=>{}))}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}const alphabetByEncoding={},alphabetByValue=new Array(64);for(let i=0,start="A".charCodeAt(0),limit="Z".charCodeAt(0);i+start<=limit;i++){const char=String.fromCharCode(i+start);alphabetByEncoding[char]=i,alphabetByValue[i]=char}for(let i=0,start="a".charCodeAt(0),limit="z".charCodeAt(0);i+start<=limit;i++){const char=String.fromCharCode(i+start),index=i+26;alphabetByEncoding[char]=index,alphabetByValue[index]=char}for(let i=0;i<10;i++){alphabetByEncoding[i.toString(10)]=i+52;const char=i.toString(10),index=i+52;alphabetByEncoding[char]=index,alphabetByValue[index]=char}alphabetByEncoding["+"]=62,alphabetByValue[62]="+",alphabetByEncoding["/"]=63,alphabetByValue[63]="/";const bitsPerLetter=6,bitsPerByte=8,maxLetterValue=63,fromBase64=input=>{let totalByteLength=input.length/4*3;"=="===input.slice(-2)?totalByteLength-=2:"="===input.slice(-1)&&totalByteLength--;const out=new ArrayBuffer(totalByteLength),dataView=new DataView(out);for(let i=0;i<input.length;i+=4){let bits=0,bitLength=0;for(let j=i,limit=i+3;j<=limit;j++)if("="!==input[j]){if(!(input[j]in alphabetByEncoding))throw new TypeError(`Invalid character ${input[j]} in base64 string.`);bits|=alphabetByEncoding[input[j]]<<(limit-j)*bitsPerLetter,bitLength+=bitsPerLetter}else bits>>=bitsPerLetter;const chunkOffset=i/4*3;bits>>=bitLength%bitsPerByte;const byteLength=Math.floor(bitLength/bitsPerByte);for(let k=0;k<byteLength;k++){const offset=(byteLength-k-1)*bitsPerByte;dataView.setUint8(chunkOffset+k,(bits&255<<offset)>>offset)}}return new Uint8Array(out)};function toBase64_browser_toBase64(input){let str="";for(let i=0;i<input.length;i+=3){let bits=0,bitLength=0;for(let j=i,limit=Math.min(i+3,input.length);j<limit;j++)bits|=input[j]<<(limit-j-1)*bitsPerByte,bitLength+=bitsPerByte;const bitClusterCount=Math.ceil(bitLength/bitsPerLetter);bits<<=bitClusterCount*bitsPerLetter-bitLength;for(let k=1;k<=bitClusterCount;k++){const offset=(bitClusterCount-k)*bitsPerLetter;str+=alphabetByValue[(bits&maxLetterValue<<offset)>>offset]}str+="==".slice(0,4-bitClusterCount)}return str}const toUtf8_browser_toUtf8=input=>new TextDecoder("utf-8").decode(input),fromUtf8=input=>(new TextEncoder).encode(input);class Uint8ArrayBlobAdapter extends Uint8Array{static fromString(source,encoding="utf-8"){if("string"==typeof source)return function transformFromString(str,encoding){return"base64"===encoding?Uint8ArrayBlobAdapter.mutate(fromBase64(str)):Uint8ArrayBlobAdapter.mutate(fromUtf8(str))}(source,encoding);throw new Error(`Unsupported conversion from ${typeof source} to Uint8ArrayBlobAdapter.`)}static mutate(source){return Object.setPrototypeOf(source,Uint8ArrayBlobAdapter.prototype),source}transformToString(encoding="utf-8"){return function transformToString(payload,encoding="utf-8"){return"base64"===encoding?toBase64_browser_toBase64(payload):toUtf8_browser_toUtf8(payload)}(this,encoding)}}const escapeUri=uri=>encodeURIComponent(uri).replace(/[!'()*]/g,hexEncode),hexEncode=c=>`%${c.charCodeAt(0).toString(16).toUpperCase()}`;function requestTimeout(timeoutInMs=0){return new Promise(((resolve,reject)=>{timeoutInMs&&setTimeout((()=>{const timeoutError=new Error(`Request did not complete within ${timeoutInMs} ms`);timeoutError.name="TimeoutError",reject(timeoutError)}),timeoutInMs)}))}const keepAliveSupport_supported=Boolean("undefined"!=typeof Request&&"keepalive"in new Request("https://[::1]"));class FetchHttpHandler{static create(instanceOrOptions){return"function"==typeof instanceOrOptions?.handle?instanceOrOptions:new FetchHttpHandler(instanceOrOptions)}constructor(options){"function"==typeof options?this.configProvider=options().then((opts=>opts||{})):(this.config=options??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(request,{abortSignal}={}){this.config||(this.config=await this.configProvider);const requestTimeoutInMs=this.config.requestTimeout,keepAlive=!0===this.config.keepAlive;if(abortSignal?.aborted){const abortError=new Error("Request aborted");return abortError.name="AbortError",Promise.reject(abortError)}let path=request.path;const queryString=function buildQueryString(query){const parts=[];for(let key of Object.keys(query).sort()){const value=query[key];if(key=escapeUri(key),Array.isArray(value))for(let i=0,iLen=value.length;i<iLen;i++)parts.push(`${key}=${escapeUri(value[i])}`);else{let qsEntry=key;(value||"string"==typeof value)&&(qsEntry+=`=${escapeUri(value)}`),parts.push(qsEntry)}}return parts.join("&")}(request.query||{});queryString&&(path+=`?${queryString}`),request.fragment&&(path+=`#${request.fragment}`);let auth="";if(null!=request.username||null!=request.password){auth=`${request.username??""}:${request.password??""}@`}const{port,method}=request,url=`${request.protocol}//${auth}${request.hostname}${port?`:${port}`:""}${path}`,requestOptions={body:"GET"===method||"HEAD"===method?void 0:request.body,headers:new Headers(request.headers),method};"undefined"!=typeof AbortController&&(requestOptions.signal=abortSignal),keepAliveSupport_supported&&(requestOptions.keepalive=keepAlive);const fetchRequest=new Request(url,requestOptions),raceOfPromises=[fetch(fetchRequest).then((response=>{const fetchHeaders=response.headers,transformedHeaders={};for(const pair of fetchHeaders.entries())transformedHeaders[pair[0]]=pair[1];return null!=response.body?{response:new HttpResponse({headers:transformedHeaders,reason:response.statusText,statusCode:response.status,body:response.body})}:response.blob().then((body=>({response:new HttpResponse({headers:transformedHeaders,reason:response.statusText,statusCode:response.status,body})})))})),requestTimeout(requestTimeoutInMs)];return abortSignal&&raceOfPromises.push(new Promise(((resolve,reject)=>{abortSignal.onabort=()=>{const abortError=new Error("Request aborted");abortError.name="AbortError",reject(abortError)}}))),Promise.race(raceOfPromises)}updateHttpClientConfig(key,value){this.config=void 0,this.configProvider=this.configProvider.then((config=>(config[key]=value,config)))}httpHandlerConfigs(){return this.config??{}}}const stream_collector_streamCollector=stream=>"function"==typeof Blob&&stream instanceof Blob?async function collectBlob(blob){const base64=await function readToBase64(blob){return new Promise(((resolve,reject)=>{const reader=new FileReader;reader.onloadend=()=>{if(2!==reader.readyState)return reject(new Error("Reader aborted too early"));const result=reader.result??"",commaIndex=result.indexOf(","),dataOffset=commaIndex>-1?commaIndex+1:result.length;resolve(result.substring(dataOffset))},reader.onabort=()=>reject(new Error("Read aborted")),reader.onerror=()=>reject(reader.error),reader.readAsDataURL(blob)}))}(blob),arrayBuffer=fromBase64(base64);return new Uint8Array(arrayBuffer)}(stream):async function collectStream(stream){let res=new Uint8Array(0);const reader=stream.getReader();let isDone=!1;for(;!isDone;){const{done,value}=await reader.read();if(value){const prior=res;res=new Uint8Array(prior.length+value.length),res.set(prior),res.set(value,prior.length)}isDone=done}return res}(stream);const SHORT_TO_HEX={},HEX_TO_SHORT={};for(let i=0;i<256;i++){let encodedByte=i.toString(16).toLowerCase();1===encodedByte.length&&(encodedByte=`0${encodedByte}`),SHORT_TO_HEX[i]=encodedByte,HEX_TO_SHORT[encodedByte]=i}const collectBody=async(streamBody=new Uint8Array,context)=>{if(streamBody instanceof Uint8Array)return Uint8ArrayBlobAdapter.mutate(streamBody);if(!streamBody)return Uint8ArrayBlobAdapter.mutate(new Uint8Array);const fromContext=context.streamCollector(streamBody);return Uint8ArrayBlobAdapter.mutate(await fromContext)};class Command{constructor(){this.middlewareStack=constructStack()}static classBuilder(){return new ClassBuilder}resolveMiddlewareWithContext(clientStack,configuration,options,{middlewareFn,clientName,commandName,inputFilterSensitiveLog,outputFilterSensitiveLog,smithyContext,additionalContext,CommandCtor}){for(const mw of middlewareFn.bind(this)(CommandCtor,clientStack,configuration,options))this.middlewareStack.use(mw);const stack=clientStack.concat(this.middlewareStack),{logger}=configuration,handlerExecutionContext={logger,clientName,commandName,inputFilterSensitiveLog,outputFilterSensitiveLog,__smithy_context:{...smithyContext},...additionalContext},{requestHandler}=configuration;return stack.resolve((request=>requestHandler.handle(request.request,options||{})),handlerExecutionContext)}}class ClassBuilder{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=_=>_,this._outputFilterSensitiveLog=_=>_,this._serializer=null,this._deserializer=null}init(cb){this._init=cb}ep(endpointParameterInstructions){return this._ep=endpointParameterInstructions,this}m(middlewareSupplier){return this._middlewareFn=middlewareSupplier,this}s(service,operation,smithyContext={}){return this._smithyContext={service,operation,...smithyContext},this}c(additionalContext={}){return this._additionalContext=additionalContext,this}n(clientName,commandName){return this._clientName=clientName,this._commandName=commandName,this}f(inputFilter=(_=>_),outputFilter=(_=>_)){return this._inputFilterSensitiveLog=inputFilter,this._outputFilterSensitiveLog=outputFilter,this}ser(serializer){return this._serializer=serializer,this}de(deserializer){return this._deserializer=deserializer,this}build(){const closure=this;let CommandRef;return CommandRef=class extends Command{static getEndpointParameterInstructions(){return closure._ep}constructor(input){super(),this.input=input,this.serialize=closure._serializer,this.deserialize=closure._deserializer,closure._init(this)}resolveMiddleware(stack,configuration,options){return this.resolveMiddlewareWithContext(stack,configuration,options,{CommandCtor:CommandRef,middlewareFn:closure._middlewareFn,clientName:closure._clientName,commandName:closure._commandName,inputFilterSensitiveLog:closure._inputFilterSensitiveLog,outputFilterSensitiveLog:closure._outputFilterSensitiveLog,smithyContext:closure._smithyContext,additionalContext:closure._additionalContext})}}}}const SENSITIVE_STRING="***SensitiveInformation***",expectBoolean=value=>{if(null!=value){if("number"==typeof value){if(0!==value&&1!==value||logger.warn(stackTraceWarning(`Expected boolean, got ${typeof value}: ${value}`)),0===value)return!1;if(1===value)return!0}if("string"==typeof value){const lower=value.toLowerCase();if("false"!==lower&&"true"!==lower||logger.warn(stackTraceWarning(`Expected boolean, got ${typeof value}: ${value}`)),"false"===lower)return!1;if("true"===lower)return!0}if("boolean"==typeof value)return value;throw new TypeError(`Expected boolean, got ${typeof value}: ${value}`)}},expectNumber=value=>{if(null!=value){if("string"==typeof value){const parsed=parseFloat(value);if(!Number.isNaN(parsed))return String(parsed)!==String(value)&&logger.warn(stackTraceWarning(`Expected number but observed string: ${value}`)),parsed}if("number"==typeof value)return value;throw new TypeError(`Expected number, got ${typeof value}: ${value}`)}},expectNonNull=(Math.ceil(2**127*(2-2**-23)),(value,location)=>{if(null==value){if(location)throw new TypeError(`Expected a non-null value for ${location}`);throw new TypeError("Expected a non-null value")}return value}),expectObject=value=>{if(null==value)return;if("object"==typeof value&&!Array.isArray(value))return value;const receivedType=Array.isArray(value)?"array":typeof value;throw new TypeError(`Expected object, got ${receivedType}: ${value}`)},expectString=value=>{if(null!=value){if("string"==typeof value)return value;if(["boolean","number","bigint"].includes(typeof value))return logger.warn(stackTraceWarning(`Expected string, got ${typeof value}: ${value}`)),String(value);throw new TypeError(`Expected string, got ${typeof value}: ${value}`)}},strictParseDouble=value=>expectNumber("string"==typeof value?parseNumber(value):value),NUMBER_REGEX=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,parseNumber=value=>{const matches=value.match(NUMBER_REGEX);if(null===matches||matches[0].length!==value.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(value)},stackTraceWarning=message=>String(new TypeError(message).stack||message).split("\n").slice(0,5).filter((s=>!s.includes("stackTraceWarning"))).join("\n"),logger={warn:console.warn};const parseEpochTimestamp=value=>{if(null==value)return;let valueAsDouble;if("number"==typeof value)valueAsDouble=value;else{if("string"!=typeof value)throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");valueAsDouble=strictParseDouble(value)}if(Number.isNaN(valueAsDouble)||valueAsDouble===1/0||valueAsDouble===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(1e3*valueAsDouble))};class ServiceException extends Error{constructor(options){super(options.message),Object.setPrototypeOf(this,ServiceException.prototype),this.name=options.name,this.$fault=options.$fault,this.$metadata=options.$metadata}}const decorateServiceException=(exception,additions={})=>{Object.entries(additions).filter((([,v])=>void 0!==v)).forEach((([k,v])=>{null!=exception[k]&&""!==exception[k]||(exception[k]=v)}));const message=exception.message||exception.Message||"UnknownError";return exception.message=message,delete exception.Message,exception},deserializeMetadata=output=>({httpStatusCode:output.statusCode,requestId:output.headers["x-amzn-requestid"]??output.headers["x-amzn-request-id"]??output.headers["x-amz-request-id"],extendedRequestId:output.headers["x-amz-id-2"],cfId:output.headers["x-amz-cf-id"]}),loadConfigsForDefaultMode=mode=>{switch(mode){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},extensions_checksum_getChecksumConfiguration=runtimeConfig=>{const checksumAlgorithms=[];for(const id in AlgorithmId){const algorithmId=AlgorithmId[id];void 0!==runtimeConfig[algorithmId]&&checksumAlgorithms.push({algorithmId:()=>algorithmId,checksumConstructor:()=>runtimeConfig[algorithmId]})}return{_checksumAlgorithms:checksumAlgorithms,addChecksumAlgorithm(algo){this._checksumAlgorithms.push(algo)},checksumAlgorithms(){return this._checksumAlgorithms}}},extensions_checksum_resolveChecksumRuntimeConfig=clientConfig=>{const runtimeConfig={};return clientConfig.checksumAlgorithms().forEach((checksumAlgorithm=>{runtimeConfig[checksumAlgorithm.algorithmId()]=checksumAlgorithm.checksumConstructor()})),runtimeConfig},getRetryConfiguration=runtimeConfig=>{let _retryStrategy=runtimeConfig.retryStrategy;return{setRetryStrategy(retryStrategy){_retryStrategy=retryStrategy},retryStrategy:()=>_retryStrategy}},resolveRetryRuntimeConfig=retryStrategyConfiguration=>{const runtimeConfig={};return runtimeConfig.retryStrategy=retryStrategyConfiguration.retryStrategy(),runtimeConfig},getDefaultExtensionConfiguration=runtimeConfig=>({...extensions_checksum_getChecksumConfiguration(runtimeConfig),...getRetryConfiguration(runtimeConfig)}),StringWrapper=function(){const Class=Object.getPrototypeOf(this).constructor,instance=new(Function.bind.apply(String,[null,...arguments]));return Object.setPrototypeOf(instance,Class.prototype),instance};StringWrapper.prototype=Object.create(String.prototype,{constructor:{value:StringWrapper,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(StringWrapper,String);function map(arg0,arg1,arg2){let target,filter,instructions;if(void 0===arg1&&void 0===arg2)target={},instructions=arg0;else{if(target=arg0,"function"==typeof arg1)return filter=arg1,instructions=arg2,mapWithFilter(target,filter,instructions);instructions=arg1}for(const key of Object.keys(instructions))Array.isArray(instructions[key])?applyInstruction(target,null,instructions,key):target[key]=instructions[key];return target}const take=(source,instructions)=>{const out={};for(const key in instructions)applyInstruction(out,source,instructions,key);return out},mapWithFilter=(target,filter,instructions)=>map(target,Object.entries(instructions).reduce(((_instructions,[key,value])=>(Array.isArray(value)?_instructions[key]=value:_instructions[key]="function"==typeof value?[filter,value()]:[filter,value],_instructions)),{})),applyInstruction=(target,source,instructions,targetKey)=>{if(null!==source){let instruction=instructions[targetKey];"function"==typeof instruction&&(instruction=[,instruction]);const[filter=nonNullish,valueFn=pass,sourceKey=targetKey]=instruction;return void(("function"==typeof filter&&filter(source[sourceKey])||"function"!=typeof filter&&filter)&&(target[targetKey]=valueFn(source[sourceKey])))}let[filter,value]=instructions[targetKey];if("function"==typeof value){let _value;const defaultFilterPassed=void 0===filter&&null!=(_value=value()),customFilterPassed="function"==typeof filter&&!!filter(void 0)||"function"!=typeof filter&&!!filter;defaultFilterPassed?target[targetKey]=_value:customFilterPassed&&(target[targetKey]=value())}else{const defaultFilterPassed=void 0===filter&&null!=value,customFilterPassed="function"==typeof filter&&!!filter(value)||"function"!=typeof filter&&!!filter;(defaultFilterPassed||customFilterPassed)&&(target[targetKey]=value)}},nonNullish=_=>null!=_,pass=_=>_;function extendedEncodeURIComponent(str){return encodeURIComponent(str).replace(/[!'()*]/g,(function(c){return"%"+c.charCodeAt(0).toString(16).toUpperCase()}))}const _json=obj=>{if(null==obj)return{};if(Array.isArray(obj))return obj.filter((_=>null!=_)).map(_json);if("object"==typeof obj){const target={};for(const key of Object.keys(obj))null!=obj[key]&&(target[key]=_json(obj[key]));return target}return obj},isStreamingPayload=request=>request?.body instanceof ReadableStream,isRetryStrategyV2=retryStrategy=>void 0!==retryStrategy.acquireInitialRetryToken&&void 0!==retryStrategy.refreshRetryTokenForRetry&&void 0!==retryStrategy.recordSuccess,getRetryErrorInfo=error=>{const errorInfo={error,errorType:getRetryErrorType(error)},retryAfterHint=getRetryAfterHint(error.$response);return retryAfterHint&&(errorInfo.retryAfterHint=retryAfterHint),errorInfo},getRetryErrorType=error=>isThrottlingError(error)?"THROTTLING":isTransientError(error)?"TRANSIENT":(error=>{if(void 0!==error.$metadata?.httpStatusCode){const statusCode=error.$metadata.httpStatusCode;return 500<=statusCode&&statusCode<=599&&!isTransientError(error)}return!1})(error)?"SERVER_ERROR":"CLIENT_ERROR",retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},getRetryPlugin=options=>({applyToStack:clientStack=>{clientStack.add((options=>(next,context)=>async args=>{let retryStrategy=await options.retryStrategy();const maxAttempts=await options.maxAttempts();if(!isRetryStrategyV2(retryStrategy))return retryStrategy?.mode&&(context.userAgent=[...context.userAgent||[],["cfg/retry-mode",retryStrategy.mode]]),retryStrategy.retry(next,args);{let retryToken=await retryStrategy.acquireInitialRetryToken(context.partition_id),lastError=new Error,attempts=0,totalRetryDelay=0;const{request}=args,isRequest=httpRequest_HttpRequest.isInstance(request);for(isRequest&&(request.headers["amz-sdk-invocation-id"]=(0,v4.A)());;)try{isRequest&&(request.headers["amz-sdk-request"]=`attempt=${attempts+1}; max=${maxAttempts}`);const{response,output}=await next(args);return retryStrategy.recordSuccess(retryToken),output.$metadata.attempts=attempts+1,output.$metadata.totalRetryDelay=totalRetryDelay,{response,output}}catch(e){const retryErrorInfo=getRetryErrorInfo(e);if(lastError=asSdkError(e),isRequest&&isStreamingPayload(request))throw(context.logger instanceof NoOpLogger?console:context.logger)?.warn("An error was encountered in a non-retryable streaming request."),lastError;try{retryToken=await retryStrategy.refreshRetryTokenForRetry(retryToken,retryErrorInfo)}catch(refreshError){throw lastError.$metadata||(lastError.$metadata={}),lastError.$metadata.attempts=attempts+1,lastError.$metadata.totalRetryDelay=totalRetryDelay,lastError}attempts=retryToken.getRetryCount();const delay=retryToken.getRetryDelay();totalRetryDelay+=delay,await new Promise((resolve=>setTimeout(resolve,delay)))}}})(options),retryMiddlewareOptions)}}),getRetryAfterHint=response=>{if(!HttpResponse.isInstance(response))return;const retryAfterHeaderName=Object.keys(response.headers).find((key=>"retry-after"===key.toLowerCase()));if(!retryAfterHeaderName)return;const retryAfter=response.headers[retryAfterHeaderName],retryAfterSeconds=Number(retryAfter);if(!Number.isNaN(retryAfterSeconds))return new Date(1e3*retryAfterSeconds);return new Date(retryAfter)},httpSigningMiddlewareOptions={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:retryMiddlewareOptions.name},getHttpSigningPlugin=config=>({applyToStack:clientStack=>{clientStack.addRelativeTo(((next,context)=>async args=>{if(!httpRequest_HttpRequest.isInstance(args.request))return next(args);const scheme=getSmithyContext(context).selectedHttpAuthScheme;if(!scheme)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties={}},identity,signer}=scheme,output=await next({...args,request:await signer.sign(args.request,identity,signingProperties)}).catch((signer.errorHandler||defaultErrorHandler)(signingProperties));return(signer.successHandler||defaultSuccessHandler)(output.response,signingProperties),output}),httpSigningMiddlewareOptions)}});class DefaultIdentityProviderConfig{constructor(config){this.authSchemes=new Map;for(const[key,value]of Object.entries(config))void 0!==value&&this.authSchemes.set(key,value)}getIdentityProvider(schemeId){return this.authSchemes.get(schemeId)}}const isIdentityExpired=(expirationMs=3e5,identity=>doesIdentityRequireRefresh(identity)&&identity.expiration.getTime()-Date.now()<expirationMs);var expirationMs;const doesIdentityRequireRefresh=identity=>void 0!==identity.expiration,dist_es_normalizeProvider_normalizeProvider=input=>{if("function"==typeof input)return input;const promisified=Promise.resolve(input);return()=>promisified};function requestBuilder(input,context){return new RequestBuilder(input,context)}class RequestBuilder{constructor(input,context){this.input=input,this.context=context,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname,protocol="https",port,path:basePath}=await this.context.endpoint();this.path=basePath;for(const resolvePath of this.resolvePathStack)resolvePath(this.path);return new httpRequest_HttpRequest({protocol,hostname:this.hostname||hostname,port,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(hostname){return this.hostname=hostname,this}bp(uriLabel){return this.resolvePathStack.push((basePath=>{this.path=`${basePath?.endsWith("/")?basePath.slice(0,-1):basePath||""}`+uriLabel})),this}p(memberName,labelValueProvider,uriLabel,isGreedyLabel){return this.resolvePathStack.push((path=>{this.path=((resolvedPath,input,memberName,labelValueProvider,uriLabel,isGreedyLabel)=>{if(null==input||void 0===input[memberName])throw new Error("No value provided for input HTTP label: "+memberName+".");{const labelValue=labelValueProvider();if(labelValue.length<=0)throw new Error("Empty value provided for input HTTP label: "+memberName+".");resolvedPath=resolvedPath.replace(uriLabel,isGreedyLabel?labelValue.split("/").map((segment=>extendedEncodeURIComponent(segment))).join("/"):extendedEncodeURIComponent(labelValue))}return resolvedPath})(path,this.input,memberName,labelValueProvider,uriLabel,isGreedyLabel)})),this}h(headers){return this.headers=headers,this}q(query){return this.query=query,this}b(body){return this.body=body,this}m(method){return this.method=method,this}}const makePagedClientRequest=async(CommandCtor,client,input,...args)=>await client.send(new CommandCtor(input),...args);function createPaginator(ClientCtor,CommandCtor,inputTokenName,outputTokenName,pageSizeTokenName){return async function*paginateOperation(config,input,...additionalArguments){let page,token=config.startingToken||void 0,hasNext=!0;for(;hasNext;){if(input[inputTokenName]=token,pageSizeTokenName&&(input[pageSizeTokenName]=input[pageSizeTokenName]??config.pageSize),!(config.client instanceof ClientCtor))throw new Error(`Invalid client, expected instance of ${ClientCtor.name}`);page=await makePagedClientRequest(CommandCtor,config.client,input,...additionalArguments),yield page;const prevToken=token;token=get(page,outputTokenName),hasNext=!(!token||config.stopOnSameToken&&token===prevToken)}}}const get=(fromObject,path)=>{let cursor=fromObject;const pathComponents=path.split(".");for(const step of pathComponents){if(!cursor||"object"!=typeof cursor)return;cursor=cursor[step]}return cursor};const contentLengthMiddlewareOptions={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},getContentLengthPlugin=options=>({applyToStack:clientStack=>{clientStack.add(function contentLengthMiddleware(bodyLengthChecker){return next=>async args=>{const request=args.request;if(httpRequest_HttpRequest.isInstance(request)){const{body,headers}=request;if(body&&-1===Object.keys(headers).map((str=>str.toLowerCase())).indexOf("content-length"))try{const length=bodyLengthChecker(body);request.headers={...request.headers,"content-length":String(length)}}catch(error){}}return next({...args,request})}}(options.bodyLengthChecker),contentLengthMiddlewareOptions)}});__webpack_require__("./node_modules/@aws-crypto/crc32/build/index.js");const dist_es_SHORT_TO_HEX={},dist_es_HEX_TO_SHORT={};for(let i=0;i<256;i++){let encodedByte=i.toString(16).toLowerCase();1===encodedByte.length&&(encodedByte=`0${encodedByte}`),dist_es_SHORT_TO_HEX[i]=encodedByte,dist_es_HEX_TO_SHORT[encodedByte]=i}function util_hex_encoding_dist_es_toHex(bytes){let out="";for(let i=0;i<bytes.byteLength;i++)out+=dist_es_SHORT_TO_HEX[bytes[i]];return out}class Int64{constructor(bytes){if(this.bytes=bytes,8!==bytes.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(number){if(number>0x8000000000000000||number<-0x8000000000000000)throw new Error(`${number} is too large (or, if negative, too small) to represent as an Int64`);const bytes=new Uint8Array(8);for(let i=7,remaining=Math.abs(Math.round(number));i>-1&&remaining>0;i--,remaining/=256)bytes[i]=remaining;return number<0&&negate(bytes),new Int64(bytes)}valueOf(){const bytes=this.bytes.slice(0),negative=128&bytes[0];return negative&&negate(bytes),parseInt(util_hex_encoding_dist_es_toHex(bytes),16)*(negative?-1:1)}toString(){return String(this.valueOf())}}function negate(bytes){for(let i=0;i<8;i++)bytes[i]^=255;for(let i=7;i>-1&&(bytes[i]++,0===bytes[i]);i--);}class HeaderMarshaller_HeaderMarshaller{constructor(toUtf8,fromUtf8){this.toUtf8=toUtf8,this.fromUtf8=fromUtf8}format(headers){const chunks=[];for(const headerName of Object.keys(headers)){const bytes=this.fromUtf8(headerName);chunks.push(Uint8Array.from([bytes.byteLength]),bytes,this.formatHeaderValue(headers[headerName]))}const out=new Uint8Array(chunks.reduce(((carry,bytes)=>carry+bytes.byteLength),0));let position=0;for(const chunk of chunks)out.set(chunk,position),position+=chunk.byteLength;return out}formatHeaderValue(header){switch(header.type){case"boolean":return Uint8Array.from([header.value?0:1]);case"byte":return Uint8Array.from([2,header.value]);case"short":const shortView=new DataView(new ArrayBuffer(3));return shortView.setUint8(0,3),shortView.setInt16(1,header.value,!1),new Uint8Array(shortView.buffer);case"integer":const intView=new DataView(new ArrayBuffer(5));return intView.setUint8(0,4),intView.setInt32(1,header.value,!1),new Uint8Array(intView.buffer);case"long":const longBytes=new Uint8Array(9);return longBytes[0]=5,longBytes.set(header.value.bytes,1),longBytes;case"binary":const binView=new DataView(new ArrayBuffer(3+header.value.byteLength));binView.setUint8(0,6),binView.setUint16(1,header.value.byteLength,!1);const binBytes=new Uint8Array(binView.buffer);return binBytes.set(header.value,3),binBytes;case"string":const utf8Bytes=this.fromUtf8(header.value),strView=new DataView(new ArrayBuffer(3+utf8Bytes.byteLength));strView.setUint8(0,7),strView.setUint16(1,utf8Bytes.byteLength,!1);const strBytes=new Uint8Array(strView.buffer);return strBytes.set(utf8Bytes,3),strBytes;case"timestamp":const tsBytes=new Uint8Array(9);return tsBytes[0]=8,tsBytes.set(Int64.fromNumber(header.value.valueOf()).bytes,1),tsBytes;case"uuid":if(!UUID_PATTERN.test(header.value))throw new Error(`Invalid UUID received: ${header.value}`);const uuidBytes=new Uint8Array(17);return uuidBytes[0]=9,uuidBytes.set(function dist_es_fromHex(encoded){if(encoded.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const out=new Uint8Array(encoded.length/2);for(let i=0;i<encoded.length;i+=2){const encodedByte=encoded.slice(i,i+2).toLowerCase();if(!(encodedByte in dist_es_HEX_TO_SHORT))throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);out[i/2]=dist_es_HEX_TO_SHORT[encodedByte]}return out}(header.value.replace(/\-/g,"")),1),uuidBytes}}parse(headers){const out={};let position=0;for(;position<headers.byteLength;){const nameLength=headers.getUint8(position++),name=this.toUtf8(new Uint8Array(headers.buffer,headers.byteOffset+position,nameLength));switch(position+=nameLength,headers.getUint8(position++)){case 0:out[name]={type:BOOLEAN_TAG,value:!0};break;case 1:out[name]={type:BOOLEAN_TAG,value:!1};break;case 2:out[name]={type:BYTE_TAG,value:headers.getInt8(position++)};break;case 3:out[name]={type:SHORT_TAG,value:headers.getInt16(position,!1)},position+=2;break;case 4:out[name]={type:INT_TAG,value:headers.getInt32(position,!1)},position+=4;break;case 5:out[name]={type:LONG_TAG,value:new Int64(new Uint8Array(headers.buffer,headers.byteOffset+position,8))},position+=8;break;case 6:const binaryLength=headers.getUint16(position,!1);position+=2,out[name]={type:BINARY_TAG,value:new Uint8Array(headers.buffer,headers.byteOffset+position,binaryLength)},position+=binaryLength;break;case 7:const stringLength=headers.getUint16(position,!1);position+=2,out[name]={type:STRING_TAG,value:this.toUtf8(new Uint8Array(headers.buffer,headers.byteOffset+position,stringLength))},position+=stringLength;break;case 8:out[name]={type:TIMESTAMP_TAG,value:new Date(new Int64(new Uint8Array(headers.buffer,headers.byteOffset+position,8)).valueOf())},position+=8;break;case 9:const uuidBytes=new Uint8Array(headers.buffer,headers.byteOffset+position,16);position+=16,out[name]={type:UUID_TAG,value:`${util_hex_encoding_dist_es_toHex(uuidBytes.subarray(0,4))}-${util_hex_encoding_dist_es_toHex(uuidBytes.subarray(4,6))}-${util_hex_encoding_dist_es_toHex(uuidBytes.subarray(6,8))}-${util_hex_encoding_dist_es_toHex(uuidBytes.subarray(8,10))}-${util_hex_encoding_dist_es_toHex(uuidBytes.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return out}}var HEADER_VALUE_TYPE;!function(HEADER_VALUE_TYPE){HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.boolTrue=0]="boolTrue",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.boolFalse=1]="boolFalse",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.byte=2]="byte",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.short=3]="short",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.integer=4]="integer",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.long=5]="long",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.byteArray=6]="byteArray",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.string=7]="string",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.timestamp=8]="timestamp",HEADER_VALUE_TYPE[HEADER_VALUE_TYPE.uuid=9]="uuid"}(HEADER_VALUE_TYPE||(HEADER_VALUE_TYPE={}));const BOOLEAN_TAG="boolean",BYTE_TAG="byte",SHORT_TAG="short",INT_TAG="integer",LONG_TAG="long",BINARY_TAG="binary",STRING_TAG="string",TIMESTAMP_TAG="timestamp",UUID_TAG="uuid",UUID_PATTERN=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;Symbol.asyncIterator;Symbol.asyncIterator;Symbol.asyncIterator;Symbol.asyncIterator;const util_hex_encoding_dist_es_SHORT_TO_HEX={},util_hex_encoding_dist_es_HEX_TO_SHORT={};for(let i=0;i<256;i++){let encodedByte=i.toString(16).toLowerCase();1===encodedByte.length&&(encodedByte=`0${encodedByte}`),util_hex_encoding_dist_es_SHORT_TO_HEX[i]=encodedByte,util_hex_encoding_dist_es_HEX_TO_SHORT[encodedByte]=i}function _smithy_util_hex_encoding_dist_es_toHex(bytes){let out="";for(let i=0;i<bytes.byteLength;i++)out+=util_hex_encoding_dist_es_SHORT_TO_HEX[bytes[i]];return out}const toUint8Array=data=>"string"==typeof data?fromUtf8(data):ArrayBuffer.isView(data)?new Uint8Array(data.buffer,data.byteOffset,data.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(data),AMZ_DATE_HEADER="X-Amz-Date".toLowerCase(),GENERATED_HEADERS=["authorization",AMZ_DATE_HEADER,"date"],SIGNATURE_HEADER="X-Amz-Signature".toLowerCase(),TOKEN_HEADER="X-Amz-Security-Token".toLowerCase(),ALWAYS_UNSIGNABLE_HEADERS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},PROXY_HEADER_PATTERN=/^proxy-/,SEC_HEADER_PATTERN=/^sec-/,EVENT_ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256-PAYLOAD",signingKeyCache={},cacheQueue=[],createScope=(shortDate,region,service)=>`${shortDate}/${region}/${service}/aws4_request`,hmac=(ctor,secret,data)=>{const hash=new ctor(secret);return hash.update(toUint8Array(data)),hash.digest()},getCanonicalHeaders=({headers},unsignableHeaders,signableHeaders)=>{const canonical={};for(const headerName of Object.keys(headers).sort()){if(null==headers[headerName])continue;const canonicalHeaderName=headerName.toLowerCase();(canonicalHeaderName in ALWAYS_UNSIGNABLE_HEADERS||unsignableHeaders?.has(canonicalHeaderName)||PROXY_HEADER_PATTERN.test(canonicalHeaderName)||SEC_HEADER_PATTERN.test(canonicalHeaderName))&&(!signableHeaders||signableHeaders&&!signableHeaders.has(canonicalHeaderName))||(canonical[canonicalHeaderName]=headers[headerName].trim().replace(/\s+/g," "))}return canonical},getPayloadHash=async({headers,body},hashConstructor)=>{for(const headerName of Object.keys(headers))if("x-amz-content-sha256"===headerName.toLowerCase())return headers[headerName];if(null==body)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof body||ArrayBuffer.isView(body)||(arg=body,"function"==typeof ArrayBuffer&&arg instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(arg))){const hashCtor=new hashConstructor;return hashCtor.update(toUint8Array(body)),_smithy_util_hex_encoding_dist_es_toHex(await hashCtor.digest())}var arg;return"UNSIGNED-PAYLOAD"},cloneRequest=({headers,query,...rest})=>({...rest,headers:{...headers},query:query?cloneRequest_cloneQuery(query):void 0}),cloneRequest_cloneQuery=query=>Object.keys(query).reduce(((carry,paramName)=>{const param=query[paramName];return{...carry,[paramName]:Array.isArray(param)?[...param]:param}}),{}),prepareRequest=request=>{request="function"==typeof request.clone?request.clone():cloneRequest(request);for(const headerName of Object.keys(request.headers))GENERATED_HEADERS.indexOf(headerName.toLowerCase())>-1&&delete request.headers[headerName];return request},toDate=time=>"number"==typeof time?new Date(1e3*time):"string"==typeof time?Number(time)?new Date(1e3*Number(time)):new Date(time):time;class SignatureV4{constructor({applyChecksum,credentials,region,service,sha256,uriEscapePath=!0}){this.headerMarshaller=new HeaderMarshaller_HeaderMarshaller(toUtf8_browser_toUtf8,fromUtf8),this.service=service,this.sha256=sha256,this.uriEscapePath=uriEscapePath,this.applyChecksum="boolean"!=typeof applyChecksum||applyChecksum,this.regionProvider=normalizeProvider_normalizeProvider(region),this.credentialProvider=normalizeProvider_normalizeProvider(credentials)}async presign(originalRequest,options={}){const{signingDate=new Date,expiresIn=3600,unsignableHeaders,unhoistableHeaders,signableHeaders,signingRegion,signingService}=options,credentials=await this.credentialProvider();this.validateResolvedCredentials(credentials);const region=signingRegion??await this.regionProvider(),{longDate,shortDate}=formatDate(signingDate);if(expiresIn>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const scope=createScope(shortDate,region,signingService??this.service),request=((request,options={})=>{const{headers,query={}}="function"==typeof request.clone?request.clone():cloneRequest(request);for(const name of Object.keys(headers)){const lname=name.toLowerCase();"x-amz-"!==lname.slice(0,6)||options.unhoistableHeaders?.has(lname)||(query[name]=headers[name],delete headers[name])}return{...request,headers,query}})(prepareRequest(originalRequest),{unhoistableHeaders});credentials.sessionToken&&(request.query["X-Amz-Security-Token"]=credentials.sessionToken),request.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",request.query["X-Amz-Credential"]=`${credentials.accessKeyId}/${scope}`,request.query["X-Amz-Date"]=longDate,request.query["X-Amz-Expires"]=expiresIn.toString(10);const canonicalHeaders=getCanonicalHeaders(request,unsignableHeaders,signableHeaders);return request.query["X-Amz-SignedHeaders"]=getCanonicalHeaderList(canonicalHeaders),request.query["X-Amz-Signature"]=await this.getSignature(longDate,scope,this.getSigningKey(credentials,region,shortDate,signingService),this.createCanonicalRequest(request,canonicalHeaders,await getPayloadHash(originalRequest,this.sha256))),request}async sign(toSign,options){return"string"==typeof toSign?this.signString(toSign,options):toSign.headers&&toSign.payload?this.signEvent(toSign,options):toSign.message?this.signMessage(toSign,options):this.signRequest(toSign,options)}async signEvent({headers,payload},{signingDate=new Date,priorSignature,signingRegion,signingService}){const region=signingRegion??await this.regionProvider(),{shortDate,longDate}=formatDate(signingDate),scope=createScope(shortDate,region,signingService??this.service),hashedPayload=await getPayloadHash({headers:{},body:payload},this.sha256),hash=new this.sha256;hash.update(headers);const hashedHeaders=_smithy_util_hex_encoding_dist_es_toHex(await hash.digest()),stringToSign=[EVENT_ALGORITHM_IDENTIFIER,longDate,scope,priorSignature,hashedHeaders,hashedPayload].join("\n");return this.signString(stringToSign,{signingDate,signingRegion:region,signingService})}async signMessage(signableMessage,{signingDate=new Date,signingRegion,signingService}){return this.signEvent({headers:this.headerMarshaller.format(signableMessage.message.headers),payload:signableMessage.message.body},{signingDate,signingRegion,signingService,priorSignature:signableMessage.priorSignature}).then((signature=>({message:signableMessage.message,signature})))}async signString(stringToSign,{signingDate=new Date,signingRegion,signingService}={}){const credentials=await this.credentialProvider();this.validateResolvedCredentials(credentials);const region=signingRegion??await this.regionProvider(),{shortDate}=formatDate(signingDate),hash=new this.sha256(await this.getSigningKey(credentials,region,shortDate,signingService));return hash.update(toUint8Array(stringToSign)),_smithy_util_hex_encoding_dist_es_toHex(await hash.digest())}async signRequest(requestToSign,{signingDate=new Date,signableHeaders,unsignableHeaders,signingRegion,signingService}={}){const credentials=await this.credentialProvider();this.validateResolvedCredentials(credentials);const region=signingRegion??await this.regionProvider(),request=prepareRequest(requestToSign),{longDate,shortDate}=formatDate(signingDate),scope=createScope(shortDate,region,signingService??this.service);request.headers[AMZ_DATE_HEADER]=longDate,credentials.sessionToken&&(request.headers[TOKEN_HEADER]=credentials.sessionToken);const payloadHash=await getPayloadHash(request,this.sha256);!((soughtHeader,headers)=>{soughtHeader=soughtHeader.toLowerCase();for(const headerName of Object.keys(headers))if(soughtHeader===headerName.toLowerCase())return!0;return!1})("x-amz-content-sha256",request.headers)&&this.applyChecksum&&(request.headers["x-amz-content-sha256"]=payloadHash);const canonicalHeaders=getCanonicalHeaders(request,unsignableHeaders,signableHeaders),signature=await this.getSignature(longDate,scope,this.getSigningKey(credentials,region,shortDate,signingService),this.createCanonicalRequest(request,canonicalHeaders,payloadHash));return request.headers.authorization=`AWS4-HMAC-SHA256 Credential=${credentials.accessKeyId}/${scope}, SignedHeaders=${getCanonicalHeaderList(canonicalHeaders)}, Signature=${signature}`,request}createCanonicalRequest(request,canonicalHeaders,payloadHash){const sortedHeaders=Object.keys(canonicalHeaders).sort();return`${request.method}\n${this.getCanonicalPath(request)}\n${(({query={}})=>{const keys=[],serialized={};for(const key of Object.keys(query).sort()){if(key.toLowerCase()===SIGNATURE_HEADER)continue;keys.push(key);const value=query[key];"string"==typeof value?serialized[key]=`${escapeUri(key)}=${escapeUri(value)}`:Array.isArray(value)&&(serialized[key]=value.slice(0).reduce(((encoded,value)=>encoded.concat([`${escapeUri(key)}=${escapeUri(value)}`])),[]).sort().join("&"))}return keys.map((key=>serialized[key])).filter((serialized=>serialized)).join("&")})(request)}\n${sortedHeaders.map((name=>`${name}:${canonicalHeaders[name]}`)).join("\n")}\n\n${sortedHeaders.join(";")}\n${payloadHash}`}async createStringToSign(longDate,credentialScope,canonicalRequest){const hash=new this.sha256;hash.update(toUint8Array(canonicalRequest));return`AWS4-HMAC-SHA256\n${longDate}\n${credentialScope}\n${_smithy_util_hex_encoding_dist_es_toHex(await hash.digest())}`}getCanonicalPath({path}){if(this.uriEscapePath){const normalizedPathSegments=[];for(const pathSegment of path.split("/"))0!==pathSegment?.length&&"."!==pathSegment&&(".."===pathSegment?normalizedPathSegments.pop():normalizedPathSegments.push(pathSegment));const normalizedPath=`${path?.startsWith("/")?"/":""}${normalizedPathSegments.join("/")}${normalizedPathSegments.length>0&&path?.endsWith("/")?"/":""}`;return encodeURIComponent(normalizedPath).replace(/%2F/g,"/")}return path}async getSignature(longDate,credentialScope,keyPromise,canonicalRequest){const stringToSign=await this.createStringToSign(longDate,credentialScope,canonicalRequest),hash=new this.sha256(await keyPromise);return hash.update(toUint8Array(stringToSign)),_smithy_util_hex_encoding_dist_es_toHex(await hash.digest())}getSigningKey(credentials,region,shortDate,service){return(async(sha256Constructor,credentials,shortDate,region,service)=>{const cacheKey=`${shortDate}:${region}:${service}:${_smithy_util_hex_encoding_dist_es_toHex(await hmac(sha256Constructor,credentials.secretAccessKey,credentials.accessKeyId))}:${credentials.sessionToken}`;if(cacheKey in signingKeyCache)return signingKeyCache[cacheKey];for(cacheQueue.push(cacheKey);cacheQueue.length>50;)delete signingKeyCache[cacheQueue.shift()];let key=`AWS4${credentials.secretAccessKey}`;for(const signable of[shortDate,region,service,"aws4_request"])key=await hmac(sha256Constructor,key,signable);return signingKeyCache[cacheKey]=key})(this.sha256,credentials,shortDate,region,service||this.service)}validateResolvedCredentials(credentials){if("object"!=typeof credentials||"string"!=typeof credentials.accessKeyId||"string"!=typeof credentials.secretAccessKey)throw new Error("Resolved credential object is not valid")}}const formatDate=now=>{const longDate=(time=now,toDate(time).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");var time;return{longDate,shortDate:longDate.slice(0,8)}},getCanonicalHeaderList=headers=>Object.keys(headers).sort().join(";"),resolveAwsSdkSigV4Config=config=>{let normalizedCreds;config.credentials&&(normalizedCreds=((provider,isExpired,requiresRefresh)=>{if(void 0===provider)return;const normalizedProvider="function"!=typeof provider?async()=>Promise.resolve(provider):provider;let resolved,pending,hasResult,isConstant=!1;const coalesceProvider=async options=>{pending||(pending=normalizedProvider(options));try{resolved=await pending,hasResult=!0,isConstant=!1}finally{pending=void 0}return resolved};return void 0===isExpired?async options=>(hasResult&&!options?.forceRefresh||(resolved=await coalesceProvider(options)),resolved):async options=>(hasResult&&!options?.forceRefresh||(resolved=await coalesceProvider(options)),isConstant?resolved:requiresRefresh(resolved)?isExpired(resolved)?(await coalesceProvider(options),resolved):resolved:(isConstant=!0,resolved))})(config.credentials,isIdentityExpired,doesIdentityRequireRefresh)),normalizedCreds||(normalizedCreds=config.credentialDefaultProvider?dist_es_normalizeProvider_normalizeProvider(config.credentialDefaultProvider(Object.assign({},config,{parentClientConfig:config}))):async()=>{throw new Error("`credentials` is missing")});const{signingEscapePath=!0,systemClockOffset=config.systemClockOffset||0,sha256}=config;let signer;return signer=config.signer?dist_es_normalizeProvider_normalizeProvider(config.signer):config.regionInfoProvider?()=>dist_es_normalizeProvider_normalizeProvider(config.region)().then((async region=>[await config.regionInfoProvider(region,{useFipsEndpoint:await config.useFipsEndpoint(),useDualstackEndpoint:await config.useDualstackEndpoint()})||{},region])).then((([regionInfo,region])=>{const{signingRegion,signingService}=regionInfo;config.signingRegion=config.signingRegion||signingRegion||region,config.signingName=config.signingName||signingService||config.serviceId;const params={...config,credentials:normalizedCreds,region:config.signingRegion,service:config.signingName,sha256,uriEscapePath:signingEscapePath};return new(config.signerConstructor||SignatureV4)(params)})):async authScheme=>{const signingRegion=(authScheme=Object.assign({},{name:"sigv4",signingName:config.signingName||config.defaultSigningName,signingRegion:await dist_es_normalizeProvider_normalizeProvider(config.region)(),properties:{}},authScheme)).signingRegion,signingService=authScheme.signingName;config.signingRegion=config.signingRegion||signingRegion,config.signingName=config.signingName||signingService||config.serviceId;const params={...config,credentials:normalizedCreds,region:config.signingRegion,service:config.signingName,sha256,uriEscapePath:signingEscapePath};return new(config.signerConstructor||SignatureV4)(params)},{...config,systemClockOffset,signingEscapePath,credentials:normalizedCreds,signer}},defaultChimeSDKMessagingHttpAuthSchemeParametersProvider=async(config,context,input)=>({operation:getSmithyContext(context).operation,region:await normalizeProvider_normalizeProvider(config.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});const defaultChimeSDKMessagingHttpAuthSchemeProvider=authParameters=>{const options=[];return authParameters.operation,options.push(function createAwsAuthSigv4HttpAuthOption(authParameters){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"chime",region:authParameters.region},propertiesExtractor:(config,context)=>({signingProperties:{config,context}})}}(authParameters)),options},commonParams={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},package_namespaceObject_rE="3.525.0";var sha256_browser_build=__webpack_require__("./node_modules/@aws-crypto/sha256-browser/build/index.js"),es5=__webpack_require__("./node_modules/bowser/es5.js"),es5_default=__webpack_require__.n(es5);const defaultUserAgent=({serviceId,clientVersion})=>async()=>{const parsedUA="undefined"!=typeof window&&window?.navigator?.userAgent?es5_default().parse(window.navigator.userAgent):void 0,sections=[["aws-sdk-js",clientVersion],["ua","2.0"],[`os/${parsedUA?.os?.name||"other"}`,parsedUA?.os?.version],["lang/js"],["md/browser",`${parsedUA?.browser?.name??"unknown"}_${parsedUA?.browser?.version??"unknown"}`]];return serviceId&&sections.push([`api/${serviceId}`,clientVersion]),sections},TEXT_ENCODER="function"==typeof TextEncoder?new TextEncoder:null,calculateBodyLength=body=>{if("string"==typeof body){if(TEXT_ENCODER)return TEXT_ENCODER.encode(body).byteLength;let len=body.length;for(let i=len-1;i>=0;i--){const code=body.charCodeAt(i);code>127&&code<=2047?len++:code>2047&&code<=65535&&(len+=2),code>=56320&&code<=57343&&i--}return len}if("number"==typeof body.byteLength)return body.byteLength;if("number"==typeof body.size)return body.size;throw new Error(`Body Length computation failed for ${body}`)},getSkewCorrectedDate=systemClockOffset=>new Date(Date.now()+systemClockOffset),getDateHeader=response=>HttpResponse.isInstance(response)?response.headers?.date??response.headers?.Date:void 0,getUpdatedSystemClockOffset=(clockTime,currentSystemClockOffset)=>{const clockTimeInMs=Date.parse(clockTime);return((clockTime,systemClockOffset)=>Math.abs(getSkewCorrectedDate(systemClockOffset).getTime()-clockTime)>=3e5)(clockTimeInMs,currentSystemClockOffset)?clockTimeInMs-Date.now():currentSystemClockOffset},throwSigningPropertyError=(name,property)=>{if(!property)throw new Error(`Property \`${name}\` is not resolved for AWS SDK SigV4Auth`);return property};class AwsSdkSigV4Signer{async sign(httpRequest,identity,signingProperties){if(!httpRequest_HttpRequest.isInstance(httpRequest))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config,signer,signingRegion,signingName}=await(async signingProperties=>{const context=throwSigningPropertyError("context",signingProperties.context),config=throwSigningPropertyError("config",signingProperties.config),authScheme=context.endpointV2?.properties?.authSchemes?.[0],signerFunction=throwSigningPropertyError("signer",config.signer),signer=await signerFunction(authScheme),signingRegion=signingProperties?.signingRegion,signingName=signingProperties?.signingName;return{config,signer,signingRegion,signingName}})(signingProperties);return await signer.sign(httpRequest,{signingDate:getSkewCorrectedDate(config.systemClockOffset),signingRegion,signingService:signingName})}errorHandler(signingProperties){return error=>{const serverTime=error.ServerTime??getDateHeader(error.$response);if(serverTime){const config=throwSigningPropertyError("config",signingProperties.config),initialSystemClockOffset=config.systemClockOffset;config.systemClockOffset=getUpdatedSystemClockOffset(serverTime,config.systemClockOffset);config.systemClockOffset!==initialSystemClockOffset&&error.$metadata&&(error.$metadata.clockSkewCorrected=!0)}throw error}}successHandler(httpResponse,signingProperties){const dateHeader=getDateHeader(httpResponse);if(dateHeader){const config=throwSigningPropertyError("config",signingProperties.config);config.systemClockOffset=getUpdatedSystemClockOffset(dateHeader,config.systemClockOffset)}}}const s="required",t="fn",u="argv",v="ref",b="isSet",c="booleanEquals",d="error",e="endpoint",f="tree",g="PartitionResult",h={[s]:!1,type:"String"},i={[s]:!0,default:!1,type:"Boolean"},j={[v]:"Endpoint"},k={[t]:c,[u]:[{[v]:"UseFIPS"},!0]},l={[t]:c,[u]:[{[v]:"UseDualStack"},!0]},m={},n={[t]:"getAttr",[u]:[{[v]:g},"supportsFIPS"]},o={[t]:c,[u]:[!0,{[t]:"getAttr",[u]:[{[v]:g},"supportsDualStack"]}]},p=[k],q=[l],r=[{[v]:"Region"}],ruleSet={version:"1.0",parameters:{Region:h,UseDualStack:i,UseFIPS:i,Endpoint:h},rules:[{conditions:[{[t]:b,[u]:[j]}],rules:[{conditions:p,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:d},{conditions:q,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:d},{endpoint:{url:j,properties:m,headers:m},type:e}],type:f},{conditions:[{[t]:b,[u]:r}],rules:[{conditions:[{[t]:"aws.partition",[u]:r,assign:g}],rules:[{conditions:[k,l],rules:[{conditions:[{[t]:c,[u]:[true,n]},o],rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:m,headers:m},type:e}],type:f},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:d}],type:f},{conditions:p,rules:[{conditions:[{[t]:c,[u]:[n,true]}],rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:m,headers:m},type:e}],type:f},{error:"FIPS is enabled but this partition does not support FIPS",type:d}],type:f},{conditions:q,rules:[{conditions:[o],rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:m,headers:m},type:e}],type:f},{error:"DualStack is enabled but this partition does not support DualStack",type:d}],type:f},{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dnsSuffix}",properties:m,headers:m},type:e}],type:f}],type:f},{error:"Invalid Configuration: Missing Region",type:d}]},defaultEndpointResolver=(endpointParams,context={})=>((ruleSetObject,options)=>{const{endpointParams,logger}=options,{parameters,rules}=ruleSetObject;options.logger?.debug?.(`endpoints Initial EndpointParams: ${toDebugString(endpointParams)}`);const paramsWithDefault=Object.entries(parameters).filter((([,v])=>null!=v.default)).map((([k,v])=>[k,v.default]));if(paramsWithDefault.length>0)for(const[paramKey,paramDefaultValue]of paramsWithDefault)endpointParams[paramKey]=endpointParams[paramKey]??paramDefaultValue;const requiredParams=Object.entries(parameters).filter((([,v])=>v.required)).map((([k])=>k));for(const requiredParam of requiredParams)if(null==endpointParams[requiredParam])throw new EndpointError(`Missing required parameter: '${requiredParam}'`);const endpoint=evaluateRules(rules,{endpointParams,logger,referenceRecord:{}});if(options.endpointParams?.Endpoint)try{const givenEndpoint=new URL(options.endpointParams.Endpoint),{protocol,port}=givenEndpoint;endpoint.url.protocol=protocol,endpoint.url.port=port}catch(e){}return options.logger?.debug?.(`endpoints Resolved endpoint: ${toDebugString(endpoint)}`),endpoint})(ruleSet,{endpointParams,logger:context.logger});Error;const DEFAULTS_MODE_OPTIONS=["in-region","cross-region","mobile","standard","legacy"],isMobileBrowser=()=>{const parsedUA="undefined"!=typeof window&&window?.navigator?.userAgent?es5_default().parse(window.navigator.userAgent):void 0,platform=parsedUA?.platform?.type;return"tablet"===platform||"mobile"===platform},runtimeConfig_browser_getRuntimeConfig=config=>{const defaultsMode=(({defaultsMode}={})=>((provider,isExpired,requiresRefresh)=>{let resolved,pending,hasResult,isConstant=!1;const coalesceProvider=async()=>{pending||(pending=provider());try{resolved=await pending,hasResult=!0,isConstant=!1}finally{pending=void 0}return resolved};return void 0===isExpired?async options=>(hasResult&&!options?.forceRefresh||(resolved=await coalesceProvider()),resolved):async options=>(hasResult&&!options?.forceRefresh||(resolved=await coalesceProvider()),isConstant?resolved:requiresRefresh&&!requiresRefresh(resolved)?(isConstant=!0,resolved):isExpired(resolved)?(await coalesceProvider(),resolved):resolved)})((async()=>{const mode="function"==typeof defaultsMode?await defaultsMode():defaultsMode;switch(mode?.toLowerCase()){case"auto":return Promise.resolve(isMobileBrowser()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(mode?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${DEFAULTS_MODE_OPTIONS.join(", ")}, got ${mode}`)}})))(config),defaultConfigProvider=()=>defaultsMode().then(loadConfigsForDefaultMode),clientSharedValues=(config=>({apiVersion:"2021-05-15",base64Decoder:config?.base64Decoder??fromBase64,base64Encoder:config?.base64Encoder??toBase64_browser_toBase64,disableHostPrefix:config?.disableHostPrefix??!1,endpointProvider:config?.endpointProvider??defaultEndpointResolver,extensions:config?.extensions??[],httpAuthSchemeProvider:config?.httpAuthSchemeProvider??defaultChimeSDKMessagingHttpAuthSchemeProvider,httpAuthSchemes:config?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:ipc=>ipc.getIdentityProvider("aws.auth#sigv4"),signer:new AwsSdkSigV4Signer}],logger:config?.logger??new NoOpLogger,serviceId:config?.serviceId??"Chime SDK Messaging",urlParser:config?.urlParser??parseUrl,utf8Decoder:config?.utf8Decoder??fromUtf8,utf8Encoder:config?.utf8Encoder??toUtf8_browser_toUtf8}))(config);return{...clientSharedValues,...config,runtime:"browser",defaultsMode,bodyLengthChecker:config?.bodyLengthChecker??calculateBodyLength,credentialDefaultProvider:config?.credentialDefaultProvider??(_=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:config?.defaultUserAgentProvider??defaultUserAgent({serviceId:clientSharedValues.serviceId,clientVersion:package_namespaceObject_rE}),maxAttempts:config?.maxAttempts??3,region:config?.region??(message="Region is missing",()=>Promise.reject(message)),requestHandler:FetchHttpHandler.create(config?.requestHandler??defaultConfigProvider),retryMode:config?.retryMode??(async()=>(await defaultConfigProvider()).retryMode||DEFAULT_RETRY_MODE),sha256:config?.sha256??sha256_browser_build.Sha256,streamCollector:config?.streamCollector??stream_collector_streamCollector,useDualstackEndpoint:config?.useDualstackEndpoint??(()=>Promise.resolve(false)),useFipsEndpoint:config?.useFipsEndpoint??(()=>Promise.resolve(false))};var message},getAwsRegionExtensionConfiguration=runtimeConfig=>{let runtimeConfigRegion=async()=>{if(void 0===runtimeConfig.region)throw new Error("Region is missing from runtimeConfig");const region=runtimeConfig.region;return"string"==typeof region?region:region()};return{setRegion(region){runtimeConfigRegion=region},region:()=>runtimeConfigRegion}},getHttpAuthExtensionConfiguration=runtimeConfig=>{const _httpAuthSchemes=runtimeConfig.httpAuthSchemes;let _httpAuthSchemeProvider=runtimeConfig.httpAuthSchemeProvider,_credentials=runtimeConfig.credentials;return{setHttpAuthScheme(httpAuthScheme){const index=_httpAuthSchemes.findIndex((scheme=>scheme.schemeId===httpAuthScheme.schemeId));-1===index?_httpAuthSchemes.push(httpAuthScheme):_httpAuthSchemes.splice(index,1,httpAuthScheme)},httpAuthSchemes:()=>_httpAuthSchemes,setHttpAuthSchemeProvider(httpAuthSchemeProvider){_httpAuthSchemeProvider=httpAuthSchemeProvider},httpAuthSchemeProvider:()=>_httpAuthSchemeProvider,setCredentials(credentials){_credentials=credentials},credentials:()=>_credentials}},resolveHttpAuthRuntimeConfig=config=>({httpAuthSchemes:config.httpAuthSchemes(),httpAuthSchemeProvider:config.httpAuthSchemeProvider(),credentials:config.credentials()});class ChimeSDKMessagingClient extends Client{constructor(...[configuration]){const _config_0=runtimeConfig_browser_getRuntimeConfig(configuration||{});var options;const _config_6=function resolveUserAgentConfig(input){return{...input,customUserAgent:"string"==typeof input.customUserAgent?[[input.customUserAgent]]:input.customUserAgent}}((input=>{const{retryStrategy}=input,maxAttempts=normalizeProvider_normalizeProvider(input.maxAttempts??3);return{...input,maxAttempts,retryStrategy:async()=>retryStrategy||(await normalizeProvider_normalizeProvider(input.retryMode)()===RETRY_MODES.ADAPTIVE?new AdaptiveRetryStrategy(maxAttempts):new StandardRetryStrategy(maxAttempts))}})((input=>{const tls=input.tls??!0,{endpoint}=input,customEndpointProvider=null!=endpoint?async()=>toEndpointV1(await normalizeProvider_normalizeProvider(endpoint)()):void 0,isCustomEndpoint=!!endpoint;return{...input,endpoint:customEndpointProvider,tls,isCustomEndpoint,useDualstackEndpoint:normalizeProvider_normalizeProvider(input.useDualstackEndpoint??!1),useFipsEndpoint:normalizeProvider_normalizeProvider(input.useFipsEndpoint??!1)}})((input=>{const{region,useFipsEndpoint}=input;if(!region)throw new Error("Region is missing");return{...input,region:async()=>{if("string"==typeof region)return getRealRegion(region);const providedRegion=await region();return getRealRegion(providedRegion)},useFipsEndpoint:async()=>{const providedRegion="string"==typeof region?region:await region();return!!isFipsRegion(providedRegion)||("function"!=typeof useFipsEndpoint?Promise.resolve(!!useFipsEndpoint):useFipsEndpoint())}}})((options=_config_0,{...options,useDualstackEndpoint:options.useDualstackEndpoint??!1,useFipsEndpoint:options.useFipsEndpoint??!1,defaultSigningName:"chime"})))));const _config_8=((runtimeConfig,extensions)=>{const extensionConfiguration={...getAwsRegionExtensionConfiguration(runtimeConfig),...getDefaultExtensionConfiguration(runtimeConfig),...getHttpHandlerExtensionConfiguration(runtimeConfig),...getHttpAuthExtensionConfiguration(runtimeConfig)};return extensions.forEach((extension=>extension.configure(extensionConfiguration))),{...runtimeConfig,...(awsRegionExtensionConfiguration=extensionConfiguration,{region:awsRegionExtensionConfiguration.region()}),...(config=extensionConfiguration,{...extensions_checksum_resolveChecksumRuntimeConfig(config),...resolveRetryRuntimeConfig(config)}),...(httpHandlerExtensionConfiguration=extensionConfiguration,{httpHandler:httpHandlerExtensionConfiguration.httpHandler()}),...resolveHttpAuthRuntimeConfig(extensionConfiguration)};var httpHandlerExtensionConfiguration,config,awsRegionExtensionConfiguration})({...resolveAwsSdkSigV4Config(_config_6)},configuration?.extensions||[]);super(_config_8),this.config=_config_8,this.middlewareStack.use(getRetryPlugin(this.config)),this.middlewareStack.use(getContentLengthPlugin(this.config)),this.middlewareStack.use(getHostHeaderPlugin(this.config)),this.middlewareStack.use((this.config,{applyToStack:clientStack=>{clientStack.add(((next,context)=>async args=>{try{const response=await next(args),{clientName,commandName,logger,dynamoDbDocumentClientOptions={}}=context,{overrideInputFilterSensitiveLog,overrideOutputFilterSensitiveLog}=dynamoDbDocumentClientOptions,inputFilterSensitiveLog=overrideInputFilterSensitiveLog??context.inputFilterSensitiveLog,outputFilterSensitiveLog=overrideOutputFilterSensitiveLog??context.outputFilterSensitiveLog,{$metadata,...outputWithoutMetadata}=response.output;return logger?.info?.({clientName,commandName,input:inputFilterSensitiveLog(args.input),output:outputFilterSensitiveLog(outputWithoutMetadata),metadata:$metadata}),response}catch(error){const{clientName,commandName,logger,dynamoDbDocumentClientOptions={}}=context,{overrideInputFilterSensitiveLog}=dynamoDbDocumentClientOptions,inputFilterSensitiveLog=overrideInputFilterSensitiveLog??context.inputFilterSensitiveLog;throw logger?.error?.({clientName,commandName,input:inputFilterSensitiveLog(args.input),error,metadata:error.$metadata}),error}}),loggerMiddlewareOptions)}})),this.middlewareStack.use(getRecursionDetectionPlugin(this.config)),this.middlewareStack.use((config=>({applyToStack:clientStack=>{clientStack.add(userAgentMiddleware(config),getUserAgentMiddlewareOptions)}}))(this.config)),this.middlewareStack.use(((config,{httpAuthSchemeParametersProvider,identityProviderConfigProvider})=>({applyToStack:clientStack=>{clientStack.addRelativeTo(httpAuthSchemeMiddleware_httpAuthSchemeMiddleware(config,{httpAuthSchemeParametersProvider,identityProviderConfigProvider}),httpAuthSchemeEndpointRuleSetMiddlewareOptions)}}))(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use(getHttpSigningPlugin(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return defaultChimeSDKMessagingHttpAuthSchemeParametersProvider}getIdentityProviderConfigProvider(){return async config=>new DefaultIdentityProviderConfig({"aws.auth#sigv4":config.credentials})}}const esm_browser_native={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(arr,offset=0){return byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]}const esm_browser_v4=function v4_v4(options,buf,offset){if(esm_browser_native.randomUUID&&!buf&&!options)return esm_browser_native.randomUUID();const rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return unsafeStringify(rnds)};class ChimeSDKMessagingServiceException extends ServiceException{constructor(options){super(options),Object.setPrototypeOf(this,ChimeSDKMessagingServiceException.prototype)}}const AllowNotifications={ALL:"ALL",FILTERED:"FILTERED",NONE:"NONE"},ChannelMembershipType={DEFAULT:"DEFAULT",HIDDEN:"HIDDEN"},ErrorCode={AccessDenied:"AccessDenied",BadRequest:"BadRequest",Conflict:"Conflict",Forbidden:"Forbidden",NotFound:"NotFound",PhoneNumberAssociationsExist:"PhoneNumberAssociationsExist",PreconditionFailed:"PreconditionFailed",ResourceLimitExceeded:"ResourceLimitExceeded",ServiceFailure:"ServiceFailure",ServiceUnavailable:"ServiceUnavailable",Throttled:"Throttled",Throttling:"Throttling",Unauthorized:"Unauthorized",Unprocessable:"Unprocessable",VoiceConnectorGroupAssociationsExist:"VoiceConnectorGroupAssociationsExist"};class BadRequestException extends ChimeSDKMessagingServiceException{constructor(opts){super({name:"BadRequestException",$fault:"client",...opts}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,BadRequestException.prototype),this.Code=opts.Code,this.Message=opts.Message}}class ConflictException extends ChimeSDKMessagingServiceException{constructor(opts){super({name:"ConflictException",$fault:"client",...opts}),this.name="ConflictException",this.$fault="client",Object.setPrototypeOf(this,ConflictException.prototype),this.Code=opts.Code,this.Message=opts.Message}}class ForbiddenException extends ChimeSDKMessagingServiceException{constructor(opts){super({name:"ForbiddenException",$fault:"client",...opts}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,ForbiddenException.prototype),this.Code=opts.Code,this.Message=opts.Message}}class NotFoundException extends ChimeSDKMessagingServiceException{constructor(opts){super({name:"NotFoundException",$fault:"client",...opts}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,NotFoundException.prototype),this.Code=opts.Code,this.Message=opts.Message}}class ServiceFailureException extends ChimeSDKMessagingServiceException{constructor(opts){super({name:"ServiceFailureException",$fault:"server",...opts}),this.name="ServiceFailureException",this.$fault="server",Object.setPrototypeOf(this,ServiceFailureException.prototype),this.Code=opts.Code,this.Message=opts.Message}}class ServiceUnavailableException extends ChimeSDKMessagingServiceException{constructor(opts){super({name:"ServiceUnavailableException",$fault:"server",...opts}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,ServiceUnavailableException.prototype),this.Code=opts.Code,this.Message=opts.Message}}class ThrottledClientException extends ChimeSDKMessagingServiceException{constructor(opts){super({name:"ThrottledClientException",$fault:"client",...opts}),this.name="ThrottledClientException",this.$fault="client",Object.setPrototypeOf(this,ThrottledClientException.prototype),this.Code=opts.Code,this.Message=opts.Message}}class UnauthorizedClientException extends ChimeSDKMessagingServiceException{constructor(opts){super({name:"UnauthorizedClientException",$fault:"client",...opts}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,UnauthorizedClientException.prototype),this.Code=opts.Code,this.Message=opts.Message}}class ResourceLimitExceededException extends ChimeSDKMessagingServiceException{constructor(opts){super({name:"ResourceLimitExceededException",$fault:"client",...opts}),this.name="ResourceLimitExceededException",this.$fault="client",Object.setPrototypeOf(this,ResourceLimitExceededException.prototype),this.Code=opts.Code,this.Message=opts.Message}}const ExpirationCriterion={CREATED_TIMESTAMP:"CREATED_TIMESTAMP",LAST_MESSAGE_TIMESTAMP:"LAST_MESSAGE_TIMESTAMP"},ChannelMode={RESTRICTED:"RESTRICTED",UNRESTRICTED:"UNRESTRICTED"},ChannelPrivacy={PRIVATE:"PRIVATE",PUBLIC:"PUBLIC"},InvocationType={ASYNC:"ASYNC"},FallbackAction={ABORT:"ABORT",CONTINUE:"CONTINUE"},PushNotificationType={DEFAULT:"DEFAULT",VOIP:"VOIP"},ChannelMessagePersistenceType={NON_PERSISTENT:"NON_PERSISTENT",PERSISTENT:"PERSISTENT"},ChannelMessageStatus={DENIED:"DENIED",FAILED:"FAILED",PENDING:"PENDING",SENT:"SENT"},ChannelMessageType={CONTROL:"CONTROL",STANDARD:"STANDARD"},MessagingDataType={Channel:"Channel",ChannelMessage:"ChannelMessage"},SortOrder={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},SearchFieldKey={MEMBERS:"MEMBERS"},SearchFieldOperator={EQUALS:"EQUALS",INCLUDES:"INCLUDES"},IdentityFilterSensitiveLog=obj=>({...obj,...obj.Name&&{Name:SENSITIVE_STRING}}),BatchChannelMembershipsFilterSensitiveLog=obj=>({...obj,...obj.InvitedBy&&{InvitedBy:IdentityFilterSensitiveLog(obj.InvitedBy)},...obj.Members&&{Members:obj.Members.map((item=>IdentityFilterSensitiveLog(item)))}}),BatchCreateChannelMembershipResponseFilterSensitiveLog=obj=>({...obj,...obj.BatchChannelMemberships&&{BatchChannelMemberships:BatchChannelMembershipsFilterSensitiveLog(obj.BatchChannelMemberships)}}),ChannelFilterSensitiveLog=obj=>({...obj,...obj.Name&&{Name:SENSITIVE_STRING},...obj.Metadata&&{Metadata:SENSITIVE_STRING},...obj.CreatedBy&&{CreatedBy:IdentityFilterSensitiveLog(obj.CreatedBy)}}),ChannelAssociatedWithFlowSummaryFilterSensitiveLog=obj=>({...obj,...obj.Name&&{Name:SENSITIVE_STRING},...obj.Metadata&&{Metadata:SENSITIVE_STRING}}),ChannelBanFilterSensitiveLog=obj=>({...obj,...obj.Member&&{Member:IdentityFilterSensitiveLog(obj.Member)},...obj.CreatedBy&&{CreatedBy:IdentityFilterSensitiveLog(obj.CreatedBy)}}),ChannelBanSummaryFilterSensitiveLog=obj=>({...obj,...obj.Member&&{Member:IdentityFilterSensitiveLog(obj.Member)}}),ProcessorFilterSensitiveLog=obj=>({...obj,...obj.Name&&{Name:SENSITIVE_STRING}}),ChannelFlowFilterSensitiveLog=obj=>({...obj,...obj.Processors&&{Processors:obj.Processors.map((item=>ProcessorFilterSensitiveLog(item)))},...obj.Name&&{Name:SENSITIVE_STRING}}),MessageAttributeValueFilterSensitiveLog=obj=>({...obj,...obj.StringValues&&{StringValues:SENSITIVE_STRING}}),PushNotificationConfigurationFilterSensitiveLog=obj=>({...obj,...obj.Title&&{Title:SENSITIVE_STRING},...obj.Body&&{Body:SENSITIVE_STRING}}),ChannelMessageCallbackFilterSensitiveLog=obj=>({...obj,...obj.Content&&{Content:SENSITIVE_STRING},...obj.Metadata&&{Metadata:SENSITIVE_STRING},...obj.PushNotification&&{PushNotification:PushNotificationConfigurationFilterSensitiveLog(obj.PushNotification)},...obj.MessageAttributes&&{MessageAttributes:Object.entries(obj.MessageAttributes).reduce(((acc,[key,value])=>(acc[key]=MessageAttributeValueFilterSensitiveLog(value),acc)),{})},...obj.ContentType&&{ContentType:SENSITIVE_STRING}}),ChannelFlowCallbackRequestFilterSensitiveLog=obj=>({...obj,...obj.ChannelMessage&&{ChannelMessage:ChannelMessageCallbackFilterSensitiveLog(obj.ChannelMessage)}}),ChannelFlowSummaryFilterSensitiveLog=obj=>({...obj,...obj.Name&&{Name:SENSITIVE_STRING},...obj.Processors&&{Processors:obj.Processors.map((item=>ProcessorFilterSensitiveLog(item)))}}),ChannelMembershipFilterSensitiveLog=obj=>({...obj,...obj.InvitedBy&&{InvitedBy:IdentityFilterSensitiveLog(obj.InvitedBy)},...obj.Member&&{Member:IdentityFilterSensitiveLog(obj.Member)}}),ChannelSummaryFilterSensitiveLog=obj=>({...obj,...obj.Name&&{Name:SENSITIVE_STRING},...obj.Metadata&&{Metadata:SENSITIVE_STRING}}),ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog=obj=>({...obj,...obj.ChannelSummary&&{ChannelSummary:ChannelSummaryFilterSensitiveLog(obj.ChannelSummary)}}),PushNotificationPreferencesFilterSensitiveLog=obj=>({...obj,...obj.FilterRule&&{FilterRule:SENSITIVE_STRING}}),ChannelMembershipPreferencesFilterSensitiveLog=obj=>({...obj,...obj.PushNotifications&&{PushNotifications:PushNotificationPreferencesFilterSensitiveLog(obj.PushNotifications)}}),ChannelMembershipSummaryFilterSensitiveLog=obj=>({...obj,...obj.Member&&{Member:IdentityFilterSensitiveLog(obj.Member)}}),ChannelMessageFilterSensitiveLog=obj=>({...obj,...obj.Content&&{Content:SENSITIVE_STRING},...obj.Metadata&&{Metadata:SENSITIVE_STRING},...obj.Sender&&{Sender:IdentityFilterSensitiveLog(obj.Sender)},...obj.MessageAttributes&&{MessageAttributes:Object.entries(obj.MessageAttributes).reduce(((acc,[key,value])=>(acc[key]=MessageAttributeValueFilterSensitiveLog(value),acc)),{})},...obj.ContentType&&{ContentType:SENSITIVE_STRING}}),ChannelMessageSummaryFilterSensitiveLog=obj=>({...obj,...obj.Content&&{Content:SENSITIVE_STRING},...obj.Metadata&&{Metadata:SENSITIVE_STRING},...obj.Sender&&{Sender:IdentityFilterSensitiveLog(obj.Sender)},...obj.MessageAttributes&&{MessageAttributes:Object.entries(obj.MessageAttributes).reduce(((acc,[key,value])=>(acc[key]=MessageAttributeValueFilterSensitiveLog(value),acc)),{})},...obj.ContentType&&{ContentType:SENSITIVE_STRING}}),ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog=obj=>({...obj,...obj.ChannelSummary&&{ChannelSummary:ChannelSummaryFilterSensitiveLog(obj.ChannelSummary)}}),ChannelModeratorFilterSensitiveLog=obj=>({...obj,...obj.Moderator&&{Moderator:IdentityFilterSensitiveLog(obj.Moderator)},...obj.CreatedBy&&{CreatedBy:IdentityFilterSensitiveLog(obj.CreatedBy)}}),ChannelModeratorSummaryFilterSensitiveLog=obj=>({...obj,...obj.Moderator&&{Moderator:IdentityFilterSensitiveLog(obj.Moderator)}}),TagFilterSensitiveLog=obj=>({...obj,...obj.Key&&{Key:SENSITIVE_STRING},...obj.Value&&{Value:SENSITIVE_STRING}}),CreateChannelRequestFilterSensitiveLog=obj=>({...obj,...obj.Name&&{Name:SENSITIVE_STRING},...obj.Metadata&&{Metadata:SENSITIVE_STRING},...obj.ClientRequestToken&&{ClientRequestToken:SENSITIVE_STRING},...obj.Tags&&{Tags:obj.Tags.map((item=>TagFilterSensitiveLog(item)))},...obj.ChannelId&&{ChannelId:SENSITIVE_STRING}}),CreateChannelBanResponseFilterSensitiveLog=obj=>({...obj,...obj.Member&&{Member:IdentityFilterSensitiveLog(obj.Member)}}),CreateChannelFlowRequestFilterSensitiveLog=obj=>({...obj,...obj.Processors&&{Processors:obj.Processors.map((item=>ProcessorFilterSensitiveLog(item)))},...obj.Name&&{Name:SENSITIVE_STRING},...obj.Tags&&{Tags:obj.Tags.map((item=>TagFilterSensitiveLog(item)))},...obj.ClientRequestToken&&{ClientRequestToken:SENSITIVE_STRING}}),CreateChannelMembershipResponseFilterSensitiveLog=obj=>({...obj,...obj.Member&&{Member:IdentityFilterSensitiveLog(obj.Member)}}),CreateChannelModeratorResponseFilterSensitiveLog=obj=>({...obj,...obj.ChannelModerator&&{ChannelModerator:IdentityFilterSensitiveLog(obj.ChannelModerator)}}),DescribeChannelResponseFilterSensitiveLog=obj=>({...obj,...obj.Channel&&{Channel:ChannelFilterSensitiveLog(obj.Channel)}}),DescribeChannelBanResponseFilterSensitiveLog=obj=>({...obj,...obj.ChannelBan&&{ChannelBan:ChannelBanFilterSensitiveLog(obj.ChannelBan)}}),DescribeChannelFlowResponseFilterSensitiveLog=obj=>({...obj,...obj.ChannelFlow&&{ChannelFlow:ChannelFlowFilterSensitiveLog(obj.ChannelFlow)}}),DescribeChannelMembershipResponseFilterSensitiveLog=obj=>({...obj,...obj.ChannelMembership&&{ChannelMembership:ChannelMembershipFilterSensitiveLog(obj.ChannelMembership)}}),DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog=obj=>({...obj,...obj.ChannelMembership&&{ChannelMembership:ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog(obj.ChannelMembership)}}),DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog=obj=>({...obj,...obj.Channel&&{Channel:ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog(obj.Channel)}}),DescribeChannelModeratorResponseFilterSensitiveLog=obj=>({...obj,...obj.ChannelModerator&&{ChannelModerator:ChannelModeratorFilterSensitiveLog(obj.ChannelModerator)}}),GetChannelMembershipPreferencesResponseFilterSensitiveLog=obj=>({...obj,...obj.Member&&{Member:IdentityFilterSensitiveLog(obj.Member)},...obj.Preferences&&{Preferences:ChannelMembershipPreferencesFilterSensitiveLog(obj.Preferences)}}),GetChannelMessageResponseFilterSensitiveLog=obj=>({...obj,...obj.ChannelMessage&&{ChannelMessage:ChannelMessageFilterSensitiveLog(obj.ChannelMessage)}}),ListChannelBansRequestFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelBansResponseFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING},...obj.ChannelBans&&{ChannelBans:obj.ChannelBans.map((item=>ChannelBanSummaryFilterSensitiveLog(item)))}}),ListChannelFlowsRequestFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelFlowsResponseFilterSensitiveLog=obj=>({...obj,...obj.ChannelFlows&&{ChannelFlows:obj.ChannelFlows.map((item=>ChannelFlowSummaryFilterSensitiveLog(item)))},...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelMembershipsRequestFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelMembershipsResponseFilterSensitiveLog=obj=>({...obj,...obj.ChannelMemberships&&{ChannelMemberships:obj.ChannelMemberships.map((item=>ChannelMembershipSummaryFilterSensitiveLog(item)))},...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog=obj=>({...obj,...obj.ChannelMemberships&&{ChannelMemberships:obj.ChannelMemberships.map((item=>ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog(item)))},...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelMessagesRequestFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelMessagesResponseFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING},...obj.ChannelMessages&&{ChannelMessages:obj.ChannelMessages.map((item=>ChannelMessageSummaryFilterSensitiveLog(item)))}}),ListChannelModeratorsRequestFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelModeratorsResponseFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING},...obj.ChannelModerators&&{ChannelModerators:obj.ChannelModerators.map((item=>ChannelModeratorSummaryFilterSensitiveLog(item)))}}),ListChannelsRequestFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelsResponseFilterSensitiveLog=obj=>({...obj,...obj.Channels&&{Channels:obj.Channels.map((item=>ChannelSummaryFilterSensitiveLog(item)))},...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog=obj=>({...obj,...obj.Channels&&{Channels:obj.Channels.map((item=>ChannelAssociatedWithFlowSummaryFilterSensitiveLog(item)))},...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog=obj=>({...obj,...obj.Channels&&{Channels:obj.Channels.map((item=>ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog(item)))},...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListSubChannelsRequestFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListSubChannelsResponseFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),ListTagsForResourceResponseFilterSensitiveLog=obj=>({...obj,...obj.Tags&&{Tags:obj.Tags.map((item=>TagFilterSensitiveLog(item)))}}),PutChannelMembershipPreferencesRequestFilterSensitiveLog=obj=>({...obj,...obj.Preferences&&{Preferences:ChannelMembershipPreferencesFilterSensitiveLog(obj.Preferences)}}),PutChannelMembershipPreferencesResponseFilterSensitiveLog=obj=>({...obj,...obj.Member&&{Member:IdentityFilterSensitiveLog(obj.Member)},...obj.Preferences&&{Preferences:ChannelMembershipPreferencesFilterSensitiveLog(obj.Preferences)}}),SearchChannelsRequestFilterSensitiveLog=obj=>({...obj,...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),SearchChannelsResponseFilterSensitiveLog=obj=>({...obj,...obj.Channels&&{Channels:obj.Channels.map((item=>ChannelSummaryFilterSensitiveLog(item)))},...obj.NextToken&&{NextToken:SENSITIVE_STRING}}),SendChannelMessageRequestFilterSensitiveLog=obj=>({...obj,...obj.Content&&{Content:SENSITIVE_STRING},...obj.Metadata&&{Metadata:SENSITIVE_STRING},...obj.ClientRequestToken&&{ClientRequestToken:SENSITIVE_STRING},...obj.PushNotification&&{PushNotification:PushNotificationConfigurationFilterSensitiveLog(obj.PushNotification)},...obj.MessageAttributes&&{MessageAttributes:Object.entries(obj.MessageAttributes).reduce(((acc,[key,value])=>(acc[key]=MessageAttributeValueFilterSensitiveLog(value),acc)),{})},...obj.ContentType&&{ContentType:SENSITIVE_STRING}}),TagResourceRequestFilterSensitiveLog=obj=>({...obj,...obj.Tags&&{Tags:obj.Tags.map((item=>TagFilterSensitiveLog(item)))}}),UntagResourceRequestFilterSensitiveLog=obj=>({...obj,...obj.TagKeys&&{TagKeys:SENSITIVE_STRING}}),UpdateChannelRequestFilterSensitiveLog=obj=>({...obj,...obj.Name&&{Name:SENSITIVE_STRING},...obj.Metadata&&{Metadata:SENSITIVE_STRING}}),UpdateChannelFlowRequestFilterSensitiveLog=obj=>({...obj,...obj.Processors&&{Processors:obj.Processors.map((item=>ProcessorFilterSensitiveLog(item)))},...obj.Name&&{Name:SENSITIVE_STRING}}),UpdateChannelMessageRequestFilterSensitiveLog=obj=>({...obj,...obj.Content&&{Content:SENSITIVE_STRING},...obj.Metadata&&{Metadata:SENSITIVE_STRING},...obj.ContentType&&{ContentType:SENSITIVE_STRING}}),se_AssociateChannelFlowCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});let body;return b.bp("/channels/{ChannelArn}/channel-flow"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),body=JSON.stringify(take(input,{ChannelFlowArn:[]})),b.m("PUT").h(headers).b(body),b.build()},se_BatchCreateChannelMembershipCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/memberships"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1);const query=map({[_o]:[,"batch-create"]});let body;return body=JSON.stringify(take(input,{MemberArns:_=>_json(_),SubChannelId:[],Type:[]})),b.m("POST").h(headers).q(query).b(body),b.build()},se_ChannelFlowCallbackCommand=async(input,context)=>{const b=requestBuilder(input,context);b.bp("/channels/{ChannelArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1);const query=map({[_o]:[,"channel-flow-callback"]});let body;return body=JSON.stringify(take(input,{CallbackId:[!0,_=>_??esm_browser_v4()],ChannelMessage:_=>_json(_),DeleteResource:[]})),b.m("POST").h({"content-type":"application/json"}).q(query).b(body),b.build()},se_CreateChannelCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});let body;return b.bp("/channels"),body=JSON.stringify(take(input,{AppInstanceArn:[],ChannelId:[],ClientRequestToken:[!0,_=>_??esm_browser_v4()],ElasticChannelConfiguration:_=>_json(_),ExpirationSettings:_=>_json(_),MemberArns:_=>_json(_),Metadata:[],Mode:[],ModeratorArns:_=>_json(_),Name:[],Privacy:[],Tags:_=>_json(_)})),b.m("POST").h(headers).b(body),b.build()},se_CreateChannelBanCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});let body;return b.bp("/channels/{ChannelArn}/bans"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),body=JSON.stringify(take(input,{MemberArn:[]})),b.m("POST").h(headers).b(body),b.build()},se_CreateChannelFlowCommand=async(input,context)=>{const b=requestBuilder(input,context);let body;return b.bp("/channel-flows"),body=JSON.stringify(take(input,{AppInstanceArn:[],ClientRequestToken:[!0,_=>_??esm_browser_v4()],Name:[],Processors:_=>_json(_),Tags:_=>_json(_)})),b.m("POST").h({"content-type":"application/json"}).b(body),b.build()},se_CreateChannelMembershipCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});let body;return b.bp("/channels/{ChannelArn}/memberships"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),body=JSON.stringify(take(input,{MemberArn:[],SubChannelId:[],Type:[]})),b.m("POST").h(headers).b(body),b.build()},se_CreateChannelModeratorCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});let body;return b.bp("/channels/{ChannelArn}/moderators"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),body=JSON.stringify(take(input,{ChannelModeratorArn:[]})),b.m("POST").h(headers).b(body),b.build()},se_DeleteChannelCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});return b.bp("/channels/{ChannelArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.m("DELETE").h(headers).b(undefined),b.build()},se_DeleteChannelBanCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});return b.bp("/channels/{ChannelArn}/bans/{MemberArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("MemberArn",(()=>input.MemberArn),"{MemberArn}",!1),b.m("DELETE").h(headers).b(undefined),b.build()},se_DeleteChannelFlowCommand=async(input,context)=>{const b=requestBuilder(input,context);return b.bp("/channel-flows/{ChannelFlowArn}"),b.p("ChannelFlowArn",(()=>input.ChannelFlowArn),"{ChannelFlowArn}",!1),b.m("DELETE").h({}).b(undefined),b.build()},se_DeleteChannelMembershipCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/memberships/{MemberArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("MemberArn",(()=>input.MemberArn),"{MemberArn}",!1);const query=map({[_sci]:[,input[_SCI]]});return b.m("DELETE").h(headers).q(query).b(undefined),b.build()},se_DeleteChannelMessageCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/messages/{MessageId}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("MessageId",(()=>input.MessageId),"{MessageId}",!1);const query=map({[_sci]:[,input[_SCI]]});return b.m("DELETE").h(headers).q(query).b(undefined),b.build()},se_DeleteChannelModeratorCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});return b.bp("/channels/{ChannelArn}/moderators/{ChannelModeratorArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("ChannelModeratorArn",(()=>input.ChannelModeratorArn),"{ChannelModeratorArn}",!1),b.m("DELETE").h(headers).b(undefined),b.build()},se_DeleteMessagingStreamingConfigurationsCommand=async(input,context)=>{const b=requestBuilder(input,context);return b.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),b.p("AppInstanceArn",(()=>input.AppInstanceArn),"{AppInstanceArn}",!1),b.m("DELETE").h({}).b(undefined),b.build()},se_DescribeChannelCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});return b.bp("/channels/{ChannelArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.m("GET").h(headers).b(undefined),b.build()},se_DescribeChannelBanCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});return b.bp("/channels/{ChannelArn}/bans/{MemberArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("MemberArn",(()=>input.MemberArn),"{MemberArn}",!1),b.m("GET").h(headers).b(undefined),b.build()},se_DescribeChannelFlowCommand=async(input,context)=>{const b=requestBuilder(input,context);return b.bp("/channel-flows/{ChannelFlowArn}"),b.p("ChannelFlowArn",(()=>input.ChannelFlowArn),"{ChannelFlowArn}",!1),b.m("GET").h({}).b(undefined),b.build()},se_DescribeChannelMembershipCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/memberships/{MemberArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("MemberArn",(()=>input.MemberArn),"{MemberArn}",!1);const query=map({[_sci]:[,input[_SCI]]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_DescribeChannelMembershipForAppInstanceUserCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1);const query=map({[_s]:[,"app-instance-user-membership"],[_aiua]:[,expectNonNull(input[_AIUA],"AppInstanceUserArn")]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_DescribeChannelModeratedByAppInstanceUserCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1);const query=map({[_s]:[,"app-instance-user-moderated-channel"],[_aiua]:[,expectNonNull(input[_AIUA],"AppInstanceUserArn")]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_DescribeChannelModeratorCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});return b.bp("/channels/{ChannelArn}/moderators/{ChannelModeratorArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("ChannelModeratorArn",(()=>input.ChannelModeratorArn),"{ChannelModeratorArn}",!1),b.m("GET").h(headers).b(undefined),b.build()},se_DisassociateChannelFlowCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});return b.bp("/channels/{ChannelArn}/channel-flow/{ChannelFlowArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("ChannelFlowArn",(()=>input.ChannelFlowArn),"{ChannelFlowArn}",!1),b.m("DELETE").h(headers).b(undefined),b.build()},se_GetChannelMembershipPreferencesCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});return b.bp("/channels/{ChannelArn}/memberships/{MemberArn}/preferences"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("MemberArn",(()=>input.MemberArn),"{MemberArn}",!1),b.m("GET").h(headers).b(undefined),b.build()},se_GetChannelMessageCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/messages/{MessageId}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("MessageId",(()=>input.MessageId),"{MessageId}",!1);const query=map({[_sci]:[,input[_SCI]]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_GetChannelMessageStatusCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/messages/{MessageId}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("MessageId",(()=>input.MessageId),"{MessageId}",!1);const query=map({[_s]:[,"message-status"],[_sci]:[,input[_SCI]]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_GetMessagingSessionEndpointCommand=async(input,context)=>{const b=requestBuilder(input,context);let body;return b.bp("/endpoints/messaging-session"),body="",b.m("GET").h({"content-type":"application/json"}).b(""),b.build()},se_GetMessagingStreamingConfigurationsCommand=async(input,context)=>{const b=requestBuilder(input,context);return b.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),b.p("AppInstanceArn",(()=>input.AppInstanceArn),"{AppInstanceArn}",!1),b.m("GET").h({}).b(undefined),b.build()},se_ListChannelBansCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/bans"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1);const query=map({[_mr]:[()=>void 0!==input.MaxResults,()=>input[_MR].toString()],[_nt]:[,input[_NT]]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_ListChannelFlowsCommand=async(input,context)=>{const b=requestBuilder(input,context);b.bp("/channel-flows");const query=map({[_aia]:[,expectNonNull(input[_AIA],"AppInstanceArn")],[_mr]:[()=>void 0!==input.MaxResults,()=>input[_MR].toString()],[_nt]:[,input[_NT]]});return b.m("GET").h({}).q(query).b(undefined),b.build()},se_ListChannelMembershipsCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/memberships"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1);const query=map({[_t]:[,input[_T]],[_mr]:[()=>void 0!==input.MaxResults,()=>input[_MR].toString()],[_nt]:[,input[_NT]],[_sci]:[,input[_SCI]]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_ListChannelMembershipsForAppInstanceUserCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels");const query=map({[_s]:[,"app-instance-user-memberships"],[_aiua]:[,input[_AIUA]],[_mr]:[()=>void 0!==input.MaxResults,()=>input[_MR].toString()],[_nt]:[,input[_NT]]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_ListChannelMessagesCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/messages"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1);const query=map({[_so]:[,input[_SO]],[_nb]:[()=>void 0!==input.NotBefore,()=>(input[_NB].toISOString().split(".")[0]+"Z").toString()],[_na]:[()=>void 0!==input.NotAfter,()=>(input[_NA].toISOString().split(".")[0]+"Z").toString()],[_mr]:[()=>void 0!==input.MaxResults,()=>input[_MR].toString()],[_nt]:[,input[_NT]],[_sci]:[,input[_SCI]]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_ListChannelModeratorsCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/moderators"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1);const query=map({[_mr]:[()=>void 0!==input.MaxResults,()=>input[_MR].toString()],[_nt]:[,input[_NT]]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_ListChannelsCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels");const query=map({[_aia]:[,expectNonNull(input[_AIA],"AppInstanceArn")],[_p]:[,input[_P]],[_mr]:[()=>void 0!==input.MaxResults,()=>input[_MR].toString()],[_nt]:[,input[_NT]]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_ListChannelsAssociatedWithChannelFlowCommand=async(input,context)=>{const b=requestBuilder(input,context);b.bp("/channels");const query=map({[_s]:[,"channel-flow-associations"],[_cfa]:[,expectNonNull(input[_CFA],"ChannelFlowArn")],[_mr]:[()=>void 0!==input.MaxResults,()=>input[_MR].toString()],[_nt]:[,input[_NT]]});return b.m("GET").h({}).q(query).b(undefined),b.build()},se_ListChannelsModeratedByAppInstanceUserCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels");const query=map({[_s]:[,"app-instance-user-moderated-channels"],[_aiua]:[,input[_AIUA]],[_mr]:[()=>void 0!==input.MaxResults,()=>input[_MR].toString()],[_nt]:[,input[_NT]]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_ListSubChannelsCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/subchannels"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1);const query=map({[_mr]:[()=>void 0!==input.MaxResults,()=>input[_MR].toString()],[_nt]:[,input[_NT]]});return b.m("GET").h(headers).q(query).b(undefined),b.build()},se_ListTagsForResourceCommand=async(input,context)=>{const b=requestBuilder(input,context);b.bp("/tags");const query=map({[_a]:[,expectNonNull(input[_RARN],"ResourceARN")]});return b.m("GET").h({}).q(query).b(undefined),b.build()},se_PutChannelExpirationSettingsCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});let body;return b.bp("/channels/{ChannelArn}/expiration-settings"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),body=JSON.stringify(take(input,{ExpirationSettings:_=>_json(_)})),b.m("PUT").h(headers).b(body),b.build()},se_PutChannelMembershipPreferencesCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});let body;return b.bp("/channels/{ChannelArn}/memberships/{MemberArn}/preferences"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("MemberArn",(()=>input.MemberArn),"{MemberArn}",!1),body=JSON.stringify(take(input,{Preferences:_=>_json(_)})),b.m("PUT").h(headers).b(body),b.build()},se_PutMessagingStreamingConfigurationsCommand=async(input,context)=>{const b=requestBuilder(input,context);let body;return b.bp("/app-instances/{AppInstanceArn}/streaming-configurations"),b.p("AppInstanceArn",(()=>input.AppInstanceArn),"{AppInstanceArn}",!1),body=JSON.stringify(take(input,{StreamingConfigurations:_=>_json(_)})),b.m("PUT").h({"content-type":"application/json"}).b(body),b.build()},se_RedactChannelMessageCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});b.bp("/channels/{ChannelArn}/messages/{MessageId}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("MessageId",(()=>input.MessageId),"{MessageId}",!1);const query=map({[_o]:[,"redact"]});let body;return body=JSON.stringify(take(input,{SubChannelId:[]})),b.m("POST").h(headers).q(query).b(body),b.build()},se_SearchChannelsCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});b.bp("/channels");const query=map({[_o]:[,"search"],[_mr]:[()=>void 0!==input.MaxResults,()=>input[_MR].toString()],[_nt]:[,input[_NT]]});let body;return body=JSON.stringify(take(input,{Fields:_=>_json(_)})),b.m("POST").h(headers).q(query).b(body),b.build()},se_SendChannelMessageCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});let body;return b.bp("/channels/{ChannelArn}/messages"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),body=JSON.stringify(take(input,{ClientRequestToken:[!0,_=>_??esm_browser_v4()],Content:[],ContentType:[],MessageAttributes:_=>_json(_),Metadata:[],Persistence:[],PushNotification:_=>_json(_),SubChannelId:[],Target:_=>_json(_),Type:[]})),b.m("POST").h(headers).b(body),b.build()},se_TagResourceCommand=async(input,context)=>{const b=requestBuilder(input,context);b.bp("/tags");const query=map({[_o]:[,"tag-resource"]});let body;return body=JSON.stringify(take(input,{ResourceARN:[],Tags:_=>_json(_)})),b.m("POST").h({"content-type":"application/json"}).q(query).b(body),b.build()},se_UntagResourceCommand=async(input,context)=>{const b=requestBuilder(input,context);b.bp("/tags");const query=map({[_o]:[,"untag-resource"]});let body;return body=JSON.stringify(take(input,{ResourceARN:[],TagKeys:_=>_json(_)})),b.m("POST").h({"content-type":"application/json"}).q(query).b(body),b.build()},se_UpdateChannelCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});let body;return b.bp("/channels/{ChannelArn}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),body=JSON.stringify(take(input,{Metadata:[],Mode:[],Name:[]})),b.m("PUT").h(headers).b(body),b.build()},se_UpdateChannelFlowCommand=async(input,context)=>{const b=requestBuilder(input,context);let body;return b.bp("/channel-flows/{ChannelFlowArn}"),b.p("ChannelFlowArn",(()=>input.ChannelFlowArn),"{ChannelFlowArn}",!1),body=JSON.stringify(take(input,{Name:[],Processors:_=>_json(_)})),b.m("PUT").h({"content-type":"application/json"}).b(body),b.build()},se_UpdateChannelMessageCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{"content-type":"application/json",[_xacb]:input[_CB]});let body;return b.bp("/channels/{ChannelArn}/messages/{MessageId}"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.p("MessageId",(()=>input.MessageId),"{MessageId}",!1),body=JSON.stringify(take(input,{Content:[],ContentType:[],Metadata:[],SubChannelId:[]})),b.m("PUT").h(headers).b(body),b.build()},se_UpdateChannelReadMarkerCommand=async(input,context)=>{const b=requestBuilder(input,context),headers=map({},isSerializableHeaderValue,{[_xacb]:input[_CB]});return b.bp("/channels/{ChannelArn}/readMarker"),b.p("ChannelArn",(()=>input.ChannelArn),"{ChannelArn}",!1),b.m("PUT").h(headers).b(undefined),b.build()},de_AssociateChannelFlowCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)});return await collectBody(output.body,context),contents},de_BatchCreateChannelMembershipCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{BatchChannelMemberships:_json,Errors:_json});return Object.assign(contents,doc),contents},de_ChannelFlowCallbackCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{CallbackId:expectString,ChannelArn:expectString});return Object.assign(contents,doc),contents},de_CreateChannelCommand=async(output,context)=>{if(201!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString});return Object.assign(contents,doc),contents},de_CreateChannelBanCommand=async(output,context)=>{if(201!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,Member:_json});return Object.assign(contents,doc),contents},de_CreateChannelFlowCommand=async(output,context)=>{if(201!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelFlowArn:expectString});return Object.assign(contents,doc),contents},de_CreateChannelMembershipCommand=async(output,context)=>{if(201!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,Member:_json,SubChannelId:expectString});return Object.assign(contents,doc),contents},de_CreateChannelModeratorCommand=async(output,context)=>{if(201!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,ChannelModerator:_json});return Object.assign(contents,doc),contents},de_DeleteChannelCommand=async(output,context)=>{if(204!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)});return await collectBody(output.body,context),contents},de_DeleteChannelBanCommand=async(output,context)=>{if(204!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)});return await collectBody(output.body,context),contents},de_DeleteChannelFlowCommand=async(output,context)=>{if(204!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)});return await collectBody(output.body,context),contents},de_DeleteChannelMembershipCommand=async(output,context)=>{if(204!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)});return await collectBody(output.body,context),contents},de_DeleteChannelMessageCommand=async(output,context)=>{if(204!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)});return await collectBody(output.body,context),contents},de_DeleteChannelModeratorCommand=async(output,context)=>{if(204!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)});return await collectBody(output.body,context),contents},de_DeleteMessagingStreamingConfigurationsCommand=async(output,context)=>{if(204!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)});return await collectBody(output.body,context),contents},de_DescribeChannelCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{Channel:_=>de_Channel(_,context)});return Object.assign(contents,doc),contents},de_DescribeChannelBanCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelBan:_=>de_ChannelBan(_,context)});return Object.assign(contents,doc),contents},de_DescribeChannelFlowCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelFlow:_=>de_ChannelFlow(_,context)});return Object.assign(contents,doc),contents},de_DescribeChannelMembershipCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelMembership:_=>de_ChannelMembership(_,context)});return Object.assign(contents,doc),contents},de_DescribeChannelMembershipForAppInstanceUserCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelMembership:_=>de_ChannelMembershipForAppInstanceUserSummary(_,context)});return Object.assign(contents,doc),contents},de_DescribeChannelModeratedByAppInstanceUserCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{Channel:_=>de_ChannelModeratedByAppInstanceUserSummary(_,context)});return Object.assign(contents,doc),contents},de_DescribeChannelModeratorCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelModerator:_=>de_ChannelModerator(_,context)});return Object.assign(contents,doc),contents},de_DisassociateChannelFlowCommand=async(output,context)=>{if(204!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)});return await collectBody(output.body,context),contents},de_GetChannelMembershipPreferencesCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,Member:_json,Preferences:_json});return Object.assign(contents,doc),contents},de_GetChannelMessageCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelMessage:_=>de_ChannelMessage(_,context)});return Object.assign(contents,doc),contents},de_GetChannelMessageStatusCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{Status:_json});return Object.assign(contents,doc),contents},de_GetMessagingSessionEndpointCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{Endpoint:_json});return Object.assign(contents,doc),contents},de_GetMessagingStreamingConfigurationsCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{StreamingConfigurations:_json});return Object.assign(contents,doc),contents},de_ListChannelBansCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,ChannelBans:_json,NextToken:expectString});return Object.assign(contents,doc),contents},de_ListChannelFlowsCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelFlows:_json,NextToken:expectString});return Object.assign(contents,doc),contents},de_ListChannelMembershipsCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,ChannelMemberships:_json,NextToken:expectString});return Object.assign(contents,doc),contents},de_ListChannelMembershipsForAppInstanceUserCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelMemberships:_=>de_ChannelMembershipForAppInstanceUserSummaryList(_,context),NextToken:expectString});return Object.assign(contents,doc),contents},de_ListChannelMessagesCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,ChannelMessages:_=>de_ChannelMessageSummaryList(_,context),NextToken:expectString,SubChannelId:expectString});return Object.assign(contents,doc),contents},de_ListChannelModeratorsCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,ChannelModerators:_json,NextToken:expectString});return Object.assign(contents,doc),contents},de_ListChannelsCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{Channels:_=>de_ChannelSummaryList(_,context),NextToken:expectString});return Object.assign(contents,doc),contents},de_ListChannelsAssociatedWithChannelFlowCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{Channels:_json,NextToken:expectString});return Object.assign(contents,doc),contents},de_ListChannelsModeratedByAppInstanceUserCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{Channels:_=>de_ChannelModeratedByAppInstanceUserSummaryList(_,context),NextToken:expectString});return Object.assign(contents,doc),contents},de_ListSubChannelsCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,NextToken:expectString,SubChannels:_json});return Object.assign(contents,doc),contents},de_ListTagsForResourceCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{Tags:_json});return Object.assign(contents,doc),contents},de_PutChannelExpirationSettingsCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,ExpirationSettings:_json});return Object.assign(contents,doc),contents},de_PutChannelMembershipPreferencesCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,Member:_json,Preferences:_json});return Object.assign(contents,doc),contents},de_PutMessagingStreamingConfigurationsCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{StreamingConfigurations:_json});return Object.assign(contents,doc),contents},de_RedactChannelMessageCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,MessageId:expectString,SubChannelId:expectString});return Object.assign(contents,doc),contents},de_SearchChannelsCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{Channels:_=>de_ChannelSummaryList(_,context),NextToken:expectString});return Object.assign(contents,doc),contents},de_SendChannelMessageCommand=async(output,context)=>{if(201!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,MessageId:expectString,Status:_json,SubChannelId:expectString});return Object.assign(contents,doc),contents},de_TagResourceCommand=async(output,context)=>{if(204!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)});return await collectBody(output.body,context),contents},de_UntagResourceCommand=async(output,context)=>{if(204!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)});return await collectBody(output.body,context),contents},de_UpdateChannelCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString});return Object.assign(contents,doc),contents},de_UpdateChannelFlowCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelFlowArn:expectString});return Object.assign(contents,doc),contents},de_UpdateChannelMessageCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString,MessageId:expectString,Status:_json,SubChannelId:expectString});return Object.assign(contents,doc),contents},de_UpdateChannelReadMarkerCommand=async(output,context)=>{if(200!==output.statusCode&&output.statusCode>=300)return de_CommandError(output,context);const contents=map({$metadata:Aws_restJson1_deserializeMetadata(output)}),data=expectNonNull(expectObject(await parseBody(output.body,context)),"body"),doc=take(data,{ChannelArn:expectString});return Object.assign(contents,doc),contents},de_CommandError=async(output,context)=>{const parsedOutput={...output,body:await parseErrorBody(output.body,context)},errorCode=loadRestJsonErrorCode(output,parsedOutput.body);switch(errorCode){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw await de_BadRequestExceptionRes(parsedOutput,context);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw await de_ConflictExceptionRes(parsedOutput,context);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw await de_ForbiddenExceptionRes(parsedOutput,context);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw await de_NotFoundExceptionRes(parsedOutput,context);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw await de_ServiceFailureExceptionRes(parsedOutput,context);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw await de_ServiceUnavailableExceptionRes(parsedOutput,context);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw await de_ThrottledClientExceptionRes(parsedOutput,context);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw await de_UnauthorizedClientExceptionRes(parsedOutput,context);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw await de_ResourceLimitExceededExceptionRes(parsedOutput,context);default:const parsedBody=parsedOutput.body;return Aws_restJson1_throwDefaultError({output,parsedBody,errorCode})}},Aws_restJson1_throwDefaultError=(ExceptionCtor=ChimeSDKMessagingServiceException,({output,parsedBody,errorCode})=>{(({output,parsedBody,exceptionCtor,errorCode})=>{const $metadata=deserializeMetadata(output),statusCode=$metadata.httpStatusCode?$metadata.httpStatusCode+"":void 0,response=new exceptionCtor({name:parsedBody?.code||parsedBody?.Code||errorCode||statusCode||"UnknownError",$fault:"client",$metadata});throw decorateServiceException(response,parsedBody)})({output,parsedBody,exceptionCtor:ExceptionCtor,errorCode})});var ExceptionCtor;const de_BadRequestExceptionRes=async(parsedOutput,context)=>{const contents=map({}),data=parsedOutput.body,doc=take(data,{Code:expectString,Message:expectString});Object.assign(contents,doc);const exception=new BadRequestException({$metadata:Aws_restJson1_deserializeMetadata(parsedOutput),...contents});return decorateServiceException(exception,parsedOutput.body)},de_ConflictExceptionRes=async(parsedOutput,context)=>{const contents=map({}),data=parsedOutput.body,doc=take(data,{Code:expectString,Message:expectString});Object.assign(contents,doc);const exception=new ConflictException({$metadata:Aws_restJson1_deserializeMetadata(parsedOutput),...contents});return decorateServiceException(exception,parsedOutput.body)},de_ForbiddenExceptionRes=async(parsedOutput,context)=>{const contents=map({}),data=parsedOutput.body,doc=take(data,{Code:expectString,Message:expectString});Object.assign(contents,doc);const exception=new ForbiddenException({$metadata:Aws_restJson1_deserializeMetadata(parsedOutput),...contents});return decorateServiceException(exception,parsedOutput.body)},de_NotFoundExceptionRes=async(parsedOutput,context)=>{const contents=map({}),data=parsedOutput.body,doc=take(data,{Code:expectString,Message:expectString});Object.assign(contents,doc);const exception=new NotFoundException({$metadata:Aws_restJson1_deserializeMetadata(parsedOutput),...contents});return decorateServiceException(exception,parsedOutput.body)},de_ResourceLimitExceededExceptionRes=async(parsedOutput,context)=>{const contents=map({}),data=parsedOutput.body,doc=take(data,{Code:expectString,Message:expectString});Object.assign(contents,doc);const exception=new ResourceLimitExceededException({$metadata:Aws_restJson1_deserializeMetadata(parsedOutput),...contents});return decorateServiceException(exception,parsedOutput.body)},de_ServiceFailureExceptionRes=async(parsedOutput,context)=>{const contents=map({}),data=parsedOutput.body,doc=take(data,{Code:expectString,Message:expectString});Object.assign(contents,doc);const exception=new ServiceFailureException({$metadata:Aws_restJson1_deserializeMetadata(parsedOutput),...contents});return decorateServiceException(exception,parsedOutput.body)},de_ServiceUnavailableExceptionRes=async(parsedOutput,context)=>{const contents=map({}),data=parsedOutput.body,doc=take(data,{Code:expectString,Message:expectString});Object.assign(contents,doc);const exception=new ServiceUnavailableException({$metadata:Aws_restJson1_deserializeMetadata(parsedOutput),...contents});return decorateServiceException(exception,parsedOutput.body)},de_ThrottledClientExceptionRes=async(parsedOutput,context)=>{const contents=map({}),data=parsedOutput.body,doc=take(data,{Code:expectString,Message:expectString});Object.assign(contents,doc);const exception=new ThrottledClientException({$metadata:Aws_restJson1_deserializeMetadata(parsedOutput),...contents});return decorateServiceException(exception,parsedOutput.body)},de_UnauthorizedClientExceptionRes=async(parsedOutput,context)=>{const contents=map({}),data=parsedOutput.body,doc=take(data,{Code:expectString,Message:expectString});Object.assign(contents,doc);const exception=new UnauthorizedClientException({$metadata:Aws_restJson1_deserializeMetadata(parsedOutput),...contents});return decorateServiceException(exception,parsedOutput.body)},de_Channel=(output,context)=>take(output,{ChannelArn:expectString,ChannelFlowArn:expectString,CreatedBy:_json,CreatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),ElasticChannelConfiguration:_json,ExpirationSettings:_json,LastMessageTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),LastUpdatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),Metadata:expectString,Mode:expectString,Name:expectString,Privacy:expectString}),de_ChannelBan=(output,context)=>take(output,{ChannelArn:expectString,CreatedBy:_json,CreatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),Member:_json}),de_ChannelFlow=(output,context)=>take(output,{ChannelFlowArn:expectString,CreatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),LastUpdatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),Name:expectString,Processors:_json}),de_ChannelMembership=(output,context)=>take(output,{ChannelArn:expectString,CreatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),InvitedBy:_json,LastUpdatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),Member:_json,SubChannelId:expectString,Type:expectString}),de_ChannelMembershipForAppInstanceUserSummary=(output,context)=>take(output,{AppInstanceUserMembershipSummary:_=>((output,context)=>take(output,{ReadMarkerTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),SubChannelId:expectString,Type:expectString}))(_),ChannelSummary:_=>de_ChannelSummary(_,context)}),de_ChannelMembershipForAppInstanceUserSummaryList=(output,context)=>{const retVal=(output||[]).filter((e=>null!=e)).map((entry=>de_ChannelMembershipForAppInstanceUserSummary(entry,context)));return retVal},de_ChannelMessage=(output,context)=>take(output,{ChannelArn:expectString,Content:expectString,ContentType:expectString,CreatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),LastEditedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),LastUpdatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),MessageAttributes:_json,MessageId:expectString,Metadata:expectString,Persistence:expectString,Redacted:expectBoolean,Sender:_json,Status:_json,SubChannelId:expectString,Target:_json,Type:expectString}),de_ChannelMessageSummaryList=(output,context)=>{const retVal=(output||[]).filter((e=>null!=e)).map((entry=>((output,context)=>take(output,{Content:expectString,ContentType:expectString,CreatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),LastEditedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),LastUpdatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),MessageAttributes:_json,MessageId:expectString,Metadata:expectString,Redacted:expectBoolean,Sender:_json,Status:_json,Target:_json,Type:expectString}))(entry)));return retVal},de_ChannelModeratedByAppInstanceUserSummary=(output,context)=>take(output,{ChannelSummary:_=>de_ChannelSummary(_,context)}),de_ChannelModeratedByAppInstanceUserSummaryList=(output,context)=>{const retVal=(output||[]).filter((e=>null!=e)).map((entry=>de_ChannelModeratedByAppInstanceUserSummary(entry,context)));return retVal},de_ChannelModerator=(output,context)=>take(output,{ChannelArn:expectString,CreatedBy:_json,CreatedTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),Moderator:_json}),de_ChannelSummary=(output,context)=>take(output,{ChannelArn:expectString,LastMessageTimestamp:_=>expectNonNull(parseEpochTimestamp(expectNumber(_))),Metadata:expectString,Mode:expectString,Name:expectString,Privacy:expectString}),de_ChannelSummaryList=(output,context)=>{const retVal=(output||[]).filter((e=>null!=e)).map((entry=>de_ChannelSummary(entry,context)));return retVal},Aws_restJson1_deserializeMetadata=output=>({httpStatusCode:output.statusCode,requestId:output.headers["x-amzn-requestid"]??output.headers["x-amzn-request-id"]??output.headers["x-amz-request-id"],extendedRequestId:output.headers["x-amz-id-2"],cfId:output.headers["x-amz-cf-id"]}),isSerializableHeaderValue=value=>!(null==value||""===value||Object.getOwnPropertyNames(value).includes("length")&&0==value.length||Object.getOwnPropertyNames(value).includes("size")&&0==value.size),_AIA="AppInstanceArn",_AIUA="AppInstanceUserArn",_CB="ChimeBearer",_CFA="ChannelFlowArn",_MR="MaxResults",_NA="NotAfter",_NB="NotBefore",_NT="NextToken",_P="Privacy",_RARN="ResourceARN",_SCI="SubChannelId",_SO="SortOrder",_T="Type",_a="arn",_aia="app-instance-arn",_aiua="app-instance-user-arn",_cfa="channel-flow-arn",_mr="max-results",_na="not-after",_nb="not-before",_nt="next-token",_o="operation",_p="privacy",_s="scope",_sci="sub-channel-id",_so="sort-order",_t="type",_xacb="x-amz-chime-bearer",parseBody=(streamBody,context)=>((streamBody,context)=>collectBody(streamBody,context).then((body=>context.utf8Encoder(body))))(streamBody,context).then((encoded=>encoded.length?JSON.parse(encoded):{})),parseErrorBody=async(errorBody,context)=>{const value=await parseBody(errorBody,context);return value.message=value.message??value.Message,value},loadRestJsonErrorCode=(output,data)=>{const sanitizeErrorCode=rawValue=>{let cleanValue=rawValue;return"number"==typeof cleanValue&&(cleanValue=cleanValue.toString()),cleanValue.indexOf(",")>=0&&(cleanValue=cleanValue.split(",")[0]),cleanValue.indexOf(":")>=0&&(cleanValue=cleanValue.split(":")[0]),cleanValue.indexOf("#")>=0&&(cleanValue=cleanValue.split("#")[1]),cleanValue},headerKey=(object=output.headers,key="x-amzn-errortype",Object.keys(object).find((k=>k.toLowerCase()===key.toLowerCase())));var object,key;return void 0!==headerKey?sanitizeErrorCode(output.headers[headerKey]):void 0!==data.code?sanitizeErrorCode(data.code):void 0!==data.__type?sanitizeErrorCode(data.__type):void 0};class AssociateChannelFlowCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","AssociateChannelFlow",{}).n("ChimeSDKMessagingClient","AssociateChannelFlowCommand").f(void 0,void 0).ser(se_AssociateChannelFlowCommand).de(de_AssociateChannelFlowCommand).build()){}class BatchCreateChannelMembershipCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","BatchCreateChannelMembership",{}).n("ChimeSDKMessagingClient","BatchCreateChannelMembershipCommand").f(void 0,BatchCreateChannelMembershipResponseFilterSensitiveLog).ser(se_BatchCreateChannelMembershipCommand).de(de_BatchCreateChannelMembershipCommand).build()){}class ChannelFlowCallbackCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ChannelFlowCallback",{}).n("ChimeSDKMessagingClient","ChannelFlowCallbackCommand").f(ChannelFlowCallbackRequestFilterSensitiveLog,void 0).ser(se_ChannelFlowCallbackCommand).de(de_ChannelFlowCallbackCommand).build()){}class CreateChannelBanCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","CreateChannelBan",{}).n("ChimeSDKMessagingClient","CreateChannelBanCommand").f(void 0,CreateChannelBanResponseFilterSensitiveLog).ser(se_CreateChannelBanCommand).de(de_CreateChannelBanCommand).build()){}class CreateChannelCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","CreateChannel",{}).n("ChimeSDKMessagingClient","CreateChannelCommand").f(CreateChannelRequestFilterSensitiveLog,void 0).ser(se_CreateChannelCommand).de(de_CreateChannelCommand).build()){}class CreateChannelFlowCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","CreateChannelFlow",{}).n("ChimeSDKMessagingClient","CreateChannelFlowCommand").f(CreateChannelFlowRequestFilterSensitiveLog,void 0).ser(se_CreateChannelFlowCommand).de(de_CreateChannelFlowCommand).build()){}class CreateChannelMembershipCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","CreateChannelMembership",{}).n("ChimeSDKMessagingClient","CreateChannelMembershipCommand").f(void 0,CreateChannelMembershipResponseFilterSensitiveLog).ser(se_CreateChannelMembershipCommand).de(de_CreateChannelMembershipCommand).build()){}class CreateChannelModeratorCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","CreateChannelModerator",{}).n("ChimeSDKMessagingClient","CreateChannelModeratorCommand").f(void 0,CreateChannelModeratorResponseFilterSensitiveLog).ser(se_CreateChannelModeratorCommand).de(de_CreateChannelModeratorCommand).build()){}class DeleteChannelBanCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DeleteChannelBan",{}).n("ChimeSDKMessagingClient","DeleteChannelBanCommand").f(void 0,void 0).ser(se_DeleteChannelBanCommand).de(de_DeleteChannelBanCommand).build()){}class DeleteChannelCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DeleteChannel",{}).n("ChimeSDKMessagingClient","DeleteChannelCommand").f(void 0,void 0).ser(se_DeleteChannelCommand).de(de_DeleteChannelCommand).build()){}class DeleteChannelFlowCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DeleteChannelFlow",{}).n("ChimeSDKMessagingClient","DeleteChannelFlowCommand").f(void 0,void 0).ser(se_DeleteChannelFlowCommand).de(de_DeleteChannelFlowCommand).build()){}class DeleteChannelMembershipCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DeleteChannelMembership",{}).n("ChimeSDKMessagingClient","DeleteChannelMembershipCommand").f(void 0,void 0).ser(se_DeleteChannelMembershipCommand).de(de_DeleteChannelMembershipCommand).build()){}class DeleteChannelMessageCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DeleteChannelMessage",{}).n("ChimeSDKMessagingClient","DeleteChannelMessageCommand").f(void 0,void 0).ser(se_DeleteChannelMessageCommand).de(de_DeleteChannelMessageCommand).build()){}class DeleteChannelModeratorCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DeleteChannelModerator",{}).n("ChimeSDKMessagingClient","DeleteChannelModeratorCommand").f(void 0,void 0).ser(se_DeleteChannelModeratorCommand).de(de_DeleteChannelModeratorCommand).build()){}class DeleteMessagingStreamingConfigurationsCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DeleteMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","DeleteMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(se_DeleteMessagingStreamingConfigurationsCommand).de(de_DeleteMessagingStreamingConfigurationsCommand).build()){}class DescribeChannelBanCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DescribeChannelBan",{}).n("ChimeSDKMessagingClient","DescribeChannelBanCommand").f(void 0,DescribeChannelBanResponseFilterSensitiveLog).ser(se_DescribeChannelBanCommand).de(de_DescribeChannelBanCommand).build()){}class DescribeChannelCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DescribeChannel",{}).n("ChimeSDKMessagingClient","DescribeChannelCommand").f(void 0,DescribeChannelResponseFilterSensitiveLog).ser(se_DescribeChannelCommand).de(de_DescribeChannelCommand).build()){}class DescribeChannelFlowCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DescribeChannelFlow",{}).n("ChimeSDKMessagingClient","DescribeChannelFlowCommand").f(void 0,DescribeChannelFlowResponseFilterSensitiveLog).ser(se_DescribeChannelFlowCommand).de(de_DescribeChannelFlowCommand).build()){}class DescribeChannelMembershipCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DescribeChannelMembership",{}).n("ChimeSDKMessagingClient","DescribeChannelMembershipCommand").f(void 0,DescribeChannelMembershipResponseFilterSensitiveLog).ser(se_DescribeChannelMembershipCommand).de(de_DescribeChannelMembershipCommand).build()){}class DescribeChannelMembershipForAppInstanceUserCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DescribeChannelMembershipForAppInstanceUser",{}).n("ChimeSDKMessagingClient","DescribeChannelMembershipForAppInstanceUserCommand").f(void 0,DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog).ser(se_DescribeChannelMembershipForAppInstanceUserCommand).de(de_DescribeChannelMembershipForAppInstanceUserCommand).build()){}class DescribeChannelModeratedByAppInstanceUserCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DescribeChannelModeratedByAppInstanceUser",{}).n("ChimeSDKMessagingClient","DescribeChannelModeratedByAppInstanceUserCommand").f(void 0,DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog).ser(se_DescribeChannelModeratedByAppInstanceUserCommand).de(de_DescribeChannelModeratedByAppInstanceUserCommand).build()){}class DescribeChannelModeratorCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DescribeChannelModerator",{}).n("ChimeSDKMessagingClient","DescribeChannelModeratorCommand").f(void 0,DescribeChannelModeratorResponseFilterSensitiveLog).ser(se_DescribeChannelModeratorCommand).de(de_DescribeChannelModeratorCommand).build()){}class DisassociateChannelFlowCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","DisassociateChannelFlow",{}).n("ChimeSDKMessagingClient","DisassociateChannelFlowCommand").f(void 0,void 0).ser(se_DisassociateChannelFlowCommand).de(de_DisassociateChannelFlowCommand).build()){}class GetChannelMembershipPreferencesCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","GetChannelMembershipPreferences",{}).n("ChimeSDKMessagingClient","GetChannelMembershipPreferencesCommand").f(void 0,GetChannelMembershipPreferencesResponseFilterSensitiveLog).ser(se_GetChannelMembershipPreferencesCommand).de(de_GetChannelMembershipPreferencesCommand).build()){}class GetChannelMessageCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","GetChannelMessage",{}).n("ChimeSDKMessagingClient","GetChannelMessageCommand").f(void 0,GetChannelMessageResponseFilterSensitiveLog).ser(se_GetChannelMessageCommand).de(de_GetChannelMessageCommand).build()){}class GetChannelMessageStatusCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","GetChannelMessageStatus",{}).n("ChimeSDKMessagingClient","GetChannelMessageStatusCommand").f(void 0,void 0).ser(se_GetChannelMessageStatusCommand).de(de_GetChannelMessageStatusCommand).build()){}class GetMessagingSessionEndpointCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","GetMessagingSessionEndpoint",{}).n("ChimeSDKMessagingClient","GetMessagingSessionEndpointCommand").f(void 0,void 0).ser(se_GetMessagingSessionEndpointCommand).de(de_GetMessagingSessionEndpointCommand).build()){}class GetMessagingStreamingConfigurationsCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","GetMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","GetMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(se_GetMessagingStreamingConfigurationsCommand).de(de_GetMessagingStreamingConfigurationsCommand).build()){}class ListChannelBansCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ListChannelBans",{}).n("ChimeSDKMessagingClient","ListChannelBansCommand").f(ListChannelBansRequestFilterSensitiveLog,ListChannelBansResponseFilterSensitiveLog).ser(se_ListChannelBansCommand).de(de_ListChannelBansCommand).build()){}class ListChannelFlowsCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ListChannelFlows",{}).n("ChimeSDKMessagingClient","ListChannelFlowsCommand").f(ListChannelFlowsRequestFilterSensitiveLog,ListChannelFlowsResponseFilterSensitiveLog).ser(se_ListChannelFlowsCommand).de(de_ListChannelFlowsCommand).build()){}class ListChannelMembershipsCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ListChannelMemberships",{}).n("ChimeSDKMessagingClient","ListChannelMembershipsCommand").f(ListChannelMembershipsRequestFilterSensitiveLog,ListChannelMembershipsResponseFilterSensitiveLog).ser(se_ListChannelMembershipsCommand).de(de_ListChannelMembershipsCommand).build()){}class ListChannelMembershipsForAppInstanceUserCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ListChannelMembershipsForAppInstanceUser",{}).n("ChimeSDKMessagingClient","ListChannelMembershipsForAppInstanceUserCommand").f(ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog,ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog).ser(se_ListChannelMembershipsForAppInstanceUserCommand).de(de_ListChannelMembershipsForAppInstanceUserCommand).build()){}class ListChannelMessagesCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ListChannelMessages",{}).n("ChimeSDKMessagingClient","ListChannelMessagesCommand").f(ListChannelMessagesRequestFilterSensitiveLog,ListChannelMessagesResponseFilterSensitiveLog).ser(se_ListChannelMessagesCommand).de(de_ListChannelMessagesCommand).build()){}class ListChannelModeratorsCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ListChannelModerators",{}).n("ChimeSDKMessagingClient","ListChannelModeratorsCommand").f(ListChannelModeratorsRequestFilterSensitiveLog,ListChannelModeratorsResponseFilterSensitiveLog).ser(se_ListChannelModeratorsCommand).de(de_ListChannelModeratorsCommand).build()){}class ListChannelsAssociatedWithChannelFlowCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ListChannelsAssociatedWithChannelFlow",{}).n("ChimeSDKMessagingClient","ListChannelsAssociatedWithChannelFlowCommand").f(ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog,ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog).ser(se_ListChannelsAssociatedWithChannelFlowCommand).de(de_ListChannelsAssociatedWithChannelFlowCommand).build()){}class ListChannelsCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ListChannels",{}).n("ChimeSDKMessagingClient","ListChannelsCommand").f(ListChannelsRequestFilterSensitiveLog,ListChannelsResponseFilterSensitiveLog).ser(se_ListChannelsCommand).de(de_ListChannelsCommand).build()){}class ListChannelsModeratedByAppInstanceUserCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ListChannelsModeratedByAppInstanceUser",{}).n("ChimeSDKMessagingClient","ListChannelsModeratedByAppInstanceUserCommand").f(ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog,ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog).ser(se_ListChannelsModeratedByAppInstanceUserCommand).de(de_ListChannelsModeratedByAppInstanceUserCommand).build()){}class ListSubChannelsCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ListSubChannels",{}).n("ChimeSDKMessagingClient","ListSubChannelsCommand").f(ListSubChannelsRequestFilterSensitiveLog,ListSubChannelsResponseFilterSensitiveLog).ser(se_ListSubChannelsCommand).de(de_ListSubChannelsCommand).build()){}class ListTagsForResourceCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","ListTagsForResource",{}).n("ChimeSDKMessagingClient","ListTagsForResourceCommand").f(void 0,ListTagsForResourceResponseFilterSensitiveLog).ser(se_ListTagsForResourceCommand).de(de_ListTagsForResourceCommand).build()){}class PutChannelExpirationSettingsCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","PutChannelExpirationSettings",{}).n("ChimeSDKMessagingClient","PutChannelExpirationSettingsCommand").f(void 0,void 0).ser(se_PutChannelExpirationSettingsCommand).de(de_PutChannelExpirationSettingsCommand).build()){}class PutChannelMembershipPreferencesCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","PutChannelMembershipPreferences",{}).n("ChimeSDKMessagingClient","PutChannelMembershipPreferencesCommand").f(PutChannelMembershipPreferencesRequestFilterSensitiveLog,PutChannelMembershipPreferencesResponseFilterSensitiveLog).ser(se_PutChannelMembershipPreferencesCommand).de(de_PutChannelMembershipPreferencesCommand).build()){}class PutMessagingStreamingConfigurationsCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","PutMessagingStreamingConfigurations",{}).n("ChimeSDKMessagingClient","PutMessagingStreamingConfigurationsCommand").f(void 0,void 0).ser(se_PutMessagingStreamingConfigurationsCommand).de(de_PutMessagingStreamingConfigurationsCommand).build()){}class RedactChannelMessageCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","RedactChannelMessage",{}).n("ChimeSDKMessagingClient","RedactChannelMessageCommand").f(void 0,void 0).ser(se_RedactChannelMessageCommand).de(de_RedactChannelMessageCommand).build()){}class SearchChannelsCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","SearchChannels",{}).n("ChimeSDKMessagingClient","SearchChannelsCommand").f(SearchChannelsRequestFilterSensitiveLog,SearchChannelsResponseFilterSensitiveLog).ser(se_SearchChannelsCommand).de(de_SearchChannelsCommand).build()){}class SendChannelMessageCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","SendChannelMessage",{}).n("ChimeSDKMessagingClient","SendChannelMessageCommand").f(SendChannelMessageRequestFilterSensitiveLog,void 0).ser(se_SendChannelMessageCommand).de(de_SendChannelMessageCommand).build()){}class TagResourceCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","TagResource",{}).n("ChimeSDKMessagingClient","TagResourceCommand").f(TagResourceRequestFilterSensitiveLog,void 0).ser(se_TagResourceCommand).de(de_TagResourceCommand).build()){}class UntagResourceCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","UntagResource",{}).n("ChimeSDKMessagingClient","UntagResourceCommand").f(UntagResourceRequestFilterSensitiveLog,void 0).ser(se_UntagResourceCommand).de(de_UntagResourceCommand).build()){}class UpdateChannelCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","UpdateChannel",{}).n("ChimeSDKMessagingClient","UpdateChannelCommand").f(UpdateChannelRequestFilterSensitiveLog,void 0).ser(se_UpdateChannelCommand).de(de_UpdateChannelCommand).build()){}class UpdateChannelFlowCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","UpdateChannelFlow",{}).n("ChimeSDKMessagingClient","UpdateChannelFlowCommand").f(UpdateChannelFlowRequestFilterSensitiveLog,void 0).ser(se_UpdateChannelFlowCommand).de(de_UpdateChannelFlowCommand).build()){}class UpdateChannelMessageCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","UpdateChannelMessage",{}).n("ChimeSDKMessagingClient","UpdateChannelMessageCommand").f(UpdateChannelMessageRequestFilterSensitiveLog,void 0).ser(se_UpdateChannelMessageCommand).de(de_UpdateChannelMessageCommand).build()){}class UpdateChannelReadMarkerCommand extends(Command.classBuilder().ep({...commonParams}).m((function(Command,cs,config,o){return[getSerdePlugin(config,this.serialize,this.deserialize),getEndpointPlugin(config,Command.getEndpointParameterInstructions())]})).s("ChimeMessagingService","UpdateChannelReadMarker",{}).n("ChimeSDKMessagingClient","UpdateChannelReadMarkerCommand").f(void 0,void 0).ser(se_UpdateChannelReadMarkerCommand).de(de_UpdateChannelReadMarkerCommand).build()){}const commands={AssociateChannelFlowCommand,BatchCreateChannelMembershipCommand,ChannelFlowCallbackCommand,CreateChannelCommand,CreateChannelBanCommand,CreateChannelFlowCommand,CreateChannelMembershipCommand,CreateChannelModeratorCommand,DeleteChannelCommand,DeleteChannelBanCommand,DeleteChannelFlowCommand,DeleteChannelMembershipCommand,DeleteChannelMessageCommand,DeleteChannelModeratorCommand,DeleteMessagingStreamingConfigurationsCommand,DescribeChannelCommand,DescribeChannelBanCommand,DescribeChannelFlowCommand,DescribeChannelMembershipCommand,DescribeChannelMembershipForAppInstanceUserCommand,DescribeChannelModeratedByAppInstanceUserCommand,DescribeChannelModeratorCommand,DisassociateChannelFlowCommand,GetChannelMembershipPreferencesCommand,GetChannelMessageCommand,GetChannelMessageStatusCommand,GetMessagingSessionEndpointCommand,GetMessagingStreamingConfigurationsCommand,ListChannelBansCommand,ListChannelFlowsCommand,ListChannelMembershipsCommand,ListChannelMembershipsForAppInstanceUserCommand,ListChannelMessagesCommand,ListChannelModeratorsCommand,ListChannelsCommand,ListChannelsAssociatedWithChannelFlowCommand,ListChannelsModeratedByAppInstanceUserCommand,ListSubChannelsCommand,ListTagsForResourceCommand,PutChannelExpirationSettingsCommand,PutChannelMembershipPreferencesCommand,PutMessagingStreamingConfigurationsCommand,RedactChannelMessageCommand,SearchChannelsCommand,SendChannelMessageCommand,TagResourceCommand,UntagResourceCommand,UpdateChannelCommand,UpdateChannelFlowCommand,UpdateChannelMessageCommand,UpdateChannelReadMarkerCommand};class ChimeSDKMessaging extends ChimeSDKMessagingClient{}((commands,Client)=>{for(const command of Object.keys(commands)){const CommandCtor=commands[command],methodImpl=async function(args,optionsOrCb,cb){const command=new CommandCtor(args);if("function"==typeof optionsOrCb)this.send(command,optionsOrCb);else{if("function"!=typeof cb)return this.send(command,optionsOrCb);if("object"!=typeof optionsOrCb)throw new Error("Expected http options but got "+typeof optionsOrCb);this.send(command,optionsOrCb||{},cb)}},methodName=(command[0].toLowerCase()+command.slice(1)).replace(/Command$/,"");Client.prototype[methodName]=methodImpl}})(commands,ChimeSDKMessaging);const paginateListChannelBans=createPaginator(ChimeSDKMessagingClient,ListChannelBansCommand,"NextToken","NextToken","MaxResults"),paginateListChannelFlows=createPaginator(ChimeSDKMessagingClient,ListChannelFlowsCommand,"NextToken","NextToken","MaxResults"),paginateListChannelMembershipsForAppInstanceUser=createPaginator(ChimeSDKMessagingClient,ListChannelMembershipsForAppInstanceUserCommand,"NextToken","NextToken","MaxResults"),paginateListChannelMemberships=createPaginator(ChimeSDKMessagingClient,ListChannelMembershipsCommand,"NextToken","NextToken","MaxResults"),paginateListChannelMessages=createPaginator(ChimeSDKMessagingClient,ListChannelMessagesCommand,"NextToken","NextToken","MaxResults"),paginateListChannelModerators=createPaginator(ChimeSDKMessagingClient,ListChannelModeratorsCommand,"NextToken","NextToken","MaxResults"),paginateListChannelsAssociatedWithChannelFlow=createPaginator(ChimeSDKMessagingClient,ListChannelsAssociatedWithChannelFlowCommand,"NextToken","NextToken","MaxResults"),paginateListChannelsModeratedByAppInstanceUser=createPaginator(ChimeSDKMessagingClient,ListChannelsModeratedByAppInstanceUserCommand,"NextToken","NextToken","MaxResults"),paginateListChannels=createPaginator(ChimeSDKMessagingClient,ListChannelsCommand,"NextToken","NextToken","MaxResults"),paginateListSubChannels=createPaginator(ChimeSDKMessagingClient,ListSubChannelsCommand,"NextToken","NextToken","MaxResults"),paginateSearchChannels=createPaginator(ChimeSDKMessagingClient,SearchChannelsCommand,"NextToken","NextToken","MaxResults")},"./node_modules/@aws-sdk/util-hex-encoding/dist-es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{fromHex:()=>fromHex,toHex:()=>toHex});const SHORT_TO_HEX={},HEX_TO_SHORT={};for(let i=0;i<256;i++){let encodedByte=i.toString(16).toLowerCase();1===encodedByte.length&&(encodedByte=`0${encodedByte}`),SHORT_TO_HEX[i]=encodedByte,HEX_TO_SHORT[encodedByte]=i}function fromHex(encoded){if(encoded.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const out=new Uint8Array(encoded.length/2);for(let i=0;i<encoded.length;i+=2){const encodedByte=encoded.slice(i,i+2).toLowerCase();if(!(encodedByte in HEX_TO_SHORT))throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);out[i/2]=HEX_TO_SHORT[encodedByte]}return out}function toHex(bytes){let out="";for(let i=0;i<bytes.byteLength;i++)out+=SHORT_TO_HEX[bytes[i]];return out}},"./node_modules/@aws-sdk/util-locate-window/dist-es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{locateWindow:()=>locateWindow});const fallbackWindow={};function locateWindow(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:fallbackWindow}},"./node_modules/@aws-sdk/util-utf8-browser/dist-es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{fromUtf8:()=>dist_es_fromUtf8,toUtf8:()=>dist_es_toUtf8});const dist_es_fromUtf8=input=>"function"==typeof TextEncoder?function whatwgEncodingApi_fromUtf8(input){return(new TextEncoder).encode(input)}(input):(input=>{const bytes=[];for(let i=0,len=input.length;i<len;i++){const value=input.charCodeAt(i);if(value<128)bytes.push(value);else if(value<2048)bytes.push(value>>6|192,63&value|128);else if(i+1<input.length&&55296==(64512&value)&&56320==(64512&input.charCodeAt(i+1))){const surrogatePair=65536+((1023&value)<<10)+(1023&input.charCodeAt(++i));bytes.push(surrogatePair>>18|240,surrogatePair>>12&63|128,surrogatePair>>6&63|128,63&surrogatePair|128)}else bytes.push(value>>12|224,value>>6&63|128,63&value|128)}return Uint8Array.from(bytes)})(input),dist_es_toUtf8=input=>"function"==typeof TextDecoder?function whatwgEncodingApi_toUtf8(input){return new TextDecoder("utf-8").decode(input)}(input):(input=>{let decoded="";for(let i=0,len=input.length;i<len;i++){const byte=input[i];if(byte<128)decoded+=String.fromCharCode(byte);else if(192<=byte&&byte<224){const nextByte=input[++i];decoded+=String.fromCharCode((31&byte)<<6|63&nextByte)}else if(240<=byte&&byte<365){const encoded="%"+[byte,input[++i],input[++i],input[++i]].map((byteValue=>byteValue.toString(16))).join("%");decoded+=decodeURIComponent(encoded)}else decoded+=String.fromCharCode((15&byte)<<12|(63&input[++i])<<6|63&input[++i])}return decoded})(input)},"./node_modules/@protobufjs/aspromise/index.js":module=>{"use strict";module.exports=function asPromise(fn,ctx){var params=new Array(arguments.length-1),offset=0,index=2,pending=!0;for(;index<arguments.length;)params[offset++]=arguments[index++];return new Promise((function executor(resolve,reject){params[offset]=function callback(err){if(pending)if(pending=!1,err)reject(err);else{for(var params=new Array(arguments.length-1),offset=0;offset<params.length;)params[offset++]=arguments[offset];resolve.apply(null,params)}};try{fn.apply(ctx||null,params)}catch(err){pending&&(pending=!1,reject(err))}}))}},"./node_modules/@protobufjs/base64/index.js":(__unused_webpack_module,exports)=>{"use strict";var base64=exports;base64.length=function length(string){var p=string.length;if(!p)return 0;for(var n=0;--p%4>1&&"="===string.charAt(p);)++n;return Math.ceil(3*string.length)/4-n};for(var b64=new Array(64),s64=new Array(123),i=0;i<64;)s64[b64[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;base64.encode=function encode(buffer,start,end){for(var t,parts=null,chunk=[],i=0,j=0;start<end;){var b=buffer[start++];switch(j){case 0:chunk[i++]=b64[b>>2],t=(3&b)<<4,j=1;break;case 1:chunk[i++]=b64[t|b>>4],t=(15&b)<<2,j=2;break;case 2:chunk[i++]=b64[t|b>>6],chunk[i++]=b64[63&b],j=0}i>8191&&((parts||(parts=[])).push(String.fromCharCode.apply(String,chunk)),i=0)}return j&&(chunk[i++]=b64[t],chunk[i++]=61,1===j&&(chunk[i++]=61)),parts?(i&&parts.push(String.fromCharCode.apply(String,chunk.slice(0,i))),parts.join("")):String.fromCharCode.apply(String,chunk.slice(0,i))};base64.decode=function decode(string,buffer,offset){for(var t,start=offset,j=0,i=0;i<string.length;){var c=string.charCodeAt(i++);if(61===c&&j>1)break;if(void 0===(c=s64[c]))throw Error("invalid encoding");switch(j){case 0:t=c,j=1;break;case 1:buffer[offset++]=t<<2|(48&c)>>4,t=c,j=2;break;case 2:buffer[offset++]=(15&t)<<4|(60&c)>>2,t=c,j=3;break;case 3:buffer[offset++]=(3&t)<<6|c,j=0}}if(1===j)throw Error("invalid encoding");return offset-start},base64.test=function test(string){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string)}},"./node_modules/@protobufjs/eventemitter/index.js":module=>{"use strict";function EventEmitter(){this._listeners={}}module.exports=EventEmitter,EventEmitter.prototype.on=function on(evt,fn,ctx){return(this._listeners[evt]||(this._listeners[evt]=[])).push({fn,ctx:ctx||this}),this},EventEmitter.prototype.off=function off(evt,fn){if(void 0===evt)this._listeners={};else if(void 0===fn)this._listeners[evt]=[];else for(var listeners=this._listeners[evt],i=0;i<listeners.length;)listeners[i].fn===fn?listeners.splice(i,1):++i;return this},EventEmitter.prototype.emit=function emit(evt){var listeners=this._listeners[evt];if(listeners){for(var args=[],i=1;i<arguments.length;)args.push(arguments[i++]);for(i=0;i<listeners.length;)listeners[i].fn.apply(listeners[i++].ctx,args)}return this}},"./node_modules/@protobufjs/float/index.js":module=>{"use strict";function factory(exports){return"undefined"!=typeof Float32Array?function(){var f32=new Float32Array([-0]),f8b=new Uint8Array(f32.buffer),le=128===f8b[3];function writeFloat_f32_cpy(val,buf,pos){f32[0]=val,buf[pos]=f8b[0],buf[pos+1]=f8b[1],buf[pos+2]=f8b[2],buf[pos+3]=f8b[3]}function writeFloat_f32_rev(val,buf,pos){f32[0]=val,buf[pos]=f8b[3],buf[pos+1]=f8b[2],buf[pos+2]=f8b[1],buf[pos+3]=f8b[0]}function readFloat_f32_cpy(buf,pos){return f8b[0]=buf[pos],f8b[1]=buf[pos+1],f8b[2]=buf[pos+2],f8b[3]=buf[pos+3],f32[0]}function readFloat_f32_rev(buf,pos){return f8b[3]=buf[pos],f8b[2]=buf[pos+1],f8b[1]=buf[pos+2],f8b[0]=buf[pos+3],f32[0]}exports.writeFloatLE=le?writeFloat_f32_cpy:writeFloat_f32_rev,exports.writeFloatBE=le?writeFloat_f32_rev:writeFloat_f32_cpy,exports.readFloatLE=le?readFloat_f32_cpy:readFloat_f32_rev,exports.readFloatBE=le?readFloat_f32_rev:readFloat_f32_cpy}():function(){function writeFloat_ieee754(writeUint,val,buf,pos){var sign=val<0?1:0;if(sign&&(val=-val),0===val)writeUint(1/val>0?0:2147483648,buf,pos);else if(isNaN(val))writeUint(2143289344,buf,pos);else if(val>34028234663852886e22)writeUint((sign<<31|2139095040)>>>0,buf,pos);else if(val<11754943508222875e-54)writeUint((sign<<31|Math.round(val/1401298464324817e-60))>>>0,buf,pos);else{var exponent=Math.floor(Math.log(val)/Math.LN2);writeUint((sign<<31|exponent+127<<23|8388607&Math.round(val*Math.pow(2,-exponent)*8388608))>>>0,buf,pos)}}function readFloat_ieee754(readUint,buf,pos){var uint=readUint(buf,pos),sign=2*(uint>>31)+1,exponent=uint>>>23&255,mantissa=8388607&uint;return 255===exponent?mantissa?NaN:sign*(1/0):0===exponent?1401298464324817e-60*sign*mantissa:sign*Math.pow(2,exponent-150)*(mantissa+8388608)}exports.writeFloatLE=writeFloat_ieee754.bind(null,writeUintLE),exports.writeFloatBE=writeFloat_ieee754.bind(null,writeUintBE),exports.readFloatLE=readFloat_ieee754.bind(null,readUintLE),exports.readFloatBE=readFloat_ieee754.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var f64=new Float64Array([-0]),f8b=new Uint8Array(f64.buffer),le=128===f8b[7];function writeDouble_f64_cpy(val,buf,pos){f64[0]=val,buf[pos]=f8b[0],buf[pos+1]=f8b[1],buf[pos+2]=f8b[2],buf[pos+3]=f8b[3],buf[pos+4]=f8b[4],buf[pos+5]=f8b[5],buf[pos+6]=f8b[6],buf[pos+7]=f8b[7]}function writeDouble_f64_rev(val,buf,pos){f64[0]=val,buf[pos]=f8b[7],buf[pos+1]=f8b[6],buf[pos+2]=f8b[5],buf[pos+3]=f8b[4],buf[pos+4]=f8b[3],buf[pos+5]=f8b[2],buf[pos+6]=f8b[1],buf[pos+7]=f8b[0]}function readDouble_f64_cpy(buf,pos){return f8b[0]=buf[pos],f8b[1]=buf[pos+1],f8b[2]=buf[pos+2],f8b[3]=buf[pos+3],f8b[4]=buf[pos+4],f8b[5]=buf[pos+5],f8b[6]=buf[pos+6],f8b[7]=buf[pos+7],f64[0]}function readDouble_f64_rev(buf,pos){return f8b[7]=buf[pos],f8b[6]=buf[pos+1],f8b[5]=buf[pos+2],f8b[4]=buf[pos+3],f8b[3]=buf[pos+4],f8b[2]=buf[pos+5],f8b[1]=buf[pos+6],f8b[0]=buf[pos+7],f64[0]}exports.writeDoubleLE=le?writeDouble_f64_cpy:writeDouble_f64_rev,exports.writeDoubleBE=le?writeDouble_f64_rev:writeDouble_f64_cpy,exports.readDoubleLE=le?readDouble_f64_cpy:readDouble_f64_rev,exports.readDoubleBE=le?readDouble_f64_rev:readDouble_f64_cpy}():function(){function writeDouble_ieee754(writeUint,off0,off1,val,buf,pos){var sign=val<0?1:0;if(sign&&(val=-val),0===val)writeUint(0,buf,pos+off0),writeUint(1/val>0?0:2147483648,buf,pos+off1);else if(isNaN(val))writeUint(0,buf,pos+off0),writeUint(2146959360,buf,pos+off1);else if(val>17976931348623157e292)writeUint(0,buf,pos+off0),writeUint((sign<<31|2146435072)>>>0,buf,pos+off1);else{var mantissa;if(val<22250738585072014e-324)writeUint((mantissa=val/5e-324)>>>0,buf,pos+off0),writeUint((sign<<31|mantissa/4294967296)>>>0,buf,pos+off1);else{var exponent=Math.floor(Math.log(val)/Math.LN2);1024===exponent&&(exponent=1023),writeUint(4503599627370496*(mantissa=val*Math.pow(2,-exponent))>>>0,buf,pos+off0),writeUint((sign<<31|exponent+1023<<20|1048576*mantissa&1048575)>>>0,buf,pos+off1)}}}function readDouble_ieee754(readUint,off0,off1,buf,pos){var lo=readUint(buf,pos+off0),hi=readUint(buf,pos+off1),sign=2*(hi>>31)+1,exponent=hi>>>20&2047,mantissa=4294967296*(1048575&hi)+lo;return 2047===exponent?mantissa?NaN:sign*(1/0):0===exponent?5e-324*sign*mantissa:sign*Math.pow(2,exponent-1075)*(mantissa+4503599627370496)}exports.writeDoubleLE=writeDouble_ieee754.bind(null,writeUintLE,0,4),exports.writeDoubleBE=writeDouble_ieee754.bind(null,writeUintBE,4,0),exports.readDoubleLE=readDouble_ieee754.bind(null,readUintLE,0,4),exports.readDoubleBE=readDouble_ieee754.bind(null,readUintBE,4,0)}(),exports}function writeUintLE(val,buf,pos){buf[pos]=255&val,buf[pos+1]=val>>>8&255,buf[pos+2]=val>>>16&255,buf[pos+3]=val>>>24}function writeUintBE(val,buf,pos){buf[pos]=val>>>24,buf[pos+1]=val>>>16&255,buf[pos+2]=val>>>8&255,buf[pos+3]=255&val}function readUintLE(buf,pos){return(buf[pos]|buf[pos+1]<<8|buf[pos+2]<<16|buf[pos+3]<<24)>>>0}function readUintBE(buf,pos){return(buf[pos]<<24|buf[pos+1]<<16|buf[pos+2]<<8|buf[pos+3])>>>0}module.exports=factory(factory)},"./node_modules/@protobufjs/inquire/index.js":module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},"./node_modules/@protobufjs/pool/index.js":module=>{"use strict";module.exports=function pool(alloc,slice,size){var SIZE=size||8192,MAX=SIZE>>>1,slab=null,offset=SIZE;return function pool_alloc(size){if(size<1||size>MAX)return alloc(size);offset+size>SIZE&&(slab=alloc(SIZE),offset=0);var buf=slice.call(slab,offset,offset+=size);return 7&offset&&(offset=1+(7|offset)),buf}}},"./node_modules/@protobufjs/utf8/index.js":(__unused_webpack_module,exports)=>{"use strict";var utf8=exports;utf8.length=function utf8_length(string){for(var len=0,c=0,i=0;i<string.length;++i)(c=string.charCodeAt(i))<128?len+=1:c<2048?len+=2:55296==(64512&c)&&56320==(64512&string.charCodeAt(i+1))?(++i,len+=4):len+=3;return len},utf8.read=function utf8_read(buffer,start,end){if(end-start<1)return"";for(var t,parts=null,chunk=[],i=0;start<end;)(t=buffer[start++])<128?chunk[i++]=t:t>191&&t<224?chunk[i++]=(31&t)<<6|63&buffer[start++]:t>239&&t<365?(t=((7&t)<<18|(63&buffer[start++])<<12|(63&buffer[start++])<<6|63&buffer[start++])-65536,chunk[i++]=55296+(t>>10),chunk[i++]=56320+(1023&t)):chunk[i++]=(15&t)<<12|(63&buffer[start++])<<6|63&buffer[start++],i>8191&&((parts||(parts=[])).push(String.fromCharCode.apply(String,chunk)),i=0);return parts?(i&&parts.push(String.fromCharCode.apply(String,chunk.slice(0,i))),parts.join("")):String.fromCharCode.apply(String,chunk.slice(0,i))},utf8.write=function utf8_write(string,buffer,offset){for(var c1,c2,start=offset,i=0;i<string.length;++i)(c1=string.charCodeAt(i))<128?buffer[offset++]=c1:c1<2048?(buffer[offset++]=c1>>6|192,buffer[offset++]=63&c1|128):55296==(64512&c1)&&56320==(64512&(c2=string.charCodeAt(i+1)))?(c1=65536+((1023&c1)<<10)+(1023&c2),++i,buffer[offset++]=c1>>18|240,buffer[offset++]=c1>>12&63|128,buffer[offset++]=c1>>6&63|128,buffer[offset++]=63&c1|128):(buffer[offset++]=c1>>12|224,buffer[offset++]=c1>>6&63|128,buffer[offset++]=63&c1|128);return offset-start}},"./node_modules/amazon-chime-sdk-js/build/activespeakerdetector/DefaultActiveSpeakerDetector.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const IntervalScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/IntervalScheduler.js"));exports.default=class DefaultActiveSpeakerDetector{constructor(realtimeController,selfAttendeeId,hasBandwidthPriorityCallback,waitIntervalMs=1e3,updateIntervalMs=200){this.realtimeController=realtimeController,this.selfAttendeeId=selfAttendeeId,this.hasBandwidthPriorityCallback=hasBandwidthPriorityCallback,this.waitIntervalMs=waitIntervalMs,this.updateIntervalMs=updateIntervalMs,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}needUpdate(attendeeId){return!this.activeSpeakers||(0===this.speakerScores[attendeeId]&&this.activeSpeakers.includes(attendeeId)||this.speakerScores[attendeeId]>0&&!this.activeSpeakers.includes(attendeeId))}updateActiveSpeakers(policy,callback,attendeeId){if(!this.needUpdate(attendeeId))return;const sortedSpeakers=[],attendeeIds=Object.keys(this.speakerScores);for(let i=0;i<attendeeIds.length;i++){const attendeeId=attendeeIds[i];sortedSpeakers.push({attendeeId,activeScore:this.speakerScores[attendeeId]})}const sortedAttendeeIds=sortedSpeakers.sort(((s1,s2)=>s2.activeScore-s1.activeScore)).filter((function(s){return s.activeScore>0})).map((function(s){return s.attendeeId}));this.activeSpeakers=sortedAttendeeIds,callback(sortedAttendeeIds);const hasBandwidthPriority=sortedAttendeeIds.length>0&&sortedAttendeeIds[0]===this.selfAttendeeId&&policy.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==hasBandwidthPriority&&(this.hasBandwidthPriority=hasBandwidthPriority,this.hasBandwidthPriorityCallback(hasBandwidthPriority))}updateScore(policy,callback,attendeeId,volume,muted){const activeScore=policy.calculateScore(attendeeId,volume,muted);this.speakerScores[attendeeId]!==activeScore&&(this.speakerScores[attendeeId]=activeScore,this.mostRecentUpdateTimestamp[attendeeId]=Date.now(),this.updateActiveSpeakers(policy,callback,attendeeId))}subscribe(policy,callback,scoresCallback,scoresCallbackIntervalMs){const handler=(attendeeId,present)=>{if(!present)return this.speakerScores[attendeeId]=0,this.mostRecentUpdateTimestamp[attendeeId]=Date.now(),void this.updateActiveSpeakers(policy,callback,attendeeId);this.realtimeController.realtimeSubscribeToVolumeIndicator(attendeeId,((attendeeId,volume,muted,_signalStrength)=>{this.mostRecentUpdateTimestamp[attendeeId]=Date.now(),null!==muted&&(this.speakerMuteState[attendeeId]=muted),this.updateScore(policy,callback,attendeeId,volume,muted)}))};this.detectorCallbackToHandler.set(callback,handler);const activityTimer=new IntervalScheduler_1.default(this.updateIntervalMs);if(activityTimer.start((()=>{for(const attendeeId in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[attendeeId]>this.waitIntervalMs&&this.updateScore(policy,callback,attendeeId,0,this.speakerMuteState[attendeeId])})),this.detectorCallbackToActivityTimer.set(callback,activityTimer),scoresCallback&&scoresCallbackIntervalMs){const scoresTimer=new IntervalScheduler_1.default(scoresCallbackIntervalMs);scoresTimer.start((()=>{scoresCallback(this.speakerScores)})),this.detectorCallbackToScoresTimer.set(callback,scoresTimer)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(handler)}unsubscribe(callback){const handler=this.detectorCallbackToHandler.get(callback);this.detectorCallbackToHandler.delete(callback),handler&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(handler);const activityTimer=this.detectorCallbackToActivityTimer.get(callback);activityTimer&&(activityTimer.stop(),this.detectorCallbackToActivityTimer.delete(callback));const scoresTimer=this.detectorCallbackToScoresTimer.get(callback);scoresTimer&&(scoresTimer.stop(),this.detectorCallbackToHandler.delete(callback))}destroy(){return __awaiter(this,void 0,void 0,(function*(){for(const handler of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(handler);for(const activityTimer of this.detectorCallbackToActivityTimer.values())activityTimer.stop();for(const scoresTimer of this.detectorCallbackToScoresTimer.values())scoresTimer.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()}))}}},"./node_modules/amazon-chime-sdk-js/build/activespeakerpolicy/DefaultActiveSpeakerPolicy.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class DefaultActiveSpeakerPolicy{constructor(speakerWeight=.9,cutoffThreshold=.01,silenceThreshold=.2,takeoverRate=.2){this.speakerWeight=speakerWeight,this.cutoffThreshold=cutoffThreshold,this.silenceThreshold=silenceThreshold,this.takeoverRate=takeoverRate,this.volumes={}}calculateScore(attendeeId,volume,muted){(muted||null===volume)&&(volume=0),this.volumes.hasOwnProperty(attendeeId)||(this.volumes[attendeeId]=0),volume=volume>this.silenceThreshold?1:0;const score=this.volumes[attendeeId]*this.speakerWeight+volume*(1-this.speakerWeight);this.volumes[attendeeId]=score;for(const otherAttendeeId in this.volumes)otherAttendeeId!==attendeeId&&(this.volumes[otherAttendeeId]=Math.max(this.volumes[otherAttendeeId]-this.takeoverRate*volume,0));return score<this.cutoffThreshold?0:score}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}}},"./node_modules/amazon-chime-sdk-js/build/applicationmetadata/ApplicationMetadata.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class ApplicationMetadata{constructor(appName,appVersion){this.appName=appName,this.appVersion=appVersion}static create(appName,appVersion){const APP_NAME_REGEX=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!appName||appName.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!APP_NAME_REGEX.test(appName))throw new Error(`appName must satisfy ${APP_NAME_REGEX} regular expression`);if(!appVersion||appVersion.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm.test(appVersion))throw new Error("appVersion must satisfy Semantic Versioning format");return new ApplicationMetadata(appName,appVersion)}}exports.default=ApplicationMetadata},"./node_modules/amazon-chime-sdk-js/build/attendee/Attendee.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class Attendee{}},"./node_modules/amazon-chime-sdk-js/build/audiomixcontroller/DefaultAudioMixController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),AsyncScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js"));exports.default=class DefaultAudioMixController{constructor(logger){this.logger=logger,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new DefaultBrowserBehavior_1.default,this.observers=new Set}bindAudioElement(element){return __awaiter(this,void 0,void 0,(function*(){if(!element)throw new Error(`Cannot bind audio element: ${element}`);return this.audioElement=element,this.audioElement.autoplay=!0,this.bindAudioMix()}))}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver((observer=>{this.audioStream&&observer.meetingAudioStreamBecameInactive(this.audioStream)})))}bindAudioStream(stream){return __awaiter(this,void 0,void 0,(function*(){if(stream){this.audioStream=stream;try{yield this.bindAudioMix()}catch(error){this.logger&&this.logger.warn(`Failed to bind audio stream: ${error}`)}}}))}bindAudioDevice(device){return __awaiter(this,void 0,void 0,(function*(){if(device&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=device,this.bindAudioMix()}))}forEachObserver(observerFunc){for(const observer of this.observers)AsyncScheduler_1.default.nextTick((()=>{observerFunc(observer)}))}bindAudioMix(){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){if(!this.audioElement)return;const previousStream=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),previousStream!==this.audioStream&&this.forEachObserver((observer=>{previousStream&&observer.meetingAudioStreamBecameInactive(previousStream),this.audioStream&&observer.meetingAudioStreamBecameActive(this.audioStream)}));const shouldSetSinkId=(null===(_a=this.audioDevice)||void 0===_a?void 0:_a.deviceId)!==this.audioElement.sinkId;if(shouldSetSinkId&&void 0===this.audioElement.sinkId)throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const newSinkId=this.audioDevice?this.audioDevice.deviceId:"";if(newSinkId===this.audioElement.sinkId)return;const existingAudioElement=this.audioElement,existingStream=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(existingAudioElement.srcObject=null),shouldSetSinkId)try{yield existingAudioElement.setSinkId(newSinkId)}catch(error){throw null===(_b=this.logger)||void 0===_b||_b.error(`Failed to set sinkId for audio element: ${error}`),error}this.browserBehavior.hasChromiumWebRTC()&&(existingAudioElement.srcObject=existingStream)}))}getCurrentMeetingAudioStream(){return __awaiter(this,void 0,void 0,(function*(){return this.audioStream}))}addAudioMixObserver(observer){return __awaiter(this,void 0,void 0,(function*(){this.observers.add(observer)}))}removeAudioMixObserver(observer){return __awaiter(this,void 0,void 0,(function*(){this.observers.delete(observer)}))}audioOutputDidChange(device){return __awaiter(this,void 0,void 0,(function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(device)}))}}},"./node_modules/amazon-chime-sdk-js/build/audioprofile/AudioProfile.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js"));class AudioProfile{constructor(audioBitrateBps=null,enableAudioRedundancy=!0){this.audioBitrateBps=audioBitrateBps,this.enableAudioRedundancy=(new DefaultBrowserBehavior_1.default).supportsAudioRedundancy()&&enableAudioRedundancy}static fullbandSpeechMono(enableAudioRedundancy=!0){return new AudioProfile(4e4,enableAudioRedundancy)}static fullbandMusicMono(enableAudioRedundancy=!0){return new AudioProfile(64e3,enableAudioRedundancy)}static fullbandMusicStereo(enableAudioRedundancy=!0){return new AudioProfile(128e3,enableAudioRedundancy)}isStereo(){return 128e3===this.audioBitrateBps}hasRedundancyEnabled(){return this.enableAudioRedundancy}}exports.default=AudioProfile},"./node_modules/amazon-chime-sdk-js/build/audiovideocontroller/AudioVideoControllerState.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,exports.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;exports.default=class AudioVideoControllerState{constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=exports.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.prioritizedSendVideoCodecCapabilities=[],this.degradedVideoSendCodecs=[],this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null,this.isSessionConnected=!1}resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,void 0!==this.transceiverController&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=exports.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null,this.isSessionConnected=!1}}},"./node_modules/amazon-chime-sdk-js/build/audiovideocontroller/DefaultAudioVideoController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultActiveSpeakerDetector_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/activespeakerdetector/DefaultActiveSpeakerDetector.js")),DefaultAudioMixController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audiomixcontroller/DefaultAudioMixController.js")),AudioProfile_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audioprofile/AudioProfile.js")),DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),ConnectionHealthData_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/ConnectionHealthData.js")),SignalingAndMetricsConnectionMonitor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionmonitor/SignalingAndMetricsConnectionMonitor.js")),VideoQualitySettings_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoQualitySettings.js")),MeetingSessionStatus_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatus.js")),MeetingSessionStatusCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatusCode.js")),MeetingSessionVideoAvailability_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionVideoAvailability.js")),DefaultModality_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/modality/DefaultModality.js")),DefaultPingPong_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/pingpong/DefaultPingPong.js")),DefaultRealtimeController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/realtimecontroller/DefaultRealtimeController.js")),AsyncScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js")),DefaultSessionStateController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/DefaultSessionStateController.js")),SessionStateControllerAction_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerAction.js")),SessionStateControllerState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerState.js")),SessionStateControllerTransitionResult_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerTransitionResult.js")),DefaultSignalingClient_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/DefaultSignalingClient.js")),ServerSideNetworkAdaption_1=__importStar(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/ServerSideNetworkAdaption.js")),SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),SignalingClientVideoSubscriptionConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientVideoSubscriptionConfiguration.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),StatsCollector_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/statscollector/StatsCollector.js")),AttachMediaInputTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/AttachMediaInputTask.js")),CleanRestartedSessionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/CleanRestartedSessionTask.js")),CleanStoppedSessionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/CleanStoppedSessionTask.js")),CreatePeerConnectionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/CreatePeerConnectionTask.js")),CreateSDPTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/CreateSDPTask.js")),FinishGatheringICECandidatesTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/FinishGatheringICECandidatesTask.js")),JoinAndReceiveIndexTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/JoinAndReceiveIndexTask.js")),LeaveAndReceiveLeaveAckTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/LeaveAndReceiveLeaveAckTask.js")),ListenForVolumeIndicatorsTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ListenForVolumeIndicatorsTask.js")),MonitorTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/MonitorTask.js")),OpenSignalingConnectionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/OpenSignalingConnectionTask.js")),ParallelGroupTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ParallelGroupTask.js")),PromoteToPrimaryMeetingTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/PromoteToPrimaryMeetingTask.js")),ReceiveAudioInputTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ReceiveAudioInputTask.js")),ReceiveRemoteVideoPauseResumeTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ReceiveRemoteVideoPauseResumeTask.js")),ReceiveVideoInputTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ReceiveVideoInputTask.js")),ReceiveVideoStreamIndexTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ReceiveVideoStreamIndexTask.js")),SendAndReceiveDataMessagesTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/SendAndReceiveDataMessagesTask.js")),SerialGroupTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/SerialGroupTask.js")),SetLocalDescriptionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/SetLocalDescriptionTask.js")),SetRemoteDescriptionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/SetRemoteDescriptionTask.js")),SubscribeAndReceiveSubscribeAckTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/SubscribeAndReceiveSubscribeAckTask.js")),TimeoutTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/TimeoutTask.js")),WaitForAttendeePresenceTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/WaitForAttendeePresenceTask.js")),DefaultTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/DefaultTransceiverController.js")),SimulcastContentShareTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/SimulcastContentShareTransceiverController.js")),SimulcastTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/SimulcastTransceiverController.js")),VideoOnlyTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/VideoOnlyTransceiverController.js")),Types_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Types.js"),DefaultVideoCaptureAndEncodeParameter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videocaptureandencodeparameter/DefaultVideoCaptureAndEncodeParameter.js")),AllHighestVideoBandwidthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/AllHighestVideoBandwidthPolicy.js")),VideoAdaptiveProbePolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoAdaptiveProbePolicy.js")),VideoPreferences_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPreferences.js"),DefaultVideoStreamIdSet_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamidset/DefaultVideoStreamIdSet.js")),DefaultVideoStreamIndex_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamindex/DefaultVideoStreamIndex.js")),SimulcastVideoStreamIndex_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamindex/SimulcastVideoStreamIndex.js")),DefaultVideoTileController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotilecontroller/DefaultVideoTileController.js")),DefaultVideoTileFactory_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotilefactory/DefaultVideoTileFactory.js")),DefaultSimulcastUplinkPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/DefaultSimulcastUplinkPolicy.js")),NScaleVideoUplinkBandwidthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/NScaleVideoUplinkBandwidthPolicy.js")),DefaultVolumeIndicatorAdapter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/volumeindicatoradapter/DefaultVolumeIndicatorAdapter.js")),AudioVideoControllerState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audiovideocontroller/AudioVideoControllerState.js"));class DefaultAudioVideoController{constructor(configuration,logger,webSocketAdapter,mediaStreamBroker,reconnectController,eventController){this._audioProfile=new AudioProfile_1.default,this.connectionHealthData=new ConnectionHealthData_1.default,this.observerQueue=new Set,this.meetingSessionContext=new AudioVideoControllerState_1.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.receiveRemotePauseResumeTask=void 0,this.destroyed=!1,this._logger=logger,this.sessionStateController=new DefaultSessionStateController_1.default(this._logger),this._configuration=configuration,this._webSocketAdapter=webSocketAdapter,this._realtimeController=new DefaultRealtimeController_1.default(mediaStreamBroker),this._realtimeController.realtimeSetLocalAttendeeId(configuration.credentials.attendeeId,configuration.credentials.externalUserId),this._mediaStreamBroker=mediaStreamBroker,this._reconnectController=reconnectController,this._videoTileController=new DefaultVideoTileController_1.default(new DefaultVideoTileFactory_1.default,this,this._logger),this._audioMixController=new DefaultAudioMixController_1.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=eventController}destroy(){return __awaiter(this,void 0,void 0,(function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0}))}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new DefaultActiveSpeakerDetector_1.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(selector){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(selector):null}setAudioProfile(audioProfile){this._audioProfile=audioProfile}addObserver(observer){this.logger.info("adding meeting observer"),this.observerQueue.add(observer)}removeObserver(observer){this.logger.info("removing meeting observer"),this.observerQueue.delete(observer)}forEachObserver(observerFunc){for(const observer of this.observerQueue)AsyncScheduler_1.default.nextTick((()=>{this.observerQueue.has(observer)&&observerFunc(observer)}))}initSignalingClient(){this.connectionHealthData.reset(),this.meetingSessionContext.signalingClient||(this.meetingSessionContext=new AudioVideoControllerState_1.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new DefaultBrowserBehavior_1.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new DefaultSignalingClient_1.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then((()=>{const handleClosed=()=>__awaiter(this,void 0,void 0,(function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}));this.preStartObserver={handleSignalingClientEvent(event){event.type===SignalingClientEventType_1.default.WebSocketClosed&&handleClosed()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)})).catch((e=>{this.logger.error(`Signaling task pre-start failed: ${e}`),this.signalingTask=void 0}))}start(options){this.startReturningPromise(options).then((()=>{this.logger.info("start completed")})).catch((e=>{this.logger.error(`start failed: ${e}`)}))}startReturningPromise(options){return!0===(null==options?void 0:options.signalingOnly)?this.prestart():(this.activeSpeakerDetector,new Promise(((resolve,reject)=>{this.sessionStateController.perform(SessionStateControllerAction_1.default.Connect,(()=>{this.actionConnect(!1).then(resolve).catch(reject)}))})))}connectWithPromises(needsToWaitForAttendeePresence){const context=this.meetingSessionContext;this.monitorTask=new MonitorTask_1.default(context,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const monitor=this.monitorTask.once(),receiveAudioInput=new ReceiveAudioInputTask_1.default(context).once();this.receiveIndexTask=new ReceiveVideoStreamIndexTask_1.default(context),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const signaling=new SerialGroupTask_1.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new ListenForVolumeIndicatorsTask_1.default(context),new SendAndReceiveDataMessagesTask_1.default(context),new JoinAndReceiveIndexTask_1.default(context),this.receiveIndexTask]).once(),createPeerConnection=new CreatePeerConnectionTask_1.default(context).once(signaling),attachMediaInput=new AttachMediaInputTask_1.default(context).once(createPeerConnection,receiveAudioInput),createSDP=new CreateSDPTask_1.default(context).once(attachMediaInput),setLocalDescription=new SetLocalDescriptionTask_1.default(context).once(createSDP),ice=new FinishGatheringICECandidatesTask_1.default(context).once(setLocalDescription),subscribeAck=new SubscribeAndReceiveSubscribeAckTask_1.default(context).once(ice);return this.receiveRemotePauseResumeTask=new ReceiveRemoteVideoPauseResumeTask_1.default(context),this.receiveRemotePauseResumeTask.once(subscribeAck),new SerialGroupTask_1.default(this.logger,this.wrapTaskName("AudioVideoStart"),[monitor,((timeoutMs,task)=>new TimeoutTask_1.default(this.logger,task,timeoutMs))(this.configuration.connectionTimeoutMs,new SerialGroupTask_1.default(this.logger,"Peer",[subscribeAck,this.receiveRemotePauseResumeTask,needsToWaitForAttendeePresence?new TimeoutTask_1.default(this.logger,new ParallelGroupTask_1.default(this.logger,"FinalizeConnection",[new WaitForAttendeePresenceTask_1.default(context),new SetRemoteDescriptionTask_1.default(context)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new SetRemoteDescriptionTask_1.default(context)]))])}actionConnect(reconnecting){var _a;return __awaiter(this,void 0,void 0,(function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(new DefaultBrowserBehavior_1.default).hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&(new DefaultBrowserBehavior_1.default).supportsScalableVideoCoding();const useAudioConnection=!!this.configuration.urls.audioHostURL;if(useAudioConnection?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new DefaultModality_1.default(this.configuration.credentials.attendeeId).hasModality(DefaultModality_1.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new SimulcastContentShareTransceiverController_1.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new SimulcastTransceiverController_1.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new DefaultTransceiverController_1.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new VideoOnlyTransceiverController_1.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new DefaultVolumeIndicatorAdapter_1.default(this.logger,this._realtimeController,DefaultAudioVideoController.MIN_VOLUME_DECIBELS,DefaultAudioVideoController.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let simulcastPolicy=this.meetingSessionContext.videoUplinkBandwidthPolicy;simulcastPolicy||(simulcastPolicy=new DefaultSimulcastUplinkPolicy_1.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=simulcastPolicy),simulcastPolicy.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new VideoAdaptiveProbePolicy_1.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new SimulcastVideoStreamIndex_1.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new DefaultVideoStreamIndex_1.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new NScaleVideoUplinkBandwidthPolicy_1.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new AllHighestVideoBandwidthPolicy_1.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new DefaultModality_1.default(this.configuration.credentials.attendeeId).hasModality(DefaultModality_1.default.MODALITY_CONTENT)){const enableUhdContent=this.configuration.meetingFeatures.contentMaxResolution===VideoQualitySettings_1.default.VideoResolutionUHD;enableUhdContent&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(enableUhdContent)}else{const enableFhdVideo=this.configuration.meetingFeatures.videoMaxResolution===VideoQualitySettings_1.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(enableFhdVideo)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver((()=>this.update({needsRenegotiation:!1}))),this.meetingSessionContext.lastKnownVideoAvailability=new MeetingSessionVideoAvailability_1.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new DefaultVideoCaptureAndEncodeParameter_1.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new DefaultVideoStreamIdSet_1.default,this.meetingSessionContext.videosPaused=new DefaultVideoStreamIdSet_1.default,this.meetingSessionContext.statsCollector=new StatsCollector_1.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new SignalingAndMetricsConnectionMonitor_1.default(this,this._realtimeController,this.connectionHealthData,new DefaultPingPong_1.default(this.meetingSessionContext.signalingClient,DefaultAudioVideoController.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},this._videoTileController.registerVideoTileResolutionObserver(this.meetingSessionContext.statsCollector),reconnecting||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver((observer=>{Types_1.Maybe.of(observer.audioVideoDidStartConnecting).map((f=>f.bind(observer)(!1)))})),null===(_a=this.eventController)||void 0===_a||_a.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const needsToWaitForAttendeePresence=useAudioConnection&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+needsToWaitForAttendeePresence);const connect=this.connectWithPromises(needsToWaitForAttendeePresence);try{yield connect.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(SessionStateControllerAction_1.default.FinishConnecting,(()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()}))}catch(error){this.signalingTask=void 0;const status=new MeetingSessionStatus_1.default(this.getMeetingStatusCode(error)||MeetingSessionStatusCode_1.default.TaskFailed);if(this.logger.info(`Start failed: ${status} due to error ${error}.`),this.sessionStateController.state()===SessionStateControllerState_1.default.NotConnected)return void this.logger.info("Start failed and not connected. Not cleaning up.");this.sessionStateController.perform(SessionStateControllerAction_1.default.Fail,(()=>__awaiter(this,void 0,void 0,(function*(){yield this.actionDisconnect(status,!0,error),this.handleMeetingSessionStatus(status,error)||this.notifyStop(status,error)}))))}}))}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new TimeoutTask_1.default(this.logger,new OpenSignalingConnectionTask_1.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=SignalingProtocol_js_1.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.meetingSessionContext.isSessionConnected=!0,this.forEachObserver((observer=>{Types_1.Maybe.of(observer.audioVideoDidStart).map((f=>f.bind(observer)()))})),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var _a;return this._reconnectController.disableReconnect(),this.sessionStateController.state()===SessionStateControllerState_1.default.NotConnected?(null===(_a=this.meetingSessionContext.signalingClient)||void 0===_a||_a.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise(((resolve,reject)=>{this.sessionStateController.perform(SessionStateControllerAction_1.default.Disconnect,(()=>{this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new MeetingSessionStatus_1.default(MeetingSessionStatusCode_1.default.Left),!1,null).then(resolve).catch(reject)}))}))}stop(){this.stopReturningPromise()}actionDisconnect(status,reconnecting,error){return __awaiter(this,void 0,void 0,(function*(){try{yield new SerialGroupTask_1.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new TimeoutTask_1.default(this.logger,new LeaveAndReceiveLeaveAckTask_1.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch(stopError){this.logger.info("fail to stop")}try{const subtasks=[new TimeoutTask_1.default(this.logger,new CleanStoppedSessionTask_1.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new SerialGroupTask_1.default(this.logger,this.wrapTaskName("AudioVideoClean"),subtasks).run()}catch(cleanError){this.logger.info("fail to clean")}this.sessionStateController.perform(SessionStateControllerAction_1.default.FinishDisconnecting,(()=>{reconnecting||this.notifyStop(status,error)})),this._videoTileController.removeVideoTileResolutionObserver(this.meetingSessionContext.statsCollector)}))}update(options={needsRenegotiation:!0}){let needsRenegotiation=options.needsRenegotiation;if(needsRenegotiation||(needsRenegotiation=void 0===this.meetingSessionContext.peer),needsRenegotiation||(needsRenegotiation=!this.updateRemoteVideosFromPolicy()),needsRenegotiation||(needsRenegotiation=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!needsRenegotiation)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const result=this.sessionStateController.perform(SessionStateControllerAction_1.default.Update,(()=>{this.actionUpdateWithRenegotiation(!0)}));return result===SessionStateControllerTransitionResult_1.default.Transitioned||result===SessionStateControllerTransitionResult_1.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&void 0!==this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences&&void 0!==this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption&&!ServerSideNetworkAdaption_1.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===ServerSideNetworkAdaption_1.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const streamChanges=this.detectChangesInVideosToReceive();if(void 0===streamChanges)return!1;const added=streamChanges.added,simulcastStreamUpdates=streamChanges.simulcastStreamUpdates,removed=streamChanges.removed,context=this.meetingSessionContext,updatedVideoSubscriptionConfigurations=[];for(const[previousId,currentId]of simulcastStreamUpdates.entries()){const updatedConfig=new SignalingClientVideoSubscriptionConfiguration_1.default;if(updatedConfig.streamId=currentId,updatedConfig.attendeeId=context.videoStreamIndex.attendeeIdForStreamId(currentId),updatedConfig.mid=context.transceiverController.getMidForStreamId(previousId),void 0===updatedConfig.mid)return this.logger.info(`No MID found for stream ID ${previousId}, cannot update stream without renegotiation`),!1;if(updatedVideoSubscriptionConfigurations.push(updatedConfig),context.transceiverController.setStreamIdForMid(updatedConfig.mid,currentId),context.videoStreamIndex.overrideStreamIdMappings(previousId,currentId),context.videoTileController.haveVideoTileForAttendeeId(updatedConfig.attendeeId)){const tile=context.videoTileController.getVideoTileForAttendeeId(updatedConfig.attendeeId);if(!tile.setStreamId)return!1;tile.setStreamId(currentId)}}return 0!==updatedVideoSubscriptionConfigurations.length&&context.signalingClient.remoteVideoUpdate(updatedVideoSubscriptionConfigurations,[]),0===added.length&&0===removed.length&&(context.videoStreamIndex.remoteVideoUpdateSent(),!0)}detectChangesInVideosToReceive(){const context=this.meetingSessionContext;if(null===context.videosToReceive)return;if(!(context.transceiverController&&context.transceiverController.getMidForStreamId&&context.transceiverController.setStreamIdForMid&&context.videosToReceive.forEach&&context.signalingClient.remoteVideoUpdate&&context.videoStreamIndex.overrideStreamIdMappings))return;let added=[];const simulcastStreamUpdates=new Map;let removed=[];if(null===context.lastVideosToReceive)added=context.videosToReceive.array();else{const index=context.videoStreamIndex;context.videosToReceive.forEach((currentId=>{if(context.lastVideosToReceive.contain(currentId))return;let foundUpdatedPreviousStreamId=!1;context.lastVideosToReceive.forEach((previousId=>{foundUpdatedPreviousStreamId||index.StreamIdsInSameGroup(previousId,currentId)&&(simulcastStreamUpdates.set(previousId,currentId),foundUpdatedPreviousStreamId=!0)})),foundUpdatedPreviousStreamId||added.push(currentId)})),removed=context.lastVideosToReceive.array().filter((idFromPrevious=>{const stillReceiving=context.videosToReceive.contain(idFromPrevious),isUpdated=simulcastStreamUpdates.has(idFromPrevious);return!stillReceiving&&!isUpdated}))}return this.logger.info(`Request to update remote videos with added: [${added}], updated: [${Array.from(simulcastStreamUpdates.entries()).map((([key,value])=>`${key}->${value}`)).join(",")}], removed: [${removed}]`),{added,removed,simulcastStreamUpdates}}isNotAddingOrRemovingStreams(){const streamChanges=this.detectChangesInVideosToReceive();if(void 0===streamChanges)return!1;const added=streamChanges.added,removed=streamChanges.removed;return 0===added.length&&0===removed.length&&(this.meetingSessionContext.videoStreamIndex.remoteVideoUpdateSent(),!0)}sendRemoteVideoUpdate(){const context=this.meetingSessionContext;if(null===context.videosToReceive)return!1;const groupIdsToReceive=context.videosToReceive.array().map((streamId=>context.videoStreamIndex.groupIdForStreamId(streamId)));this.receiveRemotePauseResumeTask.updateSubscribedGroupdIds(new Set(groupIdsToReceive));const currentConfigs=VideoPreferences_1.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(context,groupIdsToReceive,context.videoDownlinkBandwidthPolicy.getVideoPreferences()),newVideoSubscriptionConfigurationsMap=new Map,addedOrUpdated=[];for(const config of currentConfigs){let shouldIncludeInUpdate=!1;if(context.lastVideoSubscriptionConfiguration.has(config.groupId)){const lastConfig=context.lastVideoSubscriptionConfiguration.get(config.groupId);config.equals(lastConfig)||(this.logger.debug(`${JSON.stringify(config)} does not equal ${JSON.stringify(lastConfig)}, sending update`),shouldIncludeInUpdate=!0)}else shouldIncludeInUpdate=!0;newVideoSubscriptionConfigurationsMap.set(config.groupId,config),shouldIncludeInUpdate&&addedOrUpdated.push(config)}context.lastVideoSubscriptionConfiguration=newVideoSubscriptionConfigurationsMap;const removedMids=[];if(null!==context.lastVideosToReceive){const groupIdsToReceiveSet=new Set(groupIdsToReceive);for(const streamId of context.lastVideosToReceive.array()){const groupId=context.videoStreamIndex.groupIdForStreamId(streamId);if(!groupIdsToReceiveSet.has(groupId)){const mid=context.transceiverController.getMidForGroupId(groupId);if(void 0===mid){context.logger.warn(`Could not find MID for group ID to remove: ${groupId}`);continue}removedMids.push(mid)}}}return 0===addedOrUpdated.length&&0===removedMids.length||context.signalingClient.remoteVideoUpdate(addedOrUpdated,removedMids),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const encodingParam=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&this.meetingSessionContext.transceiverController.hasVideoInput()&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(encodingParam)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const parameters=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!(!parameters||!parameters.headerExtensions)&&parameters.headerExtensions.some((extension=>"http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"===extension.uri))}restartLocalVideo(callback){const restartVideo=()=>__awaiter(this,void 0,void 0,(function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),callback()})),result=this.sessionStateController.perform(SessionStateControllerAction_1.default.Update,(()=>{restartVideo()}));return result===SessionStateControllerTransitionResult_1.default.Transitioned||result===SessionStateControllerTransitionResult_1.default.DeferredTransition}replaceLocalVideo(videoStream){return __awaiter(this,void 0,void 0,(function*(){if(!videoStream||videoStream.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const localTile=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(localTile){const state=localTile.state(),settings=videoStream.getVideoTracks()[0].getSettings();localTile.bindVideoStream(state.boundAttendeeId,!0,videoStream,settings.width,settings.height,state.streamId,state.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(videoStream.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=videoStream,this.logger.info("Local video input is updated")}))}replaceLocalAudio(audioStream){return __awaiter(this,void 0,void 0,(function*(){if(!audioStream||audioStream.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime();if(!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(audioStream.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=audioStream,this.logger.info("Local audio input is updated")}))}actionUpdateWithRenegotiation(notify){return __awaiter(this,void 0,void 0,(function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new SerialGroupTask_1.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new ReceiveVideoInputTask_1.default(this.meetingSessionContext),new TimeoutTask_1.default(this.logger,new SerialGroupTask_1.default(this.logger,"UpdateSession",[new AttachMediaInputTask_1.default(this.meetingSessionContext),new CreateSDPTask_1.default(this.meetingSessionContext),new SetLocalDescriptionTask_1.default(this.meetingSessionContext),new FinishGatheringICECandidatesTask_1.default(this.meetingSessionContext),new SubscribeAndReceiveSubscribeAckTask_1.default(this.meetingSessionContext),new SetRemoteDescriptionTask_1.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),notify&&this.sessionStateController.perform(SessionStateControllerAction_1.default.FinishUpdating,(()=>{this.actionFinishUpdating()}))}catch(error){this.sessionStateController.perform(SessionStateControllerAction_1.default.FinishUpdating,(()=>{const status=new MeetingSessionStatus_1.default(this.getMeetingStatusCode(error)||MeetingSessionStatusCode_1.default.TaskFailed);status.statusCode()!==MeetingSessionStatusCode_1.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(status,error)}))}}))}notifyStop(status,error){var _a;if(this.forEachObserver((observer=>{Types_1.Maybe.of(observer.audioVideoDidStop).map((f=>f.bind(observer)(status)))})),this.eventController){const{signalingOpenDurationMs,poorConnectionCount,startTimeMs,iceGatheringDurationMs,attendeePresenceDurationMs,meetingStartDurationMs}=this.meetingSessionContext,attributes={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:null===startTimeMs?0:Math.round(Date.now()-startTimeMs),meetingStatus:MeetingSessionStatusCode_1.default[status.statusCode()],signalingOpenDurationMs,iceGatheringDurationMs,attendeePresenceDurationMs,poorConnectionCount,meetingStartDurationMs,retryCount:this.totalRetryCount},meetingErrorMessage=error&&error.message||(null===(_a=status.toString)||void 0===_a?void 0:_a.call(status))||"";0===attributes.meetingDurationMs?(attributes.meetingErrorMessage=meetingErrorMessage,delete attributes.meetingDurationMs,delete attributes.attendeePresenceDurationMs,delete attributes.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",attributes)):status.isFailure()||status.isAudioConnectionFailure()?(attributes.meetingErrorMessage=meetingErrorMessage,this.eventController.publishEvent("meetingFailed",attributes)):this.eventController.publishEvent("meetingEnded",attributes)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const maxBitrateKbps=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(maxBitrateKbps)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(status,error){this.promotedToPrimaryMeeting&&(this.promotedToPrimaryMeeting=!1,this.forEachObserver((observer=>{Types_1.Maybe.of(observer.audioVideoWasDemotedFromPrimaryMeeting).map((f=>f.bind(observer)(new MeetingSessionStatus_1.default(MeetingSessionStatusCode_1.default.AudioVideoDisconnectedWhilePromoted))))})));const willRetry=this._reconnectController.retryWithBackoff((()=>__awaiter(this,void 0,void 0,(function*(){this.sessionStateController.state()===SessionStateControllerState_1.default.NotConnected?this.sessionStateController.perform(SessionStateControllerAction_1.default.Connect,(()=>{this.actionConnect(!0)})):this.sessionStateController.perform(SessionStateControllerAction_1.default.Reconnect,(()=>{this.actionReconnect(status)})),this.totalRetryCount+=1}))),(()=>{this.logger.info("canceled retry")}));return willRetry||this.sessionStateController.perform(SessionStateControllerAction_1.default.Fail,(()=>{this.actionDisconnect(status,!1,error)})),willRetry}actionReconnect(status){return __awaiter(this,void 0,void 0,(function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver((observer=>{Types_1.Maybe.of(observer.audioVideoDidStartConnecting).map((f=>f.bind(observer)(!0)))}))),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset(),this.receiveRemotePauseResumeTask=new ReceiveRemoteVideoPauseResumeTask_1.default(this.meetingSessionContext);try{yield new SerialGroupTask_1.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new TimeoutTask_1.default(this.logger,new SerialGroupTask_1.default(this.logger,"Media",[new CleanRestartedSessionTask_1.default(this.meetingSessionContext),new SerialGroupTask_1.default(this.logger,"Signaling",[new OpenSignalingConnectionTask_1.default(this.meetingSessionContext),new JoinAndReceiveIndexTask_1.default(this.meetingSessionContext)]),new CreatePeerConnectionTask_1.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new ReceiveVideoInputTask_1.default(this.meetingSessionContext),new TimeoutTask_1.default(this.logger,new SerialGroupTask_1.default(this.logger,"UpdateSession",[new AttachMediaInputTask_1.default(this.meetingSessionContext),new CreateSDPTask_1.default(this.meetingSessionContext),new SetLocalDescriptionTask_1.default(this.meetingSessionContext),new FinishGatheringICECandidatesTask_1.default(this.meetingSessionContext),new SubscribeAndReceiveSubscribeAckTask_1.default(this.meetingSessionContext),new SetRemoteDescriptionTask_1.default(this.meetingSessionContext),this.receiveRemotePauseResumeTask]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(SessionStateControllerAction_1.default.FinishConnecting,(()=>{if(this.eventController){const{signalingOpenDurationMs,poorConnectionCount,startTimeMs,iceGatheringDurationMs,attendeePresenceDurationMs,meetingStartDurationMs}=this.meetingSessionContext,attributes={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-startTimeMs),meetingStatus:MeetingSessionStatusCode_1.default[status.statusCode()],signalingOpenDurationMs,iceGatheringDurationMs,attendeePresenceDurationMs,poorConnectionCount,meetingStartDurationMs,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",attributes)}this.actionFinishConnecting()}))}catch(error){this.sessionStateController.perform(SessionStateControllerAction_1.default.FinishConnecting,(()=>{this.logger.info("failed to reconnect audio-video session");const status=new MeetingSessionStatus_1.default(this.getMeetingStatusCode(error)||MeetingSessionStatusCode_1.default.TaskFailed);this.handleMeetingSessionStatus(status,error)}))}this.connectionHealthData.setConnectionStartTime()}))}wrapTaskName(taskName){return`${taskName}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(error){const matched=/the meeting status code: (\d+)/.exec(error&&error.message);return matched&&matched.length>1?Number.parseInt(matched[1],10):null}enforceBandwidthLimitationForSender(maxBitrateKbps){return __awaiter(this,void 0,void 0,(function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(maxBitrateKbps)}))}handleMeetingSessionStatus(status,error){if(this.logger.info(`handling status: ${MeetingSessionStatusCode_1.default[status.statusCode()]}`),status.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(status),status.statusCode()===MeetingSessionStatusCode_1.default.IncompatibleSDP)return this.restartLocalVideo((()=>{this.logger.info("handled incompatible SDP by attempting to restart video")})),!0;if(status.statusCode()===MeetingSessionStatusCode_1.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver((observer=>{Types_1.Maybe.of(observer.videoSendDidBecomeUnavailable).map((f=>f.bind(observer)()))})),!1;if(status.statusCode()===MeetingSessionStatusCode_1.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver((observer=>{Types_1.Maybe.of(observer.audioVideoWasDemotedFromPrimaryMeeting).map((f=>f.bind(observer)(status)))})),!1;if(status.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(status.isFailure()||status.isTerminal())&&this.meetingSessionContext.reconnectController){const willReconnect=this.reconnect(status,error);return willReconnect?this.logger.warn(`The audio video controller will reconnect due to status code ${MeetingSessionStatusCode_1.default[status.statusCode()]}${error?` and error: ${error.message}`:""}`):this.logger.error(`The audio video controller failed with status code ${MeetingSessionStatusCode_1.default[status.statusCode()]}${error?` and error: ${error.message}`:""}`),willReconnect}return!1}setVideoMaxBandwidthKbps(maxBandwidthKbps){if(maxBandwidthKbps<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${maxBandwidthKbps} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(maxBandwidthKbps)),this.maxUplinkBandwidthKbps=maxBandwidthKbps}handleHasBandwidthPriority(hasBandwidthPriority){return __awaiter(this,void 0,void 0,(function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink)return this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(hasBandwidthPriority),void(yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController());const oldMaxBandwidth=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(hasBandwidthPriority);const newMaxBandwidth=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();oldMaxBandwidth!==newMaxBandwidth&&(this.logger.info(`video send bandwidth priority ${hasBandwidthPriority} max has changed from ${oldMaxBandwidth} kbps to ${newMaxBandwidth} kbps`),yield this.enforceBandwidthLimitationForSender(newMaxBandwidth))}}))}pauseReceivingStream(streamId){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([streamId])}resumeReceivingStream(streamId){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([streamId])}setVideoCodecSendPreferences(preferences){this.videoSendCodecPreferences=preferences,this.meetingSessionContext.videoSendCodecPreferences=preferences,this.sessionStateController.state()!==SessionStateControllerState_1.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex}=this.meetingSessionContext;if(!videoStreamIndex)return this.logger.info("meeting has not started"),[];const selfAttendeeId=this.configuration.credentials.attendeeId;return videoStreamIndex.allVideoSendingSourcesExcludingSelf(selfAttendeeId)}encodingSimulcastLayersDidChange(simulcastLayers){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver((observer=>{Types_1.Maybe.of(observer.encodingSimulcastLayersDidChange).map((f=>f.bind(observer)(simulcastLayers)))}))}promoteToPrimaryMeeting(credentials){return this.actionPromoteToPrimaryMeeting(credentials)}actionPromoteToPrimaryMeeting(credentials){return __awaiter(this,void 0,void 0,(function*(){let resultingStatus=new MeetingSessionStatus_1.default(MeetingSessionStatusCode_1.default.SignalingRequestFailed);return yield new SerialGroupTask_1.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new TimeoutTask_1.default(this.logger,new PromoteToPrimaryMeetingTask_1.default(this.meetingSessionContext,credentials,(status=>{resultingStatus=status})),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=resultingStatus.statusCode()===MeetingSessionStatusCode_1.default.OK,resultingStatus}))}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver((observer=>{Types_1.Maybe.of(observer.audioVideoWasDemotedFromPrimaryMeeting).map((f=>f.bind(observer)(new MeetingSessionStatus_1.default(MeetingSessionStatusCode_1.default.OK))))}))}videoInputDidChange(videoStream){return __awaiter(this,void 0,void 0,(function*(){this.logger.info("Receive a video input change event"),this.meetingSessionContext&&this.meetingSessionContext.peer?this._videoTileController.hasStartedLocalVideoTile()&&(videoStream?yield this.replaceLocalVideo(videoStream):this._videoTileController.stopLocalVideoTile()):this.logger.info("Skip updating video input because there is no active meeting and peer connection")}))}audioInputDidChange(audioStream){return __awaiter(this,void 0,void 0,(function*(){if(this.logger.info("Receive an audio input change event"),this.meetingSessionContext&&this.meetingSessionContext.peer){if(!audioStream)try{audioStream=yield this.mediaStreamBroker.acquireAudioInputStream()}catch(error){return void this.logger.error("Could not acquire audio track from mediaStreamBroker")}yield this.replaceLocalAudio(audioStream)}else this.logger.info("Skip updating audio input because there is no active meeting and peer connection")}))}}exports.default=DefaultAudioVideoController,DefaultAudioVideoController.MIN_VOLUME_DECIBELS=-42,DefaultAudioVideoController.MAX_VOLUME_DECIBELS=-14,DefaultAudioVideoController.PING_PONG_INTERVAL_MS=1e4},"./node_modules/amazon-chime-sdk-js/build/audiovideocontroller/NoOpAudioVideoController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const FullJitterBackoff_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterBackoff.js")),DefaultEventController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventcontroller/DefaultEventController.js")),NoOpDebugLogger_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/NoOpDebugLogger.js")),NoOpMediaStreamBroker_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/mediastreambroker/NoOpMediaStreamBroker.js")),MeetingSessionConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionConfiguration.js")),MeetingSessionCredentials_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionCredentials.js")),MeetingSessionStatus_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatus.js")),MeetingSessionStatusCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatusCode.js")),MeetingSessionURLs_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionURLs.js")),DefaultReconnectController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/reconnectcontroller/DefaultReconnectController.js")),DefaultWebSocketAdapter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/websocketadapter/DefaultWebSocketAdapter.js")),DefaultAudioVideoController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audiovideocontroller/DefaultAudioVideoController.js"));class NoOpAudioVideoController extends DefaultAudioVideoController_1.default{constructor(configuration){const emptyConfiguration=new MeetingSessionConfiguration_1.default;emptyConfiguration.meetingId="",emptyConfiguration.externalMeetingId="",emptyConfiguration.credentials=new MeetingSessionCredentials_1.default,emptyConfiguration.credentials.attendeeId="",emptyConfiguration.credentials.joinToken="",emptyConfiguration.urls=new MeetingSessionURLs_1.default,emptyConfiguration.urls.turnControlURL="",emptyConfiguration.urls.audioHostURL="",emptyConfiguration.urls.signalingURL="wss://localhost/";const noOpLogger=new NoOpDebugLogger_1.default;super(configuration||emptyConfiguration,noOpLogger,new DefaultWebSocketAdapter_1.default(new NoOpDebugLogger_1.default),new NoOpMediaStreamBroker_1.default,new DefaultReconnectController_1.default(0,new FullJitterBackoff_1.default(0,0,0)),new DefaultEventController_1.default(configuration||emptyConfiguration,noOpLogger))}setAudioProfile(_audioProfile){}start(){}stop(){}promoteToPrimaryMeeting(_){return Promise.resolve(new MeetingSessionStatus_1.default(MeetingSessionStatusCode_1.default.OK))}demoteFromPrimaryMeeting(){}}exports.default=NoOpAudioVideoController},"./node_modules/amazon-chime-sdk-js/build/audiovideofacade/DefaultAudioVideoFacade.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const VideoTransformDevice_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoTransformDevice.js");exports.default=class DefaultAudioVideoFacade{constructor(audioVideoController,videoTileController,realtimeController,audioMixController,deviceController,contentShareController){this.audioVideoController=audioVideoController,this.videoTileController=videoTileController,this.realtimeController=realtimeController,this.audioMixController=audioMixController,this.deviceController=deviceController,this.contentShareController=contentShareController}addObserver(observer){this.audioVideoController.addObserver(observer),this.trace("addObserver")}removeObserver(observer){this.audioVideoController.removeObserver(observer),this.trace("removeObserver")}setAudioProfile(audioProfile){this.trace("setAudioProfile",audioProfile),this.audioVideoController.setAudioProfile(audioProfile)}start(options){this.audioVideoController.start(options),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(selector){return this.trace("getRTCPeerConnectionStats",selector?selector.id:null),this.audioVideoController.getRTCPeerConnectionStats(selector)}bindAudioElement(element){const result=this.audioMixController.bindAudioElement(element);return this.trace("bindAudioElement",element.id,result),result}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(observer){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(observer)}removeAudioMixObserver(observer){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(observer)}bindVideoElement(tileId,videoElement){this.videoTileController.bindVideoElement(tileId,videoElement),this.trace("bindVideoElement",{tileId,videoElementId:videoElement.id})}unbindVideoElement(tileId,cleanUpVideoElement=!0){this.videoTileController.unbindVideoElement(tileId,cleanUpVideoElement),this.trace("unbindVideoElement",{tileId,cleanUpVideoElement})}startLocalVideoTile(){const result=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,result),result}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const result=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,result),result}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const result=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),result}pauseVideoTile(tileId){this.videoTileController.pauseVideoTile(tileId),this.trace("pauseVideoTile",tileId)}unpauseVideoTile(tileId){this.videoTileController.unpauseVideoTile(tileId),this.trace("unpauseVideoTile",tileId)}getVideoTile(tileId){const result=this.videoTileController.getVideoTile(tileId);return this.trace("getVideoTile",tileId),result}getAllRemoteVideoTiles(){const result=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),result}getAllVideoTiles(){const result=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),result}addVideoTile(){const result=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,result.state()),result}removeVideoTile(tileId){this.videoTileController.removeVideoTile(tileId),this.trace("removeVideoTile",tileId)}removeVideoTilesByAttendeeId(attendeeId){const result=this.videoTileController.removeVideoTilesByAttendeeId(attendeeId);return this.trace("removeVideoTilesByAttendeeId",attendeeId,result),result}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(tileId){const result=this.videoTileController.captureVideoTile(tileId);return this.trace("captureVideoTile",tileId),result}realtimeSubscribeToAttendeeIdPresence(callback){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(callback),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(callback){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(callback),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(canUnmute){this.realtimeController.realtimeSetCanUnmuteLocalAudio(canUnmute),this.trace("realtimeSetCanUnmuteLocalAudio",canUnmute)}realtimeSubscribeToSetCanUnmuteLocalAudio(callback){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(callback),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(callback){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(callback),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const result=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,result),result}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const result=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),result}realtimeSubscribeToMuteAndUnmuteLocalAudio(callback){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(callback),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(callback){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(callback),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const result=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),result}realtimeSubscribeToVolumeIndicator(attendeeId,callback){this.realtimeController.realtimeSubscribeToVolumeIndicator(attendeeId,callback),this.trace("realtimeSubscribeToVolumeIndicator",attendeeId)}realtimeUnsubscribeFromVolumeIndicator(attendeeId,callback){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(attendeeId,callback),this.trace("realtimeUnsubscribeFromVolumeIndicator",attendeeId,callback)}realtimeSubscribeToLocalSignalStrengthChange(callback){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(callback),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(callback){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(callback),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(topic,data,lifetimeMs){this.realtimeController.realtimeSendDataMessage(topic,data,lifetimeMs),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(topic,callback){this.realtimeController.realtimeSubscribeToReceiveDataMessage(topic,callback),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(topic){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(topic),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(callback){this.realtimeController.realtimeSubscribeToFatalError(callback),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(callback){this.realtimeController.realtimeUnsubscribeToFatalError(callback),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(policy,callback,scoresCallback,scoresCallbackIntervalMs){this.audioVideoController.activeSpeakerDetector.subscribe(policy,callback,scoresCallback,scoresCallbackIntervalMs),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(callback){this.audioVideoController.activeSpeakerDetector.unsubscribe(callback),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(forceUpdate=!1){return __awaiter(this,void 0,void 0,(function*(){const result=yield this.deviceController.listAudioInputDevices(forceUpdate);return this.trace("listAudioInputDevices",forceUpdate,result),result}))}listVideoInputDevices(forceUpdate=!1){return __awaiter(this,void 0,void 0,(function*(){const result=yield this.deviceController.listVideoInputDevices(forceUpdate);return this.trace("listVideoInputDevices",forceUpdate,result),result}))}listAudioOutputDevices(forceUpdate=!1){return __awaiter(this,void 0,void 0,(function*(){const result=yield this.deviceController.listAudioOutputDevices(forceUpdate);return this.trace("listAudioOutputDevices",forceUpdate,result),result}))}startAudioInput(device){return __awaiter(this,void 0,void 0,(function*(){return this.trace("startAudioInput",device),this.deviceController.startAudioInput(device)}))}stopAudioInput(){return __awaiter(this,void 0,void 0,(function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()}))}startVideoInput(device){return __awaiter(this,void 0,void 0,(function*(){return VideoTransformDevice_1.isVideoTransformDevice(device)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",device),this.deviceController.startVideoInput(device)}))}stopVideoInput(){return __awaiter(this,void 0,void 0,(function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()}))}chooseAudioOutput(deviceId){const result=this.deviceController.chooseAudioOutput(deviceId);return this.trace("chooseAudioOutput",deviceId),result}addDeviceChangeObserver(observer){this.deviceController.addDeviceChangeObserver(observer),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(observer){this.deviceController.removeDeviceChangeObserver(observer),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const result=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),result}startVideoPreviewForVideoInput(element){this.deviceController.startVideoPreviewForVideoInput(element),this.trace("startVideoPreviewForVideoInput",element.id)}stopVideoPreviewForVideoInput(element){this.deviceController.stopVideoPreviewForVideoInput(element),this.trace("stopVideoPreviewForVideoInput",element.id)}setDeviceLabelTrigger(trigger){this.deviceController.setDeviceLabelTrigger(trigger),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(stream){const result=this.deviceController.mixIntoAudioInput(stream);return this.trace("mixIntoAudioInput",stream.id),result}chooseVideoInputQuality(width,height,frameRate){this.deviceController.chooseVideoInputQuality(width,height,frameRate),this.trace("chooseVideoInputQuality",{width,height,frameRate})}setVideoMaxBandwidthKbps(maxBandwidthKbps){this.audioVideoController.setVideoMaxBandwidthKbps(maxBandwidthKbps),this.trace("setVideoMaxBandwidthKbps",maxBandwidthKbps)}setVideoCodecSendPreferences(preferences){this.audioVideoController.setVideoCodecSendPreferences(preferences),this.trace("setVideoCodecSendPreferences",preferences)}getVideoInputQualitySettings(){const result=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),result}setContentAudioProfile(audioProfile){this.trace("setContentAudioProfile",audioProfile),this.contentShareController.setContentAudioProfile(audioProfile)}enableSimulcastForContentShare(enable,encodingParams){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(enable,encodingParams)}enableSVCForContentShare(enable){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(enable)}startContentShare(stream){const result=this.contentShareController.startContentShare(stream);return this.trace("startContentShare"),result}startContentShareFromScreenCapture(sourceId,frameRate){const result=this.contentShareController.startContentShareFromScreenCapture(sourceId,frameRate);return this.trace("startContentShareFromScreenCapture"),result}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(observer){this.contentShareController.addContentShareObserver(observer),this.trace("addContentShareObserver")}removeContentShareObserver(observer){this.contentShareController.removeContentShareObserver(observer),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(preferences){this.contentShareController.setContentShareVideoCodecPreferences(preferences),this.trace("setContentShareVideoCodecPreferences")}trace(name,input,output){let s=`API/DefaultAudioVideoFacade/${this.audioVideoController.configuration.meetingId}/${this.audioVideoController.configuration.credentials.attendeeId}/${name}`;void 0!==input&&(s+=` ${JSON.stringify(input)}`),void 0!==output&&(s+=` -> ${JSON.stringify(output)}`),this.audioVideoController.logger.info(s)}getRemoteVideoSources(){const result=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,result),result}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(credentials){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const result=this.audioVideoController.promoteToPrimaryMeeting(credentials);return this.trace("promoteToPrimaryMeeting",null,result),result}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(_){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}}},"./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurProcessorBuiltIn.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BackgroundBlurProcessorProvided_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurProcessorProvided.js")),BackgroundBlurStrength_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurStrength.js");class BackgroundBlurProcessorBuiltIn extends BackgroundBlurProcessorProvided_1.default{constructor(spec,options){super(spec,options),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}drawImageWithMask(inputCanvas,mask){const blurredImage=this.blurredImage,{canvasCtx,targetCanvas}=this,{width,height}=targetCanvas;if(!mask||!blurredImage)return void canvasCtx.clearRect(0,0,width,height);this.scaledCanvas.getContext("2d").putImageData(mask,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),canvasCtx.save(),canvasCtx.clearRect(0,0,width,height),canvasCtx.drawImage(this.scaledCanvas,0,0,width,height),canvasCtx.globalCompositeOperation="source-in",canvasCtx.drawImage(inputCanvas,0,0,width,height),canvasCtx.globalCompositeOperation="destination-over",canvasCtx.drawImage(this.blurCanvas,0,0,width,height),canvasCtx.restore()}setBlurStrength(blurStrength){if(super.setBlurStrength(blurStrength),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const model=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:model.path,inputHeight:model.input.height,inputWidth:model.input.width,inputChannels:4,modelRangeMin:model.input.range[0],modelRangeMax:model.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=BackgroundBlurStrength_1.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(msg){if(this.logger.info(`received initialize message: ${this.stringify(msg)}`),!msg.payload)return this.logger.error("failed to initialize module"),void this.initWorkerPromise.reject(new Error("failed to initialize the module"));const model=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:model.path,inputHeight:model.input.height,inputWidth:model.input.width,inputChannels:4,modelRangeMin:model.input.range[0],modelRangeMax:model.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(msg){this.blurredImage=msg.payload.blurOutput,super.handlePredict(msg)}destroy(){const _super=Object.create(null,{destroy:{get:()=>super.destroy}});var _a;return __awaiter(this,void 0,void 0,(function*(){_super.destroy.call(this),null===(_a=this.blurCanvas)||void 0===_a||_a.remove(),this.blurCanvas=void 0}))}}exports.default=BackgroundBlurProcessorBuiltIn},"./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurProcessorProvided.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BackgroundFilterProcessor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterProcessor.js")),BackgroundBlurStrength_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurStrength.js"),BackgroundBlurVideoFrameProcessorDelegate_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurVideoFrameProcessorDelegate.js"));class BackgroundBlurProcessorProvided extends BackgroundFilterProcessor_1.default{constructor(spec,options){super("background blur",spec,options,new BackgroundBlurVideoFrameProcessorDelegate_1.default),this.blurAmount=0,this.setBlurStrength(options.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: { blurStrength: ${options.blurStrength}, filterCPUUtilization: ${options.filterCPUUtilization}, reportingPeriodMillis: ${options.reportingPeriodMillis}}`)}validateOptions(options){if(super.validateOptions(options),!options.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(inputCanvas,mask){mask||(mask=new ImageData(this.spec.model.input.width,this.spec.model.input.height));this.scaledCanvas.getContext("2d").putImageData(mask,0,0);const{canvasCtx,targetCanvas}=this,{width,height}=targetCanvas;canvasCtx.save(),canvasCtx.clearRect(0,0,width,height),canvasCtx.drawImage(this.scaledCanvas,0,0,width,height),canvasCtx.globalCompositeOperation="source-in",canvasCtx.drawImage(inputCanvas,0,0,width,height),canvasCtx.globalCompositeOperation="destination-over",canvasCtx.filter=`blur(${this.blurAmount}px)`,canvasCtx.drawImage(inputCanvas,0,0,targetCanvas.width,targetCanvas.height),canvasCtx.restore()}setBlurStrength(blurStrength){this._blurStrength=blurStrength,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=BackgroundBlurStrength_1.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(observer){this.delegate.addObserver(observer)}removeObserver(observer){this.delegate.removeObserver(observer)}static isSupported(){return __awaiter(this,void 0,void 0,(function*(){const canvas=document.createElement("canvas"),supportsBlurFilter=void 0!==canvas.getContext("2d").filter;return canvas.remove(),supportsBlurFilter}))}setEventController(eventController){this.eventController?this.eventController=eventController:(this.eventController=eventController,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const backgroundFilterEventAttributes={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",backgroundFilterEventAttributes)}}exports.default=BackgroundBlurProcessorProvided},"./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurStrength.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlurStrengthMapper=void 0;class BlurStrengthMapper{static getBlurAmount(bstrength,options){if(bstrength<=0)throw new Error(`invalid value for blur strength: ${bstrength}`);return Math.round(bstrength*options.height/this.BLUR_STRENGTH_DIVISOR)}}exports.BlurStrengthMapper=BlurStrengthMapper,BlurStrengthMapper.BLUR_STRENGTH_DIVISOR=540,exports.default={LOW:7,MEDIUM:15,HIGH:30}},"./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurVideoFrameProcessor.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BackgroundFilterVideoFrameProcessor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterVideoFrameProcessor.js")),ConsoleLogger_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/ConsoleLogger.js")),LogLevel_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/LogLevel.js")),NoOpVideoFrameProcessor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/NoOpVideoFrameProcessor.js")),BackgroundBlurProcessorBuiltIn_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurProcessorBuiltIn.js")),BackgroundBlurProcessorProvided_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurProcessorProvided.js")),BackgroundBlurStrength_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurStrength.js"));class NoOpBackgroundBlurProcessor extends NoOpVideoFrameProcessor_1.default{setBlurStrength(){}loadAssets(){return __awaiter(this,void 0,void 0,(function*(){}))}addObserver(){}removeObserver(){}}class BackgroundBlurVideoFrameProcessor extends BackgroundFilterVideoFrameProcessor_1.default{static create(spec,options){return __awaiter(this,void 0,void 0,(function*(){spec=BackgroundBlurVideoFrameProcessor.resolveSpec(spec),options=BackgroundBlurVideoFrameProcessor.resolveOptions(options);const{logger}=options,supported=yield BackgroundBlurVideoFrameProcessor.isSupported(spec,options);if(logger.info(`processor is ${supported?"":"not"} supported`),!supported)return logger.warn("Using no-op processor because background blur is not supported"),new NoOpBackgroundBlurProcessor;let processor;return(yield BackgroundBlurProcessorProvided_1.default.isSupported())?(logger.info("Using browser-provided background blur"),processor=new BackgroundBlurProcessorProvided_1.default(spec,options)):(logger.info("Using built-in background blur"),processor=new BackgroundBlurProcessorBuiltIn_1.default(spec,options)),yield processor.loadAssets(),processor}))}static resolveOptions(options={}){let processorOptions=Object.assign({},options);return processorOptions.blurStrength||(processorOptions.blurStrength=BackgroundBlurStrength_1.default.MEDIUM),processorOptions.logger||(processorOptions.logger=new ConsoleLogger_1.default("BackgroundBlurProcessor",LogLevel_1.default.INFO)),processorOptions=super.resolveOptions(processorOptions),processorOptions}static isSupported(spec,options){return spec=BackgroundBlurVideoFrameProcessor.resolveSpec(spec),options=BackgroundBlurVideoFrameProcessor.resolveOptions(options),super.isSupported(spec,options)}}exports.default=BackgroundBlurVideoFrameProcessor},"./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurVideoFrameProcessorDelegate.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BackgroundFilterVideoFrameProcessorDelegate_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterVideoFrameProcessorDelegate.js"));class BackgroundBlurVideoFrameProcessorDelegate extends BackgroundFilterVideoFrameProcessorDelegate_1.default{}exports.default=BackgroundBlurVideoFrameProcessorDelegate},"./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/ModelSpecBuilder.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class ModelSpecBuilder{constructor(){this.path=null,this.input=null,this.output=null}static builder(){return new ModelSpecBuilder}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){return this.path="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite",this.input={height:144,width:256,range:[0,1],channels:3},this.output={height:144,width:256,range:[0,1],channels:1},this}withPath(path){return this.path=path,this}withInput(input){return this.input=input,this}withOutput(output){return this.output=output,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}}exports.default=ModelSpecBuilder},"./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterFrameCounter.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class BackgroundFilterFrameCounter{constructor(delegate,reportingPeriodMillis,filterCPUUtilization,logger){this.delegate=delegate,this.reportingPeriodMillis=reportingPeriodMillis,this.filterCPUUtilization=filterCPUUtilization,this.logger=logger,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}reportEvent(timestamp){const timeDiff=timestamp-this.lastReportedEventTimestamp;if(timeDiff>=this.reportingPeriodMillis){const currentFilterCount=this.filterCount,currentFilterTotalMillis=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=timestamp,0===this.framerate||0===currentFilterCount)return;const avgFilterDurationMillis=Math.round(currentFilterTotalMillis/currentFilterCount),framesDropped=Math.round(this.framerate*(timeDiff/1e3))-currentFilterCount,cpuUtilization=Math.round(100*currentFilterTotalMillis/timeDiff);avgFilterDurationMillis>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped,avgFilterDurationMillis,framerate:this.framerate,periodMillis:timeDiff}),cpuUtilization>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization,filterMillis:currentFilterTotalMillis,periodMillis:timeDiff})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*.8)}frameReceived(framerate){framerate!==this.framerate&&(this.framerate=framerate,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const timestamp=Date.now();this.reportEvent(timestamp)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}}},"./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterProcessor.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BackgroundFilterMonitor=void 0;const loader_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/loader.js"),CanvasVideoFrameBuffer_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/CanvasVideoFrameBuffer.js")),BackgroundFilterFrameCounter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterFrameCounter.js"));class DeferredObservable{constructor(){this.value=void 0,this.resolve=null}whenNext(){return this.promise||(this.promise=new Promise((resolve=>this.resolve=resolve))),this.promise}next(value){this.value=value,this.resolve(value),delete this.promise}}class BackgroundFilterProcessor{constructor(filterType,spec,options,delegate,eventController){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new CanvasVideoFrameBuffer_1.default(this.targetCanvas),this.mask$=new DeferredObservable,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=BackgroundFilterProcessor.createWorkerPromise(),this.loadModelPromise=BackgroundFilterProcessor.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=filterType,this.validateSpec(spec),this.validateOptions(options),this.spec=spec,this.logger=options.logger,this.delegate=delegate,this.initCPUMonitor(options),this.eventController=eventController}static createWorkerPromise(){const resolver={resolve:null,reject:null,promise:null};return resolver.promise=new Promise(((resolve,reject)=>{resolver.resolve=resolve,resolver.reject=reject})),resolver}validateSpec(spec){if(!spec)throw new Error("processor has null spec");if(!spec.model)throw new Error("processor spec has null model");if(!spec.paths)throw new Error("processor spec has null paths")}validateOptions(options){if(!options)throw new Error("processor has null options");if(!options.logger)throw new Error("processor has null options - logger");if(!options.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!options.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(options){this.videoFramesPerFilterUpdate=1,this.frameCounter=new BackgroundFilterFrameCounter_1.default(this.delegate,options.reportingPeriodMillis,options.filterCPUUtilization,this.logger),this.cpuMonitor=new BackgroundFilterMonitor(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(value){return JSON.stringify(value,null,2)}handleInitialize(msg){if(this.logger.info(`received initialize message: ${this.stringify(msg)}`),!msg.payload)return this.logger.error("failed to initialize module"),void this.initWorkerPromise.reject(new Error("failed to initialize the module"));const model=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:model.path,inputHeight:model.input.height,inputWidth:model.input.width,inputChannels:4,modelRangeMin:model.input.range[0],modelRangeMax:model.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(msg){if(this.logger.info(`received load model message: ${this.stringify(msg)}`),2!==msg.payload)return this.logger.error("failed to load model! status: "+msg.payload),void this.loadModelPromise.reject(new Error("failed to load model! status: "+msg.payload));this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(msg){this.mask$.next(msg.payload.output)}handleWorkerEvent(evt){const msg=evt.data;switch(msg.msg){case"initialize":this.handleInitialize(msg);break;case"loadModel":this.handleLoadModel(msg);break;case"predict":this.handlePredict(msg);break;default:this.logger.info(`unexpected event msg: ${this.stringify(msg)}`)}}loadAssets(){return __awaiter(this,void 0,void 0,(function*(){this.logger.info("start initializing the processor");try{this.worker=yield loader_1.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",(ev=>this.handleWorkerEvent(ev))),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(error){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${error.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)}))}process(buffers){return __awaiter(this,void 0,void 0,(function*(){if(this.destroyed)return buffers;this.frameCounter.frameReceived(buffers[0].framerate),this.cpuMonitor.frameReceived();const inputCanvas=buffers[0].asCanvasElement();if(!inputCanvas)return buffers;if(!this.modelInitialized)return buffers[0]=this.canvasVideoFrameBuffer,buffers;const frameWidth=inputCanvas.width,frameHeight=inputCanvas.height;if(0===frameWidth||0===frameHeight)return buffers;0===this.sourceWidth&&(this.sourceWidth=frameWidth,this.sourceHeight=frameHeight,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),this.sourceWidth===frameWidth&&this.sourceHeight===frameHeight||(this.sourceWidth=frameWidth,this.sourceHeight=frameHeight,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let mask=this.mask$.value;const hscale=this.spec.model.input.width/inputCanvas.width,vscale=this.spec.model.input.height/inputCanvas.height;void 0===this.scaledCanvas&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const scaledCtx=this.scaledCanvas.getContext("2d");scaledCtx.save(),scaledCtx.scale(hscale,vscale),scaledCtx.drawImage(inputCanvas,0,0),scaledCtx.restore();const imageData=scaledCtx.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate==0){const maskPromise=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:imageData},[imageData.data.buffer]),mask=yield maskPromise}this.destroyed||this.drawImageWithMask(inputCanvas,mask)}catch(error){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${error}`),buffers}finally{this.frameCounter.filterComplete(),this.frameNumber++}return buffers[0]=this.canvasVideoFrameBuffer,buffers}))}updateVideoFramesPerFilterUpdate(newRate){newRate!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=newRate,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var _a,_b,_c,_d;return __awaiter(this,void 0,void 0,(function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),null===(_a=this.worker)||void 0===_a||_a.postMessage({msg:"destroy"}),null===(_b=this.worker)||void 0===_b||_b.postMessage({msg:"stop"}),null===(_c=this.targetCanvas)||void 0===_c||_c.remove(),this.targetCanvas=void 0,null===(_d=this.scaledCanvas)||void 0===_d||_d.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)}))}}exports.default=BackgroundFilterProcessor;class BackgroundFilterMonitor{constructor(monitoringPeriodMillis,observer){this.monitoringPeriodMillis=monitoringPeriodMillis,this.observer=observer,this.lastCPUChangeTimestamp=0}filterCPUUtilizationHigh(){const timestamp=Date.now();timestamp-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=timestamp,this.observer.reduceCPUUtilization())}frameReceived(){const timestamp=Date.now();timestamp-this.lastCPUChangeTimestamp>=2*this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=timestamp,this.observer.increaseCPUUtilization())}}exports.BackgroundFilterMonitor=BackgroundFilterMonitor},"./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterVideoFrameProcessor.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const loader_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/loader.js"),support_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/support.js"),ModelSpecBuilder_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/ModelSpecBuilder.js")),DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),Versioning_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/versioning/Versioning.js")),CREATE_DEFAULT_MODEL_SPEC=()=>ModelSpecBuilder_1.default.builder().withSelfieSegmentationDefaults().build(),DEFAULT_CDN="https://static.sdkassets.chime.aws",DEFAULT_PATHS={worker:`${DEFAULT_CDN}/bgblur/workers/worker.js`,wasm:`${DEFAULT_CDN}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${DEFAULT_CDN}/bgblur/wasm/_cwt-wasm-simd.wasm`};exports.default=class BackgroundFilterVideoFrameProcessor{static defaultAssetSpec(){const version=Versioning_1.default.sdkVersionSemVer;return{assetGroup:`sdk-${version.major}.${version.minor}`}}static createUrlWithParams(url,queryParams){const u=new URL(url),keys=Object.keys(queryParams);for(const key of keys)void 0!==queryParams[key]&&u.searchParams.set(key,queryParams[key]);return u.toString()}static resolveSpec(spec){const{paths=DEFAULT_PATHS,model=CREATE_DEFAULT_MODEL_SPEC(),assetGroup=this.defaultAssetSpec().assetGroup,revisionID=this.defaultAssetSpec().revisionID}=spec||{},params={assetGroup,revisionID,sdk:encodeURIComponent(Versioning_1.default.sdkVersion),ua:encodeURIComponent(Versioning_1.default.sdkUserAgentLowResolution)};return paths.worker=this.createUrlWithParams(paths.worker,params),paths.wasm=this.createUrlWithParams(paths.wasm,params),paths.simd=this.createUrlWithParams(paths.simd,params),model.path=this.createUrlWithParams(model.path,params),{paths,model,assetGroup,revisionID}}static resolveOptions(options){options.reportingPeriodMillis||(options.reportingPeriodMillis=1e3);return options.filterCPUUtilization?(options.filterCPUUtilization<0||options.filterCPUUtilization>100)&&(options.logger.warn("filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of 30 percent"),options.filterCPUUtilization=30):options.filterCPUUtilization=30,options}static isSupported(spec,options){const{logger}=options;if("undefined"==typeof globalThis)return logger.info("Browser does not have globalThis."),Promise.resolve(!1);return(new DefaultBrowserBehavior_1.default).supportsBackgroundFilter()?support_1.supportsWASM(globalThis,logger)?this.supportsBackgroundFilter(globalThis,spec,logger):(logger.info("Browser does not support WASM."),Promise.resolve(!1)):(logger.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(scope=globalThis,spec,logger){return __awaiter(this,void 0,void 0,(function*(){if(!support_1.supportsWorker(scope,logger))return logger.info("Browser does not support web workers."),!1;const workerURL=spec.paths.worker;try{const worker=yield loader_1.loadWorker(workerURL,"BackgroundFilterWorker",{},null);try{worker.terminate()}catch(e){logger.info(`Failed to terminate worker. ${e.message}`)}return!0}catch(e){return logger.info(`Failed to fetch and instantiate test worker ${e.message}`),!1}}))}}},"./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterVideoFrameProcessorDelegate.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class BackgroundFilterVideoFrameProcessorDelegate{constructor(){this.observers=new Set}addObserver(observer){this.observers.add(observer)}removeObserver(observer){this.observers.delete(observer)}filterFrameDurationHigh(event){var _a;for(const observer of this.observers)null===(_a=observer.filterFrameDurationHigh)||void 0===_a||_a.call(observer,event)}filterCPUUtilizationHigh(event){var _a;for(const observer of this.observers)null===(_a=observer.filterCPUUtilizationHigh)||void 0===_a||_a.call(observer,event)}}},"./node_modules/amazon-chime-sdk-js/build/backgroundreplacementprocessor/BackgroundReplacementFilter.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BackgroundFilterProcessor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterProcessor.js")),BackgroundReplacementVideoFrameProcessorDelegate_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundreplacementprocessor/BackgroundReplacementVideoFrameProcessorDelegate.js"));class BackgroundReplacementFilter extends BackgroundFilterProcessor_1.default{constructor(spec,options){super("background replacement",spec,options,new BackgroundReplacementVideoFrameProcessorDelegate_1.default),this.replacementBlob=options.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: { filterCPUUtilization: ${options.filterCPUUtilization}, reportingPeriodMillis: ${options.reportingPeriodMillis}}`)}setImageBlob(blob){return __awaiter(this,void 0,void 0,(function*(){this.replacementBlob=blob,this.replacementImage=yield BackgroundReplacementFilter.loadImage(this.createReplacementObjectUrl())}))}initOnFirstExecution(){}drawImageWithMask(inputCanvas,mask){mask||(mask=new ImageData(this.spec.model.input.width,this.spec.model.input.height));this.scaledCanvas.getContext("2d").putImageData(mask,0,0);const{canvasCtx,targetCanvas}=this,{width,height}=targetCanvas;canvasCtx.save(),canvasCtx.clearRect(0,0,width,height),canvasCtx.drawImage(this.scaledCanvas,0,0,width,height),canvasCtx.globalCompositeOperation="source-in",canvasCtx.drawImage(inputCanvas,0,0,width,height),canvasCtx.globalCompositeOperation="destination-over",canvasCtx.drawImage(this.replacementImage,0,0,targetCanvas.width,targetCanvas.height),canvasCtx.restore()}static loadImageExecutor(resolve,reject,imageUrl){const image=new Image;image.crossOrigin="Anonymous",image.addEventListener("load",(()=>{resolve(image)}),!1),image.addEventListener("error",(error=>{reject(new Error(`Could not load replacement image ${image.src}: ${error.message}`))}),!1),image.src=imageUrl}static loadImage(imageUrl){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((resolve,reject)=>this.loadImageExecutor(resolve,reject,imageUrl)))}))}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const _super=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return __awaiter(this,void 0,void 0,(function*(){this.replacementImage=yield BackgroundReplacementFilter.loadImage(this.createReplacementObjectUrl()),_super.loadAssets.call(this)}))}addObserver(observer){this.delegate.addObserver(observer)}removeObserver(observer){this.delegate.removeObserver(observer)}destroy(){const _super=Object.create(null,{destroy:{get:()=>super.destroy}});return __awaiter(this,void 0,void 0,(function*(){_super.destroy.call(this),this.revokeReplacementObjectUrl()}))}setEventController(eventController){this.eventController?this.eventController=eventController:(this.eventController=eventController,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){this.eventController.publishEvent("backgroundFilterConfigSelected",{backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1})}}exports.default=BackgroundReplacementFilter},"./node_modules/amazon-chime-sdk-js/build/backgroundreplacementprocessor/BackgroundReplacementVideoFrameProcessor.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BackgroundFilterVideoFrameProcessor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterVideoFrameProcessor.js")),ConsoleLogger_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/ConsoleLogger.js")),LogLevel_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/LogLevel.js")),NoOpVideoFrameProcessor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/NoOpVideoFrameProcessor.js")),BackgroundReplacementFilter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundreplacementprocessor/BackgroundReplacementFilter.js"));class NoOpBackgroundReplacementProcessor extends NoOpVideoFrameProcessor_1.default{loadAssets(){return __awaiter(this,void 0,void 0,(function*(){}))}addObserver(){}removeObserver(){}setImageBlob(){return __awaiter(this,void 0,void 0,(function*(){}))}}class BackgroundReplacementVideoFrameProcessor extends BackgroundFilterVideoFrameProcessor_1.default{static create(spec,options){return __awaiter(this,void 0,void 0,(function*(){spec=this.resolveSpec(spec),options=this.resolveOptions(options),yield this.resolveOptionsAsync(options);const{logger}=options;if(!(yield BackgroundReplacementVideoFrameProcessor.isSupported(spec,options)))return logger.warn("Using no-op processor because background replacement is not supported"),new NoOpBackgroundReplacementProcessor;logger.info("Using background replacement filter");const processor=new BackgroundReplacementFilter_1.default(spec,options);return yield processor.loadAssets(),processor}))}static resolveOptions(options={}){const processorOptions=Object.assign({},options);return processorOptions.logger||(processorOptions.logger=new ConsoleLogger_1.default("BackgroundReplacementProcessor",LogLevel_1.default.INFO)),super.resolveOptions(processorOptions)}static resolveOptionsAsync(options){return __awaiter(this,void 0,void 0,(function*(){if(!options.imageBlob){const canvas=document.createElement("canvas");canvas.width=100,canvas.height=100;const ctx=canvas.getContext("2d");ctx.fillStyle="blue",ctx.fillRect(0,0,100,100);const blob=yield new Promise((resolve=>{canvas.toBlob(resolve)}));options.imageBlob=blob}}))}static isSupported(spec,options){const _super=Object.create(null,{isSupported:{get:()=>super.isSupported}});return __awaiter(this,void 0,void 0,(function*(){spec=this.resolveSpec(spec),options=this.resolveOptions(options),yield this.resolveOptionsAsync(options);const imageBlob=options.imageBlob,imageUrl=URL.createObjectURL(imageBlob);try{yield BackgroundReplacementFilter_1.default.loadImage(imageUrl)}catch(e){return options.logger.info(`Failed to fetch load replacement image ${e.message}`),!1}finally{URL.revokeObjectURL(imageUrl)}return _super.isSupported.call(this,spec,options)}))}}exports.default=BackgroundReplacementVideoFrameProcessor},"./node_modules/amazon-chime-sdk-js/build/backgroundreplacementprocessor/BackgroundReplacementVideoFrameProcessorDelegate.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BackgroundFilterVideoFrameProcessorDelegate_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterVideoFrameProcessorDelegate.js"));class BackgroundReplacementVideoFrameProcessorDelegate extends BackgroundFilterVideoFrameProcessorDelegate_1.default{}exports.default=BackgroundReplacementVideoFrameProcessorDelegate},"./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterBackoff.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class FullJitterBackoff{constructor(fixedWaitMs,shortBackoffMs,longBackoffMs){this.fixedWaitMs=fixedWaitMs,this.shortBackoffMs=shortBackoffMs,this.longBackoffMs=longBackoffMs,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}reset(){this.currentRetry=0}nextBackoffAmountMs(){const fullJitterMs=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,fullJitterMs}}},"./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterBackoffFactory.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const FullJitterBackoff_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterBackoff.js")),FullJitterLimitedBackoff_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterLimitedBackoff.js"));exports.default=class FullJitterBackoffFactory{constructor(fixedWaitMs,shortBackoffMs,longBackoffMs){this.fixedWaitMs=fixedWaitMs,this.shortBackoffMs=shortBackoffMs,this.longBackoffMs=longBackoffMs}create(){return new FullJitterBackoff_1.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(limit){return new FullJitterLimitedBackoff_1.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,limit)}}},"./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterLimitedBackoff.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const FullJitterBackoff_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterBackoff.js"));class FullJitterLimitedBackoff extends FullJitterBackoff_1.default{constructor(fixedWaitMs,shortBackoffMs,longBackoffMs,limit){super(fixedWaitMs,shortBackoffMs,longBackoffMs),this.limit=limit,this.attempts=0}nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}}exports.default=FullJitterLimitedBackoff},"./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const detect_browser_1=__webpack_require__("./node_modules/detect-browser/es/index.js"),ua_parser_js_1=__webpack_require__("./node_modules/ua-parser-js/src/ua-parser.js");class DefaultBrowserBehavior{constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=detect_browser_1.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new ua_parser_js_1.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}version(){return this.browser.version}majorVersion(){return null!==this.version()?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const browser of this.chromeLike)if(browser===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const browser of this.webkitBrowsers)if(browser===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return-1!==navigator.userAgent.indexOf("Windows")}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=DefaultBrowserBehavior.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=DefaultBrowserBehavior.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return("safari"!==this.name()||15!==this.majorVersion())&&!!this.supportsCanvasCapturedStreamPlayback()}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&"Blink"===this.engine()&&this.engineMajorVersion()>=111}supportsAudioRedundancy(){return this.hasChromiumWebRTC()?this.engineMajorVersion()>=107:!this.hasFirefoxWebRTC()}requiresResolutionAlignment(width,height){return this.isAndroid()&&this.isPixel3()?[64*Math.ceil(width/64),64*Math.ceil(height/64)]:[width,height]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return"chromium-webview"===this.browser.name}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name])&&("firefox"!==this.browser.name||!this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const s=[];for(const k in this.browserSupport)s.push(`${this.browserName[k]} ${this.browserSupport[k]}+`);return s.join(", ")}supportedVideoCodecs(){return __awaiter(this,void 0,void 0,(function*(){const pc=new RTCPeerConnection;return pc.addTransceiver("video",{direction:"inactive",streams:[]}),(yield pc.createOffer({offerToReceiveVideo:!0})).sdp.split("\r\n").filter((x=>x.includes("a=rtpmap:"))).map((x=>x.replace(/.* /,"").replace(/\/.*/,""))).filter(((v,i,a)=>a.indexOf(v)===i)).filter((x=>"rtx"!==x&&"red"!==x&&"ulpfec"!==x))}))}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return this.isIOS()&&("15.1.0"===this.version()||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}requiresAudioContextResetOnDeviceFailureForWebAudio(){return this.isIOS()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return"ios"===this.browser.name||"ios-webview"===this.browser.name||"safari"===this.browser.name&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return"safari"===this.browser.name||this.isIOSSafari()}isFirefox(){return"firefox"===this.browser.name}isIOSFirefox(){return"fxios"===this.browser.name}isIOSChrome(){return"crios"===this.browser.name}isChrome(){return"chrome"===this.browser.name}isEdge(){return"edge-chromium"===this.browser.name}isIOSEdge(){return"edge-ios"===this.browser.name}isSamsungInternet(){return"samsung"===this.browser.name}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}isIOS(){return this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox()}}exports.default=DefaultBrowserBehavior,DefaultBrowserBehavior.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,DefaultBrowserBehavior.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},"./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReport.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),ClientMetricReportDirection_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportDirection.js")),ClientMetricReportMediaType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportMediaType.js")),GlobalMetricReport_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/GlobalMetricReport.js"));class ClientMetricReport{constructor(logger,videoStreamIndex,selfAttendeeId){this.logger=logger,this.videoStreamIndex=videoStreamIndex,this.selfAttendeeId=selfAttendeeId,this.globalMetricReport=new GlobalMetricReport_1.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(metricName,ssrc)=>{const metricReport=ssrc?this.streamMetricReports[ssrc]:this.globalMetricReport;return Number(metricReport.currentMetrics[metricName])},this.decoderLossPercent=(metricName,ssrc)=>{const metricReport=this.streamMetricReports[ssrc],concealedSamples=metricReport.currentMetrics.concealedSamples-(metricReport.previousMetrics.concealedSamples||0),totalSamplesReceived=metricReport.currentMetrics.totalSamplesReceived-(metricReport.previousMetrics.totalSamplesReceived||0);if(totalSamplesReceived<=0)return 0;return totalSamplesReceived-concealedSamples<=0?0:concealedSamples/totalSamplesReceived*100},this.packetLossPercent=(sourceMetricName,ssrc)=>{const metricReport=this.streamMetricReports[ssrc],sentOrReceived=metricReport.currentMetrics[sourceMetricName]-(metricReport.previousMetrics[sourceMetricName]||0),lost=metricReport.currentMetrics.packetsLost-(metricReport.previousMetrics.packetsLost||0),total=sentOrReceived+lost;return total<=0||lost<=0?0:100*lost/total},this.jitterBufferMs=(metricName,ssrc)=>{const metricReport=this.streamMetricReports[ssrc],jitterBufferDelay=metricReport.currentMetrics.jitterBufferDelay-(metricReport.previousMetrics.jitterBufferDelay||0),jitterBufferEmittedCount=metricReport.currentMetrics.jitterBufferEmittedCount-(metricReport.previousMetrics.jitterBufferEmittedCount||0);return jitterBufferDelay<=0||jitterBufferEmittedCount<=0?0:jitterBufferDelay/jitterBufferEmittedCount*1e3},this.countPerSecond=(metricName,ssrc)=>{const metricReport=ssrc?this.streamMetricReports[ssrc]:this.globalMetricReport;let intervalSeconds=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(intervalSeconds<=0)return 0;this.previousTimestampMs<=0&&(intervalSeconds=1);const diff=metricReport.currentMetrics[metricName]-(metricReport.previousMetrics[metricName]||0);return diff<=0?0:Math.trunc(diff/intervalSeconds)},this.bitsPerSecond=(metricName,ssrc)=>{const metricReport=ssrc?this.streamMetricReports[ssrc]:this.globalMetricReport;let intervalSeconds=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(intervalSeconds<=0)return 0;this.previousTimestampMs<=0&&(intervalSeconds=1);const diff=8*(metricReport.currentMetrics[metricName]-(metricReport.previousMetrics[metricName]||0));return diff<=0?0:Math.trunc(diff/intervalSeconds)},this.secondsToMilliseconds=(metricName,ssrc)=>{const metricReport=ssrc?this.streamMetricReports[ssrc]:this.globalMetricReport;return Number(1e3*metricReport.currentMetrics[metricName])},this.averageTimeSpentPerSecondInMilliseconds=(metricName,ssrc)=>{const metricReport=ssrc?this.streamMetricReports[ssrc]:this.globalMetricReport;let intervalSeconds=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(intervalSeconds<=0)return 0;this.previousTimestampMs<=0&&(intervalSeconds=1);const diff=metricReport.currentMetrics[metricName]-(metricReport.previousMetrics[metricName]||0);return diff<=0?0:1e3*diff/intervalSeconds},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(metricName,ssrc)=>{const metricReport=this.streamMetricReports[ssrc];if(void 0===metricReport.previousObjectMetrics[metricName]||void 0===metricReport.currentObjectMetrics[metricName])return NaN;let intervalSeconds=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(intervalSeconds<=0)return 0;this.previousTimestampMs<=0&&(intervalSeconds=1);let previousValue=0,currentValue=0;for(const[key,value]of Object.entries(metricReport.previousObjectMetrics[metricName]))"cpu"===key&&(previousValue=value);for(const[key,value]of Object.entries(metricReport.currentObjectMetrics[metricName]))"cpu"===key&&(currentValue=value);const diff=currentValue-previousValue;return diff<=0?0:1e3*diff/intervalSeconds},this.isHardwareImplementation=(metricName,ssrc)=>{const metricReport=this.streamMetricReports[ssrc];if(void 0===metricReport.currentStringMetrics[metricName])return NaN;const implName=String(metricReport.currentStringMetrics[metricName]),hasHwName=implName.includes("ExternalDecoder")||implName.includes("ExternalEncoder")||implName.includes("EncodeAccelerator")||implName.includes("DecodeAccelerator"),isFallback=implName.includes("fallback from");return hasHwName&&!isFallback?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_SENT_JITTER_MS},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU},videoCodecDegradationHighEncodeCpu:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU},videoCodecDegradationEncodeFailure:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE},videoInputWidth:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_INPUT_WIDTH},videoInputHeight:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_INPUT_HEIGHT}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_DROPPED_FPS},videoRenderWidth:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_RENDER_WIDTH},videoRenderHeight:{transform:this.identityValue,type:SignalingProtocol_js_1.SdkMetric.Type.VIDEO_RENDER_HEIGHT}},this.streamDimensionMap={encoderImplementation:SignalingProtocol_js_1.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:SignalingProtocol_js_1.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamFramesInputPerSecond:{source:"framesPerSecond",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamEncoderImplementation:{source:"encoderImplementation",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamTotalEncodeTimePerSecond:{source:"totalEncodeTime",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamCpuQualityLimitationDurationPerSecond:{source:"qualityLimitationDurations",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:ClientMetricReportMediaType_1.default.AUDIO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:ClientMetricReportMediaType_1.default.AUDIO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:ClientMetricReportMediaType_1.default.AUDIO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:ClientMetricReportMediaType_1.default.AUDIO,dir:ClientMetricReportDirection_1.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:ClientMetricReportMediaType_1.default.AUDIO,dir:ClientMetricReportDirection_1.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:ClientMetricReportMediaType_1.default.AUDIO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:ClientMetricReportMediaType_1.default.AUDIO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:ClientMetricReportMediaType_1.default.AUDIO,dir:ClientMetricReportDirection_1.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:ClientMetricReportMediaType_1.default.AUDIO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:ClientMetricReportMediaType_1.default.VIDEO,dir:ClientMetricReportDirection_1.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:ClientMetricReportMediaType_1.default.AUDIO,dir:ClientMetricReportDirection_1.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}getMetricMap(mediaType,direction){switch(mediaType){case ClientMetricReportMediaType_1.default.AUDIO:switch(direction){case ClientMetricReportDirection_1.default.UPSTREAM:return this.audioUpstreamMetricMap;case ClientMetricReportDirection_1.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case ClientMetricReportMediaType_1.default.VIDEO:switch(direction){case ClientMetricReportDirection_1.default.UPSTREAM:return this.videoUpstreamMetricMap;case ClientMetricReportDirection_1.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(metricName){if(this.overriddenObservableMetrics.has(metricName))return this.overriddenObservableMetrics.get(metricName);const observableMetricSpec=this.observableMetricSpec[metricName],metricSpec=this.getMetricMap(observableMetricSpec.media,observableMetricSpec.dir)[observableMetricSpec.source],{transform,source}=metricSpec;if(!observableMetricSpec.hasOwnProperty("media"))return transform(source||observableMetricSpec.source);for(const ssrc in this.streamMetricReports){const streamMetricReport=this.streamMetricReports[ssrc];if(streamMetricReport.direction===observableMetricSpec.dir&&streamMetricReport.mediaType===observableMetricSpec.media)return transform(source||observableMetricSpec.source,Number(ssrc))}return 0}getObservableVideoMetricValue(metricName,ssrcNum){const observableVideoMetricSpec=this.observableVideoMetricSpec[metricName],metricSpec=this.getMetricMap(observableVideoMetricSpec.media,observableVideoMetricSpec.dir)[observableVideoMetricSpec.source],{transform,source}=metricSpec;return transform(source||observableVideoMetricSpec.source,ssrcNum)}getVideoUpstreamSsrcs(){const ssrcs=[];for(const ssrc in this.streamMetricReports)this.streamMetricReports[ssrc].mediaType===ClientMetricReportMediaType_1.default.VIDEO&&this.streamMetricReports[ssrc].direction===ClientMetricReportDirection_1.default.UPSTREAM&&ssrcs.push(Number(ssrc));return ssrcs}getObservableMetrics(){const metric={};for(const metricName in this.observableMetricSpec)metric[metricName]=this.getObservableMetricValue(metricName);return metric}getObservableVideoMetrics(){const videoStreamMetrics={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),videoStreamMetrics;for(const ssrc in this.streamMetricReports)if(this.streamMetricReports[ssrc].mediaType===ClientMetricReportMediaType_1.default.VIDEO){const metric={};for(const metricName in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[metricName].dir===this.streamMetricReports[ssrc].direction){const metricValue=this.getObservableVideoMetricValue(metricName,Number(ssrc));isNaN(metricValue)||(metric[metricName]=metricValue)}const groupId=this.streamMetricReports[ssrc].groupId,streamId=this.streamMetricReports[ssrc].streamId;let attendeeId="";attendeeId=void 0!==this.videoStreamIndex.attendeeIdForGroupId?groupId?this.videoStreamIndex.attendeeIdForGroupId(groupId):this.selfAttendeeId:streamId?this.videoStreamIndex.attendeeIdForStreamId(streamId):this.selfAttendeeId,videoStreamMetrics[attendeeId]=videoStreamMetrics[attendeeId]?videoStreamMetrics[attendeeId]:{},videoStreamMetrics[attendeeId][ssrc]=metric}return videoStreamMetrics}getRTCStatsReport(){return this.rtcStatsReport}clone(){const cloned=new ClientMetricReport(this.logger,this.videoStreamIndex,this.selfAttendeeId);return cloned.globalMetricReport=this.globalMetricReport,cloned.streamMetricReports=this.streamMetricReports,cloned.rtcStatsReport=this.rtcStatsReport,cloned.customStatsReports=this.customStatsReports,cloned.currentTimestampMs=this.currentTimestampMs,cloned.previousTimestampMs=this.previousTimestampMs,cloned.overriddenObservableMetrics=this.overriddenObservableMetrics,cloned}print(){const clientMetricReport={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug((()=>`Client Metric Report: ${JSON.stringify(clientMetricReport)}`))}removeDestroyedSsrcs(){for(const ssrc in this.streamMetricReports)this.currentSsrcs[ssrc]||delete this.streamMetricReports[ssrc]}overrideObservableMetric(name,value){this.overriddenObservableMetrics.set(name,value)}}exports.default=ClientMetricReport},"./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportDirection.js":(__unused_webpack_module,exports)=>{"use strict";var ClientMetricReportDirection;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClientMetricReportDirection=void 0,function(ClientMetricReportDirection){ClientMetricReportDirection[ClientMetricReportDirection.UPSTREAM=0]="UPSTREAM",ClientMetricReportDirection[ClientMetricReportDirection.DOWNSTREAM=1]="DOWNSTREAM"}(ClientMetricReportDirection=exports.ClientMetricReportDirection||(exports.ClientMetricReportDirection={})),exports.default=ClientMetricReportDirection},"./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportMediaType.js":(__unused_webpack_module,exports)=>{"use strict";var ClientMetricReportMediaType;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClientMetricReportMediaType=void 0,function(ClientMetricReportMediaType){ClientMetricReportMediaType[ClientMetricReportMediaType.AUDIO=0]="AUDIO",ClientMetricReportMediaType[ClientMetricReportMediaType.VIDEO=1]="VIDEO"}(ClientMetricReportMediaType=exports.ClientMetricReportMediaType||(exports.ClientMetricReportMediaType={})),exports.default=ClientMetricReportMediaType},"./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientVideoStreamReceivingReport.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class ClientVideoStreamReceivingReport{}},"./node_modules/amazon-chime-sdk-js/build/clientmetricreport/GlobalMetricReport.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class GlobalMetricReport{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}}},"./node_modules/amazon-chime-sdk-js/build/clientmetricreport/RedundantAudioRecoveryMetricReport.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class RedundantAudioRecoveryMetricReport{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}}},"./node_modules/amazon-chime-sdk-js/build/clientmetricreport/StreamMetricReport.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class StreamMetricReport{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}}},"./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/BaseConnectionHealthPolicy.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class BaseConnectionHealthPolicy{constructor(configuration,data,name){this.minHealth=configuration.minHealth,this.maxHealth=configuration.maxHealth,this.currentHealth=configuration.initialHealth,this.currentData=data.clone(),this.name=name}minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(connectionHealthData){this.currentData=connectionHealthData}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const newHealth=this.health();return newHealth!==this.currentHealth?(this.currentHealth=newHealth,newHealth):null}}},"./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/ConnectionHealthData.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class ConnectionHealthData{constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.videoEncodingTimePerFrameInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}static isTimestampRecent(timestampMs,recentDurationMs){return Date.now()<timestampMs+recentDurationMs}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now(),this.isVideoEncoderHardware=!1,this.videoEncodingTimeInMs=0,this.videoEncodingTimePerFrameInMs=0,this.cpuLimitationDuration=0,this.videoInputFps=0,this.videoEncodeFps=0}isConnectionStartRecent(recentDurationMs){return ConnectionHealthData.isTimestampRecent(this.connectionStartTimestampMs,recentDurationMs)}isLastPacketLossRecent(recentDurationMs){return ConnectionHealthData.isTimestampRecent(this.lastPacketLossInboundTimestampMs,recentDurationMs)}isGoodSignalRecent(recentDurationMs){return ConnectionHealthData.isTimestampRecent(this.lastGoodSignalTimestampMs,recentDurationMs)}isWeakSignalRecent(recentDurationMs){return ConnectionHealthData.isTimestampRecent(this.lastWeakSignalTimestampMs,recentDurationMs)}isNoSignalRecent(recentDurationMs){return ConnectionHealthData.isTimestampRecent(this.lastNoSignalTimestampMs,recentDurationMs)}clone(){const cloned=new ConnectionHealthData;return cloned.connectionStartTimestampMs=this.connectionStartTimestampMs,cloned.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,cloned.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,cloned.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,cloned.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,cloned.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,cloned.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,cloned.consecutiveMissedPongs=this.consecutiveMissedPongs,cloned.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),cloned.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),cloned.audioSpeakerDelayMs=this.audioSpeakerDelayMs,cloned.isVideoEncoderHardware=this.isVideoEncoderHardware,cloned.videoEncodingTimeInMs=this.videoEncodingTimeInMs,cloned.videoEncodingTimePerFrameInMs=this.videoEncodingTimePerFrameInMs,cloned.cpuLimitationDuration=this.cpuLimitationDuration,cloned.videoInputFps=this.videoInputFps,cloned.videoEncodeFps=this.videoEncodeFps,cloned}setConsecutiveMissedPongs(pongs){this.consecutiveMissedPongs=pongs}setConsecutiveStatsWithNoPackets(stats){this.consecutiveStatsWithNoPackets=stats}setConsecutiveStatsWithNoAudioPacketsSent(stats){this.consecutiveStatsWithNoAudioPacketsSent=stats}setLastPacketLossInboundTimestampMs(timeStamp){this.lastPacketLossInboundTimestampMs=timeStamp}setLastNoSignalTimestampMs(timeStamp){this.lastNoSignalTimestampMs=timeStamp}setLastWeakSignalTimestampMs(timeStamp){this.lastWeakSignalTimestampMs=timeStamp}setLastGoodSignalTimestampMs(timeStamp){this.lastGoodSignalTimestampMs=timeStamp}setAudioSpeakerDelayMs(delayMs){this.audioSpeakerDelayMs=delayMs}setIsVideoEncoderHardware(isHardware){this.isVideoEncoderHardware=isHardware}setVideoEncodingTimeInMs(stats){this.videoEncodingTimeInMs=stats}setVideoEncodingTimePerFrameInMs(stats){this.videoEncodingTimePerFrameInMs=stats}setCpuLimitationDuration(stats){this.cpuLimitationDuration=stats}setVideoInputFps(stats){this.videoInputFps=stats}setVideoEncodeFps(stats){this.videoEncodeFps=stats}}exports.default=ConnectionHealthData},"./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/ConnectionHealthPolicyConfiguration.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const VideoEncodingCpuConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/VideoEncodingCpuConnectionHealthPolicy.js")),VideoEncodingFramerateConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/VideoEncodingFramerateConnectionHealthPolicy.js"));exports.default=class ConnectionHealthPolicyConfiguration{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3,this.videoEncodingHealthPolicies=[VideoEncodingCpuConnectionHealthPolicy_1.default,VideoEncodingFramerateConnectionHealthPolicy_1.default],this.consecutiveHighEncodeCpuThreshold=10,this.highEncodeCpuMsThreshold=500,this.highEncodeCpuMsPerFrameThreshold=15,this.consecutiveVideoEncodingFailureThreshold=5}}},"./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/ReconnectionHealthPolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BaseConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/BaseConnectionHealthPolicy.js"));class ReconnectionHealthPolicy extends BaseConnectionHealthPolicy_1.default{constructor(logger,configuration,data){super(configuration,data,"Reconnection Health"),this.logger=logger,this.audioDelayPointsOverMaximum=0,ReconnectionHealthPolicy.CONNECTION_UNHEALTHY_THRESHOLD=configuration.connectionUnhealthyThreshold,ReconnectionHealthPolicy.CONNECTION_WAIT_TIME_MS=configuration.connectionWaitTimeMs,ReconnectionHealthPolicy.MISSED_PONGS_THRESHOLD=configuration.missedPongsUpperThreshold,ReconnectionHealthPolicy.MAXIMUM_AUDIO_DELAY_MS=configuration.maximumAudioDelayMs,ReconnectionHealthPolicy.MAXIMUM_AUDIO_DELAY_DATA_POINTS=configuration.maximumAudioDelayDataPoints}health(){if(this.currentData.isConnectionStartRecent(ReconnectionHealthPolicy.CONNECTION_WAIT_TIME_MS))return 1;const noPacketsReceivedRecently=this.currentData.consecutiveStatsWithNoPackets>=ReconnectionHealthPolicy.CONNECTION_UNHEALTHY_THRESHOLD,missedPongsRecently=this.currentData.consecutiveMissedPongs>=ReconnectionHealthPolicy.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>ReconnectionHealthPolicy.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const hasBadAudioDelay=this.audioDelayPointsOverMaximum>ReconnectionHealthPolicy.MAXIMUM_AUDIO_DELAY_DATA_POINTS;hasBadAudioDelay&&(this.audioDelayPointsOverMaximum=0);return noPacketsReceivedRecently||missedPongsRecently||hasBadAudioDelay?(this.logger.warn(`reconnection recommended due to: no packets received: ${noPacketsReceivedRecently}, missed pongs: ${missedPongsRecently}, bad audio delay: ${hasBadAudioDelay}`),0):1}}exports.default=ReconnectionHealthPolicy},"./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/SendingAudioFailureConnectionHealthPolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BaseConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/BaseConnectionHealthPolicy.js"));class SendingAudioFailureConnectionHealthPolicy extends BaseConnectionHealthPolicy_1.default{constructor(logger,configuration,data){super(configuration,data,"Sending Audio Health"),this.logger=logger,this.sendingAudioFailureSamplesToConsider=configuration.sendingAudioFailureSamplesToConsider>0?configuration.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=configuration.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=configuration.maximumTimesToWarn,this.coolDownTimeMs=configuration.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}isSendingAudioUnhealthy(){const hasEnoughTimeElapsedToEvaluateStatus=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),areAudioPacketsNotBeingSent=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return hasEnoughTimeElapsedToEvaluateStatus&&areAudioPacketsNotBeingSent}health(){if(this.isSendingAudioUnhealthy()){const didWarnRecently=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!didWarnRecently?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}}exports.default=SendingAudioFailureConnectionHealthPolicy},"./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/UnusableAudioWarningConnectionHealthPolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BaseConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/BaseConnectionHealthPolicy.js"));class UnusableAudioWarningConnectionHealthPolicy extends BaseConnectionHealthPolicy_1.default{constructor(configuration,data){super(configuration,data,"Unusable Audio Warning"),this.coolDownTimeMs=configuration.cooldownTimeMs,this.pastSamplesToConsider=configuration.pastSamplesToConsider,this.fractionalLoss=configuration.fractionalLoss,this.packetsExpected=configuration.packetsExpected,this.maximumTimesToWarn=configuration.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const samplesToConsider=this.pastSamplesToConsider,totalPacketsExpected=samplesToConsider*this.packetsExpected;let totalPacketsReceived=0;for(let i=0;i<samplesToConsider;i++)totalPacketsReceived+=this.currentData.packetsReceivedInLastMinute[i];return Math.min(Math.max(1-totalPacketsReceived/totalPacketsExpected,0),1)}health(){if(Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs)return this.currentHealth;return this.calculateFractionalLoss()>=this.fractionalLoss?0!==this.currentHealth&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}}exports.default=UnusableAudioWarningConnectionHealthPolicy},"./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/VideoEncodingConnectionHealthPolicyName.js":(__unused_webpack_module,exports)=>{"use strict";var VideoEncodingConnectionHealthPolicyName;Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoEncodingConnectionHealthPolicyName=void 0,function(VideoEncodingConnectionHealthPolicyName){VideoEncodingConnectionHealthPolicyName.VideoEncodingCpuHealth="Video Encoding CPU Health",VideoEncodingConnectionHealthPolicyName.VideoEncodingFramerateHealth="Video Encoding framerate Health"}(VideoEncodingConnectionHealthPolicyName=exports.VideoEncodingConnectionHealthPolicyName||(exports.VideoEncodingConnectionHealthPolicyName={})),exports.default=VideoEncodingConnectionHealthPolicyName},"./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/VideoEncodingCpuConnectionHealthPolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BaseConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/BaseConnectionHealthPolicy.js")),VideoEncodingConnectionHealthPolicyName_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/VideoEncodingConnectionHealthPolicyName.js"));class VideoEncodingCpuConnectionHealthPolicy extends BaseConnectionHealthPolicy_1.default{constructor(configuration,data){super(configuration,data,VideoEncodingConnectionHealthPolicyName_1.default.VideoEncodingCpuHealth),this.consecutiveHighEncodeCpuCnt=0,this.consecutiveHighEncodeCpuThreshold=configuration.consecutiveHighEncodeCpuThreshold,this.highEncodeCpuMsThreshold=configuration.highEncodeCpuMsThreshold,this.highEncodeCpuMsPerFrameThreshold=configuration.highEncodeCpuMsPerFrameThreshold}health(){const videoEncodingTimeIsHigh=this.currentData.videoEncodingTimeInMs>=this.highEncodeCpuMsThreshold&&this.currentData.videoEncodingTimePerFrameInMs>=this.highEncodeCpuMsPerFrameThreshold;if(!this.currentData.isVideoEncoderHardware&&(videoEncodingTimeIsHigh||this.currentData.cpuLimitationDuration>0)){if(this.consecutiveHighEncodeCpuCnt++,this.consecutiveHighEncodeCpuCnt>this.consecutiveHighEncodeCpuThreshold)return this.consecutiveHighEncodeCpuCnt=0,this.minimumHealth()}else this.consecutiveHighEncodeCpuCnt=0;return this.maximumHealth()}}exports.default=VideoEncodingCpuConnectionHealthPolicy},"./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/VideoEncodingFramerateConnectionHealthPolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BaseConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/BaseConnectionHealthPolicy.js")),VideoEncodingConnectionHealthPolicyName_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/VideoEncodingConnectionHealthPolicyName.js"));class VideoEncodingFramerateConnectionHealthPolicy extends BaseConnectionHealthPolicy_1.default{constructor(configuration,data){super(configuration,data,VideoEncodingConnectionHealthPolicyName_1.default.VideoEncodingFramerateHealth),this.consecutiveEncodeFailureCnt=0,this.consecutiveVideoEncodingFailureThreshold=configuration.consecutiveVideoEncodingFailureThreshold}health(){if(0===this.currentData.videoEncodeFps&&this.currentData.videoInputFps>0){if(this.consecutiveEncodeFailureCnt++,this.consecutiveEncodeFailureCnt>this.consecutiveVideoEncodingFailureThreshold)return this.consecutiveEncodeFailureCnt=0,this.minimumHealth()}else this.consecutiveEncodeFailureCnt=0;return this.maximumHealth()}}exports.default=VideoEncodingFramerateConnectionHealthPolicy},"./node_modules/amazon-chime-sdk-js/build/connectionmonitor/SignalingAndMetricsConnectionMonitor.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Types_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Types.js");exports.default=class SignalingAndMetricsConnectionMonitor{constructor(audioVideoController,realtimeController,connectionHealthData,pingPong,statsCollector){this.audioVideoController=audioVideoController,this.realtimeController=realtimeController,this.connectionHealthData=connectionHealthData,this.pingPong=pingPong,this.statsCollector=statsCollector,this.isActive=!1,this.hasSeenValidCandidatePairMetricsBefore=!1,this.lastTotalBytesReceived=0,this.lastTotalStunMessagesReceived=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange((signalStrength=>{this.isActive&&this.receiveSignalStrengthChange(signalStrength)}))}start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(signalStrength){0===signalStrength?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):signalStrength<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(_id,latencyMs,clockSkewMs){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",latencyMs),this.statsCollector.logLatency("ping_pong_clock_skew",clockSkewMs),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(clientMetricReport){let audioPacketsReceived=0,audiofractionPacketsLostInbound=0;const metricReport=clientMetricReport.getObservableMetrics(),potentialAudioPacketsReceived=metricReport.audioPacketsReceived,potentialAudioFractionPacketsLostInbound=metricReport.audioPacketsReceivedFractionLoss,audioSpeakerDelayMs=metricReport.audioSpeakerDelayMs;"number"!=typeof audioSpeakerDelayMs||isNaN(audioSpeakerDelayMs)||this.connectionHealthData.setAudioSpeakerDelayMs(audioSpeakerDelayMs);const webrtcReport=clientMetricReport.getRTCStatsReport();let totalBytesReceived=0,totalStunMessagedReceived=0;webrtcReport.forEach((stat=>{"candidate-pair"===stat.type&&(stat.bytesReceived&&(totalBytesReceived+=stat.bytesReceived),stat.requestsReceived&&(totalStunMessagedReceived+=stat.requestsReceived),stat.responsesReceived&&(totalStunMessagedReceived+=stat.responsesReceived))}));const bytesReceived=totalBytesReceived-this.lastTotalBytesReceived;this.lastTotalBytesReceived=totalBytesReceived;const stunMessagesReceived=totalStunMessagedReceived-this.lastTotalStunMessagesReceived;this.lastTotalStunMessagesReceived=totalStunMessagedReceived,"number"==typeof potentialAudioPacketsReceived&&"number"==typeof potentialAudioFractionPacketsLostInbound&&(audioPacketsReceived=potentialAudioPacketsReceived,audiofractionPacketsLostInbound=potentialAudioFractionPacketsLostInbound,audioPacketsReceived<0||audiofractionPacketsLostInbound<0||bytesReceived<0||stunMessagesReceived<0||(this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,audioPacketsReceived),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,audiofractionPacketsLostInbound),bytesReceived>0||stunMessagesReceived>0?(this.hasSeenValidCandidatePairMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidCandidatePairMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(0===audioPacketsReceived||audiofractionPacketsLostInbound>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),"number"==typeof metricReport.audioPacketsSent&&this.updateAudioPacketsSentInConnectionHealth(metricReport.audioPacketsSent),this.updateVideoEncodingHealth(clientMetricReport),this.updateConnectionHealth()))}updateAudioPacketsSentInConnectionHealth(audioPacketsSent){audioPacketsSent>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}updateVideoEncodingHealth(clientMetricReport){const isLocalVideoTileStarted=this.audioVideoController.videoTileController.hasStartedLocalVideoTile(),ssrcs=clientMetricReport.getVideoUpstreamSsrcs();if(!isLocalVideoTileStarted||0===ssrcs.length)return this.connectionHealthData.setIsVideoEncoderHardware(!1),this.connectionHealthData.setVideoEncodingTimePerFrameInMs(0),this.connectionHealthData.setCpuLimitationDuration(0),this.connectionHealthData.setVideoInputFps(0),void this.connectionHealthData.setVideoEncodeFps(0);let isHardwareEncoder=!1,videoEncodingTimeInMs=0,cpuLimitationDuration=0,videoInputFps=0,videoEncodeFps=0;for(const ssrc of ssrcs)isHardwareEncoder||(isHardwareEncoder=Boolean(clientMetricReport.getObservableVideoMetricValue("videoUpstreamEncoderImplementation",ssrc))),videoEncodingTimeInMs+=clientMetricReport.getObservableVideoMetricValue("videoUpstreamTotalEncodeTimePerSecond",ssrc),cpuLimitationDuration+=clientMetricReport.getObservableVideoMetricValue("videoUpstreamCpuQualityLimitationDurationPerSecond",ssrc),videoInputFps+=clientMetricReport.getObservableVideoMetricValue("videoUpstreamFramesInputPerSecond",ssrc),videoEncodeFps+=clientMetricReport.getObservableVideoMetricValue("videoUpstreamFramesEncodedPerSecond",ssrc);const videoEncodingTimePerFrameInMs=videoEncodeFps>0?videoEncodingTimeInMs/videoEncodeFps:0;this.connectionHealthData.setIsVideoEncoderHardware(Boolean(isHardwareEncoder)),this.connectionHealthData.setVideoEncodingTimeInMs(videoEncodingTimeInMs),this.connectionHealthData.setVideoEncodingTimePerFrameInMs(videoEncodingTimePerFrameInMs),this.connectionHealthData.setCpuLimitationDuration(cpuLimitationDuration),this.connectionHealthData.setVideoInputFps(videoInputFps),this.connectionHealthData.setVideoEncodeFps(videoEncodeFps)}addToMinuteWindow(array,value){array.unshift(value),array.length>60&&array.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver((observer=>{Types_1.Maybe.of(observer.connectionHealthDidChange).map((f=>f.bind(observer)(this.connectionHealthData.clone())))}))}}},"./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/ContentShareConstants.js":(__unused_webpack_module,exports)=>{"use strict";var ContentShareConstants;Object.defineProperty(exports,"__esModule",{value:!0}),function(ContentShareConstants){ContentShareConstants.Modality="#content"}(ContentShareConstants||(ContentShareConstants={})),exports.default=ContentShareConstants},"./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/ContentShareMediaStreamBroker.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),DefaultDeviceController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/DefaultDeviceController.js"));class ContentShareMediaStreamBroker{constructor(logger){this.logger=logger}get mediaStream(){return this._mediaStream}set mediaStream(mediaStream){this._mediaStream=mediaStream}acquireAudioInputStream(){return __awaiter(this,void 0,void 0,(function*(){return 0===this._mediaStream.getAudioTracks().length?(this.logger.info("No audio stream available. Synthesizing an audio stream."),DefaultDeviceController_1.default.synthesizeAudioDevice(0)):this._mediaStream}))}acquireVideoInputStream(){return __awaiter(this,void 0,void 0,(function*(){return this._mediaStream}))}acquireDisplayInputStream(streamConstraints){return __awaiter(this,void 0,void 0,(function*(){return streamConstraints&&streamConstraints.video&&streamConstraints.video.mandatory&&streamConstraints.video.mandatory.chromeMediaSource&&streamConstraints.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(streamConstraints):navigator.mediaDevices.getDisplayMedia(streamConstraints)}))}acquireScreenCaptureDisplayInputStream(sourceId,frameRate){return __awaiter(this,void 0,void 0,(function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(sourceId,frameRate))}))}screenCaptureDisplayMediaConstraints(sourceId,frameRate){return{audio:!(sourceId||!(new DefaultBrowserBehavior_1.default).getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!sourceId&&{frameRate:{max:frameRate||ContentShareMediaStreamBroker.defaultFrameRate}}),sourceId&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:sourceId,maxFrameRate:frameRate||ContentShareMediaStreamBroker.defaultFrameRate}})}}toggleMediaStream(enable){let changed=!1;if(this.mediaStream)for(let i=0;i<this.mediaStream.getTracks().length;i++)this.mediaStream.getTracks()[i].enabled!==enable&&(this.mediaStream.getTracks()[i].enabled=enable,changed=!0);return changed}cleanup(){if(this.mediaStream)for(let i=0;i<this.mediaStream.getTracks().length;i++){this.mediaStream.getTracks()[i].stop()}this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(_observer){}removeMediaStreamBrokerObserver(_observer){}}exports.default=ContentShareMediaStreamBroker,ContentShareMediaStreamBroker.defaultFrameRate=15},"./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/DefaultContentShareController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const VideoQualitySettings_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoQualitySettings.js")),MeetingSessionConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionConfiguration.js")),MeetingSessionCredentials_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionCredentials.js")),DefaultModality_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/modality/DefaultModality.js")),AsyncScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js")),Types_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Types.js"),NoVideoDownlinkBandwidthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/NoVideoDownlinkBandwidthPolicy.js")),DefaultSimulcastUplinkPolicyForContentShare_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/DefaultSimulcastUplinkPolicyForContentShare.js")),ContentShareConstants_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/ContentShareConstants.js"));exports.default=class DefaultContentShareController{constructor(mediaStreamBroker,contentAudioVideo,attendeeAudioVideo){this.mediaStreamBroker=mediaStreamBroker,this.contentAudioVideo=contentAudioVideo,this.attendeeAudioVideo=attendeeAudioVideo,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}static createContentShareMeetingSessionConfigure(configuration){const contentShareConfiguration=new MeetingSessionConfiguration_1.default;return contentShareConfiguration.meetingId=configuration.meetingId,contentShareConfiguration.externalMeetingId=configuration.externalMeetingId,contentShareConfiguration.urls=configuration.urls,contentShareConfiguration.disablePeriodicKeyframeRequestOnContentSender=configuration.disablePeriodicKeyframeRequestOnContentSender,contentShareConfiguration.credentials=new MeetingSessionCredentials_1.default,contentShareConfiguration.credentials.attendeeId=configuration.credentials.attendeeId+ContentShareConstants_1.default.Modality,contentShareConfiguration.credentials.externalUserId=configuration.credentials.externalUserId,contentShareConfiguration.credentials.joinToken=configuration.credentials.joinToken+ContentShareConstants_1.default.Modality,contentShareConfiguration.meetingFeatures=configuration.meetingFeatures.clone(),contentShareConfiguration.videoDownlinkBandwidthPolicy=new NoVideoDownlinkBandwidthPolicy_1.default,contentShareConfiguration}setContentAudioProfile(audioProfile){this.contentAudioVideo.setAudioProfile(audioProfile)}enableSimulcastForContentShare(enable,encodingParams){enable?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new DefaultSimulcastUplinkPolicyForContentShare_1.default(this.contentAudioVideo.logger,encodingParams)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(enable){this.contentAudioVideo.configuration.enableSVC=!!enable}startContentShare(stream){return __awaiter(this,void 0,void 0,(function*(){if(stream)if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution!==VideoQualitySettings_1.default.VideoDisabled){this.mediaStreamBroker.mediaStream=stream;for(let i=0;i<this.mediaStreamBroker.mediaStream.getTracks().length;i++)this.mediaStreamBroker.mediaStream.getTracks()[i].addEventListener("ended",(()=>{this.stopContentShare()}));this.contentAudioVideo.start()}else this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None")}))}startContentShareFromScreenCapture(sourceId,frameRate){return __awaiter(this,void 0,void 0,(function*(){const mediaStream=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(sourceId,frameRate);return yield this.startContentShare(mediaStream),mediaStream}))}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver((observer=>{Types_1.Maybe.of(observer.contentShareDidPause).map((f=>f.call(observer)))}))}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver((observer=>{Types_1.Maybe.of(observer.contentShareDidUnpause).map((f=>f.call(observer)))}))}setContentShareVideoCodecPreferences(preferences){this.contentAudioVideo.setVideoCodecSendPreferences(preferences)}destroy(){return __awaiter(this,void 0,void 0,(function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)}))}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(observer){this.observerQueue.add(observer)}removeContentShareObserver(observer){this.observerQueue.delete(observer)}forEachContentShareObserver(observerFunc){for(const observer of this.observerQueue)AsyncScheduler_1.default.nextTick((()=>{this.observerQueue.has(observer)&&observerFunc(observer)}))}audioVideoDidStart(){var _a;(null===(_a=this.mediaStreamBroker.mediaStream)||void 0===_a?void 0:_a.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(_sessionStatus){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver((observer=>{Types_1.Maybe.of(observer.contentShareDidStop).map((f=>f.call(observer)))}))}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence(((attendeeId,present,_externalUserId,_dropped)=>{const isContentAttendee=new DefaultModality_1.default(attendeeId).hasModality(DefaultModality_1.default.MODALITY_CONTENT),isSelfAttendee=new DefaultModality_1.default(attendeeId).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!isContentAttendee||!isSelfAttendee||!present||this.contentShareTile)return;const stream=this.mediaStreamBroker.mediaStream;if(null==stream?void 0:stream.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const track=stream.getVideoTracks()[0];let width,height;if(track.getSettings){const cap=track.getSettings();width=cap.width,height=cap.height}else{const cap=track.getCapabilities();width=cap.width,height=cap.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,stream,width,height,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver((observer=>{Types_1.Maybe.of(observer.contentShareDidStart).map((f=>f.call(observer)))}))}))}}},"./node_modules/amazon-chime-sdk-js/build/cspmonitor/CSPMonitor.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class CSPMonitor{static register(){"document"in __webpack_require__.g&&document.addEventListener&&CSPMonitor.shouldRegisterCSPMonitor&&(CSPMonitor.added||(document.addEventListener("securitypolicyviolation",CSPMonitor.listener),CSPMonitor.added=!0))}static unregister(){"document"in __webpack_require__.g&&document.removeEventListener&&(document.removeEventListener("securitypolicyviolation",CSPMonitor.listener),CSPMonitor.loggers=new Set,CSPMonitor.added=!1)}static disable(){CSPMonitor.shouldRegisterCSPMonitor=!1,CSPMonitor.unregister()}static addLogger(logger){logger&&CSPMonitor.loggers.add(logger)}static removeLogger(logger){logger&&CSPMonitor.loggers.delete(logger)}}exports.default=CSPMonitor,CSPMonitor.loggers=new Set,CSPMonitor.shouldRegisterCSPMonitor=!0,CSPMonitor.added=!1,CSPMonitor.listener=event=>{const message=`Security Policy Violation\nBlocked URI: ${event.blockedURI}\nViolated Directive: ${event.violatedDirective}\nOriginal Policy: ${event.originalPolicy}\nDocument URI: ${event.documentURI}\nSource File: ${event.sourceFile}\nLine No.: ${event.lineNumber}\n`;for(const logger of CSPMonitor.loggers)logger.error(message);0===CSPMonitor.loggers.size&&console.error(message)}},"./node_modules/amazon-chime-sdk-js/build/datamessage/DataMessage.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class DataMessage{constructor(timestampMs,topic,data,senderAttendeeId,senderExternalUserId,throttled){this.timestampMs=timestampMs,this.topic=topic,this.data=data,this.senderAttendeeId=senderAttendeeId,this.senderExternalUserId=senderExternalUserId,this.throttled=!!throttled}text(){return(new TextDecoder).decode(this.data)}json(){return JSON.parse((new TextDecoder).decode(this.data))}}},"./node_modules/amazon-chime-sdk-js/build/destroyable/Destroyable.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDestroyable=void 0,exports.isDestroyable=function isDestroyable(x){return x&&"destroy"in x}},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/AudioTransformDevice.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAudioTransformDevice=void 0,exports.isAudioTransformDevice=function isAudioTransformDevice(device){return!!device&&"object"==typeof device&&"mute"in device&&"stop"in device&&"intrinsicDevice"in device}},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/DefaultDeviceController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),DefaultMediaDeviceFactory_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/mediadevicefactory/DefaultMediaDeviceFactory.js")),AsyncScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js")),PromiseQueue_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/PromiseQueue.js")),Types_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Types.js"),DefaultVideoTransformDevice_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/DefaultVideoTransformDevice.js")),DefaultVideoTile_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotile/DefaultVideoTile.js")),AudioTransformDevice_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/AudioTransformDevice.js"),DeviceSelection_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/DeviceSelection.js")),GetUserMediaError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/GetUserMediaError.js")),NotFoundError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/NotFoundError.js")),NotReadableError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/NotReadableError.js")),OverconstrainedError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/OverconstrainedError.js")),PermissionDeniedError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/PermissionDeniedError.js")),TypeError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/TypeError.js")),VideoQualitySettings_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoQualitySettings.js")),VideoTransformDevice_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoTransformDevice.js");class DefaultDeviceController{constructor(logger,options,browserBehavior=new DefaultBrowserBehavior_1.default,eventController){this.logger=logger,this.browserBehavior=browserBehavior,this.eventController=eventController,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new PromiseQueue_1.default,this.videoInputTaskQueue=new PromiseQueue_1.default,this.muted=!1,this.mediaStreamMuteObserver=(id,muted)=>{for(const observer of this.deviceChangeObservers)AsyncScheduler_1.default.nextTick((()=>{this.deviceChangeObservers.has(observer)&&observer.audioInputMuteStateChanged&&observer.audioInputMuteStateChanged(id,muted)}))},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio=!1,useMediaConstraintsFallback=!0}=options||{};this.useWebAudio=enableWebAudio,this.useMediaConstraintsFallback=useMediaConstraintsFallback,this.videoInputQualitySettings=new VideoQualitySettings_1.default(DefaultDeviceController.defaultVideoWidth,DefaultDeviceController.defaultVideoHeight,DefaultDeviceController.defaultVideoFrameRate);const dimension=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=dimension[0],this.videoInputQualitySettings.videoHeight=dimension[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=(new DefaultMediaDeviceFactory_1.default).create();const supportedConstraints=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(supportedConstraints)}`)}catch(error){logger.error(error.message)}}isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var _a;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},null===(_a=this.mediaDeviceWrapper)||void 0===_a||_a.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var _a;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),null===(_a=this.mediaDeviceWrapper)||void 0===_a||_a.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){if(this.deviceChangeObservers.size)return!0;return this.activeDevices.audio&&null!==this.activeDevices.audio.constraints||this.activeDevices.video&&null!==this.activeDevices.video.constraints||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return __awaiter(this,void 0,void 0,(function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()}))}listAudioInputDevices(forceUpdate=!1){return __awaiter(this,void 0,void 0,(function*(){const result=yield this.listDevicesOfKind("audioinput",forceUpdate);return this.trace("listAudioInputDevices",forceUpdate,result),result}))}listVideoInputDevices(forceUpdate=!1){return __awaiter(this,void 0,void 0,(function*(){const result=yield this.listDevicesOfKind("videoinput",forceUpdate);return this.trace("listVideoInputDevices",forceUpdate,result),result}))}listAudioOutputDevices(forceUpdate=!1){return __awaiter(this,void 0,void 0,(function*(){const result=yield this.listDevicesOfKind("audiooutput",forceUpdate);return this.trace("listAudioOutputDevices",forceUpdate,result),result}))}pushAudioMeetingStateForPermissions(audioStream){var _a;null===(_a=this.eventController)||void 0===_a||_a.publishEvent(void 0===audioStream?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(videoStream){var _a;null===(_a=this.eventController)||void 0===_a||_a.publishEvent(void 0===videoStream?"videoInputUnselected":"videoInputSelected")}startAudioInput(device){return __awaiter(this,void 0,void 0,(function*(){return yield this.audioInputTaskQueue.add((()=>this.startAudioInputTask(device)))}))}startAudioInputTask(device){var _a;return __awaiter(this,void 0,void 0,(function*(){if(void 0!==device)try{return AudioTransformDevice_1.isAudioTransformDevice(device)?(this.logger.info(`Choosing transform input device ${device}`),yield this.chooseAudioTransformInputDevice(device)):(this.logger.info(`Choosing intrinsic audio input device ${device}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",device)),this.trace("startAudioInputDevice",device,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield null===(_a=this.transform)||void 0===_a?void 0:_a.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(error){throw error}else this.logger.error("Audio input device cannot be undefined")}))}stopAudioInput(){return __awaiter(this,void 0,void 0,(function*(){return this.audioInputTaskQueue.add((()=>this.stopAudioInputTask()))}))}stopAudioInputTask(){return __awaiter(this,void 0,void 0,(function*(){try{if(this.useWebAudio)return void this.releaseAudioTransformStream();this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}}))}chooseAudioTransformInputDevice(device){var _a;return __awaiter(this,void 0,void 0,(function*(){if((null===(_a=this.transform)||void 0===_a?void 0:_a.device)===device)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const context=DefaultDeviceController.getAudioContext();if(context instanceof OfflineAudioContext);else switch(context.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield context.resume()}let nodes;try{nodes=yield device.createAudioNode(context)}catch(e){throw this.logger.error(`Unable to create transform device node: ${e}.`),e}const inner=yield device.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",inner),this.logger.debug(`Got inner stream: ${inner}.`),this.setTransform(device,nodes)}))}chooseVideoTransformInputDevice(device){var _a;return __awaiter(this,void 0,void 0,(function*(){if(this.eventController&&device instanceof DefaultVideoTransformDevice_1.default&&device.passEventControllerToProcessors(this.eventController),device===this.chosenVideoTransformDevice)return void this.logger.info("Reselecting same VideoTransformDevice");const prevVideoTransformDevice=this.chosenVideoTransformDevice;prevVideoTransformDevice&&this.logger.info("Switched from previous VideoTransformDevice");const wasUsingTransformDevice=!!prevVideoTransformDevice,inner=yield device.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId(null===(_a=this.activeDevices.video)||void 0===_a?void 0:_a.stream,inner))return this.logger.info("video transform device needs new intrinsic device"),wasUsingTransformDevice&&prevVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=device,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",inner),this.logger.info("apply processors to transform"),void(yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream));this.chosenVideoTransformDevice=device,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield device.transformStream(this.activeDevices.video.stream)}))}startVideoInput(device){return __awaiter(this,void 0,void 0,(function*(){return yield this.videoInputTaskQueue.add((()=>this.startVideoInputTask(device)))}))}startVideoInputTask(device){return __awaiter(this,void 0,void 0,(function*(){if(device)try{return VideoTransformDevice_1.isVideoTransformDevice(device)?(this.logger.info(`Choosing video transform device ${device}`),yield this.chooseVideoTransformInputDevice(device),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",device),this.trace("startVideoInputDevice",device),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(error){throw error}else this.logger.error("Invalid video input device")}))}stopVideoInput(){return __awaiter(this,void 0,void 0,(function*(){return this.videoInputTaskQueue.add((()=>this.stopVideoInputTask()))}))}stopVideoInputTask(){return __awaiter(this,void 0,void 0,(function*(){try{if(this.chosenVideoInputIsTransformDevice())return void this.releaseVideoTransformStream();this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}}))}chooseAudioOutput(deviceId){return __awaiter(this,void 0,void 0,(function*(){this.audioOutputDeviceId=deviceId,this.watchForDeviceChangesIfNecessary();const deviceInfo=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(deviceInfo),this.trace("chooseAudioOutput",deviceId,null)}))}addDeviceChangeObserver(observer){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(observer),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(observer){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(observer),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var _a,_b;if(!this.activeDevices.audio)return null;const node=null===(_b=null===(_a=this.transform)||void 0===_a?void 0:_a.nodes)||void 0===_b?void 0:_b.end;if(node){const analyser=node.context.createAnalyser();return analyser.removeOriginalInputs=()=>{try{node.disconnect(analyser)}catch(e){}},node.connect(analyser),analyser}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(stream){const audioContext=DefaultDeviceController.getAudioContext(),analyser=audioContext.createAnalyser(),source=audioContext.createMediaStreamSource(stream);return source.connect(analyser),this.trace("createAnalyserNodeForAudioInput"),analyser.removeOriginalInputs=()=>{try{source.disconnect(analyser)}catch(e){}},analyser}startVideoPreviewForVideoInput(element){if(!this.activeDevices.video)return this.logger.warn("cannot bind video preview since video input device has not been chosen"),void this.trace("startVideoPreviewForVideoInput",element.id);DefaultVideoTile_1.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,element,!0),this.trace("startVideoPreviewForVideoInput",element.id)}stopVideoPreviewForVideoInput(element){DefaultVideoTile_1.default.disconnectVideoStreamFromVideoElement(element,!1),this.trace("stopVideoPreviewForVideoInput",element.id)}setDeviceLabelTrigger(trigger){if(this.deviceInfoCache)for(const device of this.deviceInfoCache)if(!device.label){this.deviceInfoCache=null;break}this.deviceLabelTrigger=trigger,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(stream){let node=null;return this.useWebAudio?(node=DefaultDeviceController.getAudioContext().createMediaStreamSource(stream),node.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",stream.id),node}chooseVideoInputQuality(width,height,frameRate){const dimension=this.browserBehavior.requiresResolutionAlignment(width,height);this.videoInputQualitySettings=new VideoQualitySettings_1.default(dimension[0],dimension[1],frameRate)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return __awaiter(this,void 0,void 0,(function*(){if(this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio){return this.getMediaStreamDestinationNode().stream}return this.activeDevices.audio.stream}))}acquireVideoInputStream(){return __awaiter(this,void 0,void 0,(function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream}))}acquireDisplayInputStream(_streamConstraints){return __awaiter(this,void 0,void 0,(function*(){throw new Error("unsupported")}))}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(kind){const activeDevice=this.activeDevices[kind];if(!activeDevice)return;const endedCallback=activeDevice.endedCallback,trackMuteCallback=activeDevice.trackMuteCallback,trackUnmuteCallback=activeDevice.trackUnmuteCallback;for(const track of activeDevice.stream.getTracks())track.stop(),endedCallback&&track.removeEventListener("ended",endedCallback),trackMuteCallback&&track.removeEventListener("mute",trackMuteCallback),trackUnmuteCallback&&track.removeEventListener("unmute",trackUnmuteCallback),delete activeDevice.endedCallback,delete activeDevice.trackMuteCallback,delete activeDevice.trackUnmuteCallback,delete this.activeDevices[kind]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(enabled){var _a;let audioDevice=this.activeDevices.audio;if(this.useWebAudio&&(audioDevice=this.getMediaStreamDestinationNode()),audioDevice){for(const track of audioDevice.stream.getTracks())track.enabled!==enabled&&(track.enabled=enabled);this.muted!==!enabled&&(this.muted=!enabled,null===(_a=this.transform)||void 0===_a||_a.device.mute(this.muted))}}static getIntrinsicDeviceId(device){if(!device)return;if("string"==typeof device)return device;if(device.id)return device.id;const deviceIdConstraints=device.deviceId;if(!deviceIdConstraints)return;if("string"==typeof deviceIdConstraints||Array.isArray(deviceIdConstraints))return deviceIdConstraints;const constraintStringParams=deviceIdConstraints;return"string"==typeof constraintStringParams.exact||Array.isArray(constraintStringParams.exact)?constraintStringParams.exact:void 0}static createEmptyAudioDevice(){return DefaultDeviceController.synthesizeAudioDevice(0)}static synthesizeAudioDevice(toneHz){const audioContext=DefaultDeviceController.getAudioContext(),outputNode=audioContext.createMediaStreamDestination();if(toneHz){const gainNode=audioContext.createGain();gainNode.gain.value=.1,gainNode.connect(outputNode);const oscillatorNode=audioContext.createOscillator();oscillatorNode.frequency.value=toneHz,oscillatorNode.connect(gainNode),oscillatorNode.start()}else{const source=audioContext.createBufferSource();try{source.buffer=audioContext.createBuffer(1,5*audioContext.sampleRate,audioContext.sampleRate)}catch(error){if(!error||"NotSupportedError"!==error.name)throw error;source.buffer=audioContext.createBuffer(1,5*DefaultDeviceController.defaultSampleRate,DefaultDeviceController.defaultSampleRate)}source.buffer.getChannelData(0)[0]=3e-4,source.loop=!0,source.connect(outputNode),source.start()}return outputNode.stream}listDevicesOfKind(deviceKind,forceUpdate){return __awaiter(this,void 0,void 0,(function*(){return!forceUpdate&&null!==this.deviceInfoCache&&this.isWatchingForDeviceChanges()||(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(deviceKind)}))}updateDeviceInfoCacheFromBrowser(){var _a;return __awaiter(this,void 0,void 0,(function*(){if("undefined"==typeof MediaDeviceInfo)return void(this.deviceInfoCache=[]);let devices=yield navigator.mediaDevices.enumerateDevices(),hasDeviceLabels=!0;for(const device of devices)if(!device.label){hasDeviceLabels=!1;break}if(!hasDeviceLabels)try{this.logger.info("attempting to trigger media device labels since they are hidden");const triggerStream=yield this.deviceLabelTrigger();devices=yield navigator.mediaDevices.enumerateDevices();for(const track of triggerStream.getTracks())track.stop()}catch(error){this.logger.info("unable to get media device labels"),null===(_a=this.eventController)||void 0===_a||_a.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(error)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(devices)}`),this.deviceInfoCache=devices}))}listCachedDevicesOfKind(deviceKind){const devicesOfKind=[];if(this.deviceInfoCache)for(const device of this.deviceInfoCache)device.kind===deviceKind&&devicesOfKind.push(device);return devicesOfKind}handleDeviceChange(){return __awaiter(this,void 0,void 0,(function*(){if(null===this.deviceInfoCache)return;if(this.alreadyHandlingDeviceChange)return void AsyncScheduler_1.default.nextTick((()=>{this.handleDeviceChange()}));this.alreadyHandlingDeviceChange=!0;const oldAudioInputDevices=this.listCachedDevicesOfKind("audioinput"),oldVideoInputDevices=this.listCachedDevicesOfKind("videoinput"),oldAudioOutputDevices=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const newAudioInputDevices=this.listCachedDevicesOfKind("audioinput"),newVideoInputDevices=this.listCachedDevicesOfKind("videoinput"),newAudioOutputDevices=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver((observer=>{this.areDeviceListsEqual(oldAudioInputDevices,newAudioInputDevices)||Types_1.Maybe.of(observer.audioInputsChanged).map((f=>f.bind(observer)(newAudioInputDevices))),this.areDeviceListsEqual(oldVideoInputDevices,newVideoInputDevices)||Types_1.Maybe.of(observer.videoInputsChanged).map((f=>f.bind(observer)(newVideoInputDevices))),this.areDeviceListsEqual(oldAudioOutputDevices,newAudioOutputDevices)||Types_1.Maybe.of(observer.audioOutputsChanged).map((f=>f.bind(observer)(newAudioOutputDevices)))})),this.alreadyHandlingDeviceChange=!1}))}handleDeviceStreamEnded(kind,deviceId){return __awaiter(this,void 0,void 0,(function*(){try{"audio"===kind?(this.useWebAudio&&this.browserBehavior.requiresAudioContextResetOnDeviceFailureForWebAudio()?(this.logger.warn("Audio input device which was active is no longer available, suspending and resuming audio context before resetting to empty device to ensure packets are sent"),yield this.stopAudioInput(),DefaultDeviceController.suspendAudioContext(),DefaultDeviceController.resumeAudioContext()):this.logger.warn("Audio input device which was active is no longer available, resetting to empty device to ensure packets are sent"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch(e){this.logger.error("Failed to choose null device after stream ended.")}"audio"===kind?this.forEachObserver((observer=>{Types_1.Maybe.of(observer.audioInputStreamEnded).map((f=>f.bind(observer)(deviceId)))})):this.forEachObserver((observer=>{Types_1.Maybe.of(observer.videoInputStreamEnded).map((f=>f.bind(observer)(deviceId)))}))}))}forEachObserver(observerFunc){for(const observer of this.deviceChangeObservers)AsyncScheduler_1.default.nextTick((()=>{this.deviceChangeObservers.has(observer)&&observerFunc(observer)}))}forEachMediaStreamBrokerObserver(observerFunc){for(const observer of this.mediaStreamBrokerObservers)AsyncScheduler_1.default.nextTick((()=>{this.mediaStreamBrokerObservers.has(observer)&&observerFunc(observer)}))}areDeviceListsEqual(a,b){return JSON.stringify(a.map((device=>JSON.stringify(device))).sort())===JSON.stringify(b.map((device=>JSON.stringify(device))).sort())}intrinsicDeviceAsMediaStream(device){return device&&device.id?device:null}hasSameMediaStreamId(kind,selection,proposedConstraints){var _a,_b,_c,_d;let streamId;return"audio"===kind?(streamId=null==proposedConstraints?void 0:proposedConstraints.audio.streamId,!!streamId&&streamId===(null===(_b=null===(_a=selection.constraints)||void 0===_a?void 0:_a.audio)||void 0===_b?void 0:_b.streamId)):(streamId=null==proposedConstraints?void 0:proposedConstraints.video.streamId,!!streamId&&streamId===(null===(_d=null===(_c=null==selection?void 0:selection.constraints)||void 0===_c?void 0:_c.video)||void 0===_d?void 0:_d.streamId))}hasSameGroupId(groupId,kind,device){if(""===groupId)return!0;const deviceIds=DefaultDeviceController.getIntrinsicDeviceId(device);return this.logger.debug(`Checking deviceIds ${deviceIds} of type ${typeof deviceIds} with groupId ${groupId}`),"string"==typeof deviceIds&&groupId===this.getGroupIdFromDeviceId(kind,deviceIds)}getGroupIdFromDeviceId(kind,deviceId){if(null!==this.deviceInfoCache){const cachedDeviceInfo=this.listCachedDevicesOfKind(`${kind}input`).find((cachedDevice=>cachedDevice.deviceId===deviceId));if(cachedDeviceInfo&&cachedDeviceInfo.groupId)return this.logger.debug(`GroupId of deviceId ${deviceId} found in cache is ${cachedDeviceInfo.groupId}`),cachedDeviceInfo.groupId}return this.logger.debug(`GroupId of deviceId ${deviceId} found in cache is empty`),""}handleGetUserMediaError(error,errorTimeMs){if(!error)throw new GetUserMediaError_1.default(error);switch(error.name){case"NotReadableError":case"TrackStartError":throw new NotReadableError_1.default(error);case"NotFoundError":case"DevicesNotFoundError":throw new NotFoundError_1.default(error);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw errorTimeMs&&errorTimeMs<DefaultDeviceController.permissionDeniedOriginDetectionThresholdMs?new PermissionDeniedError_1.default(error,"Permission denied by browser"):new PermissionDeniedError_1.default(error,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new OverconstrainedError_1.default(error);case"TypeError":throw new TypeError_1.default(error);default:throw new GetUserMediaError_1.default(error)}}matchesDeviceSelection(kind,device,selection,proposedConstraints){return!!(selection&&selection.stream.active&&(this.hasSameMediaStreamId(kind,selection,proposedConstraints)||null!==selection.groupId&&this.hasSameGroupId(selection.groupId,kind,device)))&&(this.logger.debug(`Compare current device constraint ${JSON.stringify(selection.constraints)} to proposed constraints ${JSON.stringify(proposedConstraints)}`),selection.matchesConstraints(proposedConstraints))}chooseInputIntrinsicDevice(kind,device){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){const proposedConstraints=this.getMediaStreamConstraints(kind,device);if(this.matchesDeviceSelection(kind,device,this.activeDevices[kind],proposedConstraints))return void this.logger.info(`reusing existing ${kind} input device`);this.activeDevices[kind]&&this.activeDevices[kind].stream&&this.stopTracksAndRemoveCallbacks(kind);const startTimeMs=Date.now(),newDevice=new DeviceSelection_1.default;try{this.logger.info(`requesting new ${kind} device with constraint ${JSON.stringify(proposedConstraints)}`);const stream=this.intrinsicDeviceAsMediaStream(device);"audio"===kind&&null===device?(newDevice.stream=DefaultDeviceController.createEmptyAudioDevice(),newDevice.constraints=null):stream?(this.logger.info(`using media stream ${stream.id} for ${kind} device`),newDevice.stream=stream,newDevice.constraints=proposedConstraints):(newDevice.stream=yield navigator.mediaDevices.getUserMedia(proposedConstraints),newDevice.constraints=proposedConstraints),yield this.handleNewInputDevice(kind,newDevice)}catch(error){const errorMessage=this.getErrorMessage(error);"audio"===kind?null===(_a=this.eventController)||void 0===_a||_a.publishEvent("audioInputFailed",{audioInputErrorMessage:errorMessage}):null===(_b=this.eventController)||void 0===_b||_b.publishEvent("videoInputFailed",{videoInputErrorMessage:errorMessage}),this.logger.error(`failed to get ${kind} device for constraints ${JSON.stringify(proposedConstraints)}: ${errorMessage}`);let hasError=!0;if(error&&"constraint"in error&&(this.logger.error(`Over-constrained by constraint: ${error.constraint}`),this.useMediaConstraintsFallback)){const fallbackConstraints=this.getMediaStreamConstraints(kind,device,!0),fallbackConstraintsJSON=JSON.stringify(fallbackConstraints);if(fallbackConstraintsJSON!==JSON.stringify(proposedConstraints)){this.logger.info(`retry requesting new ${kind} device with minimal constraint ${fallbackConstraintsJSON}`);try{newDevice.stream=yield navigator.mediaDevices.getUserMedia(fallbackConstraints),newDevice.constraints=fallbackConstraints,yield this.handleNewInputDevice(kind,newDevice),hasError=!1}catch(e){this.logger.error(`failed to get ${kind} device for constraints ${fallbackConstraintsJSON}: ${this.getErrorMessage(e)}`)}}}if(hasError){if("audio"===kind){this.logger.info(`choosing null ${kind} device instead`);try{newDevice.stream=DefaultDeviceController.createEmptyAudioDevice(),newDevice.constraints=null,yield this.handleNewInputDevice(kind,newDevice)}catch(error){this.logger.error(`failed to choose null ${kind} device. ${error.name}: ${error.message}`)}}this.handleGetUserMediaError(error,Date.now()-startTimeMs)}}finally{this.watchForDeviceChangesIfNecessary()}}))}getErrorMessage(error){return error?error.name&&error.message?`${error.name}: ${error.message}`:error.name?error.name:error.message?error.message:"UnknownError":"UnknownError"}handleNewInputDevice(kind,newDevice){var _a;return __awaiter(this,void 0,void 0,(function*(){this.logger.info(`got ${kind} device for constraints ${JSON.stringify(newDevice.constraints)}`);const newDeviceId=null===(_a=this.getMediaTrackSettings(newDevice.stream))||void 0===_a?void 0:_a.deviceId;newDevice.groupId=newDeviceId?this.getGroupIdFromDeviceId(kind,newDeviceId):"",this.activeDevices[kind]=newDevice,this.logger.debug(`Set activeDevice to ${JSON.stringify(newDevice)}`),this.watchForDeviceChangesIfNecessary();const track=newDevice.stream.getTracks()[0];if(track&&(newDevice.endedCallback=()=>{this.activeDevices[kind]&&this.activeDevices[kind].stream===newDevice.stream&&(this.handleDeviceStreamEnded(kind,newDeviceId),delete newDevice.endedCallback)},track.addEventListener("ended",newDevice.endedCallback,{once:!0})),"audio"===kind){const track=newDevice.stream.getAudioTracks()[0];if(track){const id=track.getSettings().deviceId||newDevice.stream;newDevice.trackMuteCallback=()=>{this.mediaStreamMuteObserver(id,!0)},newDevice.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(id,!1)},track.addEventListener("mute",newDevice.trackMuteCallback,{once:!1}),track.addEventListener("unmute",newDevice.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),track.muted?newDevice.trackMuteCallback():newDevice.trackUnmuteCallback()}}}))}calculateMediaStreamConstraints(kind,deviceId,groupId,minimal){if(minimal&&1===this.listCachedDevicesOfKind(`${kind}input`).length)return!0;const trackConstraints={};if(this.browserBehavior.requiresNoExactMediaStreamConstraints()?trackConstraints.deviceId=deviceId:trackConstraints.deviceId={exact:deviceId},groupId&&(trackConstraints.groupId=groupId),minimal)return trackConstraints;if("video"===kind)return trackConstraints.width={ideal:this.videoInputQualitySettings.videoWidth},trackConstraints.height={ideal:this.videoInputQualitySettings.videoHeight},trackConstraints.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},trackConstraints;this.supportSampleRateConstraint()&&(trackConstraints.sampleRate={ideal:DefaultDeviceController.defaultSampleRate}),this.supportSampleSizeConstraint()&&(trackConstraints.sampleSize={ideal:DefaultDeviceController.defaultSampleSize}),this.supportChannelCountConstraint()&&(trackConstraints.channelCount={ideal:DefaultDeviceController.defaultChannelCount});return Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},trackConstraints)}getMediaStreamConstraintsFromTrackConstraints(kind,trackConstraints){return"audio"===kind?{audio:trackConstraints}:{video:trackConstraints}}getMediaStreamConstraints(kind,device,minimal=!1){let trackConstraints={};if(!device)return null;const stream=this.intrinsicDeviceAsMediaStream(device);if(stream)return trackConstraints.streamId=stream.id,this.getMediaStreamConstraintsFromTrackConstraints(kind,trackConstraints);if("string"==typeof device){let groupId="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(null!==this.deviceInfoCache?groupId=this.getGroupIdFromDeviceId(kind,device):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),trackConstraints=this.calculateMediaStreamConstraints(kind,device,groupId,minimal),this.getMediaStreamConstraintsFromTrackConstraints(kind,trackConstraints)}return function isMediaDeviceInfo(device){return"object"==typeof device&&"deviceId"in device&&"groupId"in device&&"kind"in device&&"label"in device}(device)?(trackConstraints=this.calculateMediaStreamConstraints(kind,device.deviceId,device.groupId,minimal),this.getMediaStreamConstraintsFromTrackConstraints(kind,trackConstraints)):(trackConstraints=device,this.getMediaStreamConstraintsFromTrackConstraints(kind,trackConstraints))}deviceInfoFromDeviceId(deviceKind,deviceId){if(null===this.deviceInfoCache)return null;for(const device of this.deviceInfoCache)if(device.kind===deviceKind&&device.deviceId===deviceId)return device;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(stream,device){if(!stream||!stream.active||!device)return!1;if(device.id)return stream.id===device.id;const settings=this.getMediaTrackSettings(stream);if(!settings.deviceId)return!1;const deviceIds=DefaultDeviceController.getIntrinsicDeviceId(device);return"string"==typeof deviceIds&&settings.deviceId===deviceIds}getMediaTrackSettings(stream){var _a;return null===(_a=stream.getTracks()[0])||void 0===_a?void 0:_a.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const output=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(output)}setTransform(device,nodes){var _a,_b;null===(_b=null===(_a=this.transform)||void 0===_a?void 0:_a.nodes)||void 0===_b||_b.end.disconnect(),this.transform={nodes,device};const proc=null==nodes?void 0:nodes.end,dest=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${proc} to destination ${dest}.`),null==proc||proc.connect(dest),this.reconnectAudioInputs()}removeTransform(){var _a;const previous=this.transform;if(previous)return null===(_a=this.transform.nodes)||void 0===_a||_a.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),previous}attachAudioInputStreamToAudioContext(stream){var _a;null===(_a=this.audioInputSourceNode)||void 0===_a||_a.disconnect(),this.audioInputSourceNode=DefaultDeviceController.getAudioContext().createMediaStreamSource(stream);const output=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(output)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=DefaultDeviceController.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var _a,_b;return(null===(_b=null===(_a=this.transform)||void 0===_a?void 0:_a.nodes)||void 0===_b?void 0:_b.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(latencyHint){DefaultDeviceController.defaultLatencyHint=latencyHint}static getAudioContext(){if(!DefaultDeviceController.audioContext){const options={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(options.sampleRate=DefaultDeviceController.defaultSampleRate);(new DefaultBrowserBehavior_1.default).requiresPlaybackLatencyHintForAudioContext()&&(options.latencyHint="playback"),DefaultDeviceController.defaultLatencyHint&&(options.latencyHint=DefaultDeviceController.defaultLatencyHint),DefaultDeviceController.audioContext=new(window.AudioContext||window.webkitAudioContext)(options)}return DefaultDeviceController.audioContext}static suspendAudioContext(){return __awaiter(this,void 0,void 0,(function*(){return DefaultDeviceController.audioContext?DefaultDeviceController.audioContext.suspend():Promise.resolve()}))}static resumeAudioContext(){return __awaiter(this,void 0,void 0,(function*(){return DefaultDeviceController.audioContext?DefaultDeviceController.audioContext.resume():Promise.resolve()}))}static closeAudioContext(){if(DefaultDeviceController.audioContext)try{DefaultDeviceController.audioContext.close()}catch(e){}DefaultDeviceController.audioContext=null}addMediaStreamBrokerObserver(observer){this.mediaStreamBrokerObservers.add(observer)}removeMediaStreamBrokerObserver(observer){this.mediaStreamBrokerObservers.delete(observer)}publishVideoInputDidChangeEvent(videoStream){this.forEachMediaStreamBrokerObserver((observer=>{observer.videoInputDidChange&&observer.videoInputDidChange(videoStream)})),this.pushVideoMeetingStateForPermissions(videoStream)}publishAudioInputDidChangeEvent(audioStream){this.forEachMediaStreamBrokerObserver((observer=>{observer.audioInputDidChange&&observer.audioInputDidChange(audioStream)})),this.pushAudioMeetingStateForPermissions(audioStream)}publishAudioOutputDidChangeEvent(device){this.forEachMediaStreamBrokerObserver((observer=>{observer.audioOutputDidChange&&observer.audioOutputDidChange(device)}))}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(name,input,output){let s=`API/DefaultDeviceController/${name}`;void 0!==input&&(s+=` ${JSON.stringify(input)}`),void 0!==output&&(s+=` -> ${JSON.stringify(output)}`),this.logger.info(s)}}exports.default=DefaultDeviceController,DefaultDeviceController.permissionDeniedOriginDetectionThresholdMs=500,DefaultDeviceController.defaultVideoWidth=960,DefaultDeviceController.defaultVideoHeight=540,DefaultDeviceController.defaultVideoFrameRate=15,DefaultDeviceController.defaultSampleRate=48e3,DefaultDeviceController.defaultSampleSize=16,DefaultDeviceController.defaultChannelCount=1,DefaultDeviceController.audioContext=null},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/DeviceSelection.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class DeviceSelection{constructor(){this.groupId=""}matchesConstraints(constraints){return JSON.stringify(this.constraints)===JSON.stringify(constraints)}}},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/GetUserMediaError.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class GetUserMediaError extends Error{constructor(cause,message){super(message||"Error fetching device."),this.cause=cause,this.name="GetUserMediaError"}}exports.default=GetUserMediaError},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/NoOpDeviceController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoOpDeviceControllerWithEventController=void 0;const NoOpMediaStreamBroker_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/mediastreambroker/NoOpMediaStreamBroker.js")),VideoQualitySettings_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoQualitySettings.js"));class NoOpDeviceController extends NoOpMediaStreamBroker_1.default{constructor(_options){super(),this.destroyed=!1}destroy(){return __awaiter(this,void 0,void 0,(function*(){this.destroyed=!0}))}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(_device){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(_device){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(_deviceId){return Promise.reject()}addDeviceChangeObserver(_observer){}removeDeviceChangeObserver(_observer){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(_element){}stopVideoPreviewForVideoInput(_element){}setDeviceLabelTrigger(_trigger){}mixIntoAudioInput(_stream){return null}chooseVideoInputQuality(_width,_height,_frameRate){}getVideoInputQualitySettings(){return VideoQualitySettings_1.default.VideoDisabled}}exports.default=NoOpDeviceController;exports.NoOpDeviceControllerWithEventController=class NoOpDeviceControllerWithEventController extends NoOpDeviceController{constructor(eventController){super(),this.eventController=eventController}}},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/NotFoundError.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const GetUserMediaError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/GetUserMediaError.js"));class NotFoundError extends GetUserMediaError_1.default{constructor(cause){super(cause),this.name="NotFoundError"}}exports.default=NotFoundError},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/NotReadableError.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const GetUserMediaError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/GetUserMediaError.js"));class NotReadableError extends GetUserMediaError_1.default{constructor(cause){super(cause),this.name="NotReadableError"}}exports.default=NotReadableError},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/OverconstrainedError.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const GetUserMediaError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/GetUserMediaError.js"));class OverconstrainedError extends GetUserMediaError_1.default{constructor(cause,constraint){super(cause),this.constraint=constraint,this.name="OverconstrainedError"}}exports.default=OverconstrainedError},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/PermissionDeniedError.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const GetUserMediaError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/GetUserMediaError.js"));class PermissionDeniedError extends GetUserMediaError_1.default{constructor(cause,message){super(cause,message),this.name="PermissionDeniedError"}}exports.default=PermissionDeniedError},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/SingleNodeAudioTransformDevice.js":function(__unused_webpack_module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class SingleNodeAudioTransformDevice{constructor(inner){this.inner=inner}mute(_muted){return __awaiter(this,void 0,void 0,(function*(){}))}stop(){var _a;return __awaiter(this,void 0,void 0,(function*(){null===(_a=this.node)||void 0===_a||_a.disconnect()}))}intrinsicDevice(){return __awaiter(this,void 0,void 0,(function*(){return this.inner}))}createAudioNode(context){var _a;return __awaiter(this,void 0,void 0,(function*(){return null===(_a=this.node)||void 0===_a||_a.disconnect(),this.node=yield this.createSingleAudioNode(context),{start:this.node,end:this.node}}))}}},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/TypeError.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const GetUserMediaError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/GetUserMediaError.js"));class TypeError extends GetUserMediaError_1.default{constructor(cause){super(cause),this.name="TypeError"}}exports.default=TypeError},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoQualitySettings.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class VideoQualitySettings{constructor(videoWidth,videoHeight,videoFrameRate){this.videoWidth=videoWidth,this.videoHeight=videoHeight,this.videoFrameRate=videoFrameRate}equals(other){return this.videoWidth===other.videoWidth&&this.videoHeight===other.videoHeight&&this.videoFrameRate===other.videoFrameRate}}exports.default=VideoQualitySettings,VideoQualitySettings.VideoDisabled=new VideoQualitySettings(0,0,0),VideoQualitySettings.VideoResolutionHD=new VideoQualitySettings(1280,720,30),VideoQualitySettings.VideoResolutionFHD=new VideoQualitySettings(1920,1080,30),VideoQualitySettings.VideoResolutionUHD=new VideoQualitySettings(3840,2160,30)},"./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoTransformDevice.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isVideoTransformDevice=void 0,exports.isVideoTransformDevice=function isVideoTransformDevice(device){return!!device&&"object"==typeof device&&"transformStream"in device&&"stop"in device&&"intrinsicDevice"in device}},"./node_modules/amazon-chime-sdk-js/build/devicepixelratiomonitor/DefaultDevicePixelRatioMonitor.js":function(__unused_webpack_module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class DefaultDevicePixelRatioMonitor{constructor(devicePixelRatioSource,logger){if(this.devicePixelRatioSource=devicePixelRatioSource,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach((tileObserver=>{tileObserver.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}))},"undefined"==typeof window)return;const mediaQueryList=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);"function"==typeof mediaQueryList.addEventListener?(mediaQueryList.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=mediaQueryList):"function"==typeof mediaQueryList.addListener?(mediaQueryList.addListener(this.mediaQueryListener),this.mediaQueryList=mediaQueryList):logger.warn("ignoring DefaultDevicePixelRatioMonitor")}destroy(){return __awaiter(this,void 0,void 0,(function*(){this.mediaQueryList&&("function"==typeof this.mediaQueryList.addEventListener?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()}))}registerObserver(observer){this.observerQueue.add(observer),observer.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(observer){this.observerQueue.delete(observer)}}},"./node_modules/amazon-chime-sdk-js/build/devicepixelratiosource/DevicePixelRatioWindowSource.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class DevicePixelRatioWindowSource{devicePixelRatio(){return"undefined"!=typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio:1}}},"./node_modules/amazon-chime-sdk-js/build/eventbuffer/InMemoryJSONEventBuffer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const FullJitterBackoff_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterBackoff.js")),IntervalScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/IntervalScheduler.js")),DefaultUserAgentParser_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/useragentparser/DefaultUserAgentParser.js")),Utils_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Utils.js");class InMemoryJSONEventBuffer{constructor(eventBufferConfiguration,eventsClientConfiguration,ingestionURL,importantEvents,logger){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=event=>({type:event.type,v:event.v,payloads:[...event.payloads]}),this.sendEvents=()=>__awaiter(this,void 0,void 0,(function*(){if(this.lock)return;const batch=this.getItems(this.flushSize);if(0===batch.length)return;this.lock=!0;const body=this.makeRequestBody(batch);let failed=!1;const timestamp=Date.now();"firefox"===this.metadata.browserName.toLowerCase()&&this.cancellableEvents.set(timestamp,batch);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${body}`);const response=yield this.send(body);if(this.cancellableEvents.delete(timestamp),response.ok)try{const data=yield response.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${body} message: ${JSON.stringify(data)}`)}catch(err){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${err} for events ${body}`)}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${body} with response status ${response.status}`),failed=!0}catch(error){failed=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${body} to the ingestion endpoint ${error}`)}finally{this.lock=!1}failed&&(this.cancellableEvents.delete(timestamp),this.failedIngestionEvents.push(...batch))}));const userAgentParserResult=new DefaultUserAgentParser_1.default(logger).getParserResult(),{browserMajorVersion:_browserMajorVersion}=userAgentParserResult,clientMetadata=__rest(userAgentParserResult,["browserMajorVersion"]),_a=eventsClientConfiguration.toJSON(),{type,v}=_a,rest=__rest(_a,["type","v"]);this.authenticationToken=eventsClientConfiguration.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},clientMetadata),rest),Object.keys(this.metadata).forEach((key=>this.attributesToFilter.push(key))),this.type=type,this.v=v,this.ingestionURL=ingestionURL,this.logger=logger,this.importantEvents=new Set(importantEvents);const{maxBufferCapacityKb,totalBufferItems,flushSize,flushIntervalMs,retryCountLimit}=eventBufferConfiguration;this.maxBufferCapacityBytes=1024*maxBufferCapacityKb,this.totalBufferItems=totalBufferItems,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/totalBufferItems),this.flushIntervalMs=flushIntervalMs,this.flushSize=flushSize,this.retryCountLimit=retryCountLimit,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=e=>this.beaconEventHandler(e),this.addEventListeners()}addEventListeners(){this.beaconEventListener&&"window"in __webpack_require__.g&&window.addEventListener&&"document"in __webpack_require__.g&&document.addEventListener&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(e){("visibilitychange"===e.type&&"hidden"===document.visibilityState||"pagehide"===e.type)&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){this.beaconEventListener&&"window"in __webpack_require__.g&&window.removeEventListener&&"document"in __webpack_require__.g&&document.removeEventListener&&(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var _a;this.removeEventListeners(),this.addEventListeners(),null===(_a=this.intervalScheduler)||void 0===_a||_a.stop(),this.intervalScheduler=new IntervalScheduler_1.default(this.flushIntervalMs),this.intervalScheduler.start((()=>this.sendEvents()))}stop(){var _a;null===(_a=this.intervalScheduler)||void 0===_a||_a.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(item){return __awaiter(this,void 0,void 0,(function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(item)}`);const{name,ts,attributes}=item,filteredAttributes=attributes&&this.filterAttributes(attributes,this.attributesToFilter),event=Object.assign({name,ts},filteredAttributes);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(event)}`);const size=this.getSize(event);if(size>InMemoryJSONEventBuffer.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${size} bytes. Item cannot exceed max item size allowed of ${InMemoryJSONEventBuffer.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(name))return this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(event)}`),void this.sendEventImmediately({name,ts,attributes:filteredAttributes});if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(event),this.ingestionEventSize+=size,this.bufferItemThresholdReached(size)){const currentEvent=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(currentEvent),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}}))}filterAttributes(attributes,attributesToFilter){const attributesToFilterSet=new Set(attributesToFilter);return Object.keys(attributes).filter((key=>attributesToFilterSet.has(key))).forEach((key=>delete attributes[key])),attributes}initializeAndGetCurrentIngestionEvent(){const bufferItem={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(bufferItem),bufferItem}bufferItemThresholdReached(size){return size+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===InMemoryJSONEventBuffer.MAX_PAYLOAD_ITEMS}getSize(item){let bytes=0;if("object"==typeof item)for(const[key,value]of Object.entries(item))bytes+=this.getPrimitiveSize(key),bytes+=this.getSize(value);else bytes+=this.getPrimitiveSize(item);return bytes}getPrimitiveSize(item){let bytes=0;return"string"==typeof item?bytes+=2*item.length:"number"==typeof item&&(bytes+=8),bytes}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return 0===this.buffer.length||0===this.bufferSize}getItems(end,start=0){if(this.isEmpty())return[];end=Math.min(this.buffer.length,end+1);return this.buffer.splice(start,end)}makeBeaconRequestBody(batchEvents){const ingestionRecord={metadata:this.metadata,events:batchEvents,authorization:this.authenticationToken};return JSON.stringify(ingestionRecord)}makeRequestBody(batchEvents){const ingestionRecord={metadata:this.metadata,events:batchEvents};return JSON.stringify(ingestionRecord)}sendEventImmediately(item){return __awaiter(this,void 0,void 0,(function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(item)}`);const{name,ts,attributes}=item,event={type:this.type,v:this.v,payloads:[Object.assign({name,ts},attributes)]};let failed=!1,response=null;const body=this.makeRequestBody([event]);try{if(response=yield this.send(body),response.ok){try{const data=yield response.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${body}, message: ${JSON.stringify(data)}`)}catch(err){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${err} for event ${body}`)}return}this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${body} with response status ${response.status}`),failed=!0}catch(error){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${body} to the ingestion endpoint ${error}.`),failed=!0;try{if("firefox"===this.metadata.browserName.toLowerCase()){const body=this.makeBeaconRequestBody([event]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${body}`),failed=!navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,body)}}catch(error){this.logger.warn(`Event Reporting - Error sending beacon for an important event ${body}`),failed=!0}}failed&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${body}`),this.failedIngestionEvents.push(event))}))}send(data){return __awaiter(this,void 0,void 0,(function*(){const backoff=new FullJitterBackoff_1.default(InMemoryJSONEventBuffer.RETRY_FIXED_BACKOFF_WAIT_MS,InMemoryJSONEventBuffer.RETRY_SHORT_BACKOFF_MS,InMemoryJSONEventBuffer.RETRY_LONG_BACKOFF_MS);try{let retryCount=0;for(;retryCount<this.retryCountLimit;){const response=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:data});if(response.ok||!InMemoryJSONEventBuffer.SENDING_FAILURE_CODES.has(response.status))return response;if(this.logger.warn(`Will retry sending failure for ${data} due to status code ${response.status}.`),retryCount++,retryCount<this.retryCountLimit){const backoffTime=backoff.nextBackoffAmountMs();yield Utils_1.wait(backoffTime)}}if(retryCount===this.retryCountLimit)throw new Error(`Retry count limit reached for ${data}`)}catch(error){throw error}}))}sendBeacon(){return __awaiter(this,void 0,void 0,(function*(){const events=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(events)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const clearCurrenIngestionEvent=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);events.push(clearCurrenIngestionEvent),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(clearCurrenIngestionEvent)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const failedRecordsCopy=this.failedIngestionEvents.map((record=>this.deepCopyCurrentIngestionEvent(record)));events.push(...failedRecordsCopy),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(failedRecordsCopy)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach((value=>{events.push(...value),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(value)}`)})),this.cancellableEvents.clear()),0===events.length)return;const beaconData=this.makeBeaconRequestBody(events);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${beaconData}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,beaconData)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${beaconData}`)}catch(error){this.logger.warn(`Event Reporting - Sending beacon data ${beaconData} failed with error ${error}`)}}))}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return __awaiter(this,void 0,void 0,(function*(){this.stop(),this.reset()}))}}exports.default=InMemoryJSONEventBuffer,InMemoryJSONEventBuffer.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),InMemoryJSONEventBuffer.RETRY_FIXED_BACKOFF_WAIT_MS=0,InMemoryJSONEventBuffer.RETRY_SHORT_BACKOFF_MS=1e3,InMemoryJSONEventBuffer.RETRY_LONG_BACKOFF_MS=15e3,InMemoryJSONEventBuffer.MAX_PAYLOAD_ITEMS=2,InMemoryJSONEventBuffer.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3},"./node_modules/amazon-chime-sdk-js/build/eventbufferconfiguration/EventBufferConfiguration.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class EventBufferConfiguration{constructor(flushIntervalMs=5e3,flushSize=2,maxBufferCapacityKb=64,totalBufferItems=100,retryCountLimit=15){this.flushIntervalMs=flushIntervalMs,this.flushSize=flushSize,this.maxBufferCapacityKb=maxBufferCapacityKb,this.totalBufferItems=totalBufferItems,this.retryCountLimit=retryCountLimit}}},"./node_modules/amazon-chime-sdk-js/build/eventcontroller/DefaultEventController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const ua_parser_js_1=__webpack_require__("./node_modules/ua-parser-js/src/ua-parser.js"),Destroyable_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/destroyable/Destroyable.js"),EventIngestionConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventingestionconfiguration/EventIngestionConfiguration.js")),DefaultMeetingEventReporter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventreporter/DefaultMeetingEventReporter.js")),MeetingEventsClientConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventsclientconfiguration/MeetingEventsClientConfiguration.js")),AsyncScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js")),Versioning_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/versioning/Versioning.js")),flattenEventAttributes_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventcontroller/flattenEventAttributes.js"));class DefaultEventController{constructor(configuration,logger,eventReporter){var _a,_b,_c,_d,_e,_f,_g;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=logger,this.configuration=configuration,this.setupEventReporter(configuration,logger,eventReporter);try{this.parserResult=navigator&&navigator.userAgent?new ua_parser_js_1.UAParser(navigator.userAgent).getResult():null}catch(error){this.logger.error(error.message)}this.browserMajorVersion=(null===(_c=null===(_b=null===(_a=this.parserResult)||void 0===_a?void 0:_a.browser)||void 0===_b?void 0:_b.version)||void 0===_c?void 0:_c.split(".")[0])||DefaultEventController.UNAVAILABLE,this.browserName=(null===(_d=this.parserResult)||void 0===_d?void 0:_d.browser.name)||DefaultEventController.UNAVAILABLE,this.browserVersion=(null===(_e=this.parserResult)||void 0===_e?void 0:_e.browser.version)||DefaultEventController.UNAVAILABLE,this.deviceName=[(null===(_f=this.parserResult)||void 0===_f?void 0:_f.device.vendor)||"",(null===(_g=this.parserResult)||void 0===_g?void 0:_g.device.model)||""].join(" ").trim()||DefaultEventController.UNAVAILABLE}addObserver(observer){this.observerSet.add(observer)}removeObserver(observer){this.observerSet.delete(observer)}forEachObserver(observerFunc){for(const observer of this.observerSet)AsyncScheduler_1.default.nextTick((()=>{this.observerSet.has(observer)&&observerFunc(observer)}))}publishEvent(name,attributes){return __awaiter(this,void 0,void 0,(function*(){const timestampMs=Date.now();this.meetingHistoryStates.push({name,timestampMs});const eventAttributes=Object.freeze(Object.assign(this.getAttributes(timestampMs),attributes));this.forEachObserver((observer=>{observer.eventDidReceive(name,eventAttributes)})),this.reportEvent(name,timestampMs,attributes)}))}reportEvent(name,timestampMs,attributes){var _a;return __awaiter(this,void 0,void 0,(function*(){let flattenedAttributes;try{attributes&&(flattenedAttributes=flattenEventAttributes_1.default(attributes)),yield null===(_a=this.eventReporter)||void 0===_a?void 0:_a.reportEvent(timestampMs,name,flattenedAttributes)}catch(error){this.logger.error(`Error reporting event ${error}`)}}))}setupEventReporter(configuration,logger,eventReporter){if(eventReporter)this._eventReporter=eventReporter;else if(configuration.urls){const eventIngestionURL=configuration.urls.eventIngestionURL;if(eventIngestionURL){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId,credentials:{attendeeId,joinToken}}=configuration,meetingEventsClientConfiguration=new MeetingEventsClientConfiguration_1.default(meetingId,attendeeId,joinToken),eventIngestionConfiguration=new EventIngestionConfiguration_1.default(meetingEventsClientConfiguration,eventIngestionURL);this._eventReporter=new DefaultMeetingEventReporter_1.default(eventIngestionConfiguration,logger)}}}getAttributes(timestampMs){var _a,_b;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:"string"==typeof this.configuration.externalMeetingId?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:(null===(_a=this.parserResult)||void 0===_a?void 0:_a.os.name)||DefaultEventController.UNAVAILABLE,osVersion:(null===(_b=this.parserResult)||void 0===_b?void 0:_b.os.version)||DefaultEventController.UNAVAILABLE,sdkVersion:Versioning_1.default.sdkVersion,sdkName:Versioning_1.default.sdkName,timestampMs}}get eventReporter(){return this._eventReporter}destroy(){return __awaiter(this,void 0,void 0,(function*(){Destroyable_1.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0}))}}exports.default=DefaultEventController,DefaultEventController.UNAVAILABLE="Unavailable"},"./node_modules/amazon-chime-sdk-js/build/eventcontroller/flattenEventAttributes.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=attributes=>{const flattenedAttributes={};for(const[key,value]of Object.entries(attributes))if(null!=value&&""!==value){if("number"!=typeof value&&"string"!=typeof value)throw new TypeError("Unhandled type received while flattening attributes.");flattenedAttributes[key]=value}return flattenedAttributes}},"./node_modules/amazon-chime-sdk-js/build/eventingestionconfiguration/EventIngestionConfiguration.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const EventBufferConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventbufferconfiguration/EventBufferConfiguration.js"));exports.default=class EventIngestionConfiguration{constructor(eventsClientConfiguration,ingestionURL,eventBufferConfiguration=new EventBufferConfiguration_1.default){this.eventsClientConfiguration=eventsClientConfiguration,this.ingestionURL=ingestionURL,this.eventBufferConfiguration=eventBufferConfiguration}}},"./node_modules/amazon-chime-sdk-js/build/eventreporter/DefaultMeetingEventReporter.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const Destroyable_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/destroyable/Destroyable.js"),InMemoryJSONEventBuffer_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventbuffer/InMemoryJSONEventBuffer.js"));exports.default=class DefaultMeetingEventReporter{constructor(eventIngestionConfiguration,logger){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration,ingestionURL,eventBufferConfiguration}=eventIngestionConfiguration,{eventsToIgnore}=eventsClientConfiguration;this.eventBuffer=new InMemoryJSONEventBuffer_1.default(eventBufferConfiguration,eventsClientConfiguration,ingestionURL,this.importantEvents,logger),this.logger=logger,this.eventsToIgnore=eventsToIgnore,this.start()}start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(error){this.logger.error(`Event Reporting - Error starting the event buffer ${error}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(error){this.logger.error(`Event Reporting - Error stopping the event buffer ${error}`)}}reportEvent(ts,name,attributes){return __awaiter(this,void 0,void 0,(function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${ts}, ${name}, ${JSON.stringify(attributes)}`),this.eventsToIgnore.includes(name))this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${name} event will be ignored as it is in events to ignore`);else try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts,name,attributes})}catch(error){this.logger.error(`Event Reporting - Error adding event to buffer ${error}`)}}))}destroy(){return __awaiter(this,void 0,void 0,(function*(){this.destroyed=!0,this.stop(),Destroyable_1.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0}))}}},"./node_modules/amazon-chime-sdk-js/build/eventreporter/NoOpEventReporter.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class NoOpEventReporter{constructor(){}reportEvent(_ts,_name,_attributes){}start(){}stop(){}}},"./node_modules/amazon-chime-sdk-js/build/eventsclientconfiguration/MeetingEventsClientConfiguration.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class MeetingEventsClientConfiguration{constructor(meetingId,attendeeId,authenticationToken,eventsToIgnore=[]){this.type="Meet",this.v=1,this.meetingId=meetingId,this.attendeeId=attendeeId,this.eventsToIgnore=eventsToIgnore,this.authenticationToken=authenticationToken}getAuthenticationToken(){return this.authenticationToken}toJSON(){const attributes={};return attributes.type=this.type,attributes.v=this.v,attributes.meetingId=this.meetingId,attributes.attendeeId=this.attendeeId,attributes}}},"./node_modules/amazon-chime-sdk-js/build/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultEventController=exports.DefaultDevicePixelRatioMonitor=exports.DefaultDeviceController=exports.DefaultContentShareController=exports.DefaultBrowserBehavior=exports.DefaultAudioVideoFacade=exports.DefaultAudioVideoController=exports.DefaultAudioMixController=exports.DefaultActiveSpeakerPolicy=exports.DefaultActiveSpeakerDetector=exports.DataMessage=exports.CreateSDPTask=exports.CreatePeerConnectionTask=exports.ContentShareMediaStreamBroker=exports.ContentShareConstants=exports.ConsoleLogger=exports.ConnectionHealthPolicyConfiguration=exports.ConnectionHealthData=exports.ClientVideoStreamReceivingReport=exports.ClientMetricReportMediaType=exports.ClientMetricReportDirection=exports.ClientMetricReport=exports.CleanStoppedSessionTask=exports.CleanRestartedSessionTask=exports.CheckVideoInputFeedback=exports.CheckVideoConnectivityFeedback=exports.CheckNetworkUDPConnectivityFeedback=exports.CheckNetworkTCPConnectivityFeedback=exports.CheckContentShareConnectivityFeedback=exports.CheckCameraResolutionFeedback=exports.CheckAudioOutputFeedback=exports.CheckAudioInputFeedback=exports.CheckAudioConnectivityFeedback=exports.CanvasVideoFrameBuffer=exports.CSPMonitor=exports.BitrateParameters=exports.BaseTask=exports.BaseConnectionHealthPolicy=exports.BackgroundReplacementVideoFrameProcessor=exports.BackgroundFilterVideoFrameProcessor=exports.BackgroundBlurVideoFrameProcessor=exports.BackgroundBlurStrength=exports.AudioVideoControllerState=exports.AudioProfile=exports.AudioLogEvent=exports.Attendee=exports.AttachMediaInputTask=exports.AsyncScheduler=exports.ApplicationMetadata=exports.AllHighestVideoBandwidthPolicy=void 0,exports.MeetingFeatures=exports.MeetingEventsClientConfiguration=exports.MediaDeviceProxyHandler=exports.Maybe=exports.LogLevel=exports.Log=exports.ListenForVolumeIndicatorsTask=exports.LeaveAndReceiveLeaveAckTask=exports.JoinAndReceiveIndexTask=exports.IntervalScheduler=exports.InMemoryJSONEventBuffer=exports.GlobalMetricReport=exports.GetUserMediaError=exports.FullJitterLimitedBackoff=exports.FullJitterBackoffFactory=exports.FullJitterBackoff=exports.FinishGatheringICECandidatesTask=exports.EventIngestionConfiguration=exports.EventBufferConfiguration=exports.DeviceSelection=exports.DevicePixelRatioWindowSource=exports.DefaultWebSocketAdapter=exports.DefaultVolumeIndicatorAdapter=exports.DefaultVideoTransformDevice=exports.DefaultVideoTileFactory=exports.DefaultVideoTileController=exports.DefaultVideoTile=exports.DefaultVideoStreamIndex=exports.DefaultVideoStreamIdSet=exports.DefaultVideoFrameProcessorTimer=exports.DefaultVideoFrameProcessorPipeline=exports.DefaultVideoElementResolutionMonitor=exports.DefaultVideoCaptureAndEncodeParameter=exports.DefaultUserAgentParser=exports.DefaultTranscriptionController=exports.DefaultTransceiverController=exports.DefaultSimulcastUplinkPolicyForContentShare=exports.DefaultSimulcastUplinkPolicy=exports.DefaultSignalingClient=exports.DefaultSigV4=exports.DefaultSessionStateController=exports.DefaultReconnectController=exports.DefaultRealtimeController=exports.DefaultPingPong=exports.DefaultModality=exports.DefaultMessagingSession=exports.DefaultMeetingSession=exports.DefaultMeetingReadinessChecker=exports.DefaultMeetingEventReporter=exports.DefaultMediaDeviceFactory=void 0,exports.RedundantAudioEncoder=exports.ReconnectionHealthPolicy=exports.ReceiveVideoStreamIndexTask=exports.ReceiveVideoInputTask=exports.ReceiveRemoteVideoPauseResumeTask=exports.ReceiveAudioInputTask=exports.RealtimeVolumeIndicator=exports.RealtimeState=exports.RealtimeAttendeePositionInFrame=exports.PromoteToPrimaryMeetingTask=exports.PromiseQueue=exports.PrefetchSortBy=exports.PrefetchOn=exports.PermissionDeniedError=exports.ParallelGroupTask=exports.POSTLogger=exports.OverconstrainedError=exports.OpenSignalingConnectionTask=exports.OnceTask=exports.NotReadableError=exports.NotFoundError=exports.None=exports.NoVideoUplinkBandwidthPolicy=exports.NoVideoDownlinkBandwidthPolicy=exports.NoOpVideoFrameProcessor=exports.NoOpVideoElementFactory=exports.NoOpTask=exports.NoOpMediaStreamBroker=exports.NoOpLogger=exports.NoOpEventReporter=exports.NoOpDeviceController=exports.NoOpDebugLogger=exports.NoOpAudioVideoController=exports.NScaleVideoUplinkBandwidthPolicy=exports.MutableVideoPreferences=exports.MultiLogger=exports.MonitorTask=exports.ModelSpecBuilder=exports.MessagingSessionConfiguration=exports.Message=exports.MeetingSessionVideoAvailability=exports.MeetingSessionURLs=exports.MeetingSessionTURNCredentials=exports.MeetingSessionStatusCode=exports.MeetingSessionStatus=exports.MeetingSessionLifecycleEventCondition=exports.MeetingSessionLifecycleEvent=exports.MeetingSessionCredentials=exports.MeetingSessionConfiguration=exports.MeetingReadinessCheckerConfiguration=void 0,exports.VideoEncodingConnectionHealthPolicyName=exports.VideoCodecCapability=exports.VideoAdaptiveProbePolicy=exports.Versioning=exports.UnusableAudioWarningConnectionHealthPolicy=exports.TypeError=exports.TranscriptionStatusType=exports.TranscriptionStatus=exports.TranscriptResult=exports.TranscriptLanguageWithScore=exports.TranscriptItemType=exports.TranscriptItem=exports.TranscriptEntity=exports.TranscriptAlternative=exports.Transcript=exports.TimeoutTask=exports.TimeoutScheduler=exports.TaskStatus=exports.TargetDisplaySize=exports.SubscribeAndReceiveSubscribeAckTask=exports.StreamMetricReport=exports.Some=exports.SingleNodeAudioTransformDevice=exports.SimulcastVideoStreamIndex=exports.SimulcastTransceiverController=exports.SimulcastLayers=exports.SimulcastContentShareTransceiverController=exports.SignalingClientVideoSubscriptionConfiguration=exports.SignalingClientSubscribe=exports.SignalingClientJoin=exports.SignalingClientEventType=exports.SignalingClientEvent=exports.SignalingClientConnectionRequest=exports.SignalingAndMetricsConnectionMonitor=exports.SetRemoteDescriptionTask=exports.SetLocalDescriptionTask=exports.SessionStateControllerTransitionResult=exports.SessionStateControllerState=exports.SessionStateControllerDeferPriority=exports.SessionStateControllerAction=exports.ServerSideNetworkAdaption=exports.SerialGroupTask=exports.SendingAudioFailureConnectionHealthPolicy=exports.SendAndReceiveDataMessagesTask=exports.SDPMediaSection=exports.SDPCandidateType=exports.SDP=exports.RunnableTask=exports.RedundantAudioRecoveryMetricReport=exports.RedundantAudioEncoderWorkerCode=void 0,exports.isVideoTransformDevice=exports.isDestroyable=exports.isAudioTransformDevice=exports.ZLIBTextCompressor=exports.WebSocketReadyState=exports.WaitForAttendeePresenceTask=exports.VoiceFocusTransformDevice=exports.VoiceFocusDeviceTransformer=exports.VideoTileState=exports.VideoStreamDescription=exports.VideoSource=exports.VideoQualitySettings=exports.VideoQualityAdaptationPreference=exports.VideoPriorityBasedPolicyConfig=exports.VideoPriorityBasedPolicy=exports.VideoPreferences=exports.VideoPreference=exports.VideoOnlyTransceiverController=exports.VideoLogEvent=exports.VideoFxProcessor=exports.VideoEncodingFramerateConnectionHealthPolicy=exports.VideoEncodingCpuConnectionHealthPolicy=void 0;const AllHighestVideoBandwidthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/AllHighestVideoBandwidthPolicy.js"));exports.AllHighestVideoBandwidthPolicy=AllHighestVideoBandwidthPolicy_1.default;const ApplicationMetadata_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/applicationmetadata/ApplicationMetadata.js"));exports.ApplicationMetadata=ApplicationMetadata_1.default;const AsyncScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js"));exports.AsyncScheduler=AsyncScheduler_1.default;const AttachMediaInputTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/AttachMediaInputTask.js"));exports.AttachMediaInputTask=AttachMediaInputTask_1.default;const Attendee_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/attendee/Attendee.js"));exports.Attendee=Attendee_1.default;const AudioLogEvent_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/statscollector/AudioLogEvent.js"));exports.AudioLogEvent=AudioLogEvent_1.default;const AudioProfile_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audioprofile/AudioProfile.js"));exports.AudioProfile=AudioProfile_1.default;const AudioVideoControllerState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audiovideocontroller/AudioVideoControllerState.js"));exports.AudioVideoControllerState=AudioVideoControllerState_1.default;const BackgroundBlurStrength_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurStrength.js"));exports.BackgroundBlurStrength=BackgroundBlurStrength_1.default;const BackgroundBlurVideoFrameProcessor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/BackgroundBlurVideoFrameProcessor.js"));exports.BackgroundBlurVideoFrameProcessor=BackgroundBlurVideoFrameProcessor_1.default;const BackgroundFilterVideoFrameProcessor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundfilter/BackgroundFilterVideoFrameProcessor.js"));exports.BackgroundFilterVideoFrameProcessor=BackgroundFilterVideoFrameProcessor_1.default;const BackgroundReplacementVideoFrameProcessor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundreplacementprocessor/BackgroundReplacementVideoFrameProcessor.js"));exports.BackgroundReplacementVideoFrameProcessor=BackgroundReplacementVideoFrameProcessor_1.default;const BaseConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/BaseConnectionHealthPolicy.js"));exports.BaseConnectionHealthPolicy=BaseConnectionHealthPolicy_1.default;const BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));exports.BaseTask=BaseTask_1.default;const BitrateParameters_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/BitrateParameters.js"));exports.BitrateParameters=BitrateParameters_1.default;const CSPMonitor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/cspmonitor/CSPMonitor.js"));exports.CSPMonitor=CSPMonitor_1.default;const CanvasVideoFrameBuffer_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/CanvasVideoFrameBuffer.js"));exports.CanvasVideoFrameBuffer=CanvasVideoFrameBuffer_1.default;const CheckAudioConnectivityFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckAudioConnectivityFeedback.js"));exports.CheckAudioConnectivityFeedback=CheckAudioConnectivityFeedback_1.default;const CheckAudioInputFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckAudioInputFeedback.js"));exports.CheckAudioInputFeedback=CheckAudioInputFeedback_1.default;const CheckAudioOutputFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckAudioOutputFeedback.js"));exports.CheckAudioOutputFeedback=CheckAudioOutputFeedback_1.default;const CheckCameraResolutionFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckCameraResolutionFeedback.js"));exports.CheckCameraResolutionFeedback=CheckCameraResolutionFeedback_1.default;const CheckContentShareConnectivityFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckContentShareConnectivityFeedback.js"));exports.CheckContentShareConnectivityFeedback=CheckContentShareConnectivityFeedback_1.default;const CheckNetworkTCPConnectivityFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckNetworkTCPConnectivityFeedback.js"));exports.CheckNetworkTCPConnectivityFeedback=CheckNetworkTCPConnectivityFeedback_1.default;const CheckNetworkUDPConnectivityFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckNetworkUDPConnectivityFeedback.js"));exports.CheckNetworkUDPConnectivityFeedback=CheckNetworkUDPConnectivityFeedback_1.default;const CheckVideoConnectivityFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckVideoConnectivityFeedback.js"));exports.CheckVideoConnectivityFeedback=CheckVideoConnectivityFeedback_1.default;const CheckVideoInputFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckVideoInputFeedback.js"));exports.CheckVideoInputFeedback=CheckVideoInputFeedback_1.default;const CleanRestartedSessionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/CleanRestartedSessionTask.js"));exports.CleanRestartedSessionTask=CleanRestartedSessionTask_1.default;const CleanStoppedSessionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/CleanStoppedSessionTask.js"));exports.CleanStoppedSessionTask=CleanStoppedSessionTask_1.default;const ClientMetricReport_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReport.js"));exports.ClientMetricReport=ClientMetricReport_1.default;const ClientMetricReportDirection_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportDirection.js"));exports.ClientMetricReportDirection=ClientMetricReportDirection_1.default;const ClientMetricReportMediaType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportMediaType.js"));exports.ClientMetricReportMediaType=ClientMetricReportMediaType_1.default;const ClientVideoStreamReceivingReport_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientVideoStreamReceivingReport.js"));exports.ClientVideoStreamReceivingReport=ClientVideoStreamReceivingReport_1.default;const ConnectionHealthData_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/ConnectionHealthData.js"));exports.ConnectionHealthData=ConnectionHealthData_1.default;const ConnectionHealthPolicyConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/ConnectionHealthPolicyConfiguration.js"));exports.ConnectionHealthPolicyConfiguration=ConnectionHealthPolicyConfiguration_1.default;const ConsoleLogger_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/ConsoleLogger.js"));exports.ConsoleLogger=ConsoleLogger_1.default;const ContentShareConstants_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/ContentShareConstants.js"));exports.ContentShareConstants=ContentShareConstants_1.default;const ContentShareMediaStreamBroker_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/ContentShareMediaStreamBroker.js"));exports.ContentShareMediaStreamBroker=ContentShareMediaStreamBroker_1.default;const CreatePeerConnectionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/CreatePeerConnectionTask.js"));exports.CreatePeerConnectionTask=CreatePeerConnectionTask_1.default;const CreateSDPTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/CreateSDPTask.js"));exports.CreateSDPTask=CreateSDPTask_1.default;const DataMessage_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/datamessage/DataMessage.js"));exports.DataMessage=DataMessage_1.default;const DefaultActiveSpeakerDetector_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/activespeakerdetector/DefaultActiveSpeakerDetector.js"));exports.DefaultActiveSpeakerDetector=DefaultActiveSpeakerDetector_1.default;const DefaultActiveSpeakerPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/activespeakerpolicy/DefaultActiveSpeakerPolicy.js"));exports.DefaultActiveSpeakerPolicy=DefaultActiveSpeakerPolicy_1.default;const DefaultAudioMixController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audiomixcontroller/DefaultAudioMixController.js"));exports.DefaultAudioMixController=DefaultAudioMixController_1.default;const DefaultAudioVideoController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audiovideocontroller/DefaultAudioVideoController.js"));exports.DefaultAudioVideoController=DefaultAudioVideoController_1.default;const DefaultAudioVideoFacade_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audiovideofacade/DefaultAudioVideoFacade.js"));exports.DefaultAudioVideoFacade=DefaultAudioVideoFacade_1.default;const DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js"));exports.DefaultBrowserBehavior=DefaultBrowserBehavior_1.default;const DefaultContentShareController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/DefaultContentShareController.js"));exports.DefaultContentShareController=DefaultContentShareController_1.default;const DefaultDeviceController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/DefaultDeviceController.js"));exports.DefaultDeviceController=DefaultDeviceController_1.default;const DefaultDevicePixelRatioMonitor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicepixelratiomonitor/DefaultDevicePixelRatioMonitor.js"));exports.DefaultDevicePixelRatioMonitor=DefaultDevicePixelRatioMonitor_1.default;const DefaultEventController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventcontroller/DefaultEventController.js"));exports.DefaultEventController=DefaultEventController_1.default;const DefaultMediaDeviceFactory_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/mediadevicefactory/DefaultMediaDeviceFactory.js"));exports.DefaultMediaDeviceFactory=DefaultMediaDeviceFactory_1.default;const DefaultMeetingEventReporter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventreporter/DefaultMeetingEventReporter.js"));exports.DefaultMeetingEventReporter=DefaultMeetingEventReporter_1.default;const DefaultMeetingReadinessChecker_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/DefaultMeetingReadinessChecker.js"));exports.DefaultMeetingReadinessChecker=DefaultMeetingReadinessChecker_1.default;const DefaultMeetingSession_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/DefaultMeetingSession.js"));exports.DefaultMeetingSession=DefaultMeetingSession_1.default;const DefaultMessagingSession_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/messagingsession/DefaultMessagingSession.js"));exports.DefaultMessagingSession=DefaultMessagingSession_1.default;const DefaultModality_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/modality/DefaultModality.js"));exports.DefaultModality=DefaultModality_1.default;const DefaultPingPong_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/pingpong/DefaultPingPong.js"));exports.DefaultPingPong=DefaultPingPong_1.default;const DefaultRealtimeController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/realtimecontroller/DefaultRealtimeController.js"));exports.DefaultRealtimeController=DefaultRealtimeController_1.default;const DefaultReconnectController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/reconnectcontroller/DefaultReconnectController.js"));exports.DefaultReconnectController=DefaultReconnectController_1.default;const DefaultSessionStateController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/DefaultSessionStateController.js"));exports.DefaultSessionStateController=DefaultSessionStateController_1.default;const DefaultSigV4_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sigv4/DefaultSigV4.js"));exports.DefaultSigV4=DefaultSigV4_1.default;const DefaultSignalingClient_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/DefaultSignalingClient.js"));exports.DefaultSignalingClient=DefaultSignalingClient_1.default;const DefaultSimulcastUplinkPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/DefaultSimulcastUplinkPolicy.js"));exports.DefaultSimulcastUplinkPolicy=DefaultSimulcastUplinkPolicy_1.default;const DefaultSimulcastUplinkPolicyForContentShare_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/DefaultSimulcastUplinkPolicyForContentShare.js"));exports.DefaultSimulcastUplinkPolicyForContentShare=DefaultSimulcastUplinkPolicyForContentShare_1.default;const DefaultTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/DefaultTransceiverController.js"));exports.DefaultTransceiverController=DefaultTransceiverController_1.default;const DefaultTranscriptionController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/DefaultTranscriptionController.js"));exports.DefaultTranscriptionController=DefaultTranscriptionController_1.default;const DefaultUserAgentParser_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/useragentparser/DefaultUserAgentParser.js"));exports.DefaultUserAgentParser=DefaultUserAgentParser_1.default;const DefaultVideoCaptureAndEncodeParameter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videocaptureandencodeparameter/DefaultVideoCaptureAndEncodeParameter.js"));exports.DefaultVideoCaptureAndEncodeParameter=DefaultVideoCaptureAndEncodeParameter_1.default;const DefaultVideoElementResolutionMonitor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotile/DefaultVideoElementResolutionMonitor.js"));exports.DefaultVideoElementResolutionMonitor=DefaultVideoElementResolutionMonitor_1.default;const DefaultVideoFrameProcessorPipeline_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/DefaultVideoFrameProcessorPipeline.js"));exports.DefaultVideoFrameProcessorPipeline=DefaultVideoFrameProcessorPipeline_1.default;const DefaultVideoFrameProcessorTimer_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/DefaultVideoFrameProcessorTimer.js"));exports.DefaultVideoFrameProcessorTimer=DefaultVideoFrameProcessorTimer_1.default;const DefaultVideoStreamIdSet_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamidset/DefaultVideoStreamIdSet.js"));exports.DefaultVideoStreamIdSet=DefaultVideoStreamIdSet_1.default;const DefaultVideoStreamIndex_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamindex/DefaultVideoStreamIndex.js"));exports.DefaultVideoStreamIndex=DefaultVideoStreamIndex_1.default;const DefaultVideoTile_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotile/DefaultVideoTile.js"));exports.DefaultVideoTile=DefaultVideoTile_1.default;const DefaultVideoTileController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotilecontroller/DefaultVideoTileController.js"));exports.DefaultVideoTileController=DefaultVideoTileController_1.default;const DefaultVideoTileFactory_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotilefactory/DefaultVideoTileFactory.js"));exports.DefaultVideoTileFactory=DefaultVideoTileFactory_1.default;const DefaultVideoTransformDevice_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/DefaultVideoTransformDevice.js"));exports.DefaultVideoTransformDevice=DefaultVideoTransformDevice_1.default;const DefaultVolumeIndicatorAdapter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/volumeindicatoradapter/DefaultVolumeIndicatorAdapter.js"));exports.DefaultVolumeIndicatorAdapter=DefaultVolumeIndicatorAdapter_1.default;const DefaultWebSocketAdapter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/websocketadapter/DefaultWebSocketAdapter.js"));exports.DefaultWebSocketAdapter=DefaultWebSocketAdapter_1.default;const DevicePixelRatioWindowSource_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicepixelratiosource/DevicePixelRatioWindowSource.js"));exports.DevicePixelRatioWindowSource=DevicePixelRatioWindowSource_1.default;const DeviceSelection_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/DeviceSelection.js"));exports.DeviceSelection=DeviceSelection_1.default;const EventBufferConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventbufferconfiguration/EventBufferConfiguration.js"));exports.EventBufferConfiguration=EventBufferConfiguration_1.default;const EventIngestionConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventingestionconfiguration/EventIngestionConfiguration.js"));exports.EventIngestionConfiguration=EventIngestionConfiguration_1.default;const FinishGatheringICECandidatesTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/FinishGatheringICECandidatesTask.js"));exports.FinishGatheringICECandidatesTask=FinishGatheringICECandidatesTask_1.default;const FullJitterBackoff_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterBackoff.js"));exports.FullJitterBackoff=FullJitterBackoff_1.default;const FullJitterBackoffFactory_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterBackoffFactory.js"));exports.FullJitterBackoffFactory=FullJitterBackoffFactory_1.default;const FullJitterLimitedBackoff_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterLimitedBackoff.js"));exports.FullJitterLimitedBackoff=FullJitterLimitedBackoff_1.default;const GetUserMediaError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/GetUserMediaError.js"));exports.GetUserMediaError=GetUserMediaError_1.default;const GlobalMetricReport_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/GlobalMetricReport.js"));exports.GlobalMetricReport=GlobalMetricReport_1.default;const InMemoryJSONEventBuffer_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventbuffer/InMemoryJSONEventBuffer.js"));exports.InMemoryJSONEventBuffer=InMemoryJSONEventBuffer_1.default;const IntervalScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/IntervalScheduler.js"));exports.IntervalScheduler=IntervalScheduler_1.default;const JoinAndReceiveIndexTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/JoinAndReceiveIndexTask.js"));exports.JoinAndReceiveIndexTask=JoinAndReceiveIndexTask_1.default;const LeaveAndReceiveLeaveAckTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/LeaveAndReceiveLeaveAckTask.js"));exports.LeaveAndReceiveLeaveAckTask=LeaveAndReceiveLeaveAckTask_1.default;const ListenForVolumeIndicatorsTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ListenForVolumeIndicatorsTask.js"));exports.ListenForVolumeIndicatorsTask=ListenForVolumeIndicatorsTask_1.default;const Log_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/Log.js"));exports.Log=Log_1.default;const LogLevel_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/LogLevel.js"));exports.LogLevel=LogLevel_1.default;const MediaDeviceProxyHandler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/mediadevicefactory/MediaDeviceProxyHandler.js"));exports.MediaDeviceProxyHandler=MediaDeviceProxyHandler_1.default;const MeetingEventsClientConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventsclientconfiguration/MeetingEventsClientConfiguration.js"));exports.MeetingEventsClientConfiguration=MeetingEventsClientConfiguration_1.default;const MeetingFeatures_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingFeatures.js"));exports.MeetingFeatures=MeetingFeatures_1.default;const MeetingReadinessCheckerConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/MeetingReadinessCheckerConfiguration.js"));exports.MeetingReadinessCheckerConfiguration=MeetingReadinessCheckerConfiguration_1.default;const MeetingSessionConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionConfiguration.js"));exports.MeetingSessionConfiguration=MeetingSessionConfiguration_1.default;const MeetingSessionCredentials_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionCredentials.js"));exports.MeetingSessionCredentials=MeetingSessionCredentials_1.default;const MeetingSessionLifecycleEvent_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionLifecycleEvent.js"));exports.MeetingSessionLifecycleEvent=MeetingSessionLifecycleEvent_1.default;const MeetingSessionLifecycleEventCondition_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionLifecycleEventCondition.js"));exports.MeetingSessionLifecycleEventCondition=MeetingSessionLifecycleEventCondition_1.default;const MeetingSessionStatus_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatus.js"));exports.MeetingSessionStatus=MeetingSessionStatus_1.default;const MeetingSessionStatusCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatusCode.js"));exports.MeetingSessionStatusCode=MeetingSessionStatusCode_1.default;const MeetingSessionTURNCredentials_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionTURNCredentials.js"));exports.MeetingSessionTURNCredentials=MeetingSessionTURNCredentials_1.default;const MeetingSessionURLs_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionURLs.js"));exports.MeetingSessionURLs=MeetingSessionURLs_1.default;const MeetingSessionVideoAvailability_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionVideoAvailability.js"));exports.MeetingSessionVideoAvailability=MeetingSessionVideoAvailability_1.default;const Message_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/message/Message.js"));exports.Message=Message_1.default;const MessagingSessionConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/messagingsession/MessagingSessionConfiguration.js"));exports.MessagingSessionConfiguration=MessagingSessionConfiguration_1.default;const ModelSpecBuilder_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backgroundblurprocessor/ModelSpecBuilder.js"));exports.ModelSpecBuilder=ModelSpecBuilder_1.default;const MonitorTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/MonitorTask.js"));exports.MonitorTask=MonitorTask_1.default;const MultiLogger_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/MultiLogger.js"));exports.MultiLogger=MultiLogger_1.default;const NScaleVideoUplinkBandwidthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/NScaleVideoUplinkBandwidthPolicy.js"));exports.NScaleVideoUplinkBandwidthPolicy=NScaleVideoUplinkBandwidthPolicy_1.default;const NoOpAudioVideoController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audiovideocontroller/NoOpAudioVideoController.js"));exports.NoOpAudioVideoController=NoOpAudioVideoController_1.default;const NoOpDebugLogger_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/NoOpDebugLogger.js"));exports.NoOpDebugLogger=NoOpDebugLogger_1.default;const NoOpDeviceController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/NoOpDeviceController.js"));exports.NoOpDeviceController=NoOpDeviceController_1.default;const NoOpEventReporter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventreporter/NoOpEventReporter.js"));exports.NoOpEventReporter=NoOpEventReporter_1.default;const NoOpLogger_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/NoOpLogger.js"));exports.NoOpLogger=NoOpLogger_1.default;const NoOpMediaStreamBroker_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/mediastreambroker/NoOpMediaStreamBroker.js"));exports.NoOpMediaStreamBroker=NoOpMediaStreamBroker_1.default;const NoOpTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/NoOpTask.js"));exports.NoOpTask=NoOpTask_1.default;const NoOpVideoElementFactory_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoelementfactory/NoOpVideoElementFactory.js"));exports.NoOpVideoElementFactory=NoOpVideoElementFactory_1.default;const NoOpVideoFrameProcessor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/NoOpVideoFrameProcessor.js"));exports.NoOpVideoFrameProcessor=NoOpVideoFrameProcessor_1.default;const NoVideoDownlinkBandwidthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/NoVideoDownlinkBandwidthPolicy.js"));exports.NoVideoDownlinkBandwidthPolicy=NoVideoDownlinkBandwidthPolicy_1.default;const NoVideoUplinkBandwidthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/NoVideoUplinkBandwidthPolicy.js"));exports.NoVideoUplinkBandwidthPolicy=NoVideoUplinkBandwidthPolicy_1.default;const NotFoundError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/NotFoundError.js"));exports.NotFoundError=NotFoundError_1.default;const NotReadableError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/NotReadableError.js"));exports.NotReadableError=NotReadableError_1.default;const OnceTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/OnceTask.js"));exports.OnceTask=OnceTask_1.default;const OpenSignalingConnectionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/OpenSignalingConnectionTask.js"));exports.OpenSignalingConnectionTask=OpenSignalingConnectionTask_1.default;const OverconstrainedError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/OverconstrainedError.js"));exports.OverconstrainedError=OverconstrainedError_1.default;const POSTLogger_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/POSTLogger.js"));exports.POSTLogger=POSTLogger_1.default;const ParallelGroupTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ParallelGroupTask.js"));exports.ParallelGroupTask=ParallelGroupTask_1.default;const PermissionDeniedError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/PermissionDeniedError.js"));exports.PermissionDeniedError=PermissionDeniedError_1.default;const PrefetchOn_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/messagingsession/PrefetchOn.js"));exports.PrefetchOn=PrefetchOn_1.default;const PrefetchSortBy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/messagingsession/PrefetchSortBy.js"));exports.PrefetchSortBy=PrefetchSortBy_1.default;const PromiseQueue_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/PromiseQueue.js"));exports.PromiseQueue=PromiseQueue_1.default;const PromoteToPrimaryMeetingTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/PromoteToPrimaryMeetingTask.js"));exports.PromoteToPrimaryMeetingTask=PromoteToPrimaryMeetingTask_1.default;const RealtimeAttendeePositionInFrame_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/realtimecontroller/RealtimeAttendeePositionInFrame.js"));exports.RealtimeAttendeePositionInFrame=RealtimeAttendeePositionInFrame_1.default;const RealtimeState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/realtimecontroller/RealtimeState.js"));exports.RealtimeState=RealtimeState_1.default;const RealtimeVolumeIndicator_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/realtimecontroller/RealtimeVolumeIndicator.js"));exports.RealtimeVolumeIndicator=RealtimeVolumeIndicator_1.default;const ReceiveAudioInputTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ReceiveAudioInputTask.js"));exports.ReceiveAudioInputTask=ReceiveAudioInputTask_1.default;const ReceiveRemoteVideoPauseResumeTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ReceiveRemoteVideoPauseResumeTask.js"));exports.ReceiveRemoteVideoPauseResumeTask=ReceiveRemoteVideoPauseResumeTask_1.default;const ReceiveVideoInputTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ReceiveVideoInputTask.js"));exports.ReceiveVideoInputTask=ReceiveVideoInputTask_1.default;const ReceiveVideoStreamIndexTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/ReceiveVideoStreamIndexTask.js"));exports.ReceiveVideoStreamIndexTask=ReceiveVideoStreamIndexTask_1.default;const ReconnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/ReconnectionHealthPolicy.js"));exports.ReconnectionHealthPolicy=ReconnectionHealthPolicy_1.default;const RedundantAudioEncoder_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/redundantaudioencoder/RedundantAudioEncoder.js"));exports.RedundantAudioEncoder=RedundantAudioEncoder_1.default;const RedundantAudioEncoderWorkerCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/redundantaudioencoderworkercode/RedundantAudioEncoderWorkerCode.js"));exports.RedundantAudioEncoderWorkerCode=RedundantAudioEncoderWorkerCode_1.default;const RedundantAudioRecoveryMetricReport_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/RedundantAudioRecoveryMetricReport.js"));exports.RedundantAudioRecoveryMetricReport=RedundantAudioRecoveryMetricReport_1.default;const RunnableTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/RunnableTask.js"));exports.RunnableTask=RunnableTask_1.default;const SDP_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/SDP.js"));exports.SDP=SDP_1.default;const SDPCandidateType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/SDPCandidateType.js"));exports.SDPCandidateType=SDPCandidateType_1.default;const SDPMediaSection_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/SDPMediaSection.js"));exports.SDPMediaSection=SDPMediaSection_1.default;const SendAndReceiveDataMessagesTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/SendAndReceiveDataMessagesTask.js"));exports.SendAndReceiveDataMessagesTask=SendAndReceiveDataMessagesTask_1.default;const SendingAudioFailureConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/SendingAudioFailureConnectionHealthPolicy.js"));exports.SendingAudioFailureConnectionHealthPolicy=SendingAudioFailureConnectionHealthPolicy_1.default;const SerialGroupTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/SerialGroupTask.js"));exports.SerialGroupTask=SerialGroupTask_1.default;const ServerSideNetworkAdaption_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/ServerSideNetworkAdaption.js"));exports.ServerSideNetworkAdaption=ServerSideNetworkAdaption_1.default;const SessionStateControllerAction_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerAction.js"));exports.SessionStateControllerAction=SessionStateControllerAction_1.default;const SessionStateControllerDeferPriority_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerDeferPriority.js"));exports.SessionStateControllerDeferPriority=SessionStateControllerDeferPriority_1.default;const SessionStateControllerState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerState.js"));exports.SessionStateControllerState=SessionStateControllerState_1.default;const SessionStateControllerTransitionResult_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerTransitionResult.js"));exports.SessionStateControllerTransitionResult=SessionStateControllerTransitionResult_1.default;const SetLocalDescriptionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/SetLocalDescriptionTask.js"));exports.SetLocalDescriptionTask=SetLocalDescriptionTask_1.default;const SetRemoteDescriptionTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/SetRemoteDescriptionTask.js"));exports.SetRemoteDescriptionTask=SetRemoteDescriptionTask_1.default;const SignalingAndMetricsConnectionMonitor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionmonitor/SignalingAndMetricsConnectionMonitor.js"));exports.SignalingAndMetricsConnectionMonitor=SignalingAndMetricsConnectionMonitor_1.default;const SignalingClientConnectionRequest_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientConnectionRequest.js"));exports.SignalingClientConnectionRequest=SignalingClientConnectionRequest_1.default;const SignalingClientEvent_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEvent.js"));exports.SignalingClientEvent=SignalingClientEvent_1.default;const SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js"));exports.SignalingClientEventType=SignalingClientEventType_1.default;const SignalingClientJoin_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientJoin.js"));exports.SignalingClientJoin=SignalingClientJoin_1.default;const SignalingClientSubscribe_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientSubscribe.js"));exports.SignalingClientSubscribe=SignalingClientSubscribe_1.default;const SignalingClientVideoSubscriptionConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientVideoSubscriptionConfiguration.js"));exports.SignalingClientVideoSubscriptionConfiguration=SignalingClientVideoSubscriptionConfiguration_1.default;const SimulcastContentShareTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/SimulcastContentShareTransceiverController.js"));exports.SimulcastContentShareTransceiverController=SimulcastContentShareTransceiverController_1.default;const SimulcastLayers_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/simulcastlayers/SimulcastLayers.js"));exports.SimulcastLayers=SimulcastLayers_1.default;const SimulcastTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/SimulcastTransceiverController.js"));exports.SimulcastTransceiverController=SimulcastTransceiverController_1.default;const SimulcastVideoStreamIndex_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamindex/SimulcastVideoStreamIndex.js"));exports.SimulcastVideoStreamIndex=SimulcastVideoStreamIndex_1.default;const SingleNodeAudioTransformDevice_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/SingleNodeAudioTransformDevice.js"));exports.SingleNodeAudioTransformDevice=SingleNodeAudioTransformDevice_1.default;const StreamMetricReport_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/StreamMetricReport.js"));exports.StreamMetricReport=StreamMetricReport_1.default;const SubscribeAndReceiveSubscribeAckTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/SubscribeAndReceiveSubscribeAckTask.js"));exports.SubscribeAndReceiveSubscribeAckTask=SubscribeAndReceiveSubscribeAckTask_1.default;const TargetDisplaySize_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/TargetDisplaySize.js"));exports.TargetDisplaySize=TargetDisplaySize_1.default;const TaskStatus_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/TaskStatus.js"));exports.TaskStatus=TaskStatus_1.default;const TimeoutScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/TimeoutScheduler.js"));exports.TimeoutScheduler=TimeoutScheduler_1.default;const TimeoutTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/TimeoutTask.js"));exports.TimeoutTask=TimeoutTask_1.default;const Transcript_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/Transcript.js"));exports.Transcript=Transcript_1.default;const TranscriptAlternative_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptAlternative.js"));exports.TranscriptAlternative=TranscriptAlternative_1.default;const TranscriptEntity_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptEntity.js"));exports.TranscriptEntity=TranscriptEntity_1.default;const TranscriptItem_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptItem.js"));exports.TranscriptItem=TranscriptItem_1.default;const TranscriptItemType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptItemType.js"));exports.TranscriptItemType=TranscriptItemType_1.default;const TranscriptLanguageWithScore_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptLanguageWithScore.js"));exports.TranscriptLanguageWithScore=TranscriptLanguageWithScore_1.default;const TranscriptResult_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptResult.js"));exports.TranscriptResult=TranscriptResult_1.default;const TranscriptionStatus_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptionStatus.js"));exports.TranscriptionStatus=TranscriptionStatus_1.default;const TranscriptionStatusType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptionStatusType.js"));exports.TranscriptionStatusType=TranscriptionStatusType_1.default;const TypeError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/TypeError.js"));exports.TypeError=TypeError_1.default;const UnusableAudioWarningConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/UnusableAudioWarningConnectionHealthPolicy.js"));exports.UnusableAudioWarningConnectionHealthPolicy=UnusableAudioWarningConnectionHealthPolicy_1.default;const Versioning_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/versioning/Versioning.js"));exports.Versioning=Versioning_1.default;const VideoAdaptiveProbePolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoAdaptiveProbePolicy.js"));exports.VideoAdaptiveProbePolicy=VideoAdaptiveProbePolicy_1.default;const VideoCodecCapability_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/VideoCodecCapability.js"));exports.VideoCodecCapability=VideoCodecCapability_1.default;const VideoEncodingConnectionHealthPolicyName_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/VideoEncodingConnectionHealthPolicyName.js"));exports.VideoEncodingConnectionHealthPolicyName=VideoEncodingConnectionHealthPolicyName_1.default;const VideoEncodingCpuConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/VideoEncodingCpuConnectionHealthPolicy.js"));exports.VideoEncodingCpuConnectionHealthPolicy=VideoEncodingCpuConnectionHealthPolicy_1.default;const VideoEncodingFramerateConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/VideoEncodingFramerateConnectionHealthPolicy.js"));exports.VideoEncodingFramerateConnectionHealthPolicy=VideoEncodingFramerateConnectionHealthPolicy_1.default;const VideoFxProcessor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videofx/VideoFxProcessor.js"));exports.VideoFxProcessor=VideoFxProcessor_1.default;const VideoLogEvent_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/statscollector/VideoLogEvent.js"));exports.VideoLogEvent=VideoLogEvent_1.default;const VideoOnlyTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/VideoOnlyTransceiverController.js"));exports.VideoOnlyTransceiverController=VideoOnlyTransceiverController_1.default;const VideoPreference_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPreference.js"));exports.VideoPreference=VideoPreference_1.default;const VideoPreferences_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPreferences.js"));exports.VideoPreferences=VideoPreferences_1.default;const VideoPriorityBasedPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPriorityBasedPolicy.js"));exports.VideoPriorityBasedPolicy=VideoPriorityBasedPolicy_1.default;const VideoPriorityBasedPolicyConfig_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPriorityBasedPolicyConfig.js"));exports.VideoPriorityBasedPolicyConfig=VideoPriorityBasedPolicyConfig_1.default;const VideoQualityAdaptationPreference_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoQualityAdaptationPreference.js"));exports.VideoQualityAdaptationPreference=VideoQualityAdaptationPreference_1.default;const VideoQualitySettings_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoQualitySettings.js"));exports.VideoQualitySettings=VideoQualitySettings_1.default;const VideoSource_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videosource/VideoSource.js"));exports.VideoSource=VideoSource_1.default;const VideoStreamDescription_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamindex/VideoStreamDescription.js"));exports.VideoStreamDescription=VideoStreamDescription_1.default;const VideoTileState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotile/VideoTileState.js"));exports.VideoTileState=VideoTileState_1.default;const VoiceFocusDeviceTransformer_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/voicefocus/VoiceFocusDeviceTransformer.js"));exports.VoiceFocusDeviceTransformer=VoiceFocusDeviceTransformer_1.default;const VoiceFocusTransformDevice_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/voicefocus/VoiceFocusTransformDevice.js"));exports.VoiceFocusTransformDevice=VoiceFocusTransformDevice_1.default;const WaitForAttendeePresenceTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/WaitForAttendeePresenceTask.js"));exports.WaitForAttendeePresenceTask=WaitForAttendeePresenceTask_1.default;const WebSocketReadyState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/websocketadapter/WebSocketReadyState.js"));exports.WebSocketReadyState=WebSocketReadyState_1.default;const ZLIBTextCompressor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/ZLIBTextCompressor.js"));exports.ZLIBTextCompressor=ZLIBTextCompressor_1.default;const VideoPreferences_2=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPreferences.js");Object.defineProperty(exports,"MutableVideoPreferences",{enumerable:!0,get:function(){return VideoPreferences_2.MutableVideoPreferences}});const Types_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Types.js");Object.defineProperty(exports,"Some",{enumerable:!0,get:function(){return Types_1.Some}}),Object.defineProperty(exports,"None",{enumerable:!0,get:function(){return Types_1.None}}),Object.defineProperty(exports,"Maybe",{enumerable:!0,get:function(){return Types_1.Maybe}});const AudioTransformDevice_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/AudioTransformDevice.js");Object.defineProperty(exports,"isAudioTransformDevice",{enumerable:!0,get:function(){return AudioTransformDevice_1.isAudioTransformDevice}});const Destroyable_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/destroyable/Destroyable.js");Object.defineProperty(exports,"isDestroyable",{enumerable:!0,get:function(){return Destroyable_1.isDestroyable}});const VideoTransformDevice_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoTransformDevice.js");Object.defineProperty(exports,"isVideoTransformDevice",{enumerable:!0,get:function(){return VideoTransformDevice_1.isVideoTransformDevice}})},"./node_modules/amazon-chime-sdk-js/build/logger/ConsoleLogger.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const LogLevel_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/LogLevel.js"));exports.default=class ConsoleLogger{constructor(name,level=LogLevel_1.default.WARN){this.name=name,this.level=level}info(msg){this.log(LogLevel_1.default.INFO,msg)}warn(msg){this.log(LogLevel_1.default.WARN,msg)}error(msg){this.log(LogLevel_1.default.ERROR,msg)}debug(debugFunction){LogLevel_1.default.DEBUG<this.level||("string"==typeof debugFunction?this.log(LogLevel_1.default.DEBUG,debugFunction):debugFunction?this.log(LogLevel_1.default.DEBUG,debugFunction()):this.log(LogLevel_1.default.DEBUG,""+debugFunction))}setLogLevel(level){this.level=level}getLogLevel(){return this.level}log(type,msg){if(type<this.level)return;const logMessage=`${(new Date).toISOString()} [${LogLevel_1.default[type]}] ${this.name} - ${msg}`;switch(type){case LogLevel_1.default.ERROR:console.error(logMessage);break;case LogLevel_1.default.WARN:console.warn(logMessage);break;case LogLevel_1.default.DEBUG:console.debug(logMessage.replace(/\\r\\n/g,"\n"));break;case LogLevel_1.default.INFO:console.info(logMessage)}}}},"./node_modules/amazon-chime-sdk-js/build/logger/Log.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class Log{constructor(sequenceNumber,message,timestampMs,logLevel){this.sequenceNumber=sequenceNumber,this.message=message,this.timestampMs=timestampMs,this.logLevel=logLevel}}},"./node_modules/amazon-chime-sdk-js/build/logger/LogLevel.js":(__unused_webpack_module,exports)=>{"use strict";var LogLevel;Object.defineProperty(exports,"__esModule",{value:!0}),exports.LogLevel=void 0,function(LogLevel){LogLevel[LogLevel.DEBUG=0]="DEBUG",LogLevel[LogLevel.INFO=1]="INFO",LogLevel[LogLevel.WARN=2]="WARN",LogLevel[LogLevel.ERROR=3]="ERROR",LogLevel[LogLevel.OFF=4]="OFF"}(LogLevel=exports.LogLevel||(exports.LogLevel={})),exports.default=LogLevel},"./node_modules/amazon-chime-sdk-js/build/logger/MultiLogger.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const LogLevel_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/LogLevel.js"));exports.default=class MultiLogger{constructor(...loggers){this._loggers=loggers}info(msg){for(const logger of this._loggers)logger.info(msg)}warn(msg){for(const logger of this._loggers)logger.warn(msg)}error(msg){for(const logger of this._loggers)logger.error(msg)}debug(debugFunction){let message,memoized;memoized="string"==typeof debugFunction?debugFunction:debugFunction?()=>(message||(message=debugFunction()),message):""+debugFunction;for(const logger of this._loggers)logger.debug(memoized)}setLogLevel(level){for(const logger of this._loggers)logger.setLogLevel(level)}getLogLevel(){for(const logger of this._loggers)return logger.getLogLevel();return LogLevel_1.default.OFF}}},"./node_modules/amazon-chime-sdk-js/build/logger/NoOpDebugLogger.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const LogLevel_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/LogLevel.js")),NoOpLogger_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/NoOpLogger.js"));class NoOpDebugLogger extends NoOpLogger_1.default{constructor(){super(LogLevel_1.default.DEBUG)}}exports.default=NoOpDebugLogger},"./node_modules/amazon-chime-sdk-js/build/logger/NoOpLogger.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const LogLevel_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/LogLevel.js"));exports.default=class NoOpLogger{constructor(level=LogLevel_1.default.OFF){this.level=level}info(_msg){}warn(_msg){}error(_msg){}debug(debugFunction){LogLevel_1.default.DEBUG<this.level||"string"!=typeof debugFunction&&debugFunction()}setLogLevel(level){this.level=level}getLogLevel(){return this.level}}},"./node_modules/amazon-chime-sdk-js/build/logger/POSTLogger.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const IntervalScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/IntervalScheduler.js")),Log_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/Log.js")),LogLevel_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/LogLevel.js"));class POSTLogger{constructor(options){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url,batchSize=POSTLogger.BATCH_SIZE,intervalMs=POSTLogger.INTERVAL_MS,logLevel=LogLevel_1.default.WARN,metadata,headers}=options;this.url=url,this.batchSize=batchSize,this.intervalMs=intervalMs,this.logLevel=logLevel,this.metadata=metadata,this.headers=headers,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}addEventListener(){this.eventListener&&"window"in __webpack_require__.g&&window.addEventListener&&window.addEventListener("unload",this.eventListener)}removeEventListener(){this.eventListener&&"window"in __webpack_require__.g&&window.removeEventListener&&window.removeEventListener("unload",this.eventListener)}debug(debugFunction){LogLevel_1.default.DEBUG<this.logLevel||("string"==typeof debugFunction?this.log(LogLevel_1.default.DEBUG,debugFunction):debugFunction?this.log(LogLevel_1.default.DEBUG,debugFunction()):this.log(LogLevel_1.default.DEBUG,""+debugFunction))}info(msg){this.log(LogLevel_1.default.INFO,msg)}warn(msg){this.log(LogLevel_1.default.WARN,msg)}error(msg){this.log(LogLevel_1.default.ERROR,msg)}setLogLevel(logLevel){this.logLevel=logLevel}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new IntervalScheduler_1.default(this.intervalMs),this.intervalScheduler.start((()=>__awaiter(this,void 0,void 0,(function*(){if(!0===this.lock||0===this.getLogCaptureSize())return;this.lock=!0;const batch=this.logCapture.slice(0,this.batchSize),body=this.makeRequestBody(batch);try{200===(yield fetch(this.url,Object.assign({method:"POST",body},this.headers?{headers:this.headers}:{}))).status&&(this.logCapture=this.logCapture.slice(batch.length))}catch(error){console.warn("[POSTLogger] "+error.message)}finally{this.lock=!1}}))))}stop(){var _a;null===(_a=this.intervalScheduler)||void 0===_a||_a.stop(),this.intervalScheduler=void 0,this.removeEventListener();const body=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,body)}destroy(){return __awaiter(this,void 0,void 0,(function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0}))}makeRequestBody(batch){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:batch}))}log(type,msg){if(type<this.logLevel)return;const now=Date.now();this.logCapture.push(new Log_1.default(this.sequenceNumber,msg,now,LogLevel_1.default[type])),this.sequenceNumber+=1}}exports.default=POSTLogger,POSTLogger.BATCH_SIZE=85,POSTLogger.INTERVAL_MS=2e3},"./node_modules/amazon-chime-sdk-js/build/mediadevicefactory/DefaultMediaDeviceFactory.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const MediaDeviceProxyHandler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/mediadevicefactory/MediaDeviceProxyHandler.js"));exports.default=class DefaultMediaDeviceFactory{constructor(){this.isMediaDevicesSupported="undefined"!=typeof navigator&&!!navigator.mediaDevices}create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new MediaDeviceProxyHandler_1.default);throw new Error("navigator.mediaDevices is not supported")}}},"./node_modules/amazon-chime-sdk-js/build/mediadevicefactory/MediaDeviceProxyHandler.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const AsyncScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js")),IntervalScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/IntervalScheduler.js"));class MediaDeviceProxyHandler{constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(target,property,receiver)=>{if(!Reflect.has(target,property))return;if(!("ondevicechange"in navigator.mediaDevices)){if("addEventListener"===property)return this.patchAddEventListener(target,property,receiver);if("removeEventListener"===property)return this.patchRemoveEventListener(target,property,receiver)}const value=Reflect.get(target,property,receiver);return"function"==typeof value?value.bind(target):value},this.patchAddEventListener=(target,property,receiver)=>{const value=Reflect.get(target,property,receiver);return(type,listener,options)=>{if("devicechange"!==type)return Reflect.apply(value,target,[type,listener,options]);this.deviceChangeListeners.add(listener),this.scheduler||(this.scheduler=new IntervalScheduler_1.default(MediaDeviceProxyHandler.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists))}},this.patchRemoveEventListener=(target,property,receiver)=>{const value=Reflect.get(target,property,receiver);return(type,listener,options)=>{if("devicechange"!==type)return Reflect.apply(value,target,[type,listener,options]);this.deviceChangeListeners.delete(listener),0===this.deviceChangeListeners.size&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null)}},this.pollDeviceLists=()=>__awaiter(this,void 0,void 0,(function*(){const newDevices=yield this.sortedDeviceList();if(this.devices){(newDevices.length!==this.devices.length||newDevices.some(((device,index)=>device.deviceId!==this.devices[index].deviceId)))&&this.handleDeviceChangeEvent()}this.devices=newDevices}))}sortedDeviceList(){return __awaiter(this,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort(((device1,device2)=>device1.deviceId<device2.deviceId?1:device1.deviceId>device2.deviceId?-1:0))}))}handleDeviceChangeEvent(){for(const listener of this.deviceChangeListeners)AsyncScheduler_1.default.nextTick((()=>{if(this.deviceChangeListeners.has(listener)){const event=new Event("devicechange");"function"==typeof listener?listener(event):listener.handleEvent(event)}}))}}exports.default=MediaDeviceProxyHandler,MediaDeviceProxyHandler.INTERVAL_MS=1e3},"./node_modules/amazon-chime-sdk-js/build/mediastreambroker/NoOpMediaStreamBroker.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class NoOpMediaStreamBroker{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(_streamConstraints){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(_observer){}removeMediaStreamBrokerObserver(_observer){}}},"./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckAudioConnectivityFeedback.js":(__unused_webpack_module,exports)=>{"use strict";var CheckAudioConnectivityFeedback;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckAudioConnectivityFeedback=void 0,function(CheckAudioConnectivityFeedback){CheckAudioConnectivityFeedback[CheckAudioConnectivityFeedback.Succeeded=0]="Succeeded",CheckAudioConnectivityFeedback[CheckAudioConnectivityFeedback.AudioInputRequestFailed=1]="AudioInputRequestFailed",CheckAudioConnectivityFeedback[CheckAudioConnectivityFeedback.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",CheckAudioConnectivityFeedback[CheckAudioConnectivityFeedback.ConnectionFailed=3]="ConnectionFailed",CheckAudioConnectivityFeedback[CheckAudioConnectivityFeedback.AudioNotReceived=4]="AudioNotReceived"}(CheckAudioConnectivityFeedback=exports.CheckAudioConnectivityFeedback||(exports.CheckAudioConnectivityFeedback={})),exports.default=CheckAudioConnectivityFeedback},"./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckAudioInputFeedback.js":(__unused_webpack_module,exports)=>{"use strict";var CheckAudioInputFeedback;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckAudioInputFeedback=void 0,function(CheckAudioInputFeedback){CheckAudioInputFeedback[CheckAudioInputFeedback.Succeeded=0]="Succeeded",CheckAudioInputFeedback[CheckAudioInputFeedback.Failed=1]="Failed",CheckAudioInputFeedback[CheckAudioInputFeedback.PermissionDenied=2]="PermissionDenied"}(CheckAudioInputFeedback=exports.CheckAudioInputFeedback||(exports.CheckAudioInputFeedback={})),exports.default=CheckAudioInputFeedback},"./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckAudioOutputFeedback.js":(__unused_webpack_module,exports)=>{"use strict";var CheckAudioOutputFeedback;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckAudioOutputFeedback=void 0,function(CheckAudioOutputFeedback){CheckAudioOutputFeedback[CheckAudioOutputFeedback.Succeeded=0]="Succeeded",CheckAudioOutputFeedback[CheckAudioOutputFeedback.Failed=1]="Failed"}(CheckAudioOutputFeedback=exports.CheckAudioOutputFeedback||(exports.CheckAudioOutputFeedback={})),exports.default=CheckAudioOutputFeedback},"./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckCameraResolutionFeedback.js":(__unused_webpack_module,exports)=>{"use strict";var CheckCameraResolutionFeedback;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckCameraResolutionFeedback=void 0,function(CheckCameraResolutionFeedback){CheckCameraResolutionFeedback[CheckCameraResolutionFeedback.Succeeded=0]="Succeeded",CheckCameraResolutionFeedback[CheckCameraResolutionFeedback.Failed=1]="Failed",CheckCameraResolutionFeedback[CheckCameraResolutionFeedback.ResolutionNotSupported=2]="ResolutionNotSupported",CheckCameraResolutionFeedback[CheckCameraResolutionFeedback.PermissionDenied=3]="PermissionDenied"}(CheckCameraResolutionFeedback=exports.CheckCameraResolutionFeedback||(exports.CheckCameraResolutionFeedback={})),exports.default=CheckCameraResolutionFeedback},"./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckContentShareConnectivityFeedback.js":(__unused_webpack_module,exports)=>{"use strict";var CheckContentShareConnectivityFeedback;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckContentShareConnectivityFeedback=void 0,function(CheckContentShareConnectivityFeedback){CheckContentShareConnectivityFeedback[CheckContentShareConnectivityFeedback.Succeeded=0]="Succeeded",CheckContentShareConnectivityFeedback[CheckContentShareConnectivityFeedback.Failed=1]="Failed",CheckContentShareConnectivityFeedback[CheckContentShareConnectivityFeedback.PermissionDenied=2]="PermissionDenied",CheckContentShareConnectivityFeedback[CheckContentShareConnectivityFeedback.TimedOut=3]="TimedOut",CheckContentShareConnectivityFeedback[CheckContentShareConnectivityFeedback.ConnectionFailed=4]="ConnectionFailed"}(CheckContentShareConnectivityFeedback=exports.CheckContentShareConnectivityFeedback||(exports.CheckContentShareConnectivityFeedback={})),exports.default=CheckContentShareConnectivityFeedback},"./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckNetworkTCPConnectivityFeedback.js":(__unused_webpack_module,exports)=>{"use strict";var CheckNetworkTCPConnectivityFeedback;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckNetworkTCPConnectivityFeedback=void 0,function(CheckNetworkTCPConnectivityFeedback){CheckNetworkTCPConnectivityFeedback[CheckNetworkTCPConnectivityFeedback.Succeeded=0]="Succeeded",CheckNetworkTCPConnectivityFeedback[CheckNetworkTCPConnectivityFeedback.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",CheckNetworkTCPConnectivityFeedback[CheckNetworkTCPConnectivityFeedback.ConnectionFailed=2]="ConnectionFailed",CheckNetworkTCPConnectivityFeedback[CheckNetworkTCPConnectivityFeedback.ICENegotiationFailed=3]="ICENegotiationFailed"}(CheckNetworkTCPConnectivityFeedback=exports.CheckNetworkTCPConnectivityFeedback||(exports.CheckNetworkTCPConnectivityFeedback={})),exports.default=CheckNetworkTCPConnectivityFeedback},"./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckNetworkUDPConnectivityFeedback.js":(__unused_webpack_module,exports)=>{"use strict";var CheckNetworkUDPConnectivityFeedback;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckNetworkUDPConnectivityFeedback=void 0,function(CheckNetworkUDPConnectivityFeedback){CheckNetworkUDPConnectivityFeedback[CheckNetworkUDPConnectivityFeedback.Succeeded=0]="Succeeded",CheckNetworkUDPConnectivityFeedback[CheckNetworkUDPConnectivityFeedback.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",CheckNetworkUDPConnectivityFeedback[CheckNetworkUDPConnectivityFeedback.ConnectionFailed=2]="ConnectionFailed",CheckNetworkUDPConnectivityFeedback[CheckNetworkUDPConnectivityFeedback.ICENegotiationFailed=3]="ICENegotiationFailed"}(CheckNetworkUDPConnectivityFeedback=exports.CheckNetworkUDPConnectivityFeedback||(exports.CheckNetworkUDPConnectivityFeedback={})),exports.default=CheckNetworkUDPConnectivityFeedback},"./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckVideoConnectivityFeedback.js":(__unused_webpack_module,exports)=>{"use strict";var CheckVideoConnectivityFeedback;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckVideoConnectivityFeedback=void 0,function(CheckVideoConnectivityFeedback){CheckVideoConnectivityFeedback[CheckVideoConnectivityFeedback.Succeeded=0]="Succeeded",CheckVideoConnectivityFeedback[CheckVideoConnectivityFeedback.VideoInputRequestFailed=1]="VideoInputRequestFailed",CheckVideoConnectivityFeedback[CheckVideoConnectivityFeedback.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",CheckVideoConnectivityFeedback[CheckVideoConnectivityFeedback.ConnectionFailed=3]="ConnectionFailed",CheckVideoConnectivityFeedback[CheckVideoConnectivityFeedback.VideoNotSent=4]="VideoNotSent"}(CheckVideoConnectivityFeedback=exports.CheckVideoConnectivityFeedback||(exports.CheckVideoConnectivityFeedback={})),exports.default=CheckVideoConnectivityFeedback},"./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckVideoInputFeedback.js":(__unused_webpack_module,exports)=>{"use strict";var CheckVideoInputFeedback;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckVideoInputFeedback=void 0,function(CheckVideoInputFeedback){CheckVideoInputFeedback[CheckVideoInputFeedback.Succeeded=0]="Succeeded",CheckVideoInputFeedback[CheckVideoInputFeedback.Failed=1]="Failed",CheckVideoInputFeedback[CheckVideoInputFeedback.PermissionDenied=2]="PermissionDenied"}(CheckVideoInputFeedback=exports.CheckVideoInputFeedback||(exports.CheckVideoInputFeedback={})),exports.default=CheckVideoInputFeedback},"./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/DefaultMeetingReadinessChecker.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultAudioMixController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audiomixcontroller/DefaultAudioMixController.js")),DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),DefaultDeviceController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/DefaultDeviceController.js")),PermissionDeniedError_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/PermissionDeniedError.js")),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js")),TimeoutTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/TimeoutTask.js")),CheckAudioConnectivityFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckAudioConnectivityFeedback.js")),CheckAudioInputFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckAudioInputFeedback.js")),CheckAudioOutputFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckAudioOutputFeedback.js")),CheckCameraResolutionFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckCameraResolutionFeedback.js")),CheckContentShareConnectivityFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckContentShareConnectivityFeedback.js")),CheckNetworkTCPConnectivityFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckNetworkTCPConnectivityFeedback.js")),CheckNetworkUDPConnectivityFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckNetworkUDPConnectivityFeedback.js")),CheckVideoConnectivityFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckVideoConnectivityFeedback.js")),CheckVideoInputFeedback_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/CheckVideoInputFeedback.js")),MeetingReadinessCheckerConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/MeetingReadinessCheckerConfiguration.js"));class DefaultMeetingReadinessChecker{constructor(logger,meetingSession,configuration=new MeetingReadinessCheckerConfiguration_1.default){this.logger=logger,this.meetingSession=meetingSession,this.configuration=configuration,this.browserBehavior=new DefaultBrowserBehavior_1.default}static delay(timeoutMs){return __awaiter(this,void 0,void 0,(function*(){return new Promise((resolve=>setTimeout(resolve,timeoutMs)))}))}checkAudioInput(audioInputDevice){return __awaiter(this,void 0,void 0,(function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(audioInputDevice),yield this.meetingSession.audioVideo.stopAudioInput(),CheckAudioInputFeedback_1.default.Succeeded}catch(error){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${error}`),error instanceof PermissionDeniedError_1.default?CheckAudioInputFeedback_1.default.PermissionDenied:CheckAudioInputFeedback_1.default.Failed}}))}checkAudioOutput(audioOutputDeviceInfo,audioOutputVerificationCallback,audioElement=null){return __awaiter(this,void 0,void 0,(function*(){try{const audioOutputDeviceId=audioOutputDeviceInfo?DefaultDeviceController_1.default.getIntrinsicDeviceId(audioOutputDeviceInfo):"";yield this.playTone(audioOutputDeviceId,this.configuration.audioOutputFrequency,audioElement);return(yield audioOutputVerificationCallback())?CheckAudioOutputFeedback_1.default.Succeeded:CheckAudioOutputFeedback_1.default.Failed}catch(error){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${error}`),CheckAudioOutputFeedback_1.default.Failed}finally{this.stopTone()}}))}playTone(sinkId,frequency,audioElement){return __awaiter(this,void 0,void 0,(function*(){const maxGainValue=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=DefaultDeviceController_1.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=frequency,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const startTime=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,startTime),this.gainNode.gain.linearRampToValueAtTime(maxGainValue,startTime+.1),this.oscillatorNode.start();const audioMixController=new DefaultAudioMixController_1.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield audioMixController.bindAudioDevice({deviceId:sinkId}))}catch(e){this.logger.error(`Failed to bind audio device: ${e}`)}try{yield audioMixController.bindAudioElement(audioElement||new Audio)}catch(e){this.logger.error(`Failed to bind audio element: ${e}`)}yield audioMixController.bindAudioStream(this.destinationStream.stream)}))}stopTone(){if(!(this.audioContext&&this.gainNode&&this.oscillatorNode&&this.destinationStream))return;const maxGainValue=this.configuration.audioOutputGain,currentTime=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(maxGainValue,currentTime+.1+1),this.gainNode.gain.linearRampToValueAtTime(0,currentTime+.2+1),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(videoInputDevice){return __awaiter(this,void 0,void 0,(function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(videoInputDevice),yield this.meetingSession.audioVideo.stopVideoInput(),CheckVideoInputFeedback_1.default.Succeeded}catch(error){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${error}`),error instanceof PermissionDeniedError_1.default?CheckVideoInputFeedback_1.default.PermissionDenied:CheckVideoInputFeedback_1.default.Failed}}))}checkCameraResolution(videoInputDevice,width,height){return __awaiter(this,void 0,void 0,(function*(){let stream;try{const videoInputDeviceId=DefaultDeviceController_1.default.getIntrinsicDeviceId(videoInputDevice),videoConstraint={video:this.calculateVideoConstraint(videoInputDeviceId,width,height)};stream=yield navigator.mediaDevices.getUserMedia(videoConstraint)}catch(error){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${width} height ${height} failed with error ${error}`),error&&"OverconstrainedError"===error.name?CheckCameraResolutionFeedback_1.default.ResolutionNotSupported:error&&"NotAllowedError"===error.name?CheckCameraResolutionFeedback_1.default.PermissionDenied:CheckCameraResolutionFeedback_1.default.Failed}finally{stream&&stream.getTracks().forEach((function(track){track.stop()}))}return CheckCameraResolutionFeedback_1.default.Succeeded}))}calculateVideoConstraint(videoInputDeviceId,width,height){const dimension=this.browserBehavior.requiresResolutionAlignment(width,height),trackConstraints={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(trackConstraints.deviceId=videoInputDeviceId,trackConstraints.width=width,trackConstraints.height=height):(trackConstraints.deviceId={exact:videoInputDeviceId},trackConstraints.width={exact:dimension[0]},trackConstraints.height={exact:dimension[1]}),trackConstraints}checkContentShareConnectivity(sourceId){return __awaiter(this,void 0,void 0,(function*(){let isContentShareStarted=!1,isAudioVideoStarted=!1;const contentShareObserver={contentShareDidStart:()=>{isContentShareStarted=!0}},observer={audioVideoDidStart:()=>{isAudioVideoStarted=!0}};try{return this.meetingSession.audioVideo.addObserver(observer),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(contentShareObserver),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(sourceId),yield this.executeTimeoutTask((()=>__awaiter(this,void 0,void 0,(function*(){return isAudioVideoStarted&&isContentShareStarted})))),isAudioVideoStarted?(yield this.stopMeeting(),isContentShareStarted?CheckContentShareConnectivityFeedback_1.default.Succeeded:CheckContentShareConnectivityFeedback_1.default.TimedOut):CheckContentShareConnectivityFeedback_1.default.ConnectionFailed}catch(error){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${error}`),"NotAllowedError"===error.name?CheckContentShareConnectivityFeedback_1.default.PermissionDenied:CheckContentShareConnectivityFeedback_1.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(observer),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(contentShareObserver)}}))}checkAudioConnectivity(audioInputDevice){return __awaiter(this,void 0,void 0,(function*(){let audioPresence=!1;const audioConnectivityMetrics={packetsReceived:0},audioVideo=this.meetingSession.audioVideo,checkAudioConnectivityMetricsObserver={metricsDidReceive(clientMetricReport){clientMetricReport.getRTCStatsReport().forEach((report=>{"inbound-rtp"!==report.type||"audio"!==report.mediaType&&"audio"!==report.kind||(audioConnectivityMetrics.packetsReceived=report.packetsReceived)}))}},attendeePresenceHandler=(attendeeId,present,_externalUserId,_dropped)=>{attendeeId===this.meetingSession.configuration.credentials.attendeeId&&present&&(audioPresence=!0)};try{yield audioVideo.startAudioInput(audioInputDevice)}catch(error){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${error}`),error instanceof PermissionDeniedError_1.default?CheckAudioConnectivityFeedback_1.default.AudioInputPermissionDenied:CheckAudioConnectivityFeedback_1.default.AudioInputRequestFailed}return audioVideo.realtimeSubscribeToAttendeeIdPresence(attendeePresenceHandler),audioVideo.addObserver(checkAudioConnectivityMetricsObserver),(yield this.startMeeting())?(yield this.executeTimeoutTask((()=>__awaiter(this,void 0,void 0,(function*(){return this.isAudioConnectionSuccessful(audioPresence,audioConnectivityMetrics)})))),audioVideo.removeObserver(checkAudioConnectivityMetricsObserver),audioVideo.realtimeUnsubscribeToAttendeeIdPresence(attendeePresenceHandler),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(audioPresence,audioConnectivityMetrics)?CheckAudioConnectivityFeedback_1.default.Succeeded:CheckAudioConnectivityFeedback_1.default.AudioNotReceived):(audioVideo.removeObserver(checkAudioConnectivityMetricsObserver),audioVideo.realtimeUnsubscribeToAttendeeIdPresence(attendeePresenceHandler),yield this.meetingSession.audioVideo.stopAudioInput(),CheckAudioConnectivityFeedback_1.default.ConnectionFailed)}))}checkVideoConnectivity(videoInputDevice){return __awaiter(this,void 0,void 0,(function*(){const audioVideo=this.meetingSession.audioVideo;let packetsSent=0;const observer={metricsDidReceive(clientMetricReport){clientMetricReport.getRTCStatsReport().forEach((report=>{"outbound-rtp"!==report.type||"video"!==report.mediaType&&"video"!==report.kind||(packetsSent=report.packetsSent)}))}};try{yield audioVideo.startVideoInput(videoInputDevice)}catch(error){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${error}`),error instanceof PermissionDeniedError_1.default?CheckVideoConnectivityFeedback_1.default.VideoInputPermissionDenied:CheckVideoConnectivityFeedback_1.default.VideoInputRequestFailed}return audioVideo.addObserver(observer),(yield this.startMeeting())?(audioVideo.startLocalVideoTile(),yield this.executeTimeoutTask((()=>__awaiter(this,void 0,void 0,(function*(){return packetsSent>0})))),yield audioVideo.stopVideoInput(),yield this.stopMeeting(),audioVideo.removeObserver(observer),packetsSent<=0?CheckVideoConnectivityFeedback_1.default.VideoNotSent:CheckVideoConnectivityFeedback_1.default.Succeeded):CheckVideoConnectivityFeedback_1.default.ConnectionFailed}))}checkNetworkUDPConnectivity(){return __awaiter(this,void 0,void 0,(function*(){let candidatePairSucceed=!1;const observer={metricsDidReceive(clientMetricReport){clientMetricReport.getRTCStatsReport().forEach((report=>{"candidate-pair"===report.type&&"succeeded"===report.state&&(candidatePairSucceed=!0)}))}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(error){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${error}`),CheckNetworkUDPConnectivityFeedback_1.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=uri=>{const transformedUri=this.originalURLRewriter(uri);return transformedUri.includes("transport=tcp")?"":transformedUri};const audioVideo=this.meetingSession.audioVideo;return audioVideo.addObserver(observer),(yield this.startMeeting())?(yield this.executeTimeoutTask((()=>__awaiter(this,void 0,void 0,(function*(){return candidatePairSucceed})))),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),audioVideo.removeObserver(observer),candidatePairSucceed?CheckNetworkUDPConnectivityFeedback_1.default.Succeeded:CheckNetworkUDPConnectivityFeedback_1.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,CheckNetworkUDPConnectivityFeedback_1.default.ConnectionFailed)}))}checkNetworkTCPConnectivity(){return __awaiter(this,void 0,void 0,(function*(){let candidatePairSucceed=!1;const observer={metricsDidReceive(clientMetricReport){clientMetricReport.getRTCStatsReport().forEach((report=>{"candidate-pair"===report.type&&"succeeded"===report.state&&(candidatePairSucceed=!0)}))}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(error){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${error}`),CheckNetworkTCPConnectivityFeedback_1.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=uri=>{const transformedUri=this.originalURLRewriter(uri);return transformedUri.includes("transport=udp")?"":transformedUri};const audioVideo=this.meetingSession.audioVideo;return audioVideo.addObserver(observer),(yield this.startMeeting())?(yield this.executeTimeoutTask((()=>__awaiter(this,void 0,void 0,(function*(){return candidatePairSucceed})))),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),audioVideo.removeObserver(observer),candidatePairSucceed?CheckNetworkTCPConnectivityFeedback_1.default.Succeeded:CheckNetworkTCPConnectivityFeedback_1.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,CheckNetworkTCPConnectivityFeedback_1.default.ConnectionFailed)}))}startMeeting(){return __awaiter(this,void 0,void 0,(function*(){let isStarted=!1;const observer={audioVideoDidStart:()=>{isStarted=!0}};return this.meetingSession.audioVideo.addObserver(observer),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask((()=>__awaiter(this,void 0,void 0,(function*(){return isStarted})))),this.meetingSession.audioVideo.removeObserver(observer),isStarted}))}stopMeeting(){return __awaiter(this,void 0,void 0,(function*(){let isStopped=!1;const observer={audioVideoDidStop:_sessionStatus=>{isStopped=!0}};return this.meetingSession.audioVideo.addObserver(observer),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask((()=>__awaiter(this,void 0,void 0,(function*(){return isStopped})))),this.meetingSession.audioVideo.removeObserver(observer),isStopped}))}executeTimeoutTask(conditionCheck){return __awaiter(this,void 0,void 0,(function*(){let isSuccess=!1;class CheckForConditionTask extends BaseTask_1.default{constructor(logger,waitDurationMs){super(logger),this.waitDurationMs=waitDurationMs,this.isCancelled=!1}cancel(){this.isCancelled=!0}run(){return __awaiter(this,void 0,void 0,(function*(){for(;!this.isCancelled;){if(yield conditionCheck()){isSuccess=!0;break}yield DefaultMeetingReadinessChecker.delay(this.waitDurationMs)}}))}}const timeoutTask=new TimeoutTask_1.default(this.logger,new CheckForConditionTask(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs);return yield timeoutTask.run(),isSuccess}))}isAudioConnectionSuccessful(audioPresence,audioConnectivityMetrics){return audioPresence&&audioConnectivityMetrics.packetsReceived>0}}exports.default=DefaultMeetingReadinessChecker},"./node_modules/amazon-chime-sdk-js/build/meetingreadinesschecker/MeetingReadinessCheckerConfiguration.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class MeetingReadinessCheckerConfiguration{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}}},"./node_modules/amazon-chime-sdk-js/build/meetingsession/DefaultMeetingSession.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultAudioVideoController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audiovideocontroller/DefaultAudioVideoController.js")),DefaultAudioVideoFacade_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audiovideofacade/DefaultAudioVideoFacade.js")),FullJitterBackoff_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterBackoff.js")),DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),ContentShareMediaStreamBroker_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/ContentShareMediaStreamBroker.js")),DefaultContentShareController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/DefaultContentShareController.js")),CSPMonitor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/cspmonitor/CSPMonitor.js")),Destroyable_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/destroyable/Destroyable.js"),DefaultEventController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/eventcontroller/DefaultEventController.js")),DefaultReconnectController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/reconnectcontroller/DefaultReconnectController.js")),DefaultWebSocketAdapter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/websocketadapter/DefaultWebSocketAdapter.js"));exports.default=class DefaultMeetingSession{constructor(configuration,logger,deviceController,_eventController){this._eventController=_eventController,this._configuration=configuration,this._logger=logger,this.checkBrowserSupportAndFeatureConfiguration(),CSPMonitor_1.default.addLogger(this._logger),CSPMonitor_1.default.register(),this._eventController||(this._eventController=new DefaultEventController_1.default(configuration,logger)),deviceController.eventController||(deviceController.eventController=this.eventController),this.audioVideoController=new DefaultAudioVideoController_1.default(this._configuration,this._logger,new DefaultWebSocketAdapter_1.default(this._logger),deviceController,new DefaultReconnectController_1.default(this._configuration.reconnectTimeoutMs,new FullJitterBackoff_1.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=deviceController,this.logger.info(`MeetingFeatures: ${JSON.stringify(configuration.meetingFeatures)}`);const contentShareMediaStreamBroker=new ContentShareMediaStreamBroker_1.default(this._logger);this.contentShareController=new DefaultContentShareController_1.default(contentShareMediaStreamBroker,new DefaultAudioVideoController_1.default(DefaultContentShareController_1.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new DefaultWebSocketAdapter_1.default(this._logger),contentShareMediaStreamBroker,new DefaultReconnectController_1.default(this._configuration.reconnectTimeoutMs,new FullJitterBackoff_1.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new DefaultAudioVideoFacade_1.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return __awaiter(this,void 0,void 0,(function*(){Destroyable_1.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),Destroyable_1.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),Destroyable_1.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),CSPMonitor_1.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0}))}checkBrowserSupportAndFeatureConfiguration(){const browserBehavior=new DefaultBrowserBehavior_1.default,browser=`${browserBehavior.name()} ${browserBehavior.majorVersion()} (${browserBehavior.version()})`;if(this.logger.info(`browser is ${browser}`),browserBehavior.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${browserBehavior.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!browserBehavior.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(browserBehavior.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${browserBehavior.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!browserBehavior.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(policy){return!(!policy||!policy.addObserver)}}},"./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingFeatures.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const VideoQualitySettings_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoQualitySettings.js"));class MeetingFeatures{constructor(videoMaxResolution=VideoQualitySettings_1.default.VideoResolutionHD,contentMaxResolution=VideoQualitySettings_1.default.VideoResolutionFHD){this.videoMaxResolution=videoMaxResolution,this.contentMaxResolution=contentMaxResolution}clone(){return new MeetingFeatures(this.videoMaxResolution,this.contentMaxResolution)}}exports.default=MeetingFeatures},"./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionConfiguration.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const ConnectionHealthPolicyConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/ConnectionHealthPolicyConfiguration.js")),VideoQualitySettings_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoQualitySettings.js")),Utils_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Utils.js"),MeetingFeatures_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingFeatures.js")),MeetingSessionCredentials_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionCredentials.js")),MeetingSessionURLs_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionURLs.js"));exports.default=class MeetingSessionConfiguration{constructor(createMeetingResponse,createAttendeeResponse){var _a,_b;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new ConnectionHealthPolicyConfiguration_1.default,this.reconnectTimeoutMs=12e4,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1e3,this.reconnectLongBackOffMs=5e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new MeetingFeatures_1.default,createMeetingResponse){(createMeetingResponse=Utils_1.toLowerCasePropertyNames(createMeetingResponse)).meeting&&(createMeetingResponse=createMeetingResponse.meeting),this.meetingId=createMeetingResponse.meetingid,this.externalMeetingId=createMeetingResponse.externalmeetingid,this.urls=new MeetingSessionURLs_1.default,this.urls.audioHostURL=createMeetingResponse.mediaplacement.audiohosturl,this.urls.signalingURL=createMeetingResponse.mediaplacement.signalingurl,this.urls.turnControlURL=createMeetingResponse.mediaplacement.turncontrolurl,createMeetingResponse.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=createMeetingResponse.mediaplacement.eventingestionurl);const parseVideoResolution=(resolution,defaultValue)=>{switch(resolution){case"None":return VideoQualitySettings_1.default.VideoDisabled;case"HD":return VideoQualitySettings_1.default.VideoResolutionHD;case"FHD":return VideoQualitySettings_1.default.VideoResolutionFHD;case"UHD":return VideoQualitySettings_1.default.VideoResolutionUHD;default:return defaultValue}};if(void 0!==(null===(_a=createMeetingResponse.meetingfeatures)||void 0===_a?void 0:_a.video)||void 0!==(null===(_b=createMeetingResponse.meetingfeatures)||void 0===_b?void 0:_b.content)){const videoMaxResolution=void 0===createMeetingResponse.meetingfeatures.video?"HD":createMeetingResponse.meetingfeatures.video.maxresolution,contentMaxResolution=void 0===createMeetingResponse.meetingfeatures.content?"FHD":createMeetingResponse.meetingfeatures.content.maxresolution;this.meetingFeatures=new MeetingFeatures_1.default(parseVideoResolution(videoMaxResolution,VideoQualitySettings_1.default.VideoResolutionHD),parseVideoResolution(contentMaxResolution,VideoQualitySettings_1.default.VideoResolutionFHD))}}createAttendeeResponse&&((createAttendeeResponse=Utils_1.toLowerCasePropertyNames(createAttendeeResponse)).attendee&&(createAttendeeResponse=createAttendeeResponse.attendee),this.credentials=new MeetingSessionCredentials_1.default,this.credentials.attendeeId=createAttendeeResponse.attendeeid,this.credentials.externalUserId=createAttendeeResponse.externaluserid,this.credentials.joinToken=createAttendeeResponse.jointoken)}}},"./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionCredentials.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class MeetingSessionCredentials{constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}toJSON(){return{attendeeId:this.attendeeId,joinToken:null===this.joinToken?null:"<redacted>"}}}},"./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionLifecycleEvent.js":(__unused_webpack_module,exports)=>{"use strict";var MeetingSessionLifecycleEvent;Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeetingSessionLifecycleEvent=void 0,function(MeetingSessionLifecycleEvent){MeetingSessionLifecycleEvent[MeetingSessionLifecycleEvent.Connecting=0]="Connecting",MeetingSessionLifecycleEvent[MeetingSessionLifecycleEvent.Started=1]="Started",MeetingSessionLifecycleEvent[MeetingSessionLifecycleEvent.Stopped=2]="Stopped"}(MeetingSessionLifecycleEvent=exports.MeetingSessionLifecycleEvent||(exports.MeetingSessionLifecycleEvent={})),exports.default=MeetingSessionLifecycleEvent},"./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionLifecycleEventCondition.js":(__unused_webpack_module,exports)=>{"use strict";var MeetingSessionLifecycleEventCondition;Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeetingSessionLifecycleEventCondition=void 0,function(MeetingSessionLifecycleEventCondition){MeetingSessionLifecycleEventCondition[MeetingSessionLifecycleEventCondition.ConnectingNew=0]="ConnectingNew",MeetingSessionLifecycleEventCondition[MeetingSessionLifecycleEventCondition.ReconnectingExisting=1]="ReconnectingExisting",MeetingSessionLifecycleEventCondition[MeetingSessionLifecycleEventCondition.StartedNew=2]="StartedNew",MeetingSessionLifecycleEventCondition[MeetingSessionLifecycleEventCondition.StartedExisting=3]="StartedExisting",MeetingSessionLifecycleEventCondition[MeetingSessionLifecycleEventCondition.StartedAfterReconnect=4]="StartedAfterReconnect",MeetingSessionLifecycleEventCondition[MeetingSessionLifecycleEventCondition.StoppedCleanly=5]="StoppedCleanly",MeetingSessionLifecycleEventCondition[MeetingSessionLifecycleEventCondition.StoppedWithFailure=6]="StoppedWithFailure"}(MeetingSessionLifecycleEventCondition=exports.MeetingSessionLifecycleEventCondition||(exports.MeetingSessionLifecycleEventCondition={})),exports.default=MeetingSessionLifecycleEventCondition},"./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatus.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),MeetingSessionStatusCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatusCode.js"));class MeetingSessionStatus{constructor(_statusCode){this._statusCode=_statusCode}statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case MeetingSessionStatusCode_1.default.AudioAuthenticationRejected:case MeetingSessionStatusCode_1.default.AudioCallAtCapacity:case MeetingSessionStatusCode_1.default.AudioInternalServerError:case MeetingSessionStatusCode_1.default.AudioServiceUnavailable:case MeetingSessionStatusCode_1.default.AudioDisconnected:case MeetingSessionStatusCode_1.default.VideoCallAtSourceCapacity:case MeetingSessionStatusCode_1.default.SignalingBadRequest:case MeetingSessionStatusCode_1.default.SignalingInternalServerError:case MeetingSessionStatusCode_1.default.SignalingRequestFailed:case MeetingSessionStatusCode_1.default.ICEGatheringTimeoutWorkaround:case MeetingSessionStatusCode_1.default.ConnectionHealthReconnect:case MeetingSessionStatusCode_1.default.RealtimeApiFailed:case MeetingSessionStatusCode_1.default.TaskFailed:case MeetingSessionStatusCode_1.default.NoAttendeePresent:case MeetingSessionStatusCode_1.default.SignalingChannelClosedUnexpectedly:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case MeetingSessionStatusCode_1.default.Left:case MeetingSessionStatusCode_1.default.AudioJoinedFromAnotherDevice:case MeetingSessionStatusCode_1.default.AudioAuthenticationRejected:case MeetingSessionStatusCode_1.default.AudioCallAtCapacity:case MeetingSessionStatusCode_1.default.MeetingEnded:case MeetingSessionStatusCode_1.default.AudioDisconnected:case MeetingSessionStatusCode_1.default.TURNCredentialsForbidden:case MeetingSessionStatusCode_1.default.SignalingBadRequest:case MeetingSessionStatusCode_1.default.SignalingRequestFailed:case MeetingSessionStatusCode_1.default.VideoCallAtSourceCapacity:case MeetingSessionStatusCode_1.default.RealtimeApiFailed:case MeetingSessionStatusCode_1.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case MeetingSessionStatusCode_1.default.AudioAuthenticationRejected:case MeetingSessionStatusCode_1.default.AudioInternalServerError:case MeetingSessionStatusCode_1.default.AudioServiceUnavailable:case MeetingSessionStatusCode_1.default.ICEGatheringTimeoutWorkaround:case MeetingSessionStatusCode_1.default.SignalingBadRequest:case MeetingSessionStatusCode_1.default.SignalingInternalServerError:case MeetingSessionStatusCode_1.default.SignalingRequestFailed:case MeetingSessionStatusCode_1.default.RealtimeApiFailed:case MeetingSessionStatusCode_1.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case MeetingSessionStatusCode_1.default.OK:return"Everything is OK so far.";case MeetingSessionStatusCode_1.default.Left:return"The attendee left the meeting.";case MeetingSessionStatusCode_1.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case MeetingSessionStatusCode_1.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case MeetingSessionStatusCode_1.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case MeetingSessionStatusCode_1.default.MeetingEnded:return"The meeting ended.";case MeetingSessionStatusCode_1.default.AudioInternalServerError:case MeetingSessionStatusCode_1.default.AudioServiceUnavailable:case MeetingSessionStatusCode_1.default.AudioDisconnected:return"The audio connection failed.";case MeetingSessionStatusCode_1.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case MeetingSessionStatusCode_1.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case MeetingSessionStatusCode_1.default.SignalingBadRequest:case MeetingSessionStatusCode_1.default.SignalingInternalServerError:case MeetingSessionStatusCode_1.default.SignalingRequestFailed:return"The signaling connection failed.";case MeetingSessionStatusCode_1.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case MeetingSessionStatusCode_1.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case MeetingSessionStatusCode_1.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case MeetingSessionStatusCode_1.default.TaskFailed:return"The connection failed. See the error message for more details.";case MeetingSessionStatusCode_1.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case MeetingSessionStatusCode_1.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case MeetingSessionStatusCode_1.default.NoAttendeePresent:return"The attendee was not present.";case MeetingSessionStatusCode_1.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case MeetingSessionStatusCode_1.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case MeetingSessionStatusCode_1.default.AudioVideoDisconnectedWhilePromoted:return"The client disconnected while promoted, which will automatically demote. The attendee must promote again to participate.";case MeetingSessionStatusCode_1.default.AudioDisconnectAudio:return"The audio connection failed.";case MeetingSessionStatusCode_1.default.SignalingChannelClosedUnexpectedly:return"The signaling channel was closed unexpectedly. This may be due to a network change or backend detected failure.";default:{const exhaustiveCheck=this._statusCode;throw new Error(`Unhandled case: ${exhaustiveCheck}`)}}}static fromSignalFrame(frame){return frame.error&&frame.error.status?this.fromSignalingStatus(frame.error.status):frame.type===SignalingProtocol_js_1.SdkSignalFrame.Type.AUDIO_STATUS?frame.audioStatus?this.fromAudioStatus(frame.audioStatus.audioStatus):new MeetingSessionStatus(MeetingSessionStatusCode_1.default.SignalingRequestFailed):frame.type===SignalingProtocol_js_1.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new MeetingSessionStatus(MeetingSessionStatusCode_1.default.AudioVideoWasRemovedFromPrimaryMeeting):new MeetingSessionStatus(MeetingSessionStatusCode_1.default.OK)}static fromAudioStatus(status){switch(status){case 200:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.OK);case 301:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.AudioJoinedFromAnotherDevice);case 302:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.AudioDisconnectAudio);case 403:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.AudioAuthenticationRejected);case 409:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.AudioCallAtCapacity);case 410:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.MeetingEnded);case 411:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.AudioAttendeeRemoved);case 500:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.AudioInternalServerError);case 503:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.AudioServiceUnavailable);default:return 2===Math.floor(status/100)?new MeetingSessionStatus(MeetingSessionStatusCode_1.default.OK):new MeetingSessionStatus(MeetingSessionStatusCode_1.default.AudioDisconnected)}}static fromSignalingStatus(status){switch(status){case 206:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.VideoCallSwitchToViewOnly);case 509:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.VideoCallAtSourceCapacity);case 403:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.AudioAuthenticationRejected);case 409:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.AudioCallAtCapacity);default:switch(Math.floor(status/100)){case 2:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.OK);case 4:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.SignalingBadRequest);case 5:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.SignalingInternalServerError);default:return new MeetingSessionStatus(MeetingSessionStatusCode_1.default.SignalingRequestFailed)}}}}exports.default=MeetingSessionStatus},"./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatusCode.js":(__unused_webpack_module,exports)=>{"use strict";var MeetingSessionStatusCode;Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeetingSessionStatusCode=void 0,function(MeetingSessionStatusCode){MeetingSessionStatusCode[MeetingSessionStatusCode.OK=0]="OK",MeetingSessionStatusCode[MeetingSessionStatusCode.Left=1]="Left",MeetingSessionStatusCode[MeetingSessionStatusCode.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",MeetingSessionStatusCode[MeetingSessionStatusCode.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",MeetingSessionStatusCode[MeetingSessionStatusCode.AudioCallAtCapacity=4]="AudioCallAtCapacity",MeetingSessionStatusCode[MeetingSessionStatusCode.MeetingEnded=5]="MeetingEnded",MeetingSessionStatusCode[MeetingSessionStatusCode.AudioInternalServerError=6]="AudioInternalServerError",MeetingSessionStatusCode[MeetingSessionStatusCode.AudioServiceUnavailable=7]="AudioServiceUnavailable",MeetingSessionStatusCode[MeetingSessionStatusCode.AudioDisconnected=8]="AudioDisconnected",MeetingSessionStatusCode[MeetingSessionStatusCode.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",MeetingSessionStatusCode[MeetingSessionStatusCode.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",MeetingSessionStatusCode[MeetingSessionStatusCode.SignalingBadRequest=11]="SignalingBadRequest",MeetingSessionStatusCode[MeetingSessionStatusCode.SignalingInternalServerError=12]="SignalingInternalServerError",MeetingSessionStatusCode[MeetingSessionStatusCode.SignalingRequestFailed=13]="SignalingRequestFailed",MeetingSessionStatusCode[MeetingSessionStatusCode.SignalingChannelClosedUnexpectedly=14]="SignalingChannelClosedUnexpectedly",MeetingSessionStatusCode[MeetingSessionStatusCode.ICEGatheringTimeoutWorkaround=15]="ICEGatheringTimeoutWorkaround",MeetingSessionStatusCode[MeetingSessionStatusCode.ConnectionHealthReconnect=16]="ConnectionHealthReconnect",MeetingSessionStatusCode[MeetingSessionStatusCode.RealtimeApiFailed=17]="RealtimeApiFailed",MeetingSessionStatusCode[MeetingSessionStatusCode.TaskFailed=18]="TaskFailed",MeetingSessionStatusCode[MeetingSessionStatusCode.IncompatibleSDP=19]="IncompatibleSDP",MeetingSessionStatusCode[MeetingSessionStatusCode.TURNCredentialsForbidden=20]="TURNCredentialsForbidden",MeetingSessionStatusCode[MeetingSessionStatusCode.NoAttendeePresent=21]="NoAttendeePresent",MeetingSessionStatusCode[MeetingSessionStatusCode.AudioAttendeeRemoved=22]="AudioAttendeeRemoved",MeetingSessionStatusCode[MeetingSessionStatusCode.AudioVideoWasRemovedFromPrimaryMeeting=23]="AudioVideoWasRemovedFromPrimaryMeeting",MeetingSessionStatusCode[MeetingSessionStatusCode.AudioVideoDisconnectedWhilePromoted=24]="AudioVideoDisconnectedWhilePromoted",MeetingSessionStatusCode[MeetingSessionStatusCode.AudioDisconnectAudio=25]="AudioDisconnectAudio"}(MeetingSessionStatusCode=exports.MeetingSessionStatusCode||(exports.MeetingSessionStatusCode={})),exports.default=MeetingSessionStatusCode},"./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionTURNCredentials.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class MeetingSessionTURNCredentials{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}}},"./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionURLs.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class MeetingSessionURLs{constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=url=>url}get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(value){this._audioHostURL=value}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(value){this._signalingURL=value}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(value){this._turnControlURL=value}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(value){this._eventIngestionURL=value}}},"./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionVideoAvailability.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class MeetingSessionVideoAvailability{constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}equal(other){return this.remoteVideoAvailable===other.remoteVideoAvailable&&this.canStartLocalVideo===other.canStartLocalVideo}clone(){const cloned=new MeetingSessionVideoAvailability;return cloned.remoteVideoAvailable=this.remoteVideoAvailable,cloned.canStartLocalVideo=this.canStartLocalVideo,cloned}}exports.default=MeetingSessionVideoAvailability},"./node_modules/amazon-chime-sdk-js/build/message/Message.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class Message{constructor(type,headers,payload){this.type=type,this.headers=headers,this.payload=payload}}},"./node_modules/amazon-chime-sdk-js/build/messagingsession/DefaultMessagingSession.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const client_chime_sdk_messaging_1=__webpack_require__("./node_modules/@aws-sdk/client-chime-sdk-messaging/dist-es/index.js"),FullJitterBackoff_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/backoff/FullJitterBackoff.js")),CSPMonitor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/cspmonitor/CSPMonitor.js")),Message_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/message/Message.js")),DefaultReconnectController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/reconnectcontroller/DefaultReconnectController.js")),AsyncScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js")),DefaultSigV4_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sigv4/DefaultSigV4.js")),DefaultWebSocketAdapter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/websocketadapter/DefaultWebSocketAdapter.js")),WebSocketReadyState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/websocketadapter/WebSocketReadyState.js")),PrefetchOn_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/messagingsession/PrefetchOn.js"));exports.default=class DefaultMessagingSession{constructor(configuration,logger,webSocket,reconnectController,sigV4){this.configuration=configuration,this.logger=logger,this.webSocket=webSocket,this.reconnectController=reconnectController,this.sigV4=sigV4,this.observerQueue=new Set,this.webSocket||(this.webSocket=new DefaultWebSocketAdapter_1.default(this.logger)),this.reconnectController||(this.reconnectController=new DefaultReconnectController_1.default(configuration.reconnectTimeoutMs,new FullJitterBackoff_1.default(configuration.reconnectFixedWaitMs,configuration.reconnectShortBackoffMs,configuration.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new DefaultSigV4_1.default(this.configuration.chimeClient)),CSPMonitor_1.default.addLogger(this.logger),CSPMonitor_1.default.register(),this.preBootstrapMessages=[]}addObserver(observer){this.logger.info("adding messaging observer"),this.observerQueue.add(observer)}removeObserver(observer){this.logger.info("removing messaging observer"),this.observerQueue.delete(observer)}start(){return __awaiter(this,void 0,void 0,(function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")}))}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),CSPMonitor_1.default.removeLogger(this.logger))}forEachObserver(observerFunc){for(const observer of this.observerQueue)AsyncScheduler_1.default.nextTick((()=>{this.observerQueue.has(observer)&&observerFunc(observer)}))}setUpEventListeners(){this.webSocket.addEventListener("open",(()=>{this.openEventHandler()})),this.webSocket.addEventListener("message",(event=>{this.receiveMessageHandler(event.data)})),this.webSocket.addEventListener("close",(event=>{this.closeEventHandler(event)})),this.webSocket.addEventListener("error",(()=>{this.logger.error("WebSocket error")}))}startConnecting(reconnecting){return __awaiter(this,void 0,void 0,(function*(){return yield this.startConnectingInternal(reconnecting),yield new Promise(((resolve,reject)=>{this.bootstrapResolved=resolve,this.bootstrapRejected=reject}))}))}startConnectingInternal(reconnecting){var _a;return __awaiter(this,void 0,void 0,(function*(){let endpointUrl=this.configuration.endpointUrl;if(reconnecting||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),reconnecting||void 0===endpointUrl)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const response=yield this.configuration.chimeClient.getMessagingSessionEndpoint();if(null===(_a=response.Endpoint)||void 0===_a?void 0:_a.Url)endpointUrl=response.Endpoint.Url;else{endpointUrl=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}}else endpointUrl=(yield this.configuration.chimeClient.send(new client_chime_sdk_messaging_1.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${endpointUrl}`)}catch(e){this.logger.error(`Messaging Session failed to resolve endpoint: ${e}`);const closeEvent=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});return void this.closeEventHandler(closeEvent)}const signedUrl=yield this.prepareWebSocketUrl(endpointUrl);this.logger.info(`opening connection to ${signedUrl}`),reconnecting||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(signedUrl,[],!0),this.forEachObserver((observer=>{observer.messagingSessionDidStartConnecting&&observer.messagingSessionDidStartConnecting(reconnecting)})),this.setUpEventListeners()}))}prepareWebSocketUrl(endpointUrl){return __awaiter(this,void 0,void 0,(function*(){const queryParams=new Map;return queryParams.set("userArn",[this.configuration.userArn]),queryParams.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===PrefetchOn_1.default.Connect&&queryParams.set("prefetch-on",[PrefetchOn_1.default.Connect]),this.configuration.prefetchSortBy&&queryParams.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",endpointUrl,"/connect","",queryParams)}))}isClosed(){return this.webSocket.readyState()===WebSocketReadyState_1.default.None||this.webSocket.readyState()===WebSocketReadyState_1.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(data){try{const jsonData=JSON.parse(data),messageType=jsonData.Headers["x-amz-chime-event-type"],message=new Message_1.default(messageType,jsonData.Headers,jsonData.Payload||null);if(this.isSessionEstablished||"SESSION_ESTABLISHED"!==messageType){if(!this.isSessionEstablished)return void this.preBootstrapMessages.push(message)}else{this.forEachObserver((observer=>{observer.messagingSessionDidStart&&observer.messagingSessionDidStart()})),this.bootstrapResolved(),this.isSessionEstablished=!0;const preBootstrapMessageLength=this.preBootstrapMessages.length;for(let iter=0;iter<preBootstrapMessageLength;iter++){const preBootstrapMessage=this.preBootstrapMessages.shift();this.forEachObserver((observer=>{this.sendMessageToObserver(observer,preBootstrapMessage)}))}}this.forEachObserver((observer=>{this.sendMessageToObserver(observer,message)}))}catch(error){this.logger.error(`Messaging parsing failed: ${error}`)}}sendMessageToObserver(observer,message){observer.messagingSessionDidReceiveMessage&&observer.messagingSessionDidReceiveMessage(message)}retryConnection(){return this.reconnectController.retryWithBackoff((()=>__awaiter(this,void 0,void 0,(function*(){yield this.startConnecting(!0)}))),null)}closeEventHandler(event){this.logger.info(`WebSocket close: ${event.code} ${event.reason}`),4999!==event.code&&this.webSocket.destroy(),!this.isClosing&&this.canReconnect(event.code)&&this.retryConnection()||(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver((observer=>{observer.messagingSessionDidStop&&observer.messagingSessionDidStop(event)})):this.bootstrapRejected(event))}canReconnect(closeCode){return 1001===closeCode||1006===closeCode||closeCode>=1011&&closeCode<=1014||closeCode>4e3&&4002!==closeCode&&4003!==closeCode&&4401!==closeCode}}},"./node_modules/amazon-chime-sdk-js/build/messagingsession/MessagingSessionConfiguration.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Utils_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Utils.js");exports.default=class MessagingSessionConfiguration{constructor(userArn,messagingSessionId,endpointUrl,chimeClient){this.userArn=userArn,this.messagingSessionId=messagingSessionId,this.endpointUrl=endpointUrl,this.chimeClient=chimeClient,this.reconnectTimeoutMs=1e4,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1e3,this.reconnectLongBackoffMs=5e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}generateSessionId(){const num=new Uint32Array(1);return Utils_1.getRandomValues(num),num[0].toString()}}},"./node_modules/amazon-chime-sdk-js/build/messagingsession/PrefetchOn.js":(__unused_webpack_module,exports)=>{"use strict";var PrefetchOn;Object.defineProperty(exports,"__esModule",{value:!0}),function(PrefetchOn){PrefetchOn.Connect="connect"}(PrefetchOn||(PrefetchOn={})),exports.default=PrefetchOn},"./node_modules/amazon-chime-sdk-js/build/messagingsession/PrefetchSortBy.js":(__unused_webpack_module,exports)=>{"use strict";var PrefetchSortBy;Object.defineProperty(exports,"__esModule",{value:!0}),function(PrefetchSortBy){PrefetchSortBy.Unread="unread",PrefetchSortBy.LastMessageTimestamp="last-message-timestamp"}(PrefetchSortBy||(PrefetchSortBy={})),exports.default=PrefetchSortBy},"./node_modules/amazon-chime-sdk-js/build/modality/DefaultModality.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const ContentShareConstants_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/ContentShareConstants.js"));class DefaultModality{constructor(_id){this._id=_id}id(){return this._id}base(){return this._id?this._id.split(DefaultModality.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const components=this._id.split(DefaultModality.MODALITY_SEPARATOR);return 2===components.length?components[1]:""}hasModality(modality){return""!==modality&&this.modality()===modality}withModality(modality){const m=new DefaultModality(this.base()+DefaultModality.MODALITY_SEPARATOR+modality);return""===modality||""===this.base()||new DefaultModality(m._id).modality()!==modality?new DefaultModality(this.base()):m}}exports.default=DefaultModality,DefaultModality.MODALITY_SEPARATOR=ContentShareConstants_1.default.Modality[0],DefaultModality.MODALITY_CONTENT=ContentShareConstants_1.default.Modality.substring(1)},"./node_modules/amazon-chime-sdk-js/build/pingpong/DefaultPingPong.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const AsyncScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js")),IntervalScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/IntervalScheduler.js")),SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),Types_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Types.js");exports.default=class DefaultPingPong{constructor(signalingClient,intervalMs,logger){this.signalingClient=signalingClient,this.intervalMs=intervalMs,this.logger=logger,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new IntervalScheduler_1.default(this.intervalMs),this.pingId=0}addObserver(observer){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(observer)}removeObserver(observer){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(observer)}forEachObserver(observerFunc){for(const observer of this.observerQueue)AsyncScheduler_1.default.nextTick((()=>{this.observerQueue.has(observer)&&observerFunc(observer)}))}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start((()=>{this.ping()})),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver((observer=>{Types_1.Maybe.of(observer.didMissPongs).map((f=>f.bind(observer)(this.consecutivePongsUnaccountedFor)))}))),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const ping=SignalingProtocol_js_1.SdkPingPongFrame.create();ping.pingId=this.pingId,ping.type=SignalingProtocol_js_1.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(ping),this.logger.debug((()=>`sent ping ${this.pingId}`))}pong(pingId){const pong=SignalingProtocol_js_1.SdkPingPongFrame.create();pong.pingId=pingId,pong.type=SignalingProtocol_js_1.SdkPingPongType.PONG,this.signalingClient.pingPong(pong)}handleSignalingClientEvent(event){switch(event.type){case SignalingClientEventType_1.default.WebSocketOpen:this.startPingInterval();break;case SignalingClientEventType_1.default.WebSocketFailed:case SignalingClientEventType_1.default.WebSocketError:this.logger.warn(`stopped pinging (${SignalingClientEventType_1.default[event.type]})`),this.stopPingInterval();break;case SignalingClientEventType_1.default.WebSocketClosing:case SignalingClientEventType_1.default.WebSocketClosed:this.logger.info(`stopped pinging (${SignalingClientEventType_1.default[event.type]})`),this.stopPingInterval();break;case SignalingClientEventType_1.default.ReceivedSignalFrame:if(event.message.type!==SignalingProtocol_js_1.SdkSignalFrame.Type.PING_PONG)break;if(event.message.pingPong.type===SignalingProtocol_js_1.SdkPingPongType.PONG){const pingId=event.message.pingPong.pingId;if(pingId!==this.pingId){this.logger.warn(`unexpected ping id ${pingId} (expected ${this.pingId})`);break}let pongTimestampRemoteMs;if(this.consecutivePongsUnaccountedFor=0,"number"!=typeof event.message.timestampMs)break;pongTimestampRemoteMs=event.message.timestampMs,this.logger.debug((()=>`received pong ${pingId} with timestamp ${pongTimestampRemoteMs}`));const pingPongLocalIntervalMs=event.timestampMs-this.pingTimestampLocalMs,estimatedPingTimestampRemoteMs=Math.round(pongTimestampRemoteMs-pingPongLocalIntervalMs/2),estimatedClockSkewMs=this.pingTimestampLocalMs-estimatedPingTimestampRemoteMs;this.logger.info(`local clock skew estimate=${estimatedClockSkewMs}ms from ping-pong time=${pingPongLocalIntervalMs}ms`),this.forEachObserver((observer=>{Types_1.Maybe.of(observer.didReceivePong).map((f=>f.bind(observer)(pingId,estimatedClockSkewMs,pingPongLocalIntervalMs)))}))}else this.pong(event.message.pingPong.pingId)}}}},"./node_modules/amazon-chime-sdk-js/build/realtimecontroller/DefaultRealtimeController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultTranscriptionController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/DefaultTranscriptionController.js")),Utils_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Utils.js"),RealtimeState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/realtimecontroller/RealtimeState.js")),RealtimeVolumeIndicator_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/realtimecontroller/RealtimeVolumeIndicator.js"));exports.default=class DefaultRealtimeController{constructor(mediaStreamBroker,transcriptionController){this.mediaStreamBroker=mediaStreamBroker,this.state=new RealtimeState_1.default,this._transcriptionController=transcriptionController||new DefaultTranscriptionController_1.default(this)}realtimeSetLocalAttendeeId(attendeeId,externalUserId){this.state.localAttendeeId=attendeeId,this.state.localExternalUserId=externalUserId}realtimeSetAttendeeIdPresence(attendeeId,present,externalUserId,dropped,posInFrame){try{present&&(this.state.attendeeIdToExternalUserId[attendeeId]=externalUserId);for(const fn of this.state.attendeeIdChangesCallbacks)fn(attendeeId,present,externalUserId,dropped,posInFrame)}catch(e){this.onError(e)}}realtimeSubscribeToAttendeeIdPresence(callback){try{this.state.attendeeIdChangesCallbacks.push(callback)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(callback){try{const index=this.state.attendeeIdChangesCallbacks.indexOf(callback);-1!==index&&this.state.attendeeIdChangesCallbacks.splice(index,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(canUnmute){try{if(this.state.canUnmute===canUnmute)return;this.state.canUnmute=canUnmute;for(const fn of this.state.setCanUnmuteLocalAudioCallbacks)fn(canUnmute)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(callback){try{this.state.setCanUnmuteLocalAudioCallbacks.push(callback)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(callback){try{const index=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(callback);-1!==index&&this.state.setCanUnmuteLocalAudioCallbacks.splice(index,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const fn of this.state.muteAndUnmuteLocalAudioCallbacks)fn(!0)}catch(e){this.onError(e)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const fn of this.state.muteAndUnmuteLocalAudioCallbacks)fn(!1);return!0}catch(e){return this.onError(e),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(callback){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(callback)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(callback){try{const index=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(callback);-1!==index&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(index,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(attendeeId,callback){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(attendeeId)||(this.state.volumeIndicatorCallbacks[attendeeId]=[]),this.state.volumeIndicatorCallbacks[attendeeId].push(callback),this.sendVolumeIndicatorChange(attendeeId,!0,!0,!0,this.state.attendeeIdToExternalUserId[attendeeId])}catch(e){this.onError(e)}}realtimeUnsubscribeFromVolumeIndicator(attendeeId,callback){if(this.state.volumeIndicatorCallbacks[attendeeId])if(callback){const index=this.state.volumeIndicatorCallbacks[attendeeId].indexOf(callback);index>=0&&this.state.volumeIndicatorCallbacks[attendeeId].splice(index,1)}else delete this.state.volumeIndicatorCallbacks[attendeeId]}realtimeUpdateVolumeIndicator(attendeeId,volume,muted,signalStrength,externalUserId){try{muted=this.applyLocalMuteOverride(attendeeId,muted);const state=this.getVolumeIndicatorState(attendeeId);let volumeUpdated=!1,mutedUpdated=!1,signalStrengthUpdated=!1;null!==muted&&state.muted!==muted&&(state.muted=muted,mutedUpdated=!0,state.muted&&0!==state.volume&&(state.volume=0,volumeUpdated=!0)),state.muted||null===volume||(state.volume!==volume&&(state.volume=volume,volumeUpdated=!0),null===state.muted&&(state.muted=!1,mutedUpdated=!0)),null!==signalStrength&&state.signalStrength!==signalStrength&&(state.signalStrength=signalStrength,signalStrengthUpdated=!0),this.sendVolumeIndicatorChange(attendeeId,volumeUpdated,mutedUpdated,signalStrengthUpdated,externalUserId)}catch(e){this.onError(e)}}realtimeSubscribeToLocalSignalStrengthChange(callback){try{if(this.state.localSignalStrengthChangeCallbacks.push(callback),null===this.state.localAttendeeId)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(callback){try{const index=this.state.localSignalStrengthChangeCallbacks.indexOf(callback);-1!==index&&this.state.localSignalStrengthChangeCallbacks.splice(index,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(callback){try{this.state.sendDataMessageCallbacks.push(callback)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(callback){try{const index=this.state.sendDataMessageCallbacks.indexOf(callback);-1!==index&&this.state.sendDataMessageCallbacks.splice(index,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(topic,data,lifetimeMs){try{for(const fn of this.state.sendDataMessageCallbacks)fn(topic,data,lifetimeMs)}catch(e){this.onError(e)}}realtimeSubscribeToReceiveDataMessage(topic,callback){try{this.state.receiveDataMessageCallbacks.has(topic)?this.state.receiveDataMessageCallbacks.get(topic).push(callback):this.state.receiveDataMessageCallbacks.set(topic,[callback])}catch(e){this.onError(e)}}realtimeUnsubscribeFromReceiveDataMessage(topic){try{this.state.receiveDataMessageCallbacks.delete(topic)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(dataMessage){try{Utils_1.iterateEvery(this.state.receiveDataMessageCallbacks.get(dataMessage.topic),(fn=>{fn(dataMessage)}))}catch(e){Promise.reject(e)}}realtimeSubscribeToFatalError(callback){try{this.state.fatalErrorCallbacks.push(callback)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(callback){try{const index=this.state.fatalErrorCallbacks.indexOf(callback);-1!==index&&this.state.fatalErrorCallbacks.splice(index,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(enabled){enabled?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(attendeeIdRemote,mutedRemote){const attendeeIdLocal=this.state.localAttendeeId,mutedLocal=this.state.muted;return attendeeIdRemote!==attendeeIdLocal?mutedRemote:"activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio?mutedLocal:mutedRemote}sendVolumeIndicatorChange(attendeeId,volumeUpdated,mutedUpdated,signalStrengthUpdated,externalUserId){if(this.sendLocalSignalStrengthChange(attendeeId,signalStrengthUpdated),!this.state.volumeIndicatorCallbacks.hasOwnProperty(attendeeId))return;const state=this.getVolumeIndicatorState(attendeeId),updateState=new RealtimeVolumeIndicator_1.default;if(volumeUpdated&&(updateState.volume=state.volume),mutedUpdated&&(updateState.muted=state.muted),signalStrengthUpdated&&(updateState.signalStrength=state.signalStrength),!this.stateIsEmpty(updateState))for(const fn of this.state.volumeIndicatorCallbacks[attendeeId])fn(attendeeId,updateState.volume,updateState.muted,updateState.signalStrength,externalUserId)}sendLocalSignalStrengthChange(attendeeId,signalStrengthUpdated){if(!signalStrengthUpdated)return;if(attendeeId!==this.state.localAttendeeId)return;const signalStrength=this.getVolumeIndicatorState(attendeeId).signalStrength;if(null!==signalStrength)for(const fn of this.state.localSignalStrengthChangeCallbacks)fn(signalStrength)}getVolumeIndicatorState(id){return this.state.volumeIndicatorState.hasOwnProperty(id)||(this.state.volumeIndicatorState[id]=new RealtimeVolumeIndicator_1.default),this.state.volumeIndicatorState[id]}stateIsEmpty(state){return null===state.volume&&null===state.muted&&null===state.signalStrength}onError(error){try{for(const callback of this.state.fatalErrorCallbacks)callback(error)}catch(eventError){try{console.error(error),console.error(eventError)}catch(consoleError){}}}}},"./node_modules/amazon-chime-sdk-js/build/realtimecontroller/RealtimeAttendeePositionInFrame.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class RealtimeAttendeePositionInFrame{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}}},"./node_modules/amazon-chime-sdk-js/build/realtimecontroller/RealtimeState.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class RealtimeState{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}}},"./node_modules/amazon-chime-sdk-js/build/realtimecontroller/RealtimeVolumeIndicator.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class RealtimeVolumeIndicator{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}}},"./node_modules/amazon-chime-sdk-js/build/reconnectcontroller/DefaultReconnectController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const TimeoutScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/TimeoutScheduler.js"));class DefaultReconnectController{constructor(reconnectTimeoutMs,backoffPolicy){this.reconnectTimeoutMs=reconnectTimeoutMs,this.backoffPolicy=backoffPolicy,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs||this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(isFirstConnection){this._isFirstConnection=isFirstConnection,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(retryFunc,cancelFunc){const willRetry=this.shouldReconnect&&!this.hasPastReconnectDeadline();return willRetry&&(this.backoffCancel=cancelFunc,this.backoffTimer=new TimeoutScheduler_1.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start((()=>{this.backoffCancel=null,retryFunc()}))),willRetry}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new DefaultReconnectController(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(timestampMs){this.lastActiveTimestampMs=timestampMs}}exports.default=DefaultReconnectController},"./node_modules/amazon-chime-sdk-js/build/redundantaudioencoder/RedundantAudioEncoder.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class RedundantAudioEncoder{constructor(){this.maxRedPacketSizeBytes=1024,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=16384,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=24e4,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}static initializeWorker(){RedundantAudioEncoder.log("Initializing RedundantAudioEncoder");const encoder=new RedundantAudioEncoder;self.RTCRtpScriptTransformer&&(self.onrtctransform=event=>{"SenderTransform"===event.transformer.options.type?encoder.setupSenderTransform(event.transformer.readable,event.transformer.writable):"ReceiverTransform"===event.transformer.options.type?encoder.setupReceiverTransform(event.transformer.readable,event.transformer.writable):"PassthroughTransform"===event.transformer.options.type&&encoder.setupPassthroughTransform(event.transformer.readable,event.transformer.writable)}),self.onmessage=event=>{"StartRedWorker"===event.data.msgType?(encoder.setupSenderTransform(event.data.send.readable,event.data.send.writable),encoder.setupReceiverTransform(event.data.receive.readable,event.data.receive.writable)):"PassthroughTransform"===event.data.msgType?(encoder.setupPassthroughTransform(event.data.send.readable,event.data.send.writable),encoder.setupPassthroughTransform(event.data.receive.readable,event.data.receive.writable)):"RedPayloadType"===event.data.msgType?encoder.setRedPayloadType(event.data.payloadType):"OpusPayloadType"===event.data.msgType?encoder.setOpusPayloadType(event.data.payloadType):"UpdateNumRedundantEncodings"===event.data.msgType?encoder.setNumRedundantEncodings(event.data.numRedundantEncodings):"Enable"===event.data.msgType?encoder.setRedundancyEnabled(!0):"Disable"===event.data.msgType&&encoder.setRedundancyEnabled(!1)}}static log(msg){RedundantAudioEncoder.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${msg}`})}static getNumRedundantEncodingsForPacketLoss(packetLoss){let recommendedRedundantEncodings=0,shouldTurnOffRed=!1;return packetLoss<=8?recommendedRedundantEncodings=0:packetLoss<=18?recommendedRedundantEncodings=1:packetLoss<=75?recommendedRedundantEncodings=2:(recommendedRedundantEncodings=0,shouldTurnOffRed=!0),[recommendedRedundantEncodings,shouldTurnOffRed]}setupPassthroughTransform(readable,writable){RedundantAudioEncoder.log("Setting up passthrough transform"),readable.pipeTo(writable)}setupSenderTransform(readable,writable){RedundantAudioEncoder.log("Setting up sender RED transform");const transformStream=new TransformStream({transform:this.senderTransform.bind(this)});readable.pipeThrough(transformStream).pipeTo(writable)}setupReceiverTransform(readable,writable){RedundantAudioEncoder.log("Setting up receiver RED transform");const transformStream=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});readable.pipeThrough(transformStream).pipeTo(writable)}setRedPayloadType(payloadType){this.redPayloadType=payloadType,RedundantAudioEncoder.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(payloadType){this.opusPayloadType=payloadType,RedundantAudioEncoder.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(numRedundantEncodings){this.numRedundantEncodings=numRedundantEncodings,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),RedundantAudioEncoder.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(enabled){this.redundancyEnabled=enabled,RedundantAudioEncoder.log("redundancy "+(this.redundancyEnabled?"enabled":"disabled"))}enqueueAudioFrameIfPayloadSizeIsValid(frame,controller){frame.data.byteLength>this.maxAudioPayloadSizeBytes||controller.enqueue(frame)}senderTransform(frame,controller){if(frame.getMetadata().payloadType!==this.redPayloadType)return void this.enqueueAudioFrameIfPayloadSizeIsValid(frame,controller);const primaryPayloadBuffer=this.getPrimaryPayload(frame.timestamp,frame.data);if(!primaryPayloadBuffer)return void this.enqueueAudioFrameIfPayloadSizeIsValid(frame,controller);const encodedBuffer=this.encode(frame.timestamp,primaryPayloadBuffer);encodedBuffer?(frame.data=encodedBuffer,this.enqueueAudioFrameIfPayloadSizeIsValid(frame,controller)):this.enqueueAudioFrameIfPayloadSizeIsValid(frame,controller)}getPrimaryPayload(primaryTimestamp,frame){const encodings=this.splitEncodings(primaryTimestamp,frame);return!encodings||encodings.length<1?null:encodings[encodings.length-1].payload}splitEncodings(primaryTimestamp,frame,getFecInfo=!1,primarySequenceNumber=void 0){const payload=new DataView(frame);let payloadSizeBytes=payload.byteLength,totalPayloadSizeBytes=0,totalHeaderSizeBytes=0,primaryPayloadSizeBytes=0,payloadOffset=0,gotLastBlock=!1;const encodings=new Array,redundantEncodingBlockLengths=new Array,redundantEncodingTimestamps=new Array;for(;payloadSizeBytes>0;){if(gotLastBlock=0==(128&payload.getUint8(payloadOffset)),gotLastBlock){if((127&payload.getUint8(payloadOffset))!==this.opusPayloadType)return null;if(totalPayloadSizeBytes+=this.redLastHeaderSizeBytes,totalHeaderSizeBytes+=this.redLastHeaderSizeBytes,totalPayloadSizeBytes>=payload.byteLength)return null;primaryPayloadSizeBytes=payload.byteLength-totalPayloadSizeBytes;break}{if(payloadSizeBytes<this.redHeaderSizeBytes)return null;const blockLength=((3&payload.getUint8(payloadOffset+2))<<8)+payload.getUint8(payloadOffset+3);redundantEncodingBlockLengths.push(blockLength);const timestamp=primaryTimestamp-(payload.getUint16(payloadOffset+1)>>2);redundantEncodingTimestamps.push(timestamp),totalPayloadSizeBytes+=blockLength+this.redHeaderSizeBytes,totalHeaderSizeBytes+=this.redHeaderSizeBytes,payloadOffset+=this.redHeaderSizeBytes,payloadSizeBytes-=this.redHeaderSizeBytes}}if(!gotLastBlock)return void 0!==primarySequenceNumber?(encodings.push({payload:frame,isRedundant:!1,seq:primarySequenceNumber}),encodings):null;let redundantPayloadOffset=totalHeaderSizeBytes;for(let i=0;i<redundantEncodingTimestamps.length;i++){const redundantPayloadBuffer=new ArrayBuffer(redundantEncodingBlockLengths[i]);new Uint8Array(redundantPayloadBuffer).set(new Uint8Array(payload.buffer,redundantPayloadOffset,redundantEncodingBlockLengths[i]),0);const encoding={timestamp:redundantEncodingTimestamps[i],payload:redundantPayloadBuffer,isRedundant:!0};getFecInfo&&(encoding.hasFec=this.opusPacketHasFec(new DataView(redundantPayloadBuffer),redundantPayloadBuffer.byteLength)),encodings.push(encoding),redundantPayloadOffset+=redundantEncodingBlockLengths[i]}const primaryPayloadOffset=payload.byteLength-primaryPayloadSizeBytes,primaryPayloadBuffer=new ArrayBuffer(primaryPayloadSizeBytes);new Uint8Array(primaryPayloadBuffer).set(new Uint8Array(payload.buffer,primaryPayloadOffset,primaryPayloadSizeBytes),0);const encoding={timestamp:primaryTimestamp,payload:primaryPayloadBuffer,isRedundant:!1,seq:primarySequenceNumber};return getFecInfo&&(encoding.hasFec=this.opusPacketHasFec(new DataView(primaryPayloadBuffer),primaryPayloadBuffer.byteLength)),encodings.push(encoding),encodings}encode(primaryTimestamp,primaryPayload){const primaryPayloadSize=primaryPayload.byteLength;if(0===primaryPayloadSize||primaryPayloadSize>=this.maxRedPacketSizeBytes||primaryPayloadSize>=this.maxAudioPayloadSizeBytes)return null;const numRedundantEncodings=this.numRedundantEncodings;let headerSizeBytes=this.redLastHeaderSizeBytes,payloadSizeBytes=primaryPayloadSize,bytesAvailable=this.maxAudioPayloadSizeBytes-primaryPayloadSize-headerSizeBytes;const redundantEncodingTimestamps=new Array,redundantEncodingPayloads=new Array;if(this.redundancyEnabled){let redundantTimestamp=this.uint32WrapAround(primaryTimestamp-this.redPacketizationTime*this.redPacketDistance);for(let i=0;i<numRedundantEncodings&&!(this.uint32WrapAround(primaryTimestamp-redundantTimestamp)>=this.maxRedTimestampOffset);i++){let findTimestamp=redundantTimestamp,encoding=this.encodingHistory.find((e=>e.timestamp===findTimestamp));if(encoding||(findTimestamp=this.uint32WrapAround(redundantTimestamp-this.redPacketizationTime),encoding=this.encodingHistory.find((e=>e.timestamp===findTimestamp))),encoding){const redundantEncodingSizeBytes=encoding.payload.byteLength;if(bytesAvailable<this.redHeaderSizeBytes+redundantEncodingSizeBytes)break;bytesAvailable-=this.redHeaderSizeBytes+redundantEncodingSizeBytes,headerSizeBytes+=this.redHeaderSizeBytes,payloadSizeBytes+=redundantEncodingSizeBytes,redundantEncodingTimestamps.unshift(encoding.timestamp),redundantEncodingPayloads.unshift(encoding.payload)}redundantTimestamp-=this.redPacketizationTime*this.redPacketDistance,redundantTimestamp=this.uint32WrapAround(redundantTimestamp)}}const redPayloadBuffer=new ArrayBuffer(headerSizeBytes+payloadSizeBytes),redPayloadView=new DataView(redPayloadBuffer);let redPayloadOffset=0;for(let i=0;i<redundantEncodingTimestamps.length;i++){const timestampDelta=primaryTimestamp-redundantEncodingTimestamps[i];redPayloadView.setUint8(redPayloadOffset,128|this.opusPayloadType),redPayloadView.setUint16(redPayloadOffset+1,timestampDelta<<2|redundantEncodingPayloads[i].byteLength>>8),redPayloadView.setUint8(redPayloadOffset+3,255&redundantEncodingPayloads[i].byteLength),redPayloadOffset+=this.redHeaderSizeBytes}redPayloadView.setUint8(redPayloadOffset,this.opusPayloadType),redPayloadOffset+=this.redLastHeaderSizeBytes;const redPayloadArray=new Uint8Array(redPayloadBuffer);for(let i=0;i<redundantEncodingPayloads.length;i++)redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]),redPayloadOffset),redPayloadOffset+=redundantEncodingPayloads[i].byteLength;return redPayloadArray.set(new Uint8Array(primaryPayload),redPayloadOffset),redPayloadOffset+=primaryPayload.byteLength,redPayloadOffset!==headerSizeBytes+payloadSizeBytes?null:(this.updateEncodingHistory(primaryTimestamp,primaryPayload),redPayloadBuffer)}updateEncodingHistory(primaryTimestamp,primaryPayload){for(const encoding of this.encodingHistory){const maxTimestampDelta=this.redPacketizationTime*this.redMaxRecoveryDistance;if(!(primaryTimestamp-encoding.timestamp>=maxTimestampDelta))break;this.encodingHistory.shift()}const packet=new DataView(primaryPayload);(this.opusPacketIsCeltOnly(packet)||this.opusPacketHasVoiceActivity(packet,packet.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:primaryTimestamp,payload:primaryPayload}))}initializePacketLogs(){const packetLogSize=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(packetLogSize),index:0,windowSize:packetLogSize},this.redRecoveryLog={window:new Array(packetLogSize),index:0,windowSize:packetLogSize},this.fecRecoveryLog={window:new Array(packetLogSize),index:0,windowSize:packetLogSize},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(frame,controller){const frameMetadata=frame.getMetadata();if(frameMetadata.payloadType!==this.redPayloadType)return void this.enqueueAudioFrameIfPayloadSizeIsValid(frame,controller);const encodings=this.splitEncodings(frame.timestamp,frame.data,!0,frameMetadata.sequenceNumber);if(encodings){for(let i=encodings.length-1;i>=0;i--)this.updateLossStats(encodings[i])&&(this.updateRedStats(encodings[i]),this.updateFecStats(encodings[i]));this.maybeReportLossStats(frameMetadata.synchronizationSource,encodings[encodings.length-1].timestamp),this.enqueueAudioFrameIfPayloadSizeIsValid(frame,controller)}else this.enqueueAudioFrameIfPayloadSizeIsValid(frame,controller)}updateLossStats(encoding){if(encoding.isRedundant)return!0;const timestamp=encoding.timestamp,seq=encoding.seq;if(0===this.totalAudioPacketsExpected)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=seq,this.addTimestamp(this.primaryPacketLog,timestamp),!0;const diff=this.int16(seq-this.newestSequenceNumber);return!(diff<-this.maxOutOfOrderPacketDistance)&&(diff<0?this.hasTimestamp(this.primaryPacketLog,timestamp)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,timestamp),this.removeFromRecoveryWindows(timestamp)):diff>1&&(this.totalAudioPacketsLost+=diff-1),diff>0&&(this.totalAudioPacketsExpected+=diff,this.newestSequenceNumber=encoding.seq,this.addTimestamp(this.primaryPacketLog,timestamp)),!0)}updateRedStats(encoding){if(!encoding.isRedundant||0===this.totalAudioPacketsLost)return;const timestamp=encoding.timestamp;this.hasTimestamp(this.primaryPacketLog,timestamp)||(this.hasTimestamp(this.redRecoveryLog,timestamp)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,timestamp)),this.removeTimestamp(this.fecRecoveryLog,timestamp)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(encoding){if(!encoding.hasFec||0===this.totalAudioPacketsLost)return;const fecTimestamp=encoding.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,fecTimestamp)||this.hasTimestamp(this.redRecoveryLog,fecTimestamp)||this.hasTimestamp(this.fecRecoveryLog,fecTimestamp)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,fecTimestamp))}maybeReportLossStats(ssrc,timestamp){void 0===timestamp||timestamp-this.lastLossReportTimestamp<this.lossReportInterval||(RedundantAudioEncoder.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=timestamp)}addTimestamp(packetLog,timestamp){void 0!==timestamp&&(packetLog.window[packetLog.index]=timestamp,packetLog.index=(packetLog.index+1)%packetLog.windowSize)}hasTimestamp(packetLog,timestamp){return!!packetLog.window.find((t=>t===timestamp))}removeTimestamp(packetLog,timestamp){const index=packetLog.window.indexOf(timestamp);return index>=0&&(packetLog.window[index]=void 0,!0)}removeFromRecoveryWindows(timestamp){let removed=this.removeTimestamp(this.redRecoveryLog,timestamp);removed&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,removed=this.removeTimestamp(this.fecRecoveryLog,timestamp),removed&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(num){const mod=4294967296;let res=num;return num>=mod?res=num-mod:num<0&&(res=mod+num),res}int16(num){return num<<16>>16}opusPacketIsCeltOnly(packet){return!!(128&packet.getUint8(0))}opusPacketGetSamplesPerFrame(packet,sampleRateHz){let numSamples,frameSizeOption;return sampleRateHz=Math.round(sampleRateHz),sampleRateHz=Math.min(Math.max(sampleRateHz,-Math.pow(2,32)),Math.pow(2,32)-1),this.opusPacketIsCeltOnly(packet)?(frameSizeOption=packet.getUint8(0)>>3&3,numSamples=(sampleRateHz<<frameSizeOption)/400):96==(96&packet.getUint8(0))?numSamples=8&packet.getUint8(0)?sampleRateHz/50:sampleRateHz/100:(frameSizeOption=packet.getUint8(0)>>3&3,numSamples=3===frameSizeOption?60*sampleRateHz/1e3:(sampleRateHz<<frameSizeOption)/100),numSamples}opusNumSilkFrames(packet){let frameLengthMs=this.opusPacketGetSamplesPerFrame(packet,48e3)/48;switch(frameLengthMs<10&&(frameLengthMs=10),frameLengthMs){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(packet){return 4&packet.getUint8(0)?2:1}opusParseSize(packet,byteOffset,remainingBytes,sizeBytes){return remainingBytes<1?(sizeBytes[0]=-1,-1):packet.getUint8(byteOffset)<252?(sizeBytes[0]=packet.getUint8(byteOffset),1):remainingBytes<2?(sizeBytes[0]=-1,-1):(sizeBytes[0]=4*packet.getUint8(byteOffset+1)+packet.getUint8(byteOffset),2)}opusPacketParseImpl(data,lenBytes,selfDelimited,tocByte,frameOffsets,frameSizes,payloadOffset,packetLenBytes){if(!frameSizes||lenBytes<0)return this.OPUS_BAD_ARG;if(0===lenBytes)return this.OPUS_INVALID_PACKET;let numFrames,numBytesParsed,paddingBytes=0,cbr=!1;const toc=data.getUint8(0);tocByte&&(tocByte[0]=toc);let remainingBytes=lenBytes-1,byteOffset=1,lastSizeBytes=remainingBytes;switch(3&toc){case 0:numFrames=1;break;case 1:if(numFrames=2,cbr=!0,!selfDelimited){if(1&remainingBytes)return this.OPUS_INVALID_PACKET;lastSizeBytes=remainingBytes/2,frameSizes[0][0]=lastSizeBytes}break;case 2:if(numFrames=2,numBytesParsed=this.opusParseSize(data,byteOffset,remainingBytes,frameSizes[0]),remainingBytes-=numBytesParsed,frameSizes[0][0]<0||frameSizes[0][0]>remainingBytes)return this.OPUS_INVALID_PACKET;byteOffset+=numBytesParsed,lastSizeBytes=remainingBytes-frameSizes[0][0];break;default:if(remainingBytes<1)return this.OPUS_INVALID_PACKET;const frameCountByte=data.getUint8(byteOffset++);if(--remainingBytes,numFrames=63&frameCountByte,numFrames<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(data,48e3)*numFrames>5760)return this.OPUS_INVALID_PACKET;if(64&frameCountByte){let paddingCountByte,numPaddingBytes;do{if(remainingBytes<=0)return this.OPUS_INVALID_PACKET;paddingCountByte=data.getUint8(byteOffset++),--remainingBytes,numPaddingBytes=255===paddingCountByte?254:paddingCountByte,remainingBytes-=numPaddingBytes,paddingBytes+=numPaddingBytes}while(255===paddingCountByte)}if(remainingBytes<0)return this.OPUS_INVALID_PACKET;if(cbr=!(128&frameCountByte),cbr){if(!selfDelimited){if(lastSizeBytes=Math.trunc(remainingBytes/numFrames),lastSizeBytes*numFrames!==remainingBytes)return this.OPUS_INVALID_PACKET;for(let i=0;i<numFrames-1;++i)frameSizes[i][0]=lastSizeBytes}}else{lastSizeBytes=remainingBytes;for(let i=0;i<numFrames-1;++i){if(numBytesParsed=this.opusParseSize(data,byteOffset,remainingBytes,frameSizes[i]),remainingBytes-=numBytesParsed,frameSizes[i][0]<0||frameSizes[i][0]>remainingBytes)return this.OPUS_INVALID_PACKET;byteOffset+=numBytesParsed,lastSizeBytes-=numBytesParsed+frameSizes[i][0]}if(lastSizeBytes<0)return this.OPUS_INVALID_PACKET}}if(selfDelimited){if(numBytesParsed=this.opusParseSize(data,byteOffset,remainingBytes,frameSizes[numFrames-1]),remainingBytes-=numBytesParsed,frameSizes[numFrames-1][0]<0||frameSizes[numFrames-1][0]>remainingBytes)return this.OPUS_INVALID_PACKET;if(byteOffset+=numBytesParsed,cbr){if(frameSizes[numFrames-1][0]*numFrames>remainingBytes)return this.OPUS_INVALID_PACKET;for(let i=0;i<numFrames-1;++i)frameSizes[i][0]=frameSizes[numFrames-1][0]}else if(!(numBytesParsed+frameSizes[numFrames-1][0]<=lastSizeBytes))return this.OPUS_INVALID_PACKET}else{if(lastSizeBytes>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;frameSizes[numFrames-1][0]=lastSizeBytes}payloadOffset&&(payloadOffset[0]=byteOffset);for(let i=0;i<numFrames;++i)frameOffsets&&(frameOffsets[i][0]=byteOffset),byteOffset+=frameSizes[i][0];return packetLenBytes&&(packetLenBytes[0]=byteOffset+paddingBytes),numFrames}opusPacketParse(packet,lenBytes,tocByte,frameOffsets,frameSizes,payloadOffset){return this.opusPacketParseImpl(packet,lenBytes,!1,tocByte,frameOffsets,frameSizes,payloadOffset,null)}opusPacketHasVoiceActivity(packet,lenBytes){if(!packet||lenBytes<=0)return 0;if(this.opusPacketIsCeltOnly(packet))return-1;const numSilkFrames=this.opusNumSilkFrames(packet);if(0===numSilkFrames)return-1;const opusFrameOffsets=new Array(this.OPUS_MAX_OPUS_FRAMES),opusFrameSizes=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let i=0;i<this.OPUS_MAX_OPUS_FRAMES;++i)opusFrameOffsets[i]=[void 0],opusFrameSizes[i]=[void 0];const numOpusFrames=this.opusPacketParse(packet,lenBytes,null,opusFrameOffsets,opusFrameSizes,null);if(numOpusFrames<0)return-1;for(let i=0;i<numOpusFrames;++i){if(opusFrameSizes[i][0]<1)continue;if(packet.getUint8(opusFrameOffsets[i][0])>>8-numSilkFrames)return 1;if(2===this.opusPacketGetNumChannels(packet)&&packet.getUint8(opusFrameOffsets[i][0])<<numSilkFrames+1>>8-numSilkFrames)return 1}return 0}opusPacketHasFec(packet,lenBytes){if(!packet||lenBytes<=0)return!1;if(this.opusPacketIsCeltOnly(packet))return!1;const opusFrameOffsets=new Array(this.OPUS_MAX_OPUS_FRAMES),opusFrameSizes=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let i=0;i<this.OPUS_MAX_OPUS_FRAMES;++i)opusFrameOffsets[i]=[void 0],opusFrameSizes[i]=[void 0];if(this.opusPacketParse(packet,lenBytes,null,opusFrameOffsets,opusFrameSizes,null)<0)return!1;if(opusFrameSizes[0][0]<=1)return!1;const numSilkFrames=this.opusNumSilkFrames(packet);if(0===numSilkFrames)return!1;const channels=this.opusPacketGetNumChannels(packet);if(1!==channels&&2!==channels)return!1;for(let i=0;i<channels;i++)if(packet.getUint8(opusFrameOffsets[0][0])&128>>(i+1)*(numSilkFrames+1)-1)return!0;return!1}}exports.default=RedundantAudioEncoder,RedundantAudioEncoder.shouldLog=!1,RedundantAudioEncoder.shouldReportStats=!1},"./node_modules/amazon-chime-sdk-js/build/redundantaudioencoderworkercode/RedundantAudioEncoderWorkerCode.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default="class RedundantAudioEncoder {\n    constructor() {\n        // Each payload must be less than 1024 bytes to fit the 10 bit block length\n        this.maxRedPacketSizeBytes = 1 << 10;\n        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio\n        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio\n        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See\n        // https://crbug.com/1248479.\n        this.maxAudioPayloadSizeBytes = 1000;\n        // Each payload can encode a timestamp delta of 14 bits\n        this.maxRedTimestampOffset = 1 << 14;\n        // 4 byte RED header\n        this.redHeaderSizeBytes = 4;\n        // reduced size for last RED header\n        this.redLastHeaderSizeBytes = 1;\n        // P-Time for Opus 20 msec packets\n        // We do not support other p-times or clock rates\n        this.redPacketizationTime = 960;\n        // distance between redundant payloads, Opus FEC handles a distance of 1\n        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):\n        // Consider making this dynamic\n        this.redPacketDistance = 2;\n        // maximum number of redundant payloads per RTP packet\n        this.maxRedEncodings = 2;\n        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant\n        // payloads have FEC.\n        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;\n        // maximum history of prior payloads to keep\n        // generally we will expire old entries based on timestamp\n        // this limit is in place just to make sure the history does not\n        // grow too large in the case of erroneous timestamp inputs\n        this.maxEncodingHistorySize = 10;\n        // Current number of encodings we want to send\n        // to the remote end. This will be dynamically\n        // updated through the setNumEncodingsFromPacketloss API\n        this.numRedundantEncodings = 0;\n        // Used to enable or disable redundancy\n        // in response to very high packet loss events\n        this.redundancyEnabled = true;\n        // Loss stats are reported to the main thread every 5 seconds.\n        // Since timestamp differences between 2 consecutive packets\n        // give us the number of samples in each channel, 1 second\n        // is equivalent to 48000 samples:\n        // P-time * (1000ms/1s)\n        // = (960 samples/20ms) * (1000ms/1s)\n        // = 48000 samples/s\n        this.lossReportInterval = 48000 * 5;\n        // Maximum distance of a packet from the most recent packet timestamp\n        // that we will consider for recovery.\n        this.maxOutOfOrderPacketDistance = 16;\n        /**\n         * Below are Opus helper methods and constants.\n         */\n        this.OPUS_BAD_ARG = -1;\n        this.OPUS_INVALID_PACKET = -4;\n        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).\n        this.OPUS_MAX_OPUS_FRAMES = 48;\n        // Max number of bytes that any individual Opus frame can have.\n        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;\n        this.encodingHistory = new Array();\n        this.opusPayloadType = 0;\n        this.redPayloadType = 0;\n        this.initializePacketLogs();\n    }\n    /**\n     * Creates an instance of RedundantAudioEncoder and sets up callbacks.\n     */\n    static initializeWorker() {\n        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');\n        const encoder = new RedundantAudioEncoder();\n        // RED encoding is done using WebRTC Encoded Transform\n        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md\n        // Check the DedicatedWorkerGlobalScope for existence of\n        // RTCRtpScriptTransformer interface. If exists, then\n        // RTCRtpScriptTransform is supported by this browser.\n        // @ts-ignore\n        if (self.RTCRtpScriptTransformer) {\n            // @ts-ignore\n            self.onrtctransform = (event) => {\n                if (event.transformer.options.type === 'SenderTransform') {\n                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);\n                }\n                else if (event.transformer.options.type === 'ReceiverTransform') {\n                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);\n                }\n                else if (event.transformer.options.type === 'PassthroughTransform') {\n                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);\n                }\n            };\n        }\n        self.onmessage = (event) => {\n            if (event.data.msgType === 'StartRedWorker') {\n                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);\n                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);\n            }\n            else if (event.data.msgType === 'PassthroughTransform') {\n                encoder.setupPassthroughTransform(event.data.send.readable, event.data.send.writable);\n                encoder.setupPassthroughTransform(event.data.receive.readable, event.data.receive.writable);\n            }\n            else if (event.data.msgType === 'RedPayloadType') {\n                encoder.setRedPayloadType(event.data.payloadType);\n            }\n            else if (event.data.msgType === 'OpusPayloadType') {\n                encoder.setOpusPayloadType(event.data.payloadType);\n            }\n            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {\n                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);\n            }\n            else if (event.data.msgType === 'Enable') {\n                encoder.setRedundancyEnabled(true);\n            }\n            else if (event.data.msgType === 'Disable') {\n                encoder.setRedundancyEnabled(false);\n            }\n        };\n    }\n    /**\n     * Post logs to the main thread\n     */\n    static log(msg) {\n        if (RedundantAudioEncoder.shouldLog) {\n            // @ts-ignore\n            self.postMessage({\n                type: 'REDWorkerLog',\n                log: `[AudioRed] ${msg}`,\n            });\n        }\n    }\n    /**\n     * Returns the number of encodings based on packetLoss value. This is used by `DefaultTransceiverController` to\n     * determine when to alert the encoder to update the number of encodings. It also determines if we need to\n     * turn off red in cases of very high packet loss to avoid congestion collapse.\n     */\n    static getNumRedundantEncodingsForPacketLoss(packetLoss) {\n        let recommendedRedundantEncodings = 0;\n        let shouldTurnOffRed = false;\n        if (packetLoss <= 8) {\n            recommendedRedundantEncodings = 0;\n        }\n        else if (packetLoss <= 18) {\n            recommendedRedundantEncodings = 1;\n        }\n        else if (packetLoss <= 75) {\n            recommendedRedundantEncodings = 2;\n        }\n        else {\n            recommendedRedundantEncodings = 0;\n            shouldTurnOffRed = true;\n        }\n        return [recommendedRedundantEncodings, shouldTurnOffRed];\n    }\n    /**\n     * Sets up a passthrough (no-op) transform for the given streams.\n     */\n    setupPassthroughTransform(readable, writable) {\n        RedundantAudioEncoder.log('Setting up passthrough transform');\n        readable.pipeTo(writable);\n    }\n    /**\n     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.\n     */\n    setupSenderTransform(readable, writable) {\n        RedundantAudioEncoder.log('Setting up sender RED transform');\n        const transformStream = new TransformStream({\n            transform: this.senderTransform.bind(this),\n        });\n        readable.pipeThrough(transformStream).pipeTo(writable);\n        return;\n    }\n    /**\n     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.\n     */\n    setupReceiverTransform(readable, writable) {\n        RedundantAudioEncoder.log('Setting up receiver RED transform');\n        const transformStream = new TransformStream({\n            transform: this.receivePacketLogTransform.bind(this),\n        });\n        readable.pipeThrough(transformStream).pipeTo(writable);\n        return;\n    }\n    /**\n     * Set the RED payload type ideally obtained from local offer.\n     */\n    setRedPayloadType(payloadType) {\n        this.redPayloadType = payloadType;\n        RedundantAudioEncoder.log(`red payload type set to ${this.redPayloadType}`);\n    }\n    /**\n     * Set the opus payload type ideally obtained from local offer.\n     */\n    setOpusPayloadType(payloadType) {\n        this.opusPayloadType = payloadType;\n        RedundantAudioEncoder.log(`opus payload type set to ${this.opusPayloadType}`);\n    }\n    /**\n     * Set the number of redundant encodings\n     */\n    setNumRedundantEncodings(numRedundantEncodings) {\n        this.numRedundantEncodings = numRedundantEncodings;\n        if (this.numRedundantEncodings > this.maxRedEncodings) {\n            this.numRedundantEncodings = this.maxRedEncodings;\n        }\n        RedundantAudioEncoder.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`);\n    }\n    /**\n     * Enable or disable redundancy in response to\n     * high packet loss event.\n     */\n    setRedundancyEnabled(enabled) {\n        this.redundancyEnabled = enabled;\n        RedundantAudioEncoder.log(`redundancy ${this.redundancyEnabled ? 'enabled' : 'disabled'}`);\n    }\n    /**\n     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by\n     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than\n     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will\n     * encounter this error and will permanently stop sending or receiving audio.\n     */\n    enqueueAudioFrameIfPayloadSizeIsValid(\n    // @ts-ignore\n    frame, controller) {\n        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)\n            return;\n        controller.enqueue(frame);\n    }\n    /**\n     * Receives encoded frames and modifies as needed before sending to transport.\n     */\n    senderTransform(\n    // @ts-ignore\n    frame, controller) {\n        const frameMetadata = frame.getMetadata();\n        // @ts-ignore\n        if (frameMetadata.payloadType !== this.redPayloadType) {\n            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);\n            return;\n        }\n        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);\n        if (!primaryPayloadBuffer) {\n            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);\n            return;\n        }\n        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);\n        /* istanbul ignore next */\n        if (!encodedBuffer) {\n            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);\n            return;\n        }\n        frame.data = encodedBuffer;\n        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);\n        return;\n    }\n    /**\n     * Get the primary payload from encoding\n     */\n    getPrimaryPayload(primaryTimestamp, frame) {\n        const encodings = this.splitEncodings(primaryTimestamp, frame);\n        if (!encodings || encodings.length < 1)\n            return null;\n        return encodings[encodings.length - 1].payload;\n    }\n    /**\n     * Split up the encoding received into primary and redundant encodings\n     * These will be ordered oldest to newest which is the same ordering\n     * in the RTP red payload.\n     */\n    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {\n        // process RED headers (according to RFC 2198)\n        //   0                   1                   2                   3\n        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n        //  |F|   block PT  |  timestamp offset         |   block length    |\n        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n        //\n        // last header\n        //   0 1 2 3 4 5 6 7\n        //  +-+-+-+-+-+-+-+-+\n        //  |0|   Block PT  |\n        //  +-+-+-+-+-+-+-+-+\n        const payload = new DataView(frame);\n        let payloadSizeBytes = payload.byteLength;\n        let totalPayloadSizeBytes = 0;\n        let totalHeaderSizeBytes = 0;\n        let primaryPayloadSizeBytes = 0;\n        let payloadOffset = 0;\n        let gotLastBlock = false;\n        const encodings = new Array();\n        const redundantEncodingBlockLengths = new Array();\n        const redundantEncodingTimestamps = new Array();\n        while (payloadSizeBytes > 0) {\n            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;\n            if (gotLastBlock) {\n                // Bits 1 through 7 are payload type\n                const payloadType = payload.getUint8(payloadOffset) & 0x7f;\n                // Unexpected payload type. This is a bad packet.\n                if (payloadType !== this.opusPayloadType) {\n                    return null;\n                }\n                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;\n                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;\n                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This\n                // is a bad packet.\n                if (totalPayloadSizeBytes >= payload.byteLength) {\n                    return null;\n                }\n                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;\n                break;\n            }\n            else {\n                if (payloadSizeBytes < this.redHeaderSizeBytes) {\n                    return null;\n                }\n                // Bits 22 through 31 are payload length\n                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);\n                redundantEncodingBlockLengths.push(blockLength);\n                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;\n                const timestamp = primaryTimestamp - timestampOffset;\n                redundantEncodingTimestamps.push(timestamp);\n                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;\n                totalHeaderSizeBytes += this.redHeaderSizeBytes;\n                payloadOffset += this.redHeaderSizeBytes;\n                payloadSizeBytes -= this.redHeaderSizeBytes;\n            }\n        }\n        // The last block was never found. The packet we received\n        // does not have a good RED payload.\n        if (!gotLastBlock) {\n            // Note that sequence numbers only exist for\n            // incoming audio frames.\n            if (primarySequenceNumber !== undefined) {\n                // This could be a possible padding packet used\n                // for BWE with a good sequence number.\n                // Create a dummy encoding to make sure loss values\n                // are calculated correctly by consuming sequence number.\n                // Note that for the receive side, we process packets only\n                // for loss/recovery calculations and forward the original\n                // packet without changing it even in the error case.\n                encodings.push({\n                    payload: frame,\n                    isRedundant: false,\n                    seq: primarySequenceNumber,\n                });\n                return encodings;\n            }\n            // This is a bad packet.\n            return null;\n        }\n        let redundantPayloadOffset = totalHeaderSizeBytes;\n        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {\n            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);\n            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);\n            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);\n            const encoding = {\n                timestamp: redundantEncodingTimestamps[i],\n                payload: redundantPayloadBuffer,\n                isRedundant: true,\n            };\n            if (getFecInfo) {\n                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);\n            }\n            encodings.push(encoding);\n            redundantPayloadOffset += redundantEncodingBlockLengths[i];\n        }\n        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;\n        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);\n        const primaryArray = new Uint8Array(primaryPayloadBuffer);\n        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);\n        const encoding = {\n            timestamp: primaryTimestamp,\n            payload: primaryPayloadBuffer,\n            isRedundant: false,\n            seq: primarySequenceNumber,\n        };\n        if (getFecInfo) {\n            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);\n        }\n        encodings.push(encoding);\n        return encodings;\n    }\n    /**\n     * Create a new encoding with current primary payload and the older payloads of choice.\n     */\n    encode(primaryTimestamp, primaryPayload) {\n        const primaryPayloadSize = primaryPayload.byteLength;\n        // Payload size needs to be valid.\n        if (primaryPayloadSize === 0 ||\n            primaryPayloadSize >= this.maxRedPacketSizeBytes ||\n            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {\n            return null;\n        }\n        const numRedundantEncodings = this.numRedundantEncodings;\n        let headerSizeBytes = this.redLastHeaderSizeBytes;\n        let payloadSizeBytes = primaryPayloadSize;\n        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;\n        const redundantEncodingTimestamps = new Array();\n        const redundantEncodingPayloads = new Array();\n        // If redundancy is disabled then only send the primary payload\n        if (this.redundancyEnabled) {\n            // Determine how much redundancy we can fit into our packet\n            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);\n            for (let i = 0; i < numRedundantEncodings; i++) {\n                // Do not add redundant encodings that are beyond the maximum timestamp offset.\n                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {\n                    break;\n                }\n                let findTimestamp = redundantTimestamp;\n                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);\n                if (!encoding) {\n                    // If not found or not important then look for the previous packet.\n                    // The current packet may have included FEC for the previous, so just\n                    // use the previous packet instead provided that it has voice activity.\n                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);\n                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);\n                }\n                if (encoding) {\n                    const redundantEncodingSizeBytes = encoding.payload.byteLength;\n                    // Only add redundancy if there are enough bytes available.\n                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)\n                        break;\n                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;\n                    headerSizeBytes += this.redHeaderSizeBytes;\n                    payloadSizeBytes += redundantEncodingSizeBytes;\n                    redundantEncodingTimestamps.unshift(encoding.timestamp);\n                    redundantEncodingPayloads.unshift(encoding.payload);\n                }\n                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;\n                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);\n            }\n        }\n        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);\n        const redPayloadView = new DataView(redPayloadBuffer);\n        // Add redundant encoding header(s) to new buffer\n        let redPayloadOffset = 0;\n        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {\n            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];\n            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);\n            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));\n            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);\n            redPayloadOffset += this.redHeaderSizeBytes;\n        }\n        // Add primary encoding header to new buffer\n        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);\n        redPayloadOffset += this.redLastHeaderSizeBytes;\n        // Add redundant payload(s) to new buffer\n        const redPayloadArray = new Uint8Array(redPayloadBuffer);\n        for (let i = 0; i < redundantEncodingPayloads.length; i++) {\n            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);\n            redPayloadOffset += redundantEncodingPayloads[i].byteLength;\n        }\n        // Add primary payload to new buffer\n        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);\n        redPayloadOffset += primaryPayload.byteLength;\n        /* istanbul ignore next */\n        // Sanity check that we got the expected total payload size.\n        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)\n            return null;\n        this.updateEncodingHistory(primaryTimestamp, primaryPayload);\n        return redPayloadBuffer;\n    }\n    /**\n     * Update the encoding history with the latest primary encoding\n     */\n    updateEncodingHistory(primaryTimestamp, primaryPayload) {\n        // Remove encodings from the history if they are too old.\n        for (const encoding of this.encodingHistory) {\n            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;\n            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {\n                this.encodingHistory.shift();\n            }\n            else {\n                break;\n            }\n        }\n        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is\n        // a CELT-only packet or contains voice activity.\n        const packet = new DataView(primaryPayload);\n        if (this.opusPacketIsCeltOnly(packet) ||\n            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {\n            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.\n            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory\n            // usage is bounded. In this case, just clear the history and start over from empty.\n            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)\n                this.encodingHistory.length = 0;\n            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });\n        }\n    }\n    /**\n     * Initialize packet logs and metric values.\n     */\n    initializePacketLogs() {\n        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for\n        // packets that have already been received but are outside of the max out-of-order distance.\n        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;\n        this.primaryPacketLog = {\n            window: new Array(packetLogSize),\n            index: 0,\n            windowSize: packetLogSize,\n        };\n        this.redRecoveryLog = {\n            window: new Array(packetLogSize),\n            index: 0,\n            windowSize: packetLogSize,\n        };\n        this.fecRecoveryLog = {\n            window: new Array(packetLogSize),\n            index: 0,\n            windowSize: packetLogSize,\n        };\n        this.totalAudioPacketsExpected = 0;\n        this.totalAudioPacketsLost = 0;\n        this.totalAudioPacketsRecoveredRed = 0;\n        this.totalAudioPacketsRecoveredFec = 0;\n    }\n    /**\n     * Receives encoded frames from the server\n     * and adds the timestamps to a packet log\n     * to calculate an approximate recovery metric.\n     */\n    receivePacketLogTransform(\n    // @ts-ignore\n    frame, controller) {\n        const frameMetadata = frame.getMetadata();\n        // @ts-ignore\n        if (frameMetadata.payloadType !== this.redPayloadType) {\n            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);\n            return;\n        }\n        // @ts-ignore\n        const encodings = this.splitEncodings(frame.timestamp, frame.data, \n        /*getFecInfo*/ true, frameMetadata.sequenceNumber);\n        if (!encodings) {\n            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);\n            return;\n        }\n        for (let i = encodings.length - 1; i >= 0; i--) {\n            if (this.updateLossStats(encodings[i])) {\n                this.updateRedStats(encodings[i]);\n                this.updateFecStats(encodings[i]);\n            }\n        }\n        this.maybeReportLossStats(frameMetadata.synchronizationSource, encodings[encodings.length - 1].timestamp);\n        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);\n    }\n    /**\n     * Adds a timestamp to the primary packet log.\n     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking\n     * at the difference between timestamps.\n     *\n     * @param encoding : The encoding to be analyzed\n     * @returns false if sequence number was greater than max out of order distance\n     *          true otherwise\n     */\n    updateLossStats(encoding) {\n        if (encoding.isRedundant)\n            return true;\n        const timestamp = encoding.timestamp;\n        const seq = encoding.seq;\n        if (this.totalAudioPacketsExpected === 0) {\n            this.totalAudioPacketsExpected = 1;\n            this.newestSequenceNumber = seq;\n            this.addTimestamp(this.primaryPacketLog, timestamp);\n            return true;\n        }\n        const diff = this.int16(seq - this.newestSequenceNumber);\n        if (diff < -this.maxOutOfOrderPacketDistance)\n            return false;\n        if (diff < 0) {\n            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {\n                if (this.totalAudioPacketsLost > 0)\n                    this.totalAudioPacketsLost--;\n                this.addTimestamp(this.primaryPacketLog, timestamp);\n                this.removeFromRecoveryWindows(timestamp);\n            }\n        }\n        else if (diff > 1) {\n            this.totalAudioPacketsLost += diff - 1;\n        }\n        if (diff > 0) {\n            this.totalAudioPacketsExpected += diff;\n            this.newestSequenceNumber = encoding.seq;\n            this.addTimestamp(this.primaryPacketLog, timestamp);\n        }\n        return true;\n    }\n    /**\n     * Adds a timestamp to the red recovery log if it is not present in\n     * the primary packet log and if it's not too old.\n     *\n     * @param encoding : The encoding to be analyzed\n     */\n    updateRedStats(encoding) {\n        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)\n            return;\n        const timestamp = encoding.timestamp;\n        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {\n            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {\n                this.totalAudioPacketsRecoveredRed++;\n                this.addTimestamp(this.redRecoveryLog, timestamp);\n            }\n            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {\n                /* istanbul ignore else */\n                if (this.totalAudioPacketsRecoveredFec > 0)\n                    this.totalAudioPacketsRecoveredFec--;\n            }\n        }\n    }\n    /**\n     * Adds a timestamp to the fec recovery log if it is not present in\n     * the primary packet log and red recovery log and if it is not too old.\n     *\n     * @param encoding : The encoding to be analyzed\n     */\n    updateFecStats(encoding) {\n        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)\n            return;\n        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;\n        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||\n            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||\n            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {\n            return;\n        }\n        this.totalAudioPacketsRecoveredFec++;\n        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);\n    }\n    /**\n     * Reports loss metrics to DefaultTransceiverController\n     *\n     * @param timestamp : Timestamp of most recent primary packet\n     */\n    maybeReportLossStats(ssrc, timestamp) {\n        if (timestamp === undefined ||\n            timestamp - this.lastLossReportTimestamp < this.lossReportInterval)\n            return;\n        /* istanbul ignore next */\n        if (RedundantAudioEncoder.shouldReportStats) {\n            // @ts-ignore\n            self.postMessage({\n                type: 'RedundantAudioEncoderStats',\n                ssrc,\n                totalAudioPacketsLost: this.totalAudioPacketsLost,\n                totalAudioPacketsExpected: this.totalAudioPacketsExpected,\n                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,\n                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,\n            });\n        }\n        this.lastLossReportTimestamp = timestamp;\n    }\n    /**\n     * Adds a timestamp to a packet log\n     *\n     * @param packetLog : The packetlog to add the timestamp to\n     * @param timestamp : The timestamp that should be added\n     */\n    addTimestamp(packetLog, timestamp) {\n        if (timestamp === undefined) {\n            return;\n        }\n        packetLog.window[packetLog.index] = timestamp;\n        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;\n    }\n    /**\n     * Checks if a timestamp is in a packetlog\n     *\n     * @param packetLog : The packetlog to search\n     * @param timestamp : The timestamp to search for\n     * @returns true if timestamp is present, false otherwise\n     */\n    hasTimestamp(packetLog, timestamp) {\n        const element = packetLog.window.find(t => t === timestamp);\n        return !!element;\n    }\n    /**\n     * Removes a timestamp from a packet log\n     *\n     * @param packetLog : The packetlog from which the timestamp should be removed\n     * @param timestamp : The timestamp to be removed\n     * @returns true if timestamp was present in the log and removed, false otherwise\n     */\n    removeTimestamp(packetLog, timestamp) {\n        const index = packetLog.window.indexOf(timestamp);\n        if (index >= 0) {\n            packetLog.window[index] = undefined;\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Removes a timestamp from red and fec recovery windows.\n     *\n     * @param timestamp : The timestamp to be removed\n     */\n    removeFromRecoveryWindows(timestamp) {\n        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);\n        if (removed) {\n            if (this.totalAudioPacketsRecoveredRed > 0)\n                this.totalAudioPacketsRecoveredRed--;\n        }\n        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);\n        if (removed) {\n            if (this.totalAudioPacketsRecoveredFec > 0)\n                this.totalAudioPacketsRecoveredFec--;\n        }\n    }\n    /**\n     * Converts the supplied argument to 32-bit unsigned integer\n     */\n    uint32WrapAround(num) {\n        const mod = 4294967296; // 2^32\n        let res = num;\n        if (num >= mod) {\n            res = num - mod;\n        }\n        else if (num < 0) {\n            res = mod + num;\n        }\n        return res;\n    }\n    /**\n     * Converts the supplied argument to 16-bit signed integer\n     */\n    int16(num) {\n        return (num << 16) >> 16;\n    }\n    /**\n     * Determines if an Opus packet is in CELT-only mode.\n     *\n     * @param packet Opus packet.\n     * @returns `true` if the packet is in CELT-only mode.\n     */\n    opusPacketIsCeltOnly(packet) {\n        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):\n        //  0\n        //  0 1 2 3 4 5 6 7\n        // +-+-+-+-+-+-+-+-+\n        // | config  |s| c |\n        // +-+-+-+-+-+-+-+-+\n        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1\n        // for CELT-only packets.\n        return !!(packet.getUint8(0) & 0x80);\n    }\n    /**\n     * Gets the number of samples per frame from an Opus packet.\n     *\n     * @param packet Opus packet. This must contain at least one byte of data.\n     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will\n     *                     be returned.\n     * @returns Number of samples per frame.\n     */\n    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {\n        // Sample rate must be a 32-bit integer.\n        sampleRateHz = Math.round(sampleRateHz);\n        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);\n        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):\n        //  0\n        //  0 1 2 3 4 5 6 7\n        // +-+-+-+-+-+-+-+-+\n        // | config  |s| c |\n        // +-+-+-+-+-+-+-+-+\n        let numSamples;\n        let frameSizeOption;\n        // Case for CELT-only packet.\n        if (this.opusPacketIsCeltOnly(packet)) {\n            // The lower 3 'config' bits indicate the frame size option.\n            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;\n            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes\n            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be\n            // calculated as follows:\n            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)\n            // = (sample/s) * (1s/400) * 2^(frameSizeOption)\n            // = (sample/s) * 2^(frameSizeOption) * (1s/400)\n            numSamples = (sampleRateHz << frameSizeOption) / 400;\n        }\n        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the\n        // above TOC byte diagram will both be 1.\n        else if ((packet.getUint8(0) & 0x60) === 0x60) {\n            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15\n            // correspond to a 20ms frame size, so the number of samples is calculated as follows:\n            // (sample/s) * (1s/1000ms) * (20ms)\n            // = (sample/s) * (1s/50)\n            //\n            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14\n            // correspond to a 10ms frame size, so the number of samples is calculated as follows:\n            // (sample/s) * (1s/1000ms) * (10ms)\n            // = (sample/s) * (1s/100)\n            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;\n        }\n        // Case for SILK-only packet.\n        else {\n            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.\n            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;\n            if (frameSizeOption === 3) {\n                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:\n                // (sample/s) * (1s/1000ms) * (60ms)\n                // = (sample/s) * (60ms) * (1s/1000ms)\n                numSamples = (sampleRateHz * 60) / 1000;\n            }\n            else {\n                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be\n                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:\n                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)\n                // = (sample/s) * (1s/100) * 2^(frameSizeOption)\n                // = (sample/s) * 2^(frameSizeOption) * (1s/100)\n                numSamples = (sampleRateHz << frameSizeOption) / 100;\n            }\n        }\n        return numSamples;\n    }\n    /**\n     * Gets the number of SILK frames per Opus frame.\n     *\n     * @param packet Opus packet.\n     * @returns Number of SILK frames per Opus frame.\n     */\n    opusNumSilkFrames(packet) {\n        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but\n        // any valid sample rate would work.\n        //\n        // To calculate the length of a frame (with a 48kHz sample rate) in ms:\n        // (samples/frame) * (1s/48000 samples) * (1000ms/s)\n        // = (samples/frame) * (1000ms/48000 samples)\n        // = (samples/frame) * (1ms/48 samples)\n        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;\n        if (frameLengthMs < 10)\n            frameLengthMs = 10;\n        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.\n        switch (frameLengthMs) {\n            case 10:\n            case 20:\n                return 1;\n            case 40:\n                return 2;\n            case 60:\n                return 3;\n            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,\n            // or 60 ms, so we ignore the default case for test coverage.\n            /* istanbul ignore next */\n            default:\n                return 0;\n        }\n    }\n    /**\n     * Gets the number of channels from an Opus packet.\n     *\n     * @param packet Opus packet.\n     * @returns Number of channels.\n     */\n    opusPacketGetNumChannels(packet) {\n        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):\n        //  0\n        //  0 1 2 3 4 5 6 7\n        // +-+-+-+-+-+-+-+-+\n        // | config  |s| c |\n        // +-+-+-+-+-+-+-+-+\n        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.\n        return packet.getUint8(0) & 0x4 ? 2 : 1;\n    }\n    /**\n     * Determine the size (in bytes) of an Opus frame.\n     *\n     * @param packet Opus packet.\n     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.\n     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.\n     * @param sizeBytes Variable to store the parsed frame size (in bytes).\n     * @returns Number of bytes that were parsed to determine the frame size.\n     */\n    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {\n        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.\n        // If there are no remaining bytes to parse the size from, then the size cannot be determined.\n        if (remainingBytes < 1) {\n            sizeBytes[0] = -1;\n            return -1;\n        }\n        // If the first byte is in the range 0...251, then this value is the size of the frame.\n        else if (packet.getUint8(byteOffset) < 252) {\n            sizeBytes[0] = packet.getUint8(byteOffset);\n            return 1;\n        }\n        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size\n        // cannot be determined.\n        else if (remainingBytes < 2) {\n            sizeBytes[0] = -1;\n            return -1;\n        }\n        // The total size of the frame given two size bytes is:\n        // (4 * secondSizeByte) + firstSizeByte\n        else {\n            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);\n            return 2;\n        }\n    }\n    /**\n     * Parse binary data containing an Opus packet into one or more Opus frames.\n     *\n     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the\n     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the\n     *             contained Opus packet.\n     * @param lenBytes Size of the data (in bytes).\n     * @param selfDelimited Indicates if the Opus packet is self-delimiting\n     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).\n     * @param tocByte Optional variable to store the TOC (table of contents) byte.\n     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each\n     *                     Opus frame.\n     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.\n     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the\n     *                      payload.\n     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).\n     * @returns Number of Opus frames.\n     */\n    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {\n        if (!frameSizes || lenBytes < 0)\n            return this.OPUS_BAD_ARG;\n        if (lenBytes === 0)\n            return this.OPUS_INVALID_PACKET;\n        // The number of Opus frames in the packet.\n        let numFrames;\n        // Intermediate storage for the number of bytes parsed to determine the size of a frame.\n        let numBytesParsed;\n        // The number of the padding bytes (excluding the padding count bytes) in the packet.\n        let paddingBytes = 0;\n        // Indicates whether CBR (constant bitrate) framing is used.\n        let cbr = false;\n        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).\n        const toc = data.getUint8(0);\n        // Store the TOC byte.\n        if (tocByte)\n            tocByte[0] = toc;\n        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the\n        // minus 1.\n        let remainingBytes = lenBytes - 1;\n        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.\n        let byteOffset = 1;\n        // The size of the last Opus frame in bytes.\n        let lastSizeBytes = remainingBytes;\n        // Read the `c` bits (i.e. code bits) from the TOC byte.\n        switch (toc & 0x3) {\n            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.\n            case 0:\n                numFrames = 1;\n                break;\n            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.\n            case 1:\n                numFrames = 2;\n                cbr = true;\n                if (!selfDelimited) {\n                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.\n                    if (remainingBytes & 0x1)\n                        return this.OPUS_INVALID_PACKET;\n                    // The sizes of both frames are equal (i.e. half of the number of data bytes).\n                    lastSizeBytes = remainingBytes / 2;\n                    // If `lastSizeBytes` is too large, we will catch it later.\n                    frameSizes[0][0] = lastSizeBytes;\n                }\n                break;\n            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.\n            case 2:\n                numFrames = 2;\n                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);\n                remainingBytes -= numBytesParsed;\n                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.\n                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {\n                    return this.OPUS_INVALID_PACKET;\n                }\n                byteOffset += numBytesParsed;\n                // The size of the second frame is the remaining number of bytes after the first frame.\n                lastSizeBytes = remainingBytes - frameSizes[0][0];\n                break;\n            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to\n            // 120 ms).\n            default:\n                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).\n                if (remainingBytes < 1)\n                    return this.OPUS_INVALID_PACKET;\n                // Frame count byte format:\n                //  0\n                //  0 1 2 3 4 5 6 7\n                // +-+-+-+-+-+-+-+-+\n                // |v|p|     M     |\n                // +-+-+-+-+-+-+-+-+\n                //\n                // Read the frame count byte, which immediately follows the TOC byte.\n                const frameCountByte = data.getUint8(byteOffset++);\n                --remainingBytes;\n                // Read the 'M' bits of the frame count byte, which encode the number of frames.\n                numFrames = frameCountByte & 0x3f;\n                // The number of frames in a code 3 packet must not be 0.\n                if (numFrames <= 0)\n                    return this.OPUS_INVALID_PACKET;\n                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);\n                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded\n                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot\n                // exceed 2880 * 2 = 5760.\n                if (samplesPerFrame * numFrames > 5760)\n                    return this.OPUS_INVALID_PACKET;\n                // Parse padding bytes if the 'p' bit is 1.\n                if (frameCountByte & 0x40) {\n                    let paddingCountByte;\n                    let numPaddingBytes;\n                    // Remove padding bytes (including padding count bytes) from the remaining byte count.\n                    do {\n                        // Sanity check that there are enough bytes to parse and remove the padding.\n                        if (remainingBytes <= 0)\n                            return this.OPUS_INVALID_PACKET;\n                        // Get the next padding count byte.\n                        paddingCountByte = data.getUint8(byteOffset++);\n                        --remainingBytes;\n                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the\n                        // value in the padding count byte.\n                        //\n                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the\n                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.\n                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;\n                        remainingBytes -= numPaddingBytes;\n                        paddingBytes += numPaddingBytes;\n                    } while (paddingCountByte === 255);\n                }\n                // Sanity check that the remaining number of bytes is not negative after removing the padding.\n                if (remainingBytes < 0)\n                    return this.OPUS_INVALID_PACKET;\n                // Read the 'v' bit (i.e. VBR bit).\n                cbr = !(frameCountByte & 0x80);\n                // VBR case\n                if (!cbr) {\n                    lastSizeBytes = remainingBytes;\n                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)\n                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the\n                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.\n                    for (let i = 0; i < numFrames - 1; ++i) {\n                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);\n                        remainingBytes -= numBytesParsed;\n                        // The remaining number of data bytes must be enough to contain each frame.\n                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {\n                            return this.OPUS_INVALID_PACKET;\n                        }\n                        byteOffset += numBytesParsed;\n                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];\n                    }\n                    // Sanity check that the size of the last frame is not negative.\n                    if (lastSizeBytes < 0)\n                        return this.OPUS_INVALID_PACKET;\n                }\n                // CBR case\n                else if (!selfDelimited) {\n                    // The size of each frame is the number of data bytes divided by the number of frames.\n                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);\n                    // The number of data bytes must be a non-negative integer multiple of the number of frames.\n                    if (lastSizeBytes * numFrames !== remainingBytes)\n                        return this.OPUS_INVALID_PACKET;\n                    // All frames have equal size in the undelimited CBR case.\n                    for (let i = 0; i < numFrames - 1; ++i) {\n                        frameSizes[i][0] = lastSizeBytes;\n                    }\n                }\n        }\n        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the\n        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and\n        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.\n        if (selfDelimited) {\n            // The extra frame size byte(s) will always indicate the size of the last frame.\n            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);\n            remainingBytes -= numBytesParsed;\n            // There must be enough data bytes for the last frame.\n            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {\n                return this.OPUS_INVALID_PACKET;\n            }\n            byteOffset += numBytesParsed;\n            // For CBR packets, the sizes of all the frames are equal.\n            if (cbr) {\n                // There must be enough data bytes for all the frames.\n                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {\n                    return this.OPUS_INVALID_PACKET;\n                }\n                for (let i = 0; i < numFrames - 1; ++i) {\n                    frameSizes[i][0] = frameSizes[numFrames - 1][0];\n                }\n            }\n            // At this point, `lastSizeBytes` contains the size of the last frame plus the size of the extra frame size\n            // byte(s), so sanity check that `lastSizeBytes` is the upper bound for the size of the last frame.\n            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {\n                return this.OPUS_INVALID_PACKET;\n            }\n        }\n        // Undelimited case\n        else {\n            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet\n            // (or of all the packets, for the CBR case) is larger than maximum frame size.\n            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)\n                return this.OPUS_INVALID_PACKET;\n            frameSizes[numFrames - 1][0] = lastSizeBytes;\n        }\n        // Store the offset to the start of the payload.\n        if (payloadOffset)\n            payloadOffset[0] = byteOffset;\n        // Store the offsets to the start of each frame.\n        for (let i = 0; i < numFrames; ++i) {\n            if (frameOffsets)\n                frameOffsets[i][0] = byteOffset;\n            byteOffset += frameSizes[i][0];\n        }\n        // Store the length of the Opus packet.\n        if (packetLenBytes)\n            packetLenBytes[0] = byteOffset + paddingBytes;\n        return numFrames;\n    }\n    /**\n     * Parse a single undelimited Opus packet into one or more Opus frames.\n     *\n     * @param packet Opus packet to be parsed.\n     * @param lenBytes Size of the packet (in bytes).\n     * @param tocByte Optional variable to store the TOC (table of contents) byte.\n     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of\n     *                     each Opus frame.\n     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.\n     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the\n     *                      payload.\n     * @returns Number of Opus frames.\n     */\n    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {\n        return this.opusPacketParseImpl(packet, lenBytes, \n        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);\n    }\n    /**\n     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only\n     * packets that do not have VAD information, it returns -1.\n     *\n     * @param packet Opus packet.\n     * @param lenBytes Size of the packet (in bytes).\n     * @returns  0: no frame had the VAD flag set.\n     *           1: at least one frame had the VAD flag set.\n     *          -1: VAD status could not be determined.\n     */\n    opusPacketHasVoiceActivity(packet, lenBytes) {\n        if (!packet || lenBytes <= 0)\n            return 0;\n        // In CELT-only mode, we can not determine whether there is VAD.\n        if (this.opusPacketIsCeltOnly(packet))\n            return -1;\n        const numSilkFrames = this.opusNumSilkFrames(packet);\n        // It is not possible for `opusNumSilkFrames()` to return 0, so we ignore the next sanity check for test coverage.\n        /* istanbul ignore next */\n        if (numSilkFrames === 0)\n            return -1;\n        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);\n        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);\n        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {\n            opusFrameOffsets[i] = [undefined];\n            opusFrameSizes[i] = [undefined];\n        }\n        // Parse packet to get the Opus frames.\n        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);\n        // VAD status cannot be determined for invalid packets.\n        if (numOpusFrames < 0)\n            return -1;\n        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.\n        for (let i = 0; i < numOpusFrames; ++i) {\n            if (opusFrameSizes[i][0] < 1)\n                continue;\n            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):\n            //\n            // Mono case:\n            // +-----------------+----------+\n            // | 1 to 3 VAD bits | LBRR bit |\n            // +-----------------+----------+\n            //\n            // Stereo case:\n            // +---------------------+--------------+----------------------+---------------+\n            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |\n            // +---------------------+--------------+----------------------+---------------+\n            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of\n            // these VAD bits are 1, then voice activity is present.\n            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))\n                return 1;\n            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.\n            const channels = this.opusPacketGetNumChannels(packet);\n            if (channels === 2 &&\n                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {\n                return 1;\n            }\n        }\n        // No voice activity was detected.\n        return 0;\n    }\n    /**\n     * This method is based on Definition of the Opus Audio Codec\n     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on\n     * parsing the LP layer of an Opus packet, particularly the LBRR flag.\n     *\n     * @param packet Opus packet.\n     * @param lenBytes Size of the packet (in bytes).\n     * @returns  true: packet has fec encoding about previous packet.\n     *           false: no fec encoding present.\n     */\n    opusPacketHasFec(packet, lenBytes) {\n        if (!packet || lenBytes <= 0)\n            return false;\n        // In CELT-only mode, packets should not have FEC.\n        if (this.opusPacketIsCeltOnly(packet))\n            return false;\n        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);\n        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);\n        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {\n            opusFrameOffsets[i] = [undefined];\n            opusFrameSizes[i] = [undefined];\n        }\n        // Parse packet to get the Opus frames.\n        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);\n        if (numOpusFrames < 0)\n            return false;\n        /* istanbul ignore next */\n        if (opusFrameSizes[0][0] <= 1)\n            return false;\n        const numSilkFrames = this.opusNumSilkFrames(packet);\n        /* istanbul ignore next */\n        if (numSilkFrames === 0)\n            return false;\n        const channels = this.opusPacketGetNumChannels(packet);\n        /* istanbul ignore next */\n        if (channels !== 1 && channels !== 2)\n            return false;\n        // A frame starts with the LP layer. The LP layer begins with two to eight\n        // header bits.These consist of one VAD bit per SILK frame (up to 3),\n        // followed by a single flag indicating the presence of LBRR frames.\n        // For a stereo packet, these first flags correspond to the mid channel, and\n        // a second set of flags is included for the side channel. Because these are\n        // the first symbols decoded by the range coder and because they are coded\n        // as binary values with uniform probability, they can be extracted directly\n        // from the most significant bits of the first byte of compressed data.\n        for (let i = 0; i < channels; i++) {\n            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))\n                return true;\n        }\n        return false;\n    }\n}\nRedundantAudioEncoder.shouldLog = true;\nRedundantAudioEncoder.shouldReportStats = true;\nRedundantAudioEncoder.initializeWorker();\n"},"./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const TimeoutScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/TimeoutScheduler.js"));class AsyncScheduler extends TimeoutScheduler_1.default{constructor(){super(0)}static nextTick(callback){setTimeout(callback,0)}}exports.default=AsyncScheduler},"./node_modules/amazon-chime-sdk-js/build/scheduler/IntervalScheduler.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class IntervalScheduler{constructor(intervalMs){this.intervalMs=intervalMs}start(callback){this.stop(),this.timer=setInterval(callback,this.intervalMs)}stop(){void 0!==this.timer&&(clearInterval(this.timer),this.timer=void 0)}running(){return void 0!==this.timer}}},"./node_modules/amazon-chime-sdk-js/build/scheduler/TimeoutScheduler.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class TimeoutScheduler{constructor(timeoutMs){this.timeoutMs=timeoutMs,this.timer=null}start(callback){this.stop(),this.timer=setTimeout((()=>{clearTimeout(this.timer),callback()}),this.timeoutMs)}stop(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)}}},"./node_modules/amazon-chime-sdk-js/build/sdp/SDP.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SDPCandidateType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/SDPCandidateType.js")),SDPMediaSection_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/SDPMediaSection.js")),VideoCodecCapability_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/VideoCodecCapability.js"));class SDP{constructor(sdp){this.sdp=sdp}clone(){return new SDP(this.sdp)}static isRTPCandidate(candidate){const match=/candidate[:](\S+) (\d+)/g.exec(candidate);return null!==match&&"1"===match[2]}static linesToSDP(lines){return new SDP(lines.join(SDP.CRLF))}static candidateTypeFromString(candidateType){switch(candidateType){case SDPCandidateType_1.default.Host:return SDPCandidateType_1.default.Host;case SDPCandidateType_1.default.ServerReflexive:return SDPCandidateType_1.default.ServerReflexive;case SDPCandidateType_1.default.PeerReflexive:return SDPCandidateType_1.default.PeerReflexive;case SDPCandidateType_1.default.Relay:return SDPCandidateType_1.default.Relay}return null}static candidateType(sdpLine){const match=/a[=]candidate[:].* typ ([a-z]+) /g.exec(sdpLine);return null===match?null:SDP.candidateTypeFromString(match[1])}static mediaType(sdpLine){const match=/m=(audio|video)/g.exec(sdpLine);if(null!==match)return match[1]}static mid(sdpLine){if(sdpLine.includes("a=mid:"))return sdpLine.replace(/^(a=mid:)/,"")}static direction(sdpLine){const match=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(sdpLine);if(null!==match)return match[1]}static splitLines(blob){return blob.trim().split("\n").map((line=>line.trim()))}static splitSections(sdp){return sdp.split("\nm=").map(((section,index)=>(index>0?"m="+section:section).trim()+SDP.CRLF))}static findActiveCameraSection(sections){let cameraLineIndex=0,hasCamera=!1;for(const sec of sections){if(/^m=video/.test(sec)&&(sec.indexOf("sendrecv")>-1||-1===sec.indexOf("sendonly")&&-1===sec.indexOf("recvonly")&&-1===sec.indexOf("inactive"))){hasCamera=!0;break}cameraLineIndex++}return!1===hasCamera&&(cameraLineIndex=-1),cameraLineIndex}static extractSSRCsFromFIDGroupLine(figGroupLine){return/^a=ssrc-group:FID\s(.+)/.exec(figGroupLine)[1]}static matchPrefix(blob,prefix){return SDP.splitLines(blob).filter((line=>0===line.indexOf(prefix)))}lines(){return this.sdp.split(SDP.CRLF)}hasVideo(){return null!==/^m=video/gm.exec(this.sdp)}hasCandidates(){return null!==/a[=]candidate[:]/g.exec(this.sdp)}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(candidateTypeToExclude){return SDP.linesToSDP(this.lines().filter((line=>SDP.candidateType(line)!==candidateTypeToExclude)))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(SDPCandidateType_1.default.ServerReflexive)}withAudioMaxAverageBitrate(maxAverageBitrate){if(!maxAverageBitrate)return this.clone();maxAverageBitrate=Math.trunc(Math.min(Math.max(maxAverageBitrate,SDP.rfc7587LowestBitrate),SDP.rfc7587HighestBitrate));const srcLines=this.lines(),fmtpAttributes=SDP.findOpusFmtpAttributes(srcLines),dstLines=SDP.updateOpusFmtpAttributes(srcLines,fmtpAttributes,[`maxaveragebitrate=${maxAverageBitrate}`]);return SDP.linesToSDP(dstLines)}withStereoAudio(){const srcLines=this.lines(),fmtpAttributes=SDP.findOpusFmtpAttributes(srcLines),dstLines=SDP.updateOpusFmtpAttributes(srcLines,fmtpAttributes,["stereo=1","sprop-stereo=1"]);return SDP.linesToSDP(dstLines)}static findOpusFmtpAttributes(sdpLines){const opusRtpMapRegex=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let lookingForOpusRtpMap=!1;const fmtpAttributes=[];for(const line of sdpLines)if(line.startsWith("m=audio")&&(fmtpAttributes.push(null),lookingForOpusRtpMap=!0),line.startsWith("m=video")&&(lookingForOpusRtpMap=!1),lookingForOpusRtpMap){const match=opusRtpMapRegex.exec(line);null!==match&&(fmtpAttributes[fmtpAttributes.length-1]=`a=fmtp:${match[1]} `)}return fmtpAttributes}static updateOpusFmtpAttributes(srcLines,fmtpAttributes,additionalParams){const dstLines=[];let fmtpIndex=0,currFmtpAttribute=null;for(const line of srcLines)if(line.startsWith("m=audio")&&(currFmtpAttribute=fmtpAttributes[fmtpIndex],fmtpIndex++),line.startsWith("m=video")&&(currFmtpAttribute=null),currFmtpAttribute&&line.startsWith(currFmtpAttribute)){const oldParameters=line.slice(currFmtpAttribute.length).split(";"),newParameters=[];for(const parameter of oldParameters){additionalParams.findIndex((element=>element.startsWith(parameter.split("=")[0])))<0&&newParameters.push(parameter)}for(const parameter of additionalParams)newParameters.push(parameter);dstLines.push(currFmtpAttribute+newParameters.join(";"))}else dstLines.push(line);return dstLines}withUnifiedPlanFormat(){let originalSdp=this.sdp;return originalSdp.includes("mozilla")?this.clone():(originalSdp=originalSdp.replace("o=-","o=mozilla-chrome"),new SDP(originalSdp))}getUniqueRtpHeaderExtensionId(srcLines){const headerExtensionIds=[];for(const line of srcLines)if(/^a=extmap:/.test(line.trim())){const id=+line.split("a=extmap:")[1].split(" ")[0];headerExtensionIds.includes(id)||headerExtensionIds.push(id)}headerExtensionIds.sort(((a,b)=>a-b));let previousId=0;for(const id of headerExtensionIds){if(id-previousId>1)return previousId+1;previousId=id}return 14===previousId?-1:previousId+1}withVideoLayersAllocationRtpHeaderExtension(previousSdp){return this.withRtpHeaderExtension(previousSdp,SDP.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(previousSdp){return this.withRtpHeaderExtension(previousSdp,SDP.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const srcLines=SDP.splitLines(this.sdp).filter((line=>!line.includes(SDP.dependencyDescriptorRtpHeaderExtensionUrl)));return new SDP(srcLines.join(SDP.CRLF)+SDP.CRLF)}withRtpHeaderExtension(previousSdp,url){const previousId=previousSdp?previousSdp.getRtpHeaderExtensionId(url):-1,id=-1===previousId?this.getUniqueRtpHeaderExtensionId(SDP.splitLines(this.sdp)):previousId,sections=SDP.splitSections(this.sdp),newSections=[];for(let section of sections){if(/^m=video/.test(section)&&-1===SDP.getRtpHeaderExtensionIdInSection(section,url)){const srcLines=SDP.splitLines(section),dstLines=[];if(-1===id||this.hasRtpHeaderExtensionId(id)){newSections.push(section);continue}for(const line of srcLines)if(dstLines.push(line),/^a=sendrecv/.test(line.trim())){const targetLine="a=extmap:"+id+" "+url;dstLines.push(targetLine)}section=dstLines.join(SDP.CRLF)+SDP.CRLF}else if(-1!==previousId&&/^m=video/.test(section)&&SDP.getRtpHeaderExtensionIdInSection(section,url)!==previousId){const srcLines=SDP.splitLines(section),dstLines=[];for(const line of srcLines){if(/^a=extmap:/.test(line.trim())){if(line.split("a=extmap:")[1].split(" ")[1]===url){if(!this.hasRtpHeaderExtensionId(previousId)){const targetLine="a=extmap:"+previousId+" "+url;dstLines.push(targetLine)}continue}}dstLines.push(line)}section=dstLines.join(SDP.CRLF)+SDP.CRLF}newSections.push(section)}const newSdp=newSections.join("");return new SDP(newSdp)}ssrcForVideoSendingSection(){const srcSDP=this.sdp,sections=SDP.splitSections(srcSDP);if(sections.length<2)return"";const cameraLineIndex=SDP.findActiveCameraSection(sections);if(-1===cameraLineIndex)return"";const fidGroupMatch=SDP.matchPrefix(sections[cameraLineIndex],"a=ssrc-group:FID ");if(fidGroupMatch.length<1)return"";const fidGroup=SDP.extractSSRCsFromFIDGroupLine(fidGroupMatch[0]),[videoSSRC1]=fidGroup.split(" ").map((ssrc=>parseInt(ssrc,10)));return videoSSRC1.toString()}videoSendSectionHasDifferentSSRC(prevSdp){const ssrc1=this.ssrcForVideoSendingSection(),ssrc2=prevSdp.ssrcForVideoSendingSection();if(""===ssrc1||""===ssrc2)return!1;return parseInt(ssrc1,10)!==parseInt(ssrc2,10)}removeH264SupportFromSendSection(){const srcSDP=this.sdp,sections=SDP.splitSections(srcSDP),cameraLineIndex=SDP.findActiveCameraSection(sections);if(-1===cameraLineIndex)return new SDP(this.sdp);const cameraSection=sections[cameraLineIndex],cameraSectionLines=SDP.splitLines(cameraSection),payloadTypesForH264=[],primaryPayloadTypeToFeedbackPayloadTypes=new Map;cameraSectionLines.forEach((attribute=>{if(/^a=rtpmap:/.test(attribute)){const payloadMatch=/^a=rtpmap:([0-9]+)\s/.exec(attribute);payloadMatch&&attribute.toLowerCase().includes("h264")&&payloadTypesForH264.push(parseInt(payloadMatch[1],10))}if(/^a=fmtp:/.test(attribute)){const feedbackMatches=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(attribute);if(feedbackMatches&&3===feedbackMatches.length){const feedbackPayloadType=parseInt(feedbackMatches[1],10),primaryPayloadType=parseInt(feedbackMatches[2],10);primaryPayloadTypeToFeedbackPayloadTypes.has(primaryPayloadType)?primaryPayloadTypeToFeedbackPayloadTypes.get(primaryPayloadType).push(feedbackPayloadType):primaryPayloadTypeToFeedbackPayloadTypes.set(primaryPayloadType,[feedbackPayloadType])}}}));const payloadTypesToRemove=new Set;for(const type of payloadTypesForH264){payloadTypesToRemove.add(type);const feedbackTypes=primaryPayloadTypeToFeedbackPayloadTypes.get(type);if(feedbackTypes)for(const feedbackType of feedbackTypes)payloadTypesToRemove.add(feedbackType)}if(payloadTypesForH264.length>0){const mline=cameraSectionLines[0].split(" ");cameraSectionLines[0]=mline.filter((text=>!payloadTypesToRemove.has(parseInt(text)))).join(" ")}const filteredLines=cameraSectionLines.filter((line=>{if(!line.includes("rtpmap")&&!line.includes("rtcp-fb")&&!line.includes("fmtp"))return!0;for(const type of payloadTypesToRemove)if(line.includes(type.toString()))return!1;return!0}));sections[cameraLineIndex]=filteredLines.join(SDP.CRLF)+SDP.CRLF;const newSDP=sections.join("");return new SDP(newSDP)}mediaSections(){const sections=SDP.splitSections(this.sdp);if(sections.length<2)return[];const parsedMediaSections=[];for(let i=1;i<sections.length;i++){const section=new SDPMediaSection_1.default,lines=SDP.splitLines(sections[i]);for(const line of lines){const mediaType=SDP.mediaType(line);if(void 0!==mediaType){section.mediaType=mediaType;continue}const direction=SDP.direction(line);if(void 0!==direction){section.direction=direction;continue}const mid=SDP.mid(line);void 0===mid||(section.mid=mid)}parsedMediaSections.push(section)}return parsedMediaSections}static getRtpHeaderExtensionIdInSection(section,url){const lines=SDP.splitLines(section);for(const line of lines)if(/^a=extmap:/.test(line.trim())){const headerExtension=line.split("a=extmap:")[1].split(" "),id=+headerExtension[0];if(headerExtension[1]===url)return id}return-1}getRtpHeaderExtensionId(url){const sections=SDP.splitSections(this.sdp);for(const section of sections)if(/^m=video/.test(section)){const id=SDP.getRtpHeaderExtensionIdInSection(section,url);if(-1!==id)return id}return-1}hasRtpHeaderExtensionId(targetId){const lines=SDP.splitLines(this.sdp);for(const line of lines)if(/^a=extmap:/.test(line.trim())){if(+line.split("a=extmap:")[1].split(" ")[0]===targetId)return!0}return!1}withVideoSendCodecPreferences(preferences){const srcSDP=this.sdp,sections=SDP.splitSections(srcSDP),cameraLineIndex=SDP.findActiveCameraSection(sections);if(-1===cameraLineIndex)return new SDP(this.sdp);sections[cameraLineIndex]=this.sectionWithCodecPreferences(sections[cameraLineIndex],preferences);const newSDP=sections.join("");return new SDP(newSDP)}sectionWithCodecPreferences(section,preferences){const payloadTypeToCodec=new Map,lines=SDP.splitLines(section);lines.forEach((line=>{if(!line.startsWith("a=rtpmap:"))return;const payloadMatch=/^a=rtpmap:(\d+)\s/.exec(line);if(!payloadMatch)return;const payloadTypeString=payloadMatch[1];for(const preference of preferences){if(!line.includes(`${preference.codecName}/${preference.codecCapability.clockRate}`))continue;let codecMatches=!1;if(void 0!==preference.codecCapability.sdpFmtpLine){let hasVp9ProfileId=!1;for(const prospectiveFmtpLine of lines){if(preference.fmtpLineMatches(prospectiveFmtpLine,parseInt(payloadTypeString))){codecMatches=!0;break}hasVp9ProfileId||(hasVp9ProfileId=prospectiveFmtpLine.startsWith(`a=fmtp:${payloadTypeString} profile-id=`))}preference.equals(VideoCodecCapability_1.default.vp9Profile0())&&!hasVp9ProfileId&&(codecMatches=!0)}else codecMatches=!0;if(codecMatches){payloadTypeToCodec.set(payloadTypeString,preference);break}}}));const payloadTypesToRemove=new Set(payloadTypeToCodec.keys()),mline=lines[0].split(" ").filter((text=>!payloadTypesToRemove.has(text))),orderedPreferedPayloadTypes=Array.from(payloadTypeToCodec.entries()).sort((([_payloadType1,codec1],[_payloadType2,codec2])=>preferences.indexOf(codec1)-preferences.indexOf(codec2))).map((([payloadType,_])=>payloadType));return mline.splice(3,0,...orderedPreferedPayloadTypes),lines[0]=mline.join(" "),lines.join(SDP.CRLF)+SDP.CRLF}highestPriorityVideoSendCodec(){const prioritizedSendVideoCodecCapabilities=this.prioritizedSendVideoCodecCapabilities();return prioritizedSendVideoCodecCapabilities.length>0?prioritizedSendVideoCodecCapabilities[0]:void 0}prioritizedSendVideoCodecCapabilities(){const srcSDP=this.sdp,sections=SDP.splitSections(srcSDP),cameraLineIndex=SDP.findActiveCameraSection(sections);if(-1===cameraLineIndex)return[];const lines=SDP.splitLines(sections[cameraLineIndex]),mlineTokens=lines[0].split(" ");if(mlineTokens.length<4)return[];return mlineTokens.slice(3).map((payloadType=>this.videoCodecCapabilityForPayloadType(lines,payloadType))).filter((capability=>void 0!==capability&&["VP8","H264","VP9","AV1"].includes(capability.codecName)))}videoCodecCapabilityForPayloadType(sectionLines,payloadType){let codecName,clockRate,fmtpLine;for(const line of sectionLines){const payloadMatch=/^a=rtpmap:([0-9]+)\s/.exec(line);if(payloadMatch&&payloadMatch[1]===payloadType){const nameAndClockRate=line.split(" ")[1].split("/");nameAndClockRate.length>=2&&(codecName=nameAndClockRate[0],clockRate=nameAndClockRate[1])}line.startsWith(`a=fmtp:${payloadType} `)&&(fmtpLine=line.split(" ")[1])}if(void 0!==codecName)return new VideoCodecCapability_1.default(codecName,{clockRate:parseInt(clockRate),mimeType:`video/${codecName}`,sdpFmtpLine:fmtpLine})}getAudioPayloadTypes(){const payloadTypeMap=new Map,srcSDP=this.sdp,sections=SDP.splitSections(srcSDP);return payloadTypeMap.set("opus",SDP.findAudioPayloadType("opus",sections)),payloadTypeMap.set("red",SDP.findAudioPayloadType("red",sections)),payloadTypeMap}static findAudioPayloadType(codecName,sections){const rtpMapRegex=new RegExp(`a=rtpmap:\\s*(\\d+)\\s+${codecName}\\/48000`);for(const sec of sections)if(/^m=audio/.test(sec)){const match=rtpMapRegex.exec(sec);if(null!==match)return Number(match[1])}return 0}withStartingVideoSendBitrate(bitrateKbps){const sections=SDP.splitSections(this.sdp),cameraLineIndex=SDP.findActiveCameraSection(sections);if(-1===cameraLineIndex)return this;const srcLines=SDP.splitLines(sections[cameraLineIndex]),dstLines=[];for(const line of srcLines)if(/^a=fmtp:\d*/.test(line)){const newLine=line+`;x-google-start-bitrate=${bitrateKbps}`;dstLines.push(newLine)}else dstLines.push(line);sections[cameraLineIndex]=dstLines.join(SDP.CRLF)+SDP.CRLF;const newSdp=sections.join("");return new SDP(newSdp)}}exports.default=SDP,SDP.CRLF="\r\n",SDP.rfc7587LowestBitrate=6e3,SDP.rfc7587HighestBitrate=51e4,SDP.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",SDP.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},"./node_modules/amazon-chime-sdk-js/build/sdp/SDPCandidateType.js":(__unused_webpack_module,exports)=>{"use strict";var SDPCandidateType;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SDPCandidateType=void 0,function(SDPCandidateType){SDPCandidateType.Host="host",SDPCandidateType.ServerReflexive="srflx",SDPCandidateType.PeerReflexive="prflx",SDPCandidateType.Relay="relay"}(SDPCandidateType=exports.SDPCandidateType||(exports.SDPCandidateType={})),exports.default=SDPCandidateType},"./node_modules/amazon-chime-sdk-js/build/sdp/SDPMediaSection.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class SDPMediaSection{}},"./node_modules/amazon-chime-sdk-js/build/sdp/VideoCodecCapability.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const SignalingProtocol_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js");class VideoCodecCapability{constructor(codecName,codecCapability){this.codecName=codecName,this.codecCapability=codecCapability}equals(other){if(void 0===other)return!1;if(this.codecName!==other.codecName||this.codecCapability.mimeType!==other.codecCapability.mimeType||this.codecCapability.clockRate!==other.codecCapability.clockRate)return!1;return(this.codecCapability.sdpFmtpLine?this.cleanupFmtpLine(this.codecCapability.sdpFmtpLine,this.codecName):"")===(other.codecCapability.sdpFmtpLine?this.cleanupFmtpLine(other.codecCapability.sdpFmtpLine,other.codecName):"")}fmtpLineMatches(line,expectedPayloadType){const codecCapabilityFmtpLine=this.codecCapability.sdpFmtpLine;if(!codecCapabilityFmtpLine)return!1;const prefix=`a=fmtp:${expectedPayloadType} `;if(!line.startsWith(prefix))return!1;const fmtpLineFromSdp=line.substring(prefix.length);return this.cleanupFmtpLine(fmtpLineFromSdp,this.codecName)===this.cleanupFmtpLine(codecCapabilityFmtpLine,this.codecName)}cleanupFmtpLine(fmtpLine,codecName){let cleanedLine=fmtpLine.replace(/;x-google-start-bitrate=\d+/g,"");if("H264"===codecName){const profileLevelIdRegex=/profile-level-id=([0-9a-f]{4})[0-9a-f]{2}/i;cleanedLine=cleanedLine.replace(profileLevelIdRegex,"profile-level-id=$1")}return cleanedLine}static vp8(){return new VideoCodecCapability("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264BaselineProfile(){return new VideoCodecCapability("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"})}static h264ConstrainedBaselineProfile(){return new VideoCodecCapability("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264MainProfile(){return new VideoCodecCapability("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d001f"})}static h264HighProfile(){return new VideoCodecCapability("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=64001f"})}static h264ConstrainedHighProfile(){return new VideoCodecCapability("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640c1f"})}static h264(){return VideoCodecCapability.h264ConstrainedBaselineProfile()}static vp9Profile0(){return new VideoCodecCapability("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static vp9(){return VideoCodecCapability.vp9Profile0()}static av1Main(){return new VideoCodecCapability("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static av1(){return VideoCodecCapability.av1Main()}static fromSignaled(capability){switch(capability){case SignalingProtocol_1.SdkVideoCodecCapability.VP8:return VideoCodecCapability.vp8();case SignalingProtocol_1.SdkVideoCodecCapability.H264_BASELINE_PROFILE:return VideoCodecCapability.h264BaselineProfile();case SignalingProtocol_1.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return VideoCodecCapability.h264ConstrainedBaselineProfile();case SignalingProtocol_1.SdkVideoCodecCapability.H264_MAIN_PROFILE:return VideoCodecCapability.h264MainProfile();case SignalingProtocol_1.SdkVideoCodecCapability.H264_HIGH_PROFILE:return VideoCodecCapability.h264HighProfile();case SignalingProtocol_1.SdkVideoCodecCapability.H264_CONSTRAINED_HIGH_PROFILE:return VideoCodecCapability.h264ConstrainedHighProfile();case SignalingProtocol_1.SdkVideoCodecCapability.VP9_PROFILE_0:return VideoCodecCapability.vp9Profile0();case SignalingProtocol_1.SdkVideoCodecCapability.AV1_MAIN_PROFILE:return VideoCodecCapability.av1Main();default:return}}}exports.default=VideoCodecCapability},"./node_modules/amazon-chime-sdk-js/build/sdp/ZLIBTextCompressor.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const pako=__webpack_require__("./node_modules/pako/index.js");class ZLIBTextCompressor{constructor(logger){this.logger=logger}compress(text,dictionary){if(dictionary.length>0){const dictionarySize=Math.min(dictionary.length,ZLIBTextCompressor.MAX_DICTIONARY_SIZE);dictionary=dictionary.slice(0,dictionarySize)}const options={memLevel:ZLIBTextCompressor.Z_MEM_LEVEL,dictionary};return pako.deflateRaw(text,options)}decompress(compressedText,dictionary){if(dictionary.length>0){const dictionarySize=Math.min(dictionary.length,ZLIBTextCompressor.MAX_DICTIONARY_SIZE);dictionary=dictionary.slice(0,dictionarySize)}const options={to:"string",dictionary,chunkSize:4096};let decompressedText="";try{decompressedText=pako.inflateRaw(compressedText,options)}catch(ex){this.logger.error(`failed to decompress the string with error: [${ex}]`)}return decompressedText}}exports.default=ZLIBTextCompressor,ZLIBTextCompressor.Z_MEM_LEVEL=9,ZLIBTextCompressor.MAX_DICTIONARY_SIZE=31744},"./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/DefaultSessionStateController.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const SessionStateControllerAction_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerAction.js"),SessionStateControllerDeferPriority_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerDeferPriority.js"),SessionStateControllerState_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerState.js"),SessionStateControllerTransitionResult_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerTransitionResult.js");exports.default=class DefaultSessionStateController{constructor(logger){this.logger=logger,this.currentState=SessionStateControllerState_1.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}perform(action,work){const state=this.currentState;if(state===SessionStateControllerState_1.SessionStateControllerState.NotConnected&&action===SessionStateControllerAction_1.SessionStateControllerAction.Connect)this.transition(SessionStateControllerState_1.SessionStateControllerState.Connecting,action);else if(state===SessionStateControllerState_1.SessionStateControllerState.Connecting&&action===SessionStateControllerAction_1.SessionStateControllerAction.Fail)this.transition(SessionStateControllerState_1.SessionStateControllerState.Disconnecting,action);else if(state===SessionStateControllerState_1.SessionStateControllerState.Connecting&&action===SessionStateControllerAction_1.SessionStateControllerAction.FinishConnecting)this.transition(SessionStateControllerState_1.SessionStateControllerState.Connected,action);else if(state===SessionStateControllerState_1.SessionStateControllerState.Connected&&action===SessionStateControllerAction_1.SessionStateControllerAction.Disconnect)this.transition(SessionStateControllerState_1.SessionStateControllerState.Disconnecting,action);else if(state===SessionStateControllerState_1.SessionStateControllerState.Connected&&action===SessionStateControllerAction_1.SessionStateControllerAction.Reconnect)this.transition(SessionStateControllerState_1.SessionStateControllerState.Connecting,action);else if(state===SessionStateControllerState_1.SessionStateControllerState.Connected&&action===SessionStateControllerAction_1.SessionStateControllerAction.Fail)this.transition(SessionStateControllerState_1.SessionStateControllerState.Disconnecting,action);else if(state===SessionStateControllerState_1.SessionStateControllerState.Connected&&action===SessionStateControllerAction_1.SessionStateControllerAction.Update)this.transition(SessionStateControllerState_1.SessionStateControllerState.Updating,action);else if(state===SessionStateControllerState_1.SessionStateControllerState.Updating&&action===SessionStateControllerAction_1.SessionStateControllerAction.Fail)this.transition(SessionStateControllerState_1.SessionStateControllerState.Disconnecting,action);else if(state===SessionStateControllerState_1.SessionStateControllerState.Updating&&action===SessionStateControllerAction_1.SessionStateControllerAction.FinishUpdating)this.transition(SessionStateControllerState_1.SessionStateControllerState.Connected,action);else{if(state!==SessionStateControllerState_1.SessionStateControllerState.Disconnecting||action!==SessionStateControllerAction_1.SessionStateControllerAction.FinishDisconnecting)return this.canDefer(action)?(this.logger.info(`deferring transition from ${SessionStateControllerState_1.SessionStateControllerState[this.currentState]} with ${SessionStateControllerAction_1.SessionStateControllerAction[action]}`),this.deferAction(action,work),SessionStateControllerTransitionResult_1.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${SessionStateControllerState_1.SessionStateControllerState[this.currentState]} with ${SessionStateControllerAction_1.SessionStateControllerAction[action]}`),SessionStateControllerTransitionResult_1.SessionStateControllerTransitionResult.NoTransitionAvailable);this.transition(SessionStateControllerState_1.SessionStateControllerState.NotConnected,action)}try{work()}catch(e){return this.logger.error(`error during state ${SessionStateControllerState_1.SessionStateControllerState[this.currentState]} with action ${SessionStateControllerAction_1.SessionStateControllerAction[action]}: ${e}`),this.logger.info(`rolling back transition to ${SessionStateControllerState_1.SessionStateControllerState[state]}`),this.currentState=state,SessionStateControllerTransitionResult_1.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),SessionStateControllerTransitionResult_1.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(newState,action){this.logger.info(`transitioning from ${SessionStateControllerState_1.SessionStateControllerState[this.currentState]} to ${SessionStateControllerState_1.SessionStateControllerState[newState]} with ${SessionStateControllerAction_1.SessionStateControllerAction[action]}`),this.currentState=newState}deferPriority(action){switch(action){case SessionStateControllerAction_1.SessionStateControllerAction.Disconnect:return SessionStateControllerDeferPriority_1.SessionStateControllerDeferPriority.VeryHigh;case SessionStateControllerAction_1.SessionStateControllerAction.Fail:return SessionStateControllerDeferPriority_1.SessionStateControllerDeferPriority.High;case SessionStateControllerAction_1.SessionStateControllerAction.Reconnect:return SessionStateControllerDeferPriority_1.SessionStateControllerDeferPriority.Medium;case SessionStateControllerAction_1.SessionStateControllerAction.Update:return SessionStateControllerDeferPriority_1.SessionStateControllerDeferPriority.Low;default:return SessionStateControllerDeferPriority_1.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(action,work){null!==this.deferredAction&&this.deferPriority(this.deferredAction)>this.deferPriority(action)||(this.deferredAction=action,this.deferredWork=work)}canDefer(action){return this.deferPriority(action)!==SessionStateControllerDeferPriority_1.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===SessionStateControllerState_1.SessionStateControllerState.Connecting||this.currentState===SessionStateControllerState_1.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const deferredAction=this.deferredAction,deferredWork=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${SessionStateControllerAction_1.SessionStateControllerAction[deferredAction]}`),this.perform(deferredAction,deferredWork)!==SessionStateControllerTransitionResult_1.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${SessionStateControllerAction_1.SessionStateControllerAction[deferredAction]} in state ${SessionStateControllerState_1.SessionStateControllerState[this.currentState]}`)}}},"./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerAction.js":(__unused_webpack_module,exports)=>{"use strict";var SessionStateControllerAction;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SessionStateControllerAction=void 0,function(SessionStateControllerAction){SessionStateControllerAction[SessionStateControllerAction.Connect=0]="Connect",SessionStateControllerAction[SessionStateControllerAction.FinishConnecting=1]="FinishConnecting",SessionStateControllerAction[SessionStateControllerAction.Update=2]="Update",SessionStateControllerAction[SessionStateControllerAction.FinishUpdating=3]="FinishUpdating",SessionStateControllerAction[SessionStateControllerAction.Reconnect=4]="Reconnect",SessionStateControllerAction[SessionStateControllerAction.Disconnect=5]="Disconnect",SessionStateControllerAction[SessionStateControllerAction.Fail=6]="Fail",SessionStateControllerAction[SessionStateControllerAction.FinishDisconnecting=7]="FinishDisconnecting"}(SessionStateControllerAction=exports.SessionStateControllerAction||(exports.SessionStateControllerAction={})),exports.default=SessionStateControllerAction},"./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerDeferPriority.js":(__unused_webpack_module,exports)=>{"use strict";var SessionStateControllerDeferPriority;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SessionStateControllerDeferPriority=void 0,function(SessionStateControllerDeferPriority){SessionStateControllerDeferPriority[SessionStateControllerDeferPriority.DoNotDefer=0]="DoNotDefer",SessionStateControllerDeferPriority[SessionStateControllerDeferPriority.Low=1]="Low",SessionStateControllerDeferPriority[SessionStateControllerDeferPriority.Medium=2]="Medium",SessionStateControllerDeferPriority[SessionStateControllerDeferPriority.High=3]="High",SessionStateControllerDeferPriority[SessionStateControllerDeferPriority.VeryHigh=4]="VeryHigh"}(SessionStateControllerDeferPriority=exports.SessionStateControllerDeferPriority||(exports.SessionStateControllerDeferPriority={})),exports.default=SessionStateControllerDeferPriority},"./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerState.js":(__unused_webpack_module,exports)=>{"use strict";var SessionStateControllerState;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SessionStateControllerState=void 0,function(SessionStateControllerState){SessionStateControllerState[SessionStateControllerState.NotConnected=0]="NotConnected",SessionStateControllerState[SessionStateControllerState.Connecting=1]="Connecting",SessionStateControllerState[SessionStateControllerState.Connected=2]="Connected",SessionStateControllerState[SessionStateControllerState.Updating=3]="Updating",SessionStateControllerState[SessionStateControllerState.Disconnecting=4]="Disconnecting"}(SessionStateControllerState=exports.SessionStateControllerState||(exports.SessionStateControllerState={})),exports.default=SessionStateControllerState},"./node_modules/amazon-chime-sdk-js/build/sessionstatecontroller/SessionStateControllerTransitionResult.js":(__unused_webpack_module,exports)=>{"use strict";var SessionStateControllerTransitionResult;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SessionStateControllerTransitionResult=void 0,function(SessionStateControllerTransitionResult){SessionStateControllerTransitionResult[SessionStateControllerTransitionResult.Transitioned=0]="Transitioned",SessionStateControllerTransitionResult[SessionStateControllerTransitionResult.NoTransitionAvailable=1]="NoTransitionAvailable",SessionStateControllerTransitionResult[SessionStateControllerTransitionResult.DeferredTransition=2]="DeferredTransition",SessionStateControllerTransitionResult[SessionStateControllerTransitionResult.TransitionFailed=3]="TransitionFailed"}(SessionStateControllerTransitionResult=exports.SessionStateControllerTransitionResult||(exports.SessionStateControllerTransitionResult={})),exports.default=SessionStateControllerTransitionResult},"./node_modules/amazon-chime-sdk-js/build/signalingclient/DefaultSignalingClient.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),TimeoutScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/TimeoutScheduler.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),Utils_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Utils.js"),Versioning_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/versioning/Versioning.js")),VideoQualityAdaptationPreference_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoQualityAdaptationPreference.js")),WebSocketReadyState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/websocketadapter/WebSocketReadyState.js")),ServerSideNetworkAdaption_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/ServerSideNetworkAdaption.js"),SignalingClientEvent_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEvent.js")),SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js"));class DefaultSignalingClient{constructor(webSocket,logger){this.webSocket=webSocket,this.logger=logger,this.unloadHandler=null,this.closeEventHandler=event=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.WebSocketClosed,null,event.code,event.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug((()=>"signaling client init")),this.audioSessionId=this.generateNewAudioSessionId()}registerObserver(observer){this.logger.debug((()=>"registering signaling client observer")),this.observerQueue.add(observer)}removeObserver(observer){this.logger.debug((()=>"removing signaling client observer")),this.observerQueue.delete(observer)}openConnection(request){this.logger.info("adding connection request to queue: "+request.url()),this.connectionRequestQueue.push(request),this.closeConnection()}pingPong(pingPongFrame){this.logger.debug((()=>"sending ping"));const message=SignalingProtocol_js_1.SdkSignalFrame.create();return message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.PING_PONG,message.pingPong=pingPongFrame,this.sendMessage(message),message.timestampMs}join(settings){this.logger.info("sending join");const joinFrame=SignalingProtocol_js_1.SdkJoinFrame.create();joinFrame.protocolVersion=2,joinFrame.flags=SignalingProtocol_js_1.SdkJoinFlags.HAS_STREAM_UPDATE;const browserBehavior=new DefaultBrowserBehavior_1.default,sdkClientDetails={platformName:browserBehavior.name(),platformVersion:browserBehavior.version(),clientSource:Versioning_1.default.sdkName,chimeSdkVersion:Versioning_1.default.sdkVersion,clientUtcOffset:Utils_1.getFormattedOffset((new Date).getTimezoneOffset())};if(settings.applicationMetadata){const{appName,appVersion}=settings.applicationMetadata;sdkClientDetails.appName=appName,sdkClientDetails.appVersion=appVersion}joinFrame.clientDetails=SignalingProtocol_js_1.SdkClientDetails.create(sdkClientDetails),joinFrame.audioSessionId=this.audioSessionId,joinFrame.wantsCompressedSdp=DefaultSignalingClient.CLIENT_SUPPORTS_COMPRESSION,joinFrame.disablePeriodicKeyframeRequestOnContentSender=settings.disablePeriodicKeyframeRequestOnContentSender,joinFrame.serverSideNetworkAdaption=ServerSideNetworkAdaption_1.convertServerSideNetworkAdaptionEnumToSignaled(settings.serverSideNetworkAdaption),joinFrame.supportedServerSideNetworkAdaptions=settings.supportedServerSideNetworkAdaptions.map(ServerSideNetworkAdaption_1.convertServerSideNetworkAdaptionEnumToSignaled),joinFrame.wantsAllTemporalLayersInIndex=settings.wantsAllTemporalLayersInIndex;const message=SignalingProtocol_js_1.SdkSignalFrame.create();message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.JOIN,message.join=joinFrame,this.sendMessage(message)}subscribe(settings){const subscribeFrame=SignalingProtocol_js_1.SdkSubscribeFrame.create();if(subscribeFrame.sendStreams=[],subscribeFrame.sdpOffer=settings.sdpOffer,settings.connectionTypeHasVideo&&(subscribeFrame.receiveStreamIds=settings.receiveStreamIds),settings.audioHost&&(subscribeFrame.audioCheckin=settings.audioCheckin,subscribeFrame.audioHost=settings.audioHost,subscribeFrame.audioMuted=settings.audioMuted,!settings.audioCheckin)){const audioStream=SignalingProtocol_js_1.SdkStreamDescriptor.create();audioStream.mediaType=SignalingProtocol_js_1.SdkStreamMediaType.AUDIO,audioStream.trackLabel="AmazonChimeExpressAudio",audioStream.attendeeId=settings.attendeeId,audioStream.streamId=1,audioStream.groupId=1,audioStream.framerate=15,audioStream.maxBitrateKbps=600,audioStream.avgBitrateBps=4e5,subscribeFrame.sendStreams.push(audioStream)}if(subscribeFrame.compressedSdpOffer=settings.compressedSdpOffer,subscribeFrame.duplex=SignalingProtocol_js_1.SdkStreamServiceType.RX,settings.localVideoEnabled){subscribeFrame.duplex=SignalingProtocol_js_1.SdkStreamServiceType.DUPLEX;for(let i=0;i<settings.videoStreamDescriptions.length;i++){const streamDescription=settings.videoStreamDescriptions[i].clone();streamDescription.attendeeId=settings.attendeeId,subscribeFrame.sendStreams.push(streamDescription.toStreamDescriptor())}}settings.videoSubscriptionConfiguration.length>0&&(subscribeFrame.videoSubscriptionConfiguration=settings.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const message=SignalingProtocol_js_1.SdkSignalFrame.create();message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.SUBSCRIBE,message.sub=subscribeFrame,this.sendMessage(message)}remoteVideoUpdate(addedOrUpdated,removed){const remoteVideoUpdate=SignalingProtocol_js_1.SdkRemoteVideoUpdateFrame.create();remoteVideoUpdate.addedOrUpdatedVideoSubscriptions=addedOrUpdated.map(this.convertSignalingClientVideoSubscriptionConfiguration),remoteVideoUpdate.removedVideoSubscriptionMids=removed;const message=SignalingProtocol_js_1.SdkSignalFrame.create();message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,message.remoteVideoUpdate=remoteVideoUpdate,this.sendMessage(message)}convertSignalingClientVideoSubscriptionConfiguration(config){const signalConfig=new SignalingProtocol_js_1.SdkVideoSubscriptionConfiguration;switch(signalConfig.mid=config.mid,signalConfig.attendeeId=config.attendeeId,signalConfig.streamId=config.streamId,signalConfig.groupId=config.groupId,signalConfig.priority=config.priority,signalConfig.targetBitrateKbps=config.targetBitrateKbps,config.qualityAdaptationPreference){case VideoQualityAdaptationPreference_1.default.Balanced:signalConfig.qualityAdaptationPreference=SignalingProtocol_js_1.SdkVideoQualityAdaptationPreference.BALANCED;break;case VideoQualityAdaptationPreference_1.default.MaintainFramerate:signalConfig.qualityAdaptationPreference=SignalingProtocol_js_1.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case VideoQualityAdaptationPreference_1.default.MaintainResolution:signalConfig.qualityAdaptationPreference=SignalingProtocol_js_1.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:signalConfig.qualityAdaptationPreference=SignalingProtocol_js_1.SdkVideoQualityAdaptationPreference.BALANCED}return signalConfig}leave(){const message=SignalingProtocol_js_1.SdkSignalFrame.create();message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.LEAVE,message.leave=SignalingProtocol_js_1.SdkLeaveFrame.create(),this.sendMessage(message),this.logger.debug((()=>"sent leave"))}sendClientMetrics(clientMetricFrame){const message=SignalingProtocol_js_1.SdkSignalFrame.create();message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.CLIENT_METRIC,message.clientMetric=clientMetricFrame,this.sendMessage(message)}sendDataMessage(messageFrame){const message=SignalingProtocol_js_1.SdkSignalFrame.create();message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.DATA_MESSAGE,message.dataMessage=messageFrame,this.sendMessage(message)}closeConnection(){var _a,_b;if(this.webSocket.readyState()!==WebSocketReadyState_1.default.None&&this.webSocket.readyState()!==WebSocketReadyState_1.default.Closed){this.isClosing=!0,this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.WebSocketClosing,null));const scheduler=new TimeoutScheduler_1.default(DefaultSignalingClient.CLOSE_EVENT_TIMEOUT_MS),handler=event=>{var _a,_b;null===(_b=(_a=this.webSocket).removeEventListener)||void 0===_b||_b.call(_a,"close",handler),scheduler.stop(),this.closeEventHandler(event)};null===(_b=(_a=this.webSocket).removeEventListener)||void 0===_b||_b.call(_a,"close",this.closeEventHandler),this.webSocket.addEventListener("close",handler),scheduler.start((()=>{handler(new CloseEvent("close",{wasClean:!1,code:1005,reason:"",bubbles:!1}))})),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===WebSocketReadyState_1.default.Open&&!this.isClosing&&this.wasOpened}mute(muted){const message=SignalingProtocol_js_1.SdkSignalFrame.create();message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.AUDIO_CONTROL;const audioControl=SignalingProtocol_js_1.SdkAudioControlFrame.create();audioControl.muted=muted,message.audioControl=audioControl,this.sendMessage(message)}pause(streamIds){const message=SignalingProtocol_js_1.SdkSignalFrame.create();message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.PAUSE,message.pause=SignalingProtocol_js_1.SdkPauseResumeFrame.create(),message.pause.streamIds=streamIds,this.sendMessage(message)}resume(streamIds){const message=SignalingProtocol_js_1.SdkSignalFrame.create();message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.RESUME,message.pause=SignalingProtocol_js_1.SdkPauseResumeFrame.create(),message.pause.streamIds=streamIds,this.sendMessage(message)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(message){message.timestampMs=Date.now(),this.logger.debug((()=>`sending: ${JSON.stringify(message)}`));const buffer=this.prependWithFrameTypeRTC(SignalingProtocol_js_1.SdkSignalFrame.encode(message).finish());if(this.ready()){if(!this.webSocket.send(buffer))return void this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.WebSocketSendMessageFailure,null));this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.WebSocketSentMessage,null))}else this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.WebSocketSkippedMessage,null))}receiveMessage(inBuffer){let message;try{message=SignalingProtocol_js_1.SdkSignalFrame.decode(inBuffer)}catch(e){return this.logger.info(`failed to decode: ${inBuffer}`),void this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.ProtocolDecodeFailure,null))}this.logger.debug((()=>`received: ${JSON.stringify(message)}`)),this.webSocket.readyState()===WebSocketReadyState_1.default.Open?this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.ReceivedSignalFrame,message)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(message)}`)}stripFrameTypeRTC(inBuffer){const frameType=inBuffer[0];return frameType!==DefaultSignalingClient.FRAME_TYPE_RTC&&2!==frameType&&this.logger.warn(`expected FrameTypeRTC for message but got ${frameType}`),inBuffer.slice(1)}prependWithFrameTypeRTC(inBuffer){const outBuffer=new Uint8Array(inBuffer.length+1);return outBuffer[0]=DefaultSignalingClient.FRAME_TYPE_RTC,outBuffer.set(inBuffer,1),outBuffer}serviceConnectionRequestQueue(){if(0===this.connectionRequestQueue.length)return void this.logger.info("no connection requests to service");const request=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${request.url()}`),this.isClosing=!1,this.webSocket.create(request.url(),request.protocols()),this.setUpEventListeners(),this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.WebSocketConnecting,null))}sendEvent(event){switch(event.type){case SignalingClientEventType_1.default.WebSocketMessage:case SignalingClientEventType_1.default.ReceivedSignalFrame:case SignalingClientEventType_1.default.WebSocketSentMessage:this.logger.debug((()=>`notifying event: ${SignalingClientEventType_1.default[event.type]}`));break;case SignalingClientEventType_1.default.WebSocketSkippedMessage:this.logger.debug((()=>`notifying event: ${SignalingClientEventType_1.default[event.type]}, websocket state=${WebSocketReadyState_1.default[this.webSocket.readyState()]}`));break;case SignalingClientEventType_1.default.WebSocketClosed:this.logger.info(`notifying event: ${SignalingClientEventType_1.default[event.type]}, \n              code: ${event.closeCode} reason: ${event.closeReason}`);break;default:this.logger.info(`notifying event: ${SignalingClientEventType_1.default[event.type]}`)}for(const observer of this.observerQueue)observer.handleSignalingClientEvent(event)}setUpEventListeners(){this.webSocket.addEventListener("open",(()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.WebSocketOpen,null))})),this.webSocket.addEventListener("message",(event=>{this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(event.data)))})),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",(()=>{!this.isClosing||this.wasOpened?this.wasOpened?(this.logger.error("Signaling WebSocket received error while connected"),this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.WebSocketError,null))):(this.logger.error("Signaling WebSocket received error while connecting"),this.sendEvent(new SignalingClientEvent_1.default(this,SignalingClientEventType_1.default.WebSocketFailed,null))):this.logger.info("Signaling WebSocket ignoring error closing while connecting")}))}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const GlobalAny=__webpack_require__.g;GlobalAny.window&&GlobalAny.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const GlobalAny=__webpack_require__.g;GlobalAny.window&&GlobalAny.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const num=new Uint32Array(1);return Utils_1.getRandomValues(num),num[0]}promoteToPrimaryMeeting(credentials){const signaledCredentials=SignalingProtocol_js_1.SdkMeetingSessionCredentials.create();signaledCredentials.attendeeId=credentials.attendeeId,signaledCredentials.externalUserId=credentials.externalUserId,signaledCredentials.joinToken=credentials.joinToken;const primaryMeetingJoin=SignalingProtocol_js_1.SdkPrimaryMeetingJoinFrame.create();primaryMeetingJoin.credentials=signaledCredentials;const message=SignalingProtocol_js_1.SdkSignalFrame.create();message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,message.primaryMeetingJoin=primaryMeetingJoin,this.sendMessage(message)}demoteFromPrimaryMeeting(){const primaryMeetingLeave=SignalingProtocol_js_1.SdkPrimaryMeetingLeaveFrame.create(),message=SignalingProtocol_js_1.SdkSignalFrame.create();message.type=SignalingProtocol_js_1.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,message.primaryMeetingLeave=primaryMeetingLeave,this.sendMessage(message)}}exports.default=DefaultSignalingClient,DefaultSignalingClient.FRAME_TYPE_RTC=5,DefaultSignalingClient.CLOSE_EVENT_TIMEOUT_MS=2e3,DefaultSignalingClient.CLIENT_SUPPORTS_COMPRESSION=!0},"./node_modules/amazon-chime-sdk-js/build/signalingclient/ServerSideNetworkAdaption.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertServerSideNetworkAdaptionEnumToSignaled=exports.convertServerSideNetworkAdaptionEnumFromSignaled=exports.serverSideNetworkAdaptionIsNoneOrDefault=exports.ServerSideNetworkAdaption=void 0;const SignalingProtocol_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js");var ServerSideNetworkAdaption;!function(ServerSideNetworkAdaption){ServerSideNetworkAdaption[ServerSideNetworkAdaption.Default=0]="Default",ServerSideNetworkAdaption[ServerSideNetworkAdaption.None=1]="None",ServerSideNetworkAdaption[ServerSideNetworkAdaption.BandwidthProbing=2]="BandwidthProbing",ServerSideNetworkAdaption[ServerSideNetworkAdaption.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"}(ServerSideNetworkAdaption=exports.ServerSideNetworkAdaption||(exports.ServerSideNetworkAdaption={})),exports.default=ServerSideNetworkAdaption,exports.serverSideNetworkAdaptionIsNoneOrDefault=function serverSideNetworkAdaptionIsNoneOrDefault(adaption){return adaption===ServerSideNetworkAdaption.None||adaption===ServerSideNetworkAdaption.Default},exports.convertServerSideNetworkAdaptionEnumFromSignaled=function convertServerSideNetworkAdaptionEnumFromSignaled(adaption){switch(adaption){case SignalingProtocol_1.SdkServerSideNetworkAdaption.DEFAULT:return ServerSideNetworkAdaption.Default;case SignalingProtocol_1.SdkServerSideNetworkAdaption.NONE:return ServerSideNetworkAdaption.None;case SignalingProtocol_1.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return ServerSideNetworkAdaption.BandwidthProbing;case SignalingProtocol_1.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return ServerSideNetworkAdaption.BandwidthProbingAndRemoteVideoQualityAdaption}},exports.convertServerSideNetworkAdaptionEnumToSignaled=function convertServerSideNetworkAdaptionEnumToSignaled(adaption){switch(adaption){case ServerSideNetworkAdaption.Default:return SignalingProtocol_1.SdkServerSideNetworkAdaption.DEFAULT;case ServerSideNetworkAdaption.None:return SignalingProtocol_1.SdkServerSideNetworkAdaption.NONE;case ServerSideNetworkAdaption.BandwidthProbing:return SignalingProtocol_1.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case ServerSideNetworkAdaption.BandwidthProbingAndRemoteVideoQualityAdaption:return SignalingProtocol_1.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}},"./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientConnectionRequest.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class SignalingClientConnectionRequest{constructor(signalingURL,joinToken){this.signalingURL=signalingURL,this.joinToken=joinToken}url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}}},"./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEvent.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js"));exports.default=class SignalingClientEvent{constructor(client,type,message,closeCode,closeReason){this.client=client,this.type=type,this.message=message,this.closeCode=closeCode,this.closeReason=closeReason,this.timestampMs=Date.now()}isConnectionTerminated(){switch(this.type){case SignalingClientEventType_1.default.WebSocketFailed:case SignalingClientEventType_1.default.WebSocketError:case SignalingClientEventType_1.default.WebSocketClosing:case SignalingClientEventType_1.default.WebSocketClosed:return!0;default:return!1}}}},"./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js":(__unused_webpack_module,exports)=>{"use strict";var SignalingClientEventType;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SignalingClientEventType=void 0,function(SignalingClientEventType){SignalingClientEventType[SignalingClientEventType.WebSocketConnecting=0]="WebSocketConnecting",SignalingClientEventType[SignalingClientEventType.WebSocketOpen=1]="WebSocketOpen",SignalingClientEventType[SignalingClientEventType.WebSocketError=2]="WebSocketError",SignalingClientEventType[SignalingClientEventType.WebSocketClosing=3]="WebSocketClosing",SignalingClientEventType[SignalingClientEventType.WebSocketClosed=4]="WebSocketClosed",SignalingClientEventType[SignalingClientEventType.WebSocketFailed=5]="WebSocketFailed",SignalingClientEventType[SignalingClientEventType.WebSocketMessage=6]="WebSocketMessage",SignalingClientEventType[SignalingClientEventType.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",SignalingClientEventType[SignalingClientEventType.WebSocketSentMessage=8]="WebSocketSentMessage",SignalingClientEventType[SignalingClientEventType.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",SignalingClientEventType[SignalingClientEventType.ReceivedSignalFrame=10]="ReceivedSignalFrame",SignalingClientEventType[SignalingClientEventType.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"}(SignalingClientEventType=exports.SignalingClientEventType||(exports.SignalingClientEventType={})),exports.default=SignalingClientEventType},"./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientJoin.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const ServerSideNetworkAdaption_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/ServerSideNetworkAdaption.js"));exports.default=class SignalingClientJoin{constructor(applicationMetadata){this.applicationMetadata=applicationMetadata,this.serverSideNetworkAdaption=ServerSideNetworkAdaption_1.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}}},"./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientSubscribe.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class SignalingClientSubscribe{constructor(attendeeId,sdpOffer,audioHost,audioMuted,audioCheckin,receiveStreamIds,localVideoEnabled,videoStreamDescriptions,connectionTypeHasVideo,compressedSdpOffer){this.attendeeId=attendeeId,this.sdpOffer=sdpOffer,this.audioHost=audioHost,this.audioMuted=audioMuted,this.audioCheckin=audioCheckin,this.receiveStreamIds=receiveStreamIds,this.localVideoEnabled=localVideoEnabled,this.videoStreamDescriptions=videoStreamDescriptions,this.connectionTypeHasVideo=connectionTypeHasVideo,this.compressedSdpOffer=compressedSdpOffer,this.videoSubscriptionConfiguration=[]}}},"./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientVideoSubscriptionConfiguration.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class SignalingClientVideoSubscriptionConfiguration{equals(other){return void 0!==other&&this.mid===other.mid&&this.attendeeId===other.attendeeId&&this.streamId===other.streamId&&this.groupId===other.groupId&&this.priority===other.priority&&this.targetBitrateKbps===other.targetBitrateKbps&&this.qualityAdaptationPreference===other.qualityAdaptationPreference}}},"./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var valuesById,values,$protobuf=__webpack_require__("./node_modules/protobufjs/minimal.js"),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={});$root.SdkSignalFrame=function(){function SdkSignalFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}var valuesById,values;return SdkSignalFrame.prototype.timestampMs=$util.Long?$util.Long.fromBits(0,0,!0):0,SdkSignalFrame.prototype.type=1,SdkSignalFrame.prototype.error=null,SdkSignalFrame.prototype.join=null,SdkSignalFrame.prototype.joinack=null,SdkSignalFrame.prototype.sub=null,SdkSignalFrame.prototype.suback=null,SdkSignalFrame.prototype.index=null,SdkSignalFrame.prototype.pause=null,SdkSignalFrame.prototype.leave=null,SdkSignalFrame.prototype.leaveAck=null,SdkSignalFrame.prototype.bitrates=null,SdkSignalFrame.prototype.audioControl=null,SdkSignalFrame.prototype.audioMetadata=null,SdkSignalFrame.prototype.audioStreamIdInfo=null,SdkSignalFrame.prototype.pingPong=null,SdkSignalFrame.prototype.audioStatus=null,SdkSignalFrame.prototype.clientMetric=null,SdkSignalFrame.prototype.dataMessage=null,SdkSignalFrame.prototype.remoteVideoUpdate=null,SdkSignalFrame.prototype.primaryMeetingJoin=null,SdkSignalFrame.prototype.primaryMeetingJoinAck=null,SdkSignalFrame.prototype.primaryMeetingLeave=null,SdkSignalFrame.prototype.notification=null,SdkSignalFrame.create=function create(properties){return new SdkSignalFrame(properties)},SdkSignalFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),writer.uint32(8).uint64(message.timestampMs),writer.uint32(16).int32(message.type),null!=message.error&&Object.hasOwnProperty.call(message,"error")&&$root.SdkErrorFrame.encode(message.error,writer.uint32(26).fork()).ldelim(),null!=message.join&&Object.hasOwnProperty.call(message,"join")&&$root.SdkJoinFrame.encode(message.join,writer.uint32(34).fork()).ldelim(),null!=message.joinack&&Object.hasOwnProperty.call(message,"joinack")&&$root.SdkJoinAckFrame.encode(message.joinack,writer.uint32(42).fork()).ldelim(),null!=message.sub&&Object.hasOwnProperty.call(message,"sub")&&$root.SdkSubscribeFrame.encode(message.sub,writer.uint32(50).fork()).ldelim(),null!=message.suback&&Object.hasOwnProperty.call(message,"suback")&&$root.SdkSubscribeAckFrame.encode(message.suback,writer.uint32(58).fork()).ldelim(),null!=message.index&&Object.hasOwnProperty.call(message,"index")&&$root.SdkIndexFrame.encode(message.index,writer.uint32(66).fork()).ldelim(),null!=message.pause&&Object.hasOwnProperty.call(message,"pause")&&$root.SdkPauseResumeFrame.encode(message.pause,writer.uint32(82).fork()).ldelim(),null!=message.leave&&Object.hasOwnProperty.call(message,"leave")&&$root.SdkLeaveFrame.encode(message.leave,writer.uint32(90).fork()).ldelim(),null!=message.leaveAck&&Object.hasOwnProperty.call(message,"leaveAck")&&$root.SdkLeaveAckFrame.encode(message.leaveAck,writer.uint32(98).fork()).ldelim(),null!=message.bitrates&&Object.hasOwnProperty.call(message,"bitrates")&&$root.SdkBitrateFrame.encode(message.bitrates,writer.uint32(114).fork()).ldelim(),null!=message.audioControl&&Object.hasOwnProperty.call(message,"audioControl")&&$root.SdkAudioControlFrame.encode(message.audioControl,writer.uint32(138).fork()).ldelim(),null!=message.audioMetadata&&Object.hasOwnProperty.call(message,"audioMetadata")&&$root.SdkAudioMetadataFrame.encode(message.audioMetadata,writer.uint32(146).fork()).ldelim(),null!=message.audioStreamIdInfo&&Object.hasOwnProperty.call(message,"audioStreamIdInfo")&&$root.SdkAudioStreamIdInfoFrame.encode(message.audioStreamIdInfo,writer.uint32(154).fork()).ldelim(),null!=message.pingPong&&Object.hasOwnProperty.call(message,"pingPong")&&$root.SdkPingPongFrame.encode(message.pingPong,writer.uint32(162).fork()).ldelim(),null!=message.audioStatus&&Object.hasOwnProperty.call(message,"audioStatus")&&$root.SdkAudioStatusFrame.encode(message.audioStatus,writer.uint32(170).fork()).ldelim(),null!=message.clientMetric&&Object.hasOwnProperty.call(message,"clientMetric")&&$root.SdkClientMetricFrame.encode(message.clientMetric,writer.uint32(178).fork()).ldelim(),null!=message.dataMessage&&Object.hasOwnProperty.call(message,"dataMessage")&&$root.SdkDataMessageFrame.encode(message.dataMessage,writer.uint32(186).fork()).ldelim(),null!=message.remoteVideoUpdate&&Object.hasOwnProperty.call(message,"remoteVideoUpdate")&&$root.SdkRemoteVideoUpdateFrame.encode(message.remoteVideoUpdate,writer.uint32(202).fork()).ldelim(),null!=message.primaryMeetingJoin&&Object.hasOwnProperty.call(message,"primaryMeetingJoin")&&$root.SdkPrimaryMeetingJoinFrame.encode(message.primaryMeetingJoin,writer.uint32(210).fork()).ldelim(),null!=message.primaryMeetingJoinAck&&Object.hasOwnProperty.call(message,"primaryMeetingJoinAck")&&$root.SdkPrimaryMeetingJoinAckFrame.encode(message.primaryMeetingJoinAck,writer.uint32(218).fork()).ldelim(),null!=message.primaryMeetingLeave&&Object.hasOwnProperty.call(message,"primaryMeetingLeave")&&$root.SdkPrimaryMeetingLeaveFrame.encode(message.primaryMeetingLeave,writer.uint32(226).fork()).ldelim(),null!=message.notification&&Object.hasOwnProperty.call(message,"notification")&&$root.SdkNotificationFrame.encode(message.notification,writer.uint32(282).fork()).ldelim(),writer},SdkSignalFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkSignalFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkSignalFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.timestampMs=reader.uint64();break;case 2:message.type=reader.int32();break;case 3:message.error=$root.SdkErrorFrame.decode(reader,reader.uint32());break;case 4:message.join=$root.SdkJoinFrame.decode(reader,reader.uint32());break;case 5:message.joinack=$root.SdkJoinAckFrame.decode(reader,reader.uint32());break;case 6:message.sub=$root.SdkSubscribeFrame.decode(reader,reader.uint32());break;case 7:message.suback=$root.SdkSubscribeAckFrame.decode(reader,reader.uint32());break;case 8:message.index=$root.SdkIndexFrame.decode(reader,reader.uint32());break;case 10:message.pause=$root.SdkPauseResumeFrame.decode(reader,reader.uint32());break;case 11:message.leave=$root.SdkLeaveFrame.decode(reader,reader.uint32());break;case 12:message.leaveAck=$root.SdkLeaveAckFrame.decode(reader,reader.uint32());break;case 14:message.bitrates=$root.SdkBitrateFrame.decode(reader,reader.uint32());break;case 17:message.audioControl=$root.SdkAudioControlFrame.decode(reader,reader.uint32());break;case 18:message.audioMetadata=$root.SdkAudioMetadataFrame.decode(reader,reader.uint32());break;case 19:message.audioStreamIdInfo=$root.SdkAudioStreamIdInfoFrame.decode(reader,reader.uint32());break;case 20:message.pingPong=$root.SdkPingPongFrame.decode(reader,reader.uint32());break;case 21:message.audioStatus=$root.SdkAudioStatusFrame.decode(reader,reader.uint32());break;case 22:message.clientMetric=$root.SdkClientMetricFrame.decode(reader,reader.uint32());break;case 23:message.dataMessage=$root.SdkDataMessageFrame.decode(reader,reader.uint32());break;case 25:message.remoteVideoUpdate=$root.SdkRemoteVideoUpdateFrame.decode(reader,reader.uint32());break;case 26:message.primaryMeetingJoin=$root.SdkPrimaryMeetingJoinFrame.decode(reader,reader.uint32());break;case 27:message.primaryMeetingJoinAck=$root.SdkPrimaryMeetingJoinAckFrame.decode(reader,reader.uint32());break;case 28:message.primaryMeetingLeave=$root.SdkPrimaryMeetingLeaveFrame.decode(reader,reader.uint32());break;case 35:message.notification=$root.SdkNotificationFrame.decode(reader,reader.uint32());break;default:reader.skipType(7&tag)}}if(!message.hasOwnProperty("timestampMs"))throw $util.ProtocolError("missing required 'timestampMs'",{instance:message});if(!message.hasOwnProperty("type"))throw $util.ProtocolError("missing required 'type'",{instance:message});return message},SdkSignalFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkSignalFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(!($util.isInteger(message.timestampMs)||message.timestampMs&&$util.isInteger(message.timestampMs.low)&&$util.isInteger(message.timestampMs.high)))return"timestampMs: integer|Long expected";switch(message.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:}var error;if(null!=message.error&&message.hasOwnProperty("error")&&(error=$root.SdkErrorFrame.verify(message.error)))return"error."+error;if(null!=message.join&&message.hasOwnProperty("join")&&(error=$root.SdkJoinFrame.verify(message.join)))return"join."+error;if(null!=message.joinack&&message.hasOwnProperty("joinack")&&(error=$root.SdkJoinAckFrame.verify(message.joinack)))return"joinack."+error;if(null!=message.sub&&message.hasOwnProperty("sub")&&(error=$root.SdkSubscribeFrame.verify(message.sub)))return"sub."+error;if(null!=message.suback&&message.hasOwnProperty("suback")&&(error=$root.SdkSubscribeAckFrame.verify(message.suback)))return"suback."+error;if(null!=message.index&&message.hasOwnProperty("index")&&(error=$root.SdkIndexFrame.verify(message.index)))return"index."+error;if(null!=message.pause&&message.hasOwnProperty("pause")&&(error=$root.SdkPauseResumeFrame.verify(message.pause)))return"pause."+error;if(null!=message.leave&&message.hasOwnProperty("leave")&&(error=$root.SdkLeaveFrame.verify(message.leave)))return"leave."+error;if(null!=message.leaveAck&&message.hasOwnProperty("leaveAck")&&(error=$root.SdkLeaveAckFrame.verify(message.leaveAck)))return"leaveAck."+error;if(null!=message.bitrates&&message.hasOwnProperty("bitrates")&&(error=$root.SdkBitrateFrame.verify(message.bitrates)))return"bitrates."+error;if(null!=message.audioControl&&message.hasOwnProperty("audioControl")&&(error=$root.SdkAudioControlFrame.verify(message.audioControl)))return"audioControl."+error;if(null!=message.audioMetadata&&message.hasOwnProperty("audioMetadata")&&(error=$root.SdkAudioMetadataFrame.verify(message.audioMetadata)))return"audioMetadata."+error;if(null!=message.audioStreamIdInfo&&message.hasOwnProperty("audioStreamIdInfo")&&(error=$root.SdkAudioStreamIdInfoFrame.verify(message.audioStreamIdInfo)))return"audioStreamIdInfo."+error;if(null!=message.pingPong&&message.hasOwnProperty("pingPong")&&(error=$root.SdkPingPongFrame.verify(message.pingPong)))return"pingPong."+error;if(null!=message.audioStatus&&message.hasOwnProperty("audioStatus")&&(error=$root.SdkAudioStatusFrame.verify(message.audioStatus)))return"audioStatus."+error;if(null!=message.clientMetric&&message.hasOwnProperty("clientMetric")&&(error=$root.SdkClientMetricFrame.verify(message.clientMetric)))return"clientMetric."+error;if(null!=message.dataMessage&&message.hasOwnProperty("dataMessage")&&(error=$root.SdkDataMessageFrame.verify(message.dataMessage)))return"dataMessage."+error;if(null!=message.remoteVideoUpdate&&message.hasOwnProperty("remoteVideoUpdate")&&(error=$root.SdkRemoteVideoUpdateFrame.verify(message.remoteVideoUpdate)))return"remoteVideoUpdate."+error;if(null!=message.primaryMeetingJoin&&message.hasOwnProperty("primaryMeetingJoin")&&(error=$root.SdkPrimaryMeetingJoinFrame.verify(message.primaryMeetingJoin)))return"primaryMeetingJoin."+error;if(null!=message.primaryMeetingJoinAck&&message.hasOwnProperty("primaryMeetingJoinAck")&&(error=$root.SdkPrimaryMeetingJoinAckFrame.verify(message.primaryMeetingJoinAck)))return"primaryMeetingJoinAck."+error;if(null!=message.primaryMeetingLeave&&message.hasOwnProperty("primaryMeetingLeave")&&(error=$root.SdkPrimaryMeetingLeaveFrame.verify(message.primaryMeetingLeave)))return"primaryMeetingLeave."+error;if(null!=message.notification&&message.hasOwnProperty("notification")&&(error=$root.SdkNotificationFrame.verify(message.notification)))return"notification."+error;return null},SdkSignalFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkSignalFrame)return object;var message=new $root.SdkSignalFrame;switch(null!=object.timestampMs&&($util.Long?(message.timestampMs=$util.Long.fromValue(object.timestampMs)).unsigned=!0:"string"==typeof object.timestampMs?message.timestampMs=parseInt(object.timestampMs,10):"number"==typeof object.timestampMs?message.timestampMs=object.timestampMs:"object"==typeof object.timestampMs&&(message.timestampMs=new $util.LongBits(object.timestampMs.low>>>0,object.timestampMs.high>>>0).toNumber(!0))),object.type){default:if("number"==typeof object.type){message.type=object.type;break}break;case"JOIN":case 1:message.type=1;break;case"JOIN_ACK":case 2:message.type=2;break;case"SUBSCRIBE":case 3:message.type=3;break;case"SUBSCRIBE_ACK":case 4:message.type=4;break;case"INDEX":case 5:message.type=5;break;case"PAUSE":case 7:message.type=7;break;case"RESUME":case 8:message.type=8;break;case"LEAVE":case 9:message.type=9;break;case"LEAVE_ACK":case 10:message.type=10;break;case"BITRATES":case 13:message.type=13;break;case"AUDIO_CONTROL":case 16:message.type=16;break;case"AUDIO_METADATA":case 17:message.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:message.type=18;break;case"PING_PONG":case 19:message.type=19;break;case"AUDIO_STATUS":case 20:message.type=20;break;case"CLIENT_METRIC":case 21:message.type=21;break;case"DATA_MESSAGE":case 22:message.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:message.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:message.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:message.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:message.type=27;break;case"NOTIFICATION":case 34:message.type=34}if(null!=object.error){if("object"!=typeof object.error)throw TypeError(".SdkSignalFrame.error: object expected");message.error=$root.SdkErrorFrame.fromObject(object.error)}if(null!=object.join){if("object"!=typeof object.join)throw TypeError(".SdkSignalFrame.join: object expected");message.join=$root.SdkJoinFrame.fromObject(object.join)}if(null!=object.joinack){if("object"!=typeof object.joinack)throw TypeError(".SdkSignalFrame.joinack: object expected");message.joinack=$root.SdkJoinAckFrame.fromObject(object.joinack)}if(null!=object.sub){if("object"!=typeof object.sub)throw TypeError(".SdkSignalFrame.sub: object expected");message.sub=$root.SdkSubscribeFrame.fromObject(object.sub)}if(null!=object.suback){if("object"!=typeof object.suback)throw TypeError(".SdkSignalFrame.suback: object expected");message.suback=$root.SdkSubscribeAckFrame.fromObject(object.suback)}if(null!=object.index){if("object"!=typeof object.index)throw TypeError(".SdkSignalFrame.index: object expected");message.index=$root.SdkIndexFrame.fromObject(object.index)}if(null!=object.pause){if("object"!=typeof object.pause)throw TypeError(".SdkSignalFrame.pause: object expected");message.pause=$root.SdkPauseResumeFrame.fromObject(object.pause)}if(null!=object.leave){if("object"!=typeof object.leave)throw TypeError(".SdkSignalFrame.leave: object expected");message.leave=$root.SdkLeaveFrame.fromObject(object.leave)}if(null!=object.leaveAck){if("object"!=typeof object.leaveAck)throw TypeError(".SdkSignalFrame.leaveAck: object expected");message.leaveAck=$root.SdkLeaveAckFrame.fromObject(object.leaveAck)}if(null!=object.bitrates){if("object"!=typeof object.bitrates)throw TypeError(".SdkSignalFrame.bitrates: object expected");message.bitrates=$root.SdkBitrateFrame.fromObject(object.bitrates)}if(null!=object.audioControl){if("object"!=typeof object.audioControl)throw TypeError(".SdkSignalFrame.audioControl: object expected");message.audioControl=$root.SdkAudioControlFrame.fromObject(object.audioControl)}if(null!=object.audioMetadata){if("object"!=typeof object.audioMetadata)throw TypeError(".SdkSignalFrame.audioMetadata: object expected");message.audioMetadata=$root.SdkAudioMetadataFrame.fromObject(object.audioMetadata)}if(null!=object.audioStreamIdInfo){if("object"!=typeof object.audioStreamIdInfo)throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");message.audioStreamIdInfo=$root.SdkAudioStreamIdInfoFrame.fromObject(object.audioStreamIdInfo)}if(null!=object.pingPong){if("object"!=typeof object.pingPong)throw TypeError(".SdkSignalFrame.pingPong: object expected");message.pingPong=$root.SdkPingPongFrame.fromObject(object.pingPong)}if(null!=object.audioStatus){if("object"!=typeof object.audioStatus)throw TypeError(".SdkSignalFrame.audioStatus: object expected");message.audioStatus=$root.SdkAudioStatusFrame.fromObject(object.audioStatus)}if(null!=object.clientMetric){if("object"!=typeof object.clientMetric)throw TypeError(".SdkSignalFrame.clientMetric: object expected");message.clientMetric=$root.SdkClientMetricFrame.fromObject(object.clientMetric)}if(null!=object.dataMessage){if("object"!=typeof object.dataMessage)throw TypeError(".SdkSignalFrame.dataMessage: object expected");message.dataMessage=$root.SdkDataMessageFrame.fromObject(object.dataMessage)}if(null!=object.remoteVideoUpdate){if("object"!=typeof object.remoteVideoUpdate)throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");message.remoteVideoUpdate=$root.SdkRemoteVideoUpdateFrame.fromObject(object.remoteVideoUpdate)}if(null!=object.primaryMeetingJoin){if("object"!=typeof object.primaryMeetingJoin)throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");message.primaryMeetingJoin=$root.SdkPrimaryMeetingJoinFrame.fromObject(object.primaryMeetingJoin)}if(null!=object.primaryMeetingJoinAck){if("object"!=typeof object.primaryMeetingJoinAck)throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");message.primaryMeetingJoinAck=$root.SdkPrimaryMeetingJoinAckFrame.fromObject(object.primaryMeetingJoinAck)}if(null!=object.primaryMeetingLeave){if("object"!=typeof object.primaryMeetingLeave)throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");message.primaryMeetingLeave=$root.SdkPrimaryMeetingLeaveFrame.fromObject(object.primaryMeetingLeave)}if(null!=object.notification){if("object"!=typeof object.notification)throw TypeError(".SdkSignalFrame.notification: object expected");message.notification=$root.SdkNotificationFrame.fromObject(object.notification)}return message},SdkSignalFrame.toObject=function toObject(message,options){options||(options={});var object={};if(options.defaults){if($util.Long){var long=new $util.Long(0,0,!0);object.timestampMs=options.longs===String?long.toString():options.longs===Number?long.toNumber():long}else object.timestampMs=options.longs===String?"0":0;object.type=options.enums===String?"JOIN":1,object.error=null,object.join=null,object.joinack=null,object.sub=null,object.suback=null,object.index=null,object.pause=null,object.leave=null,object.leaveAck=null,object.bitrates=null,object.audioControl=null,object.audioMetadata=null,object.audioStreamIdInfo=null,object.pingPong=null,object.audioStatus=null,object.clientMetric=null,object.dataMessage=null,object.remoteVideoUpdate=null,object.primaryMeetingJoin=null,object.primaryMeetingJoinAck=null,object.primaryMeetingLeave=null,object.notification=null}return null!=message.timestampMs&&message.hasOwnProperty("timestampMs")&&("number"==typeof message.timestampMs?object.timestampMs=options.longs===String?String(message.timestampMs):message.timestampMs:object.timestampMs=options.longs===String?$util.Long.prototype.toString.call(message.timestampMs):options.longs===Number?new $util.LongBits(message.timestampMs.low>>>0,message.timestampMs.high>>>0).toNumber(!0):message.timestampMs),null!=message.type&&message.hasOwnProperty("type")&&(object.type=options.enums===String?void 0===$root.SdkSignalFrame.Type[message.type]?message.type:$root.SdkSignalFrame.Type[message.type]:message.type),null!=message.error&&message.hasOwnProperty("error")&&(object.error=$root.SdkErrorFrame.toObject(message.error,options)),null!=message.join&&message.hasOwnProperty("join")&&(object.join=$root.SdkJoinFrame.toObject(message.join,options)),null!=message.joinack&&message.hasOwnProperty("joinack")&&(object.joinack=$root.SdkJoinAckFrame.toObject(message.joinack,options)),null!=message.sub&&message.hasOwnProperty("sub")&&(object.sub=$root.SdkSubscribeFrame.toObject(message.sub,options)),null!=message.suback&&message.hasOwnProperty("suback")&&(object.suback=$root.SdkSubscribeAckFrame.toObject(message.suback,options)),null!=message.index&&message.hasOwnProperty("index")&&(object.index=$root.SdkIndexFrame.toObject(message.index,options)),null!=message.pause&&message.hasOwnProperty("pause")&&(object.pause=$root.SdkPauseResumeFrame.toObject(message.pause,options)),null!=message.leave&&message.hasOwnProperty("leave")&&(object.leave=$root.SdkLeaveFrame.toObject(message.leave,options)),null!=message.leaveAck&&message.hasOwnProperty("leaveAck")&&(object.leaveAck=$root.SdkLeaveAckFrame.toObject(message.leaveAck,options)),null!=message.bitrates&&message.hasOwnProperty("bitrates")&&(object.bitrates=$root.SdkBitrateFrame.toObject(message.bitrates,options)),null!=message.audioControl&&message.hasOwnProperty("audioControl")&&(object.audioControl=$root.SdkAudioControlFrame.toObject(message.audioControl,options)),null!=message.audioMetadata&&message.hasOwnProperty("audioMetadata")&&(object.audioMetadata=$root.SdkAudioMetadataFrame.toObject(message.audioMetadata,options)),null!=message.audioStreamIdInfo&&message.hasOwnProperty("audioStreamIdInfo")&&(object.audioStreamIdInfo=$root.SdkAudioStreamIdInfoFrame.toObject(message.audioStreamIdInfo,options)),null!=message.pingPong&&message.hasOwnProperty("pingPong")&&(object.pingPong=$root.SdkPingPongFrame.toObject(message.pingPong,options)),null!=message.audioStatus&&message.hasOwnProperty("audioStatus")&&(object.audioStatus=$root.SdkAudioStatusFrame.toObject(message.audioStatus,options)),null!=message.clientMetric&&message.hasOwnProperty("clientMetric")&&(object.clientMetric=$root.SdkClientMetricFrame.toObject(message.clientMetric,options)),null!=message.dataMessage&&message.hasOwnProperty("dataMessage")&&(object.dataMessage=$root.SdkDataMessageFrame.toObject(message.dataMessage,options)),null!=message.remoteVideoUpdate&&message.hasOwnProperty("remoteVideoUpdate")&&(object.remoteVideoUpdate=$root.SdkRemoteVideoUpdateFrame.toObject(message.remoteVideoUpdate,options)),null!=message.primaryMeetingJoin&&message.hasOwnProperty("primaryMeetingJoin")&&(object.primaryMeetingJoin=$root.SdkPrimaryMeetingJoinFrame.toObject(message.primaryMeetingJoin,options)),null!=message.primaryMeetingJoinAck&&message.hasOwnProperty("primaryMeetingJoinAck")&&(object.primaryMeetingJoinAck=$root.SdkPrimaryMeetingJoinAckFrame.toObject(message.primaryMeetingJoinAck,options)),null!=message.primaryMeetingLeave&&message.hasOwnProperty("primaryMeetingLeave")&&(object.primaryMeetingLeave=$root.SdkPrimaryMeetingLeaveFrame.toObject(message.primaryMeetingLeave,options)),null!=message.notification&&message.hasOwnProperty("notification")&&(object.notification=$root.SdkNotificationFrame.toObject(message.notification,options)),object},SdkSignalFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkSignalFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkSignalFrame"},SdkSignalFrame.Type=(valuesById={},(values=Object.create(valuesById))[valuesById[1]="JOIN"]=1,values[valuesById[2]="JOIN_ACK"]=2,values[valuesById[3]="SUBSCRIBE"]=3,values[valuesById[4]="SUBSCRIBE_ACK"]=4,values[valuesById[5]="INDEX"]=5,values[valuesById[7]="PAUSE"]=7,values[valuesById[8]="RESUME"]=8,values[valuesById[9]="LEAVE"]=9,values[valuesById[10]="LEAVE_ACK"]=10,values[valuesById[13]="BITRATES"]=13,values[valuesById[16]="AUDIO_CONTROL"]=16,values[valuesById[17]="AUDIO_METADATA"]=17,values[valuesById[18]="AUDIO_STREAM_ID_INFO"]=18,values[valuesById[19]="PING_PONG"]=19,values[valuesById[20]="AUDIO_STATUS"]=20,values[valuesById[21]="CLIENT_METRIC"]=21,values[valuesById[22]="DATA_MESSAGE"]=22,values[valuesById[24]="REMOTE_VIDEO_UPDATE"]=24,values[valuesById[25]="PRIMARY_MEETING_JOIN"]=25,values[valuesById[26]="PRIMARY_MEETING_JOIN_ACK"]=26,values[valuesById[27]="PRIMARY_MEETING_LEAVE"]=27,values[valuesById[34]="NOTIFICATION"]=34,values),SdkSignalFrame}(),$root.SdkErrorFrame=function(){function SdkErrorFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkErrorFrame.prototype.status=0,SdkErrorFrame.prototype.description="",SdkErrorFrame.create=function create(properties){return new SdkErrorFrame(properties)},SdkErrorFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.status&&Object.hasOwnProperty.call(message,"status")&&writer.uint32(8).uint32(message.status),null!=message.description&&Object.hasOwnProperty.call(message,"description")&&writer.uint32(18).string(message.description),writer},SdkErrorFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkErrorFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkErrorFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.status=reader.uint32();break;case 2:message.description=reader.string();break;default:reader.skipType(7&tag)}}return message},SdkErrorFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkErrorFrame.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.status&&message.hasOwnProperty("status")&&!$util.isInteger(message.status)?"status: integer expected":null!=message.description&&message.hasOwnProperty("description")&&!$util.isString(message.description)?"description: string expected":null},SdkErrorFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkErrorFrame)return object;var message=new $root.SdkErrorFrame;return null!=object.status&&(message.status=object.status>>>0),null!=object.description&&(message.description=String(object.description)),message},SdkErrorFrame.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.status=0,object.description=""),null!=message.status&&message.hasOwnProperty("status")&&(object.status=message.status),null!=message.description&&message.hasOwnProperty("description")&&(object.description=message.description),object},SdkErrorFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkErrorFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkErrorFrame"},SdkErrorFrame}(),$root.SdkJoinFlags=(valuesById={},(values=Object.create(valuesById))[valuesById[2]="HAS_STREAM_UPDATE"]=2,values[valuesById[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,values[valuesById[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,values),$root.SdkClientDetails=function(){function SdkClientDetails(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkClientDetails.prototype.appName="",SdkClientDetails.prototype.appVersion="",SdkClientDetails.prototype.deviceModel="",SdkClientDetails.prototype.deviceMake="",SdkClientDetails.prototype.platformName="",SdkClientDetails.prototype.platformVersion="",SdkClientDetails.prototype.clientSource="",SdkClientDetails.prototype.chimeSdkVersion="",SdkClientDetails.prototype.clientUtcOffset="",SdkClientDetails.create=function create(properties){return new SdkClientDetails(properties)},SdkClientDetails.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.appName&&Object.hasOwnProperty.call(message,"appName")&&writer.uint32(10).string(message.appName),null!=message.appVersion&&Object.hasOwnProperty.call(message,"appVersion")&&writer.uint32(18).string(message.appVersion),null!=message.deviceModel&&Object.hasOwnProperty.call(message,"deviceModel")&&writer.uint32(26).string(message.deviceModel),null!=message.deviceMake&&Object.hasOwnProperty.call(message,"deviceMake")&&writer.uint32(34).string(message.deviceMake),null!=message.platformName&&Object.hasOwnProperty.call(message,"platformName")&&writer.uint32(42).string(message.platformName),null!=message.platformVersion&&Object.hasOwnProperty.call(message,"platformVersion")&&writer.uint32(50).string(message.platformVersion),null!=message.clientSource&&Object.hasOwnProperty.call(message,"clientSource")&&writer.uint32(58).string(message.clientSource),null!=message.chimeSdkVersion&&Object.hasOwnProperty.call(message,"chimeSdkVersion")&&writer.uint32(66).string(message.chimeSdkVersion),null!=message.clientUtcOffset&&Object.hasOwnProperty.call(message,"clientUtcOffset")&&writer.uint32(74).string(message.clientUtcOffset),writer},SdkClientDetails.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkClientDetails.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkClientDetails;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.appName=reader.string();break;case 2:message.appVersion=reader.string();break;case 3:message.deviceModel=reader.string();break;case 4:message.deviceMake=reader.string();break;case 5:message.platformName=reader.string();break;case 6:message.platformVersion=reader.string();break;case 7:message.clientSource=reader.string();break;case 8:message.chimeSdkVersion=reader.string();break;case 9:message.clientUtcOffset=reader.string();break;default:reader.skipType(7&tag)}}return message},SdkClientDetails.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkClientDetails.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.appName&&message.hasOwnProperty("appName")&&!$util.isString(message.appName)?"appName: string expected":null!=message.appVersion&&message.hasOwnProperty("appVersion")&&!$util.isString(message.appVersion)?"appVersion: string expected":null!=message.deviceModel&&message.hasOwnProperty("deviceModel")&&!$util.isString(message.deviceModel)?"deviceModel: string expected":null!=message.deviceMake&&message.hasOwnProperty("deviceMake")&&!$util.isString(message.deviceMake)?"deviceMake: string expected":null!=message.platformName&&message.hasOwnProperty("platformName")&&!$util.isString(message.platformName)?"platformName: string expected":null!=message.platformVersion&&message.hasOwnProperty("platformVersion")&&!$util.isString(message.platformVersion)?"platformVersion: string expected":null!=message.clientSource&&message.hasOwnProperty("clientSource")&&!$util.isString(message.clientSource)?"clientSource: string expected":null!=message.chimeSdkVersion&&message.hasOwnProperty("chimeSdkVersion")&&!$util.isString(message.chimeSdkVersion)?"chimeSdkVersion: string expected":null!=message.clientUtcOffset&&message.hasOwnProperty("clientUtcOffset")&&!$util.isString(message.clientUtcOffset)?"clientUtcOffset: string expected":null},SdkClientDetails.fromObject=function fromObject(object){if(object instanceof $root.SdkClientDetails)return object;var message=new $root.SdkClientDetails;return null!=object.appName&&(message.appName=String(object.appName)),null!=object.appVersion&&(message.appVersion=String(object.appVersion)),null!=object.deviceModel&&(message.deviceModel=String(object.deviceModel)),null!=object.deviceMake&&(message.deviceMake=String(object.deviceMake)),null!=object.platformName&&(message.platformName=String(object.platformName)),null!=object.platformVersion&&(message.platformVersion=String(object.platformVersion)),null!=object.clientSource&&(message.clientSource=String(object.clientSource)),null!=object.chimeSdkVersion&&(message.chimeSdkVersion=String(object.chimeSdkVersion)),null!=object.clientUtcOffset&&(message.clientUtcOffset=String(object.clientUtcOffset)),message},SdkClientDetails.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.appName="",object.appVersion="",object.deviceModel="",object.deviceMake="",object.platformName="",object.platformVersion="",object.clientSource="",object.chimeSdkVersion="",object.clientUtcOffset=""),null!=message.appName&&message.hasOwnProperty("appName")&&(object.appName=message.appName),null!=message.appVersion&&message.hasOwnProperty("appVersion")&&(object.appVersion=message.appVersion),null!=message.deviceModel&&message.hasOwnProperty("deviceModel")&&(object.deviceModel=message.deviceModel),null!=message.deviceMake&&message.hasOwnProperty("deviceMake")&&(object.deviceMake=message.deviceMake),null!=message.platformName&&message.hasOwnProperty("platformName")&&(object.platformName=message.platformName),null!=message.platformVersion&&message.hasOwnProperty("platformVersion")&&(object.platformVersion=message.platformVersion),null!=message.clientSource&&message.hasOwnProperty("clientSource")&&(object.clientSource=message.clientSource),null!=message.chimeSdkVersion&&message.hasOwnProperty("chimeSdkVersion")&&(object.chimeSdkVersion=message.chimeSdkVersion),null!=message.clientUtcOffset&&message.hasOwnProperty("clientUtcOffset")&&(object.clientUtcOffset=message.clientUtcOffset),object},SdkClientDetails.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkClientDetails.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkClientDetails"},SdkClientDetails}(),$root.SdkServerSideNetworkAdaption=function(){var valuesById={},values=Object.create(valuesById);return values[valuesById[1]="DEFAULT"]=1,values[valuesById[2]="NONE"]=2,values[valuesById[3]="BANDWIDTH_PROBING"]=3,values[valuesById[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,values}(),$root.SdkJoinFrame=function(){function SdkJoinFrame(properties){if(this.supportedServerSideNetworkAdaptions=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkJoinFrame.prototype.protocolVersion=2,SdkJoinFrame.prototype.maxNumOfVideos=0,SdkJoinFrame.prototype.flags=0,SdkJoinFrame.prototype.clientDetails=null,SdkJoinFrame.prototype.audioSessionId=$util.Long?$util.Long.fromBits(0,0,!0):0,SdkJoinFrame.prototype.wantsCompressedSdp=!1,SdkJoinFrame.prototype.serverSideNetworkAdaption=1,SdkJoinFrame.prototype.supportedServerSideNetworkAdaptions=$util.emptyArray,SdkJoinFrame.prototype.wantsAllTemporalLayersInIndex=!1,SdkJoinFrame.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,SdkJoinFrame.create=function create(properties){return new SdkJoinFrame(properties)},SdkJoinFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.protocolVersion&&Object.hasOwnProperty.call(message,"protocolVersion")&&writer.uint32(8).uint32(message.protocolVersion),null!=message.maxNumOfVideos&&Object.hasOwnProperty.call(message,"maxNumOfVideos")&&writer.uint32(16).uint32(message.maxNumOfVideos),null!=message.flags&&Object.hasOwnProperty.call(message,"flags")&&writer.uint32(24).uint32(message.flags),null!=message.clientDetails&&Object.hasOwnProperty.call(message,"clientDetails")&&$root.SdkClientDetails.encode(message.clientDetails,writer.uint32(34).fork()).ldelim(),null!=message.audioSessionId&&Object.hasOwnProperty.call(message,"audioSessionId")&&writer.uint32(48).uint64(message.audioSessionId),null!=message.wantsCompressedSdp&&Object.hasOwnProperty.call(message,"wantsCompressedSdp")&&writer.uint32(56).bool(message.wantsCompressedSdp),null!=message.serverSideNetworkAdaption&&Object.hasOwnProperty.call(message,"serverSideNetworkAdaption")&&writer.uint32(80).int32(message.serverSideNetworkAdaption),null!=message.supportedServerSideNetworkAdaptions&&message.supportedServerSideNetworkAdaptions.length)for(var i=0;i<message.supportedServerSideNetworkAdaptions.length;++i)writer.uint32(88).int32(message.supportedServerSideNetworkAdaptions[i]);return null!=message.wantsAllTemporalLayersInIndex&&Object.hasOwnProperty.call(message,"wantsAllTemporalLayersInIndex")&&writer.uint32(96).bool(message.wantsAllTemporalLayersInIndex),null!=message.disablePeriodicKeyframeRequestOnContentSender&&Object.hasOwnProperty.call(message,"disablePeriodicKeyframeRequestOnContentSender")&&writer.uint32(104).bool(message.disablePeriodicKeyframeRequestOnContentSender),writer},SdkJoinFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkJoinFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkJoinFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.protocolVersion=reader.uint32();break;case 2:message.maxNumOfVideos=reader.uint32();break;case 3:message.flags=reader.uint32();break;case 4:message.clientDetails=$root.SdkClientDetails.decode(reader,reader.uint32());break;case 6:message.audioSessionId=reader.uint64();break;case 7:message.wantsCompressedSdp=reader.bool();break;case 10:message.serverSideNetworkAdaption=reader.int32();break;case 11:if(message.supportedServerSideNetworkAdaptions&&message.supportedServerSideNetworkAdaptions.length||(message.supportedServerSideNetworkAdaptions=[]),2==(7&tag))for(var end2=reader.uint32()+reader.pos;reader.pos<end2;)message.supportedServerSideNetworkAdaptions.push(reader.int32());else message.supportedServerSideNetworkAdaptions.push(reader.int32());break;case 12:message.wantsAllTemporalLayersInIndex=reader.bool();break;case 13:message.disablePeriodicKeyframeRequestOnContentSender=reader.bool();break;default:reader.skipType(7&tag)}}return message},SdkJoinFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkJoinFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.protocolVersion&&message.hasOwnProperty("protocolVersion")&&!$util.isInteger(message.protocolVersion))return"protocolVersion: integer expected";if(null!=message.maxNumOfVideos&&message.hasOwnProperty("maxNumOfVideos")&&!$util.isInteger(message.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(null!=message.flags&&message.hasOwnProperty("flags")&&!$util.isInteger(message.flags))return"flags: integer expected";if(null!=message.clientDetails&&message.hasOwnProperty("clientDetails")){var error=$root.SdkClientDetails.verify(message.clientDetails);if(error)return"clientDetails."+error}if(null!=message.audioSessionId&&message.hasOwnProperty("audioSessionId")&&!($util.isInteger(message.audioSessionId)||message.audioSessionId&&$util.isInteger(message.audioSessionId.low)&&$util.isInteger(message.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(null!=message.wantsCompressedSdp&&message.hasOwnProperty("wantsCompressedSdp")&&"boolean"!=typeof message.wantsCompressedSdp)return"wantsCompressedSdp: boolean expected";if(null!=message.serverSideNetworkAdaption&&message.hasOwnProperty("serverSideNetworkAdaption"))switch(message.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:}if(null!=message.supportedServerSideNetworkAdaptions&&message.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(message.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var i=0;i<message.supportedServerSideNetworkAdaptions.length;++i)switch(message.supportedServerSideNetworkAdaptions[i]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:}}return null!=message.wantsAllTemporalLayersInIndex&&message.hasOwnProperty("wantsAllTemporalLayersInIndex")&&"boolean"!=typeof message.wantsAllTemporalLayersInIndex?"wantsAllTemporalLayersInIndex: boolean expected":null!=message.disablePeriodicKeyframeRequestOnContentSender&&message.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&"boolean"!=typeof message.disablePeriodicKeyframeRequestOnContentSender?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},SdkJoinFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkJoinFrame)return object;var message=new $root.SdkJoinFrame;if(null!=object.protocolVersion&&(message.protocolVersion=object.protocolVersion>>>0),null!=object.maxNumOfVideos&&(message.maxNumOfVideos=object.maxNumOfVideos>>>0),null!=object.flags&&(message.flags=object.flags>>>0),null!=object.clientDetails){if("object"!=typeof object.clientDetails)throw TypeError(".SdkJoinFrame.clientDetails: object expected");message.clientDetails=$root.SdkClientDetails.fromObject(object.clientDetails)}switch(null!=object.audioSessionId&&($util.Long?(message.audioSessionId=$util.Long.fromValue(object.audioSessionId)).unsigned=!0:"string"==typeof object.audioSessionId?message.audioSessionId=parseInt(object.audioSessionId,10):"number"==typeof object.audioSessionId?message.audioSessionId=object.audioSessionId:"object"==typeof object.audioSessionId&&(message.audioSessionId=new $util.LongBits(object.audioSessionId.low>>>0,object.audioSessionId.high>>>0).toNumber(!0))),null!=object.wantsCompressedSdp&&(message.wantsCompressedSdp=Boolean(object.wantsCompressedSdp)),object.serverSideNetworkAdaption){default:if("number"==typeof object.serverSideNetworkAdaption){message.serverSideNetworkAdaption=object.serverSideNetworkAdaption;break}break;case"DEFAULT":case 1:message.serverSideNetworkAdaption=1;break;case"NONE":case 2:message.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:message.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:message.serverSideNetworkAdaption=4}if(object.supportedServerSideNetworkAdaptions){if(!Array.isArray(object.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");message.supportedServerSideNetworkAdaptions=[];for(var i=0;i<object.supportedServerSideNetworkAdaptions.length;++i)switch(object.supportedServerSideNetworkAdaptions[i]){default:if("number"==typeof object.supportedServerSideNetworkAdaptions[i]){message.supportedServerSideNetworkAdaptions[i]=object.supportedServerSideNetworkAdaptions[i];break}case"DEFAULT":case 1:message.supportedServerSideNetworkAdaptions[i]=1;break;case"NONE":case 2:message.supportedServerSideNetworkAdaptions[i]=2;break;case"BANDWIDTH_PROBING":case 3:message.supportedServerSideNetworkAdaptions[i]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:message.supportedServerSideNetworkAdaptions[i]=4}}return null!=object.wantsAllTemporalLayersInIndex&&(message.wantsAllTemporalLayersInIndex=Boolean(object.wantsAllTemporalLayersInIndex)),null!=object.disablePeriodicKeyframeRequestOnContentSender&&(message.disablePeriodicKeyframeRequestOnContentSender=Boolean(object.disablePeriodicKeyframeRequestOnContentSender)),message},SdkJoinFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.supportedServerSideNetworkAdaptions=[]),options.defaults){if(object.protocolVersion=2,object.maxNumOfVideos=0,object.flags=0,object.clientDetails=null,$util.Long){var long=new $util.Long(0,0,!0);object.audioSessionId=options.longs===String?long.toString():options.longs===Number?long.toNumber():long}else object.audioSessionId=options.longs===String?"0":0;object.wantsCompressedSdp=!1,object.serverSideNetworkAdaption=options.enums===String?"DEFAULT":1,object.wantsAllTemporalLayersInIndex=!1,object.disablePeriodicKeyframeRequestOnContentSender=!1}if(null!=message.protocolVersion&&message.hasOwnProperty("protocolVersion")&&(object.protocolVersion=message.protocolVersion),null!=message.maxNumOfVideos&&message.hasOwnProperty("maxNumOfVideos")&&(object.maxNumOfVideos=message.maxNumOfVideos),null!=message.flags&&message.hasOwnProperty("flags")&&(object.flags=message.flags),null!=message.clientDetails&&message.hasOwnProperty("clientDetails")&&(object.clientDetails=$root.SdkClientDetails.toObject(message.clientDetails,options)),null!=message.audioSessionId&&message.hasOwnProperty("audioSessionId")&&("number"==typeof message.audioSessionId?object.audioSessionId=options.longs===String?String(message.audioSessionId):message.audioSessionId:object.audioSessionId=options.longs===String?$util.Long.prototype.toString.call(message.audioSessionId):options.longs===Number?new $util.LongBits(message.audioSessionId.low>>>0,message.audioSessionId.high>>>0).toNumber(!0):message.audioSessionId),null!=message.wantsCompressedSdp&&message.hasOwnProperty("wantsCompressedSdp")&&(object.wantsCompressedSdp=message.wantsCompressedSdp),null!=message.serverSideNetworkAdaption&&message.hasOwnProperty("serverSideNetworkAdaption")&&(object.serverSideNetworkAdaption=options.enums===String?void 0===$root.SdkServerSideNetworkAdaption[message.serverSideNetworkAdaption]?message.serverSideNetworkAdaption:$root.SdkServerSideNetworkAdaption[message.serverSideNetworkAdaption]:message.serverSideNetworkAdaption),message.supportedServerSideNetworkAdaptions&&message.supportedServerSideNetworkAdaptions.length){object.supportedServerSideNetworkAdaptions=[];for(var j=0;j<message.supportedServerSideNetworkAdaptions.length;++j)object.supportedServerSideNetworkAdaptions[j]=options.enums===String?void 0===$root.SdkServerSideNetworkAdaption[message.supportedServerSideNetworkAdaptions[j]]?message.supportedServerSideNetworkAdaptions[j]:$root.SdkServerSideNetworkAdaption[message.supportedServerSideNetworkAdaptions[j]]:message.supportedServerSideNetworkAdaptions[j]}return null!=message.wantsAllTemporalLayersInIndex&&message.hasOwnProperty("wantsAllTemporalLayersInIndex")&&(object.wantsAllTemporalLayersInIndex=message.wantsAllTemporalLayersInIndex),null!=message.disablePeriodicKeyframeRequestOnContentSender&&message.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(object.disablePeriodicKeyframeRequestOnContentSender=message.disablePeriodicKeyframeRequestOnContentSender),object},SdkJoinFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkJoinFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkJoinFrame"},SdkJoinFrame}(),$root.SdkJoinAckFrame=function(){function SdkJoinAckFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkJoinAckFrame.prototype.turnCredentials=null,SdkJoinAckFrame.prototype.videoSubscriptionLimit=0,SdkJoinAckFrame.prototype.wantsCompressedSdp=!1,SdkJoinAckFrame.prototype.defaultServerSideNetworkAdaption=1,SdkJoinAckFrame.create=function create(properties){return new SdkJoinAckFrame(properties)},SdkJoinAckFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.turnCredentials&&Object.hasOwnProperty.call(message,"turnCredentials")&&$root.SdkTurnCredentials.encode(message.turnCredentials,writer.uint32(10).fork()).ldelim(),null!=message.videoSubscriptionLimit&&Object.hasOwnProperty.call(message,"videoSubscriptionLimit")&&writer.uint32(16).uint32(message.videoSubscriptionLimit),null!=message.wantsCompressedSdp&&Object.hasOwnProperty.call(message,"wantsCompressedSdp")&&writer.uint32(24).bool(message.wantsCompressedSdp),null!=message.defaultServerSideNetworkAdaption&&Object.hasOwnProperty.call(message,"defaultServerSideNetworkAdaption")&&writer.uint32(32).int32(message.defaultServerSideNetworkAdaption),writer},SdkJoinAckFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkJoinAckFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkJoinAckFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.turnCredentials=$root.SdkTurnCredentials.decode(reader,reader.uint32());break;case 2:message.videoSubscriptionLimit=reader.uint32();break;case 3:message.wantsCompressedSdp=reader.bool();break;case 4:message.defaultServerSideNetworkAdaption=reader.int32();break;default:reader.skipType(7&tag)}}return message},SdkJoinAckFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkJoinAckFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.turnCredentials&&message.hasOwnProperty("turnCredentials")){var error=$root.SdkTurnCredentials.verify(message.turnCredentials);if(error)return"turnCredentials."+error}if(null!=message.videoSubscriptionLimit&&message.hasOwnProperty("videoSubscriptionLimit")&&!$util.isInteger(message.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(null!=message.wantsCompressedSdp&&message.hasOwnProperty("wantsCompressedSdp")&&"boolean"!=typeof message.wantsCompressedSdp)return"wantsCompressedSdp: boolean expected";if(null!=message.defaultServerSideNetworkAdaption&&message.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(message.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:}return null},SdkJoinAckFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkJoinAckFrame)return object;var message=new $root.SdkJoinAckFrame;if(null!=object.turnCredentials){if("object"!=typeof object.turnCredentials)throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");message.turnCredentials=$root.SdkTurnCredentials.fromObject(object.turnCredentials)}switch(null!=object.videoSubscriptionLimit&&(message.videoSubscriptionLimit=object.videoSubscriptionLimit>>>0),null!=object.wantsCompressedSdp&&(message.wantsCompressedSdp=Boolean(object.wantsCompressedSdp)),object.defaultServerSideNetworkAdaption){default:if("number"==typeof object.defaultServerSideNetworkAdaption){message.defaultServerSideNetworkAdaption=object.defaultServerSideNetworkAdaption;break}break;case"DEFAULT":case 1:message.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:message.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:message.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:message.defaultServerSideNetworkAdaption=4}return message},SdkJoinAckFrame.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.turnCredentials=null,object.videoSubscriptionLimit=0,object.wantsCompressedSdp=!1,object.defaultServerSideNetworkAdaption=options.enums===String?"DEFAULT":1),null!=message.turnCredentials&&message.hasOwnProperty("turnCredentials")&&(object.turnCredentials=$root.SdkTurnCredentials.toObject(message.turnCredentials,options)),null!=message.videoSubscriptionLimit&&message.hasOwnProperty("videoSubscriptionLimit")&&(object.videoSubscriptionLimit=message.videoSubscriptionLimit),null!=message.wantsCompressedSdp&&message.hasOwnProperty("wantsCompressedSdp")&&(object.wantsCompressedSdp=message.wantsCompressedSdp),null!=message.defaultServerSideNetworkAdaption&&message.hasOwnProperty("defaultServerSideNetworkAdaption")&&(object.defaultServerSideNetworkAdaption=options.enums===String?void 0===$root.SdkServerSideNetworkAdaption[message.defaultServerSideNetworkAdaption]?message.defaultServerSideNetworkAdaption:$root.SdkServerSideNetworkAdaption[message.defaultServerSideNetworkAdaption]:message.defaultServerSideNetworkAdaption),object},SdkJoinAckFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkJoinAckFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkJoinAckFrame"},SdkJoinAckFrame}(),$root.SdkLeaveFrame=function(){function SdkLeaveFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkLeaveFrame.create=function create(properties){return new SdkLeaveFrame(properties)},SdkLeaveFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),writer},SdkLeaveFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkLeaveFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkLeaveFrame;reader.pos<end;){var tag=reader.uint32();reader.skipType(7&tag)}return message},SdkLeaveFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkLeaveFrame.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null},SdkLeaveFrame.fromObject=function fromObject(object){return object instanceof $root.SdkLeaveFrame?object:new $root.SdkLeaveFrame},SdkLeaveFrame.toObject=function toObject(){return{}},SdkLeaveFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkLeaveFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkLeaveFrame"},SdkLeaveFrame}(),$root.SdkLeaveAckFrame=function(){function SdkLeaveAckFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkLeaveAckFrame.create=function create(properties){return new SdkLeaveAckFrame(properties)},SdkLeaveAckFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),writer},SdkLeaveAckFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkLeaveAckFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkLeaveAckFrame;reader.pos<end;){var tag=reader.uint32();reader.skipType(7&tag)}return message},SdkLeaveAckFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkLeaveAckFrame.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null},SdkLeaveAckFrame.fromObject=function fromObject(object){return object instanceof $root.SdkLeaveAckFrame?object:new $root.SdkLeaveAckFrame},SdkLeaveAckFrame.toObject=function toObject(){return{}},SdkLeaveAckFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkLeaveAckFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkLeaveAckFrame"},SdkLeaveAckFrame}(),$root.SdkStreamServiceType=function(){var valuesById={},values=Object.create(valuesById);return values[valuesById[1]="RX"]=1,values[valuesById[2]="TX"]=2,values[valuesById[3]="DUPLEX"]=3,values}(),$root.SdkStreamMediaType=function(){var valuesById={},values=Object.create(valuesById);return values[valuesById[1]="AUDIO"]=1,values[valuesById[2]="VIDEO"]=2,values}(),$root.SdkSubscribeFrame=function(){function SdkSubscribeFrame(properties){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkSubscribeFrame.prototype.duplex=1,SdkSubscribeFrame.prototype.sendStreams=$util.emptyArray,SdkSubscribeFrame.prototype.receiveStreamIds=$util.emptyArray,SdkSubscribeFrame.prototype.sdpOffer="",SdkSubscribeFrame.prototype.audioHost="",SdkSubscribeFrame.prototype.audioCheckin=!1,SdkSubscribeFrame.prototype.audioMuted=!1,SdkSubscribeFrame.prototype.compressedSdpOffer=$util.newBuffer([]),SdkSubscribeFrame.prototype.videoSubscriptionConfiguration=$util.emptyArray,SdkSubscribeFrame.create=function create(properties){return new SdkSubscribeFrame(properties)},SdkSubscribeFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.duplex&&Object.hasOwnProperty.call(message,"duplex")&&writer.uint32(8).int32(message.duplex),null!=message.sendStreams&&message.sendStreams.length)for(var i=0;i<message.sendStreams.length;++i)$root.SdkStreamDescriptor.encode(message.sendStreams[i],writer.uint32(18).fork()).ldelim();if(null!=message.receiveStreamIds&&message.receiveStreamIds.length)for(i=0;i<message.receiveStreamIds.length;++i)writer.uint32(24).uint32(message.receiveStreamIds[i]);if(null!=message.sdpOffer&&Object.hasOwnProperty.call(message,"sdpOffer")&&writer.uint32(34).string(message.sdpOffer),null!=message.audioHost&&Object.hasOwnProperty.call(message,"audioHost")&&writer.uint32(42).string(message.audioHost),null!=message.audioCheckin&&Object.hasOwnProperty.call(message,"audioCheckin")&&writer.uint32(48).bool(message.audioCheckin),null!=message.audioMuted&&Object.hasOwnProperty.call(message,"audioMuted")&&writer.uint32(56).bool(message.audioMuted),null!=message.compressedSdpOffer&&Object.hasOwnProperty.call(message,"compressedSdpOffer")&&writer.uint32(66).bytes(message.compressedSdpOffer),null!=message.videoSubscriptionConfiguration&&message.videoSubscriptionConfiguration.length)for(i=0;i<message.videoSubscriptionConfiguration.length;++i)$root.SdkVideoSubscriptionConfiguration.encode(message.videoSubscriptionConfiguration[i],writer.uint32(74).fork()).ldelim();return writer},SdkSubscribeFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkSubscribeFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkSubscribeFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.duplex=reader.int32();break;case 2:message.sendStreams&&message.sendStreams.length||(message.sendStreams=[]),message.sendStreams.push($root.SdkStreamDescriptor.decode(reader,reader.uint32()));break;case 3:if(message.receiveStreamIds&&message.receiveStreamIds.length||(message.receiveStreamIds=[]),2==(7&tag))for(var end2=reader.uint32()+reader.pos;reader.pos<end2;)message.receiveStreamIds.push(reader.uint32());else message.receiveStreamIds.push(reader.uint32());break;case 4:message.sdpOffer=reader.string();break;case 5:message.audioHost=reader.string();break;case 6:message.audioCheckin=reader.bool();break;case 7:message.audioMuted=reader.bool();break;case 8:message.compressedSdpOffer=reader.bytes();break;case 9:message.videoSubscriptionConfiguration&&message.videoSubscriptionConfiguration.length||(message.videoSubscriptionConfiguration=[]),message.videoSubscriptionConfiguration.push($root.SdkVideoSubscriptionConfiguration.decode(reader,reader.uint32()));break;default:reader.skipType(7&tag)}}return message},SdkSubscribeFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkSubscribeFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.duplex&&message.hasOwnProperty("duplex"))switch(message.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:}if(null!=message.sendStreams&&message.hasOwnProperty("sendStreams")){if(!Array.isArray(message.sendStreams))return"sendStreams: array expected";for(var i=0;i<message.sendStreams.length;++i){if(error=$root.SdkStreamDescriptor.verify(message.sendStreams[i]))return"sendStreams."+error}}if(null!=message.receiveStreamIds&&message.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(message.receiveStreamIds))return"receiveStreamIds: array expected";for(i=0;i<message.receiveStreamIds.length;++i)if(!$util.isInteger(message.receiveStreamIds[i]))return"receiveStreamIds: integer[] expected"}if(null!=message.sdpOffer&&message.hasOwnProperty("sdpOffer")&&!$util.isString(message.sdpOffer))return"sdpOffer: string expected";if(null!=message.audioHost&&message.hasOwnProperty("audioHost")&&!$util.isString(message.audioHost))return"audioHost: string expected";if(null!=message.audioCheckin&&message.hasOwnProperty("audioCheckin")&&"boolean"!=typeof message.audioCheckin)return"audioCheckin: boolean expected";if(null!=message.audioMuted&&message.hasOwnProperty("audioMuted")&&"boolean"!=typeof message.audioMuted)return"audioMuted: boolean expected";if(null!=message.compressedSdpOffer&&message.hasOwnProperty("compressedSdpOffer")&&!(message.compressedSdpOffer&&"number"==typeof message.compressedSdpOffer.length||$util.isString(message.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(null!=message.videoSubscriptionConfiguration&&message.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(message.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(i=0;i<message.videoSubscriptionConfiguration.length;++i){var error;if(error=$root.SdkVideoSubscriptionConfiguration.verify(message.videoSubscriptionConfiguration[i]))return"videoSubscriptionConfiguration."+error}}return null},SdkSubscribeFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkSubscribeFrame)return object;var message=new $root.SdkSubscribeFrame;switch(object.duplex){default:if("number"==typeof object.duplex){message.duplex=object.duplex;break}break;case"RX":case 1:message.duplex=1;break;case"TX":case 2:message.duplex=2;break;case"DUPLEX":case 3:message.duplex=3}if(object.sendStreams){if(!Array.isArray(object.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");message.sendStreams=[];for(var i=0;i<object.sendStreams.length;++i){if("object"!=typeof object.sendStreams[i])throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");message.sendStreams[i]=$root.SdkStreamDescriptor.fromObject(object.sendStreams[i])}}if(object.receiveStreamIds){if(!Array.isArray(object.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");message.receiveStreamIds=[];for(i=0;i<object.receiveStreamIds.length;++i)message.receiveStreamIds[i]=object.receiveStreamIds[i]>>>0}if(null!=object.sdpOffer&&(message.sdpOffer=String(object.sdpOffer)),null!=object.audioHost&&(message.audioHost=String(object.audioHost)),null!=object.audioCheckin&&(message.audioCheckin=Boolean(object.audioCheckin)),null!=object.audioMuted&&(message.audioMuted=Boolean(object.audioMuted)),null!=object.compressedSdpOffer&&("string"==typeof object.compressedSdpOffer?$util.base64.decode(object.compressedSdpOffer,message.compressedSdpOffer=$util.newBuffer($util.base64.length(object.compressedSdpOffer)),0):object.compressedSdpOffer.length>=0&&(message.compressedSdpOffer=object.compressedSdpOffer)),object.videoSubscriptionConfiguration){if(!Array.isArray(object.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");message.videoSubscriptionConfiguration=[];for(i=0;i<object.videoSubscriptionConfiguration.length;++i){if("object"!=typeof object.videoSubscriptionConfiguration[i])throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");message.videoSubscriptionConfiguration[i]=$root.SdkVideoSubscriptionConfiguration.fromObject(object.videoSubscriptionConfiguration[i])}}return message},SdkSubscribeFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.sendStreams=[],object.receiveStreamIds=[],object.videoSubscriptionConfiguration=[]),options.defaults&&(object.duplex=options.enums===String?"RX":1,object.sdpOffer="",object.audioHost="",object.audioCheckin=!1,object.audioMuted=!1,options.bytes===String?object.compressedSdpOffer="":(object.compressedSdpOffer=[],options.bytes!==Array&&(object.compressedSdpOffer=$util.newBuffer(object.compressedSdpOffer)))),null!=message.duplex&&message.hasOwnProperty("duplex")&&(object.duplex=options.enums===String?void 0===$root.SdkStreamServiceType[message.duplex]?message.duplex:$root.SdkStreamServiceType[message.duplex]:message.duplex),message.sendStreams&&message.sendStreams.length){object.sendStreams=[];for(var j=0;j<message.sendStreams.length;++j)object.sendStreams[j]=$root.SdkStreamDescriptor.toObject(message.sendStreams[j],options)}if(message.receiveStreamIds&&message.receiveStreamIds.length){object.receiveStreamIds=[];for(j=0;j<message.receiveStreamIds.length;++j)object.receiveStreamIds[j]=message.receiveStreamIds[j]}if(null!=message.sdpOffer&&message.hasOwnProperty("sdpOffer")&&(object.sdpOffer=message.sdpOffer),null!=message.audioHost&&message.hasOwnProperty("audioHost")&&(object.audioHost=message.audioHost),null!=message.audioCheckin&&message.hasOwnProperty("audioCheckin")&&(object.audioCheckin=message.audioCheckin),null!=message.audioMuted&&message.hasOwnProperty("audioMuted")&&(object.audioMuted=message.audioMuted),null!=message.compressedSdpOffer&&message.hasOwnProperty("compressedSdpOffer")&&(object.compressedSdpOffer=options.bytes===String?$util.base64.encode(message.compressedSdpOffer,0,message.compressedSdpOffer.length):options.bytes===Array?Array.prototype.slice.call(message.compressedSdpOffer):message.compressedSdpOffer),message.videoSubscriptionConfiguration&&message.videoSubscriptionConfiguration.length){object.videoSubscriptionConfiguration=[];for(j=0;j<message.videoSubscriptionConfiguration.length;++j)object.videoSubscriptionConfiguration[j]=$root.SdkVideoSubscriptionConfiguration.toObject(message.videoSubscriptionConfiguration[j],options)}return object},SdkSubscribeFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkSubscribeFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkSubscribeFrame"},SdkSubscribeFrame}(),$root.SdkSubscribeAckFrame=function(){function SdkSubscribeAckFrame(properties){if(this.allocations=[],this.tracks=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkSubscribeAckFrame.prototype.duplex=1,SdkSubscribeAckFrame.prototype.allocations=$util.emptyArray,SdkSubscribeAckFrame.prototype.sdpAnswer="",SdkSubscribeAckFrame.prototype.tracks=$util.emptyArray,SdkSubscribeAckFrame.prototype.compressedSdpAnswer=$util.newBuffer([]),SdkSubscribeAckFrame.create=function create(properties){return new SdkSubscribeAckFrame(properties)},SdkSubscribeAckFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.duplex&&Object.hasOwnProperty.call(message,"duplex")&&writer.uint32(8).int32(message.duplex),null!=message.allocations&&message.allocations.length)for(var i=0;i<message.allocations.length;++i)$root.SdkStreamAllocation.encode(message.allocations[i],writer.uint32(18).fork()).ldelim();if(null!=message.sdpAnswer&&Object.hasOwnProperty.call(message,"sdpAnswer")&&writer.uint32(26).string(message.sdpAnswer),null!=message.tracks&&message.tracks.length)for(i=0;i<message.tracks.length;++i)$root.SdkTrackMapping.encode(message.tracks[i],writer.uint32(34).fork()).ldelim();return null!=message.compressedSdpAnswer&&Object.hasOwnProperty.call(message,"compressedSdpAnswer")&&writer.uint32(42).bytes(message.compressedSdpAnswer),writer},SdkSubscribeAckFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkSubscribeAckFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkSubscribeAckFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.duplex=reader.int32();break;case 2:message.allocations&&message.allocations.length||(message.allocations=[]),message.allocations.push($root.SdkStreamAllocation.decode(reader,reader.uint32()));break;case 3:message.sdpAnswer=reader.string();break;case 4:message.tracks&&message.tracks.length||(message.tracks=[]),message.tracks.push($root.SdkTrackMapping.decode(reader,reader.uint32()));break;case 5:message.compressedSdpAnswer=reader.bytes();break;default:reader.skipType(7&tag)}}return message},SdkSubscribeAckFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkSubscribeAckFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.duplex&&message.hasOwnProperty("duplex"))switch(message.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:}if(null!=message.allocations&&message.hasOwnProperty("allocations")){if(!Array.isArray(message.allocations))return"allocations: array expected";for(var i=0;i<message.allocations.length;++i){if(error=$root.SdkStreamAllocation.verify(message.allocations[i]))return"allocations."+error}}if(null!=message.sdpAnswer&&message.hasOwnProperty("sdpAnswer")&&!$util.isString(message.sdpAnswer))return"sdpAnswer: string expected";if(null!=message.tracks&&message.hasOwnProperty("tracks")){if(!Array.isArray(message.tracks))return"tracks: array expected";for(i=0;i<message.tracks.length;++i){var error;if(error=$root.SdkTrackMapping.verify(message.tracks[i]))return"tracks."+error}}return null!=message.compressedSdpAnswer&&message.hasOwnProperty("compressedSdpAnswer")&&!(message.compressedSdpAnswer&&"number"==typeof message.compressedSdpAnswer.length||$util.isString(message.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},SdkSubscribeAckFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkSubscribeAckFrame)return object;var message=new $root.SdkSubscribeAckFrame;switch(object.duplex){default:if("number"==typeof object.duplex){message.duplex=object.duplex;break}break;case"RX":case 1:message.duplex=1;break;case"TX":case 2:message.duplex=2;break;case"DUPLEX":case 3:message.duplex=3}if(object.allocations){if(!Array.isArray(object.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");message.allocations=[];for(var i=0;i<object.allocations.length;++i){if("object"!=typeof object.allocations[i])throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");message.allocations[i]=$root.SdkStreamAllocation.fromObject(object.allocations[i])}}if(null!=object.sdpAnswer&&(message.sdpAnswer=String(object.sdpAnswer)),object.tracks){if(!Array.isArray(object.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");message.tracks=[];for(i=0;i<object.tracks.length;++i){if("object"!=typeof object.tracks[i])throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");message.tracks[i]=$root.SdkTrackMapping.fromObject(object.tracks[i])}}return null!=object.compressedSdpAnswer&&("string"==typeof object.compressedSdpAnswer?$util.base64.decode(object.compressedSdpAnswer,message.compressedSdpAnswer=$util.newBuffer($util.base64.length(object.compressedSdpAnswer)),0):object.compressedSdpAnswer.length>=0&&(message.compressedSdpAnswer=object.compressedSdpAnswer)),message},SdkSubscribeAckFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.allocations=[],object.tracks=[]),options.defaults&&(object.duplex=options.enums===String?"RX":1,object.sdpAnswer="",options.bytes===String?object.compressedSdpAnswer="":(object.compressedSdpAnswer=[],options.bytes!==Array&&(object.compressedSdpAnswer=$util.newBuffer(object.compressedSdpAnswer)))),null!=message.duplex&&message.hasOwnProperty("duplex")&&(object.duplex=options.enums===String?void 0===$root.SdkStreamServiceType[message.duplex]?message.duplex:$root.SdkStreamServiceType[message.duplex]:message.duplex),message.allocations&&message.allocations.length){object.allocations=[];for(var j=0;j<message.allocations.length;++j)object.allocations[j]=$root.SdkStreamAllocation.toObject(message.allocations[j],options)}if(null!=message.sdpAnswer&&message.hasOwnProperty("sdpAnswer")&&(object.sdpAnswer=message.sdpAnswer),message.tracks&&message.tracks.length){object.tracks=[];for(j=0;j<message.tracks.length;++j)object.tracks[j]=$root.SdkTrackMapping.toObject(message.tracks[j],options)}return null!=message.compressedSdpAnswer&&message.hasOwnProperty("compressedSdpAnswer")&&(object.compressedSdpAnswer=options.bytes===String?$util.base64.encode(message.compressedSdpAnswer,0,message.compressedSdpAnswer.length):options.bytes===Array?Array.prototype.slice.call(message.compressedSdpAnswer):message.compressedSdpAnswer),object},SdkSubscribeAckFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkSubscribeAckFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkSubscribeAckFrame"},SdkSubscribeAckFrame}(),$root.SdkIndexFrame=function(){function SdkIndexFrame(properties){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkIndexFrame.prototype.atCapacity=!1,SdkIndexFrame.prototype.sources=$util.emptyArray,SdkIndexFrame.prototype.pausedAtSourceIds=$util.emptyArray,SdkIndexFrame.prototype.numParticipants=0,SdkIndexFrame.prototype.supportedReceiveCodecIntersection=$util.emptyArray,SdkIndexFrame.create=function create(properties){return new SdkIndexFrame(properties)},SdkIndexFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.atCapacity&&Object.hasOwnProperty.call(message,"atCapacity")&&writer.uint32(8).bool(message.atCapacity),null!=message.sources&&message.sources.length)for(var i=0;i<message.sources.length;++i)$root.SdkStreamDescriptor.encode(message.sources[i],writer.uint32(18).fork()).ldelim();if(null!=message.pausedAtSourceIds&&message.pausedAtSourceIds.length)for(i=0;i<message.pausedAtSourceIds.length;++i)writer.uint32(24).uint32(message.pausedAtSourceIds[i]);if(null!=message.numParticipants&&Object.hasOwnProperty.call(message,"numParticipants")&&writer.uint32(32).uint32(message.numParticipants),null!=message.supportedReceiveCodecIntersection&&message.supportedReceiveCodecIntersection.length)for(i=0;i<message.supportedReceiveCodecIntersection.length;++i)writer.uint32(40).int32(message.supportedReceiveCodecIntersection[i]);return writer},SdkIndexFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkIndexFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkIndexFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.atCapacity=reader.bool();break;case 2:message.sources&&message.sources.length||(message.sources=[]),message.sources.push($root.SdkStreamDescriptor.decode(reader,reader.uint32()));break;case 3:if(message.pausedAtSourceIds&&message.pausedAtSourceIds.length||(message.pausedAtSourceIds=[]),2==(7&tag))for(var end2=reader.uint32()+reader.pos;reader.pos<end2;)message.pausedAtSourceIds.push(reader.uint32());else message.pausedAtSourceIds.push(reader.uint32());break;case 4:message.numParticipants=reader.uint32();break;case 5:if(message.supportedReceiveCodecIntersection&&message.supportedReceiveCodecIntersection.length||(message.supportedReceiveCodecIntersection=[]),2==(7&tag))for(end2=reader.uint32()+reader.pos;reader.pos<end2;)message.supportedReceiveCodecIntersection.push(reader.int32());else message.supportedReceiveCodecIntersection.push(reader.int32());break;default:reader.skipType(7&tag)}}return message},SdkIndexFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkIndexFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.atCapacity&&message.hasOwnProperty("atCapacity")&&"boolean"!=typeof message.atCapacity)return"atCapacity: boolean expected";if(null!=message.sources&&message.hasOwnProperty("sources")){if(!Array.isArray(message.sources))return"sources: array expected";for(var i=0;i<message.sources.length;++i){var error=$root.SdkStreamDescriptor.verify(message.sources[i]);if(error)return"sources."+error}}if(null!=message.pausedAtSourceIds&&message.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(message.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(i=0;i<message.pausedAtSourceIds.length;++i)if(!$util.isInteger(message.pausedAtSourceIds[i]))return"pausedAtSourceIds: integer[] expected"}if(null!=message.numParticipants&&message.hasOwnProperty("numParticipants")&&!$util.isInteger(message.numParticipants))return"numParticipants: integer expected";if(null!=message.supportedReceiveCodecIntersection&&message.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(message.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(i=0;i<message.supportedReceiveCodecIntersection.length;++i)switch(message.supportedReceiveCodecIntersection[i]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 2:case 3:case 4:case 5:case 6:case 8:case 11:}}return null},SdkIndexFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkIndexFrame)return object;var message=new $root.SdkIndexFrame;if(null!=object.atCapacity&&(message.atCapacity=Boolean(object.atCapacity)),object.sources){if(!Array.isArray(object.sources))throw TypeError(".SdkIndexFrame.sources: array expected");message.sources=[];for(var i=0;i<object.sources.length;++i){if("object"!=typeof object.sources[i])throw TypeError(".SdkIndexFrame.sources: object expected");message.sources[i]=$root.SdkStreamDescriptor.fromObject(object.sources[i])}}if(object.pausedAtSourceIds){if(!Array.isArray(object.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");message.pausedAtSourceIds=[];for(i=0;i<object.pausedAtSourceIds.length;++i)message.pausedAtSourceIds[i]=object.pausedAtSourceIds[i]>>>0}if(null!=object.numParticipants&&(message.numParticipants=object.numParticipants>>>0),object.supportedReceiveCodecIntersection){if(!Array.isArray(object.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");message.supportedReceiveCodecIntersection=[];for(i=0;i<object.supportedReceiveCodecIntersection.length;++i)switch(object.supportedReceiveCodecIntersection[i]){default:if("number"==typeof object.supportedReceiveCodecIntersection[i]){message.supportedReceiveCodecIntersection[i]=object.supportedReceiveCodecIntersection[i];break}case"VP8":case 1:message.supportedReceiveCodecIntersection[i]=1;break;case"H264_BASELINE_PROFILE":case 2:message.supportedReceiveCodecIntersection[i]=2;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:message.supportedReceiveCodecIntersection[i]=3;break;case"H264_MAIN_PROFILE":case 4:message.supportedReceiveCodecIntersection[i]=4;break;case"H264_HIGH_PROFILE":case 5:message.supportedReceiveCodecIntersection[i]=5;break;case"H264_CONSTRAINED_HIGH_PROFILE":case 6:message.supportedReceiveCodecIntersection[i]=6;break;case"VP9_PROFILE_0":case 8:message.supportedReceiveCodecIntersection[i]=8;break;case"AV1_MAIN_PROFILE":case 11:message.supportedReceiveCodecIntersection[i]=11}}return message},SdkIndexFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.sources=[],object.pausedAtSourceIds=[],object.supportedReceiveCodecIntersection=[]),options.defaults&&(object.atCapacity=!1,object.numParticipants=0),null!=message.atCapacity&&message.hasOwnProperty("atCapacity")&&(object.atCapacity=message.atCapacity),message.sources&&message.sources.length){object.sources=[];for(var j=0;j<message.sources.length;++j)object.sources[j]=$root.SdkStreamDescriptor.toObject(message.sources[j],options)}if(message.pausedAtSourceIds&&message.pausedAtSourceIds.length){object.pausedAtSourceIds=[];for(j=0;j<message.pausedAtSourceIds.length;++j)object.pausedAtSourceIds[j]=message.pausedAtSourceIds[j]}if(null!=message.numParticipants&&message.hasOwnProperty("numParticipants")&&(object.numParticipants=message.numParticipants),message.supportedReceiveCodecIntersection&&message.supportedReceiveCodecIntersection.length){object.supportedReceiveCodecIntersection=[];for(j=0;j<message.supportedReceiveCodecIntersection.length;++j)object.supportedReceiveCodecIntersection[j]=options.enums===String?void 0===$root.SdkVideoCodecCapability[message.supportedReceiveCodecIntersection[j]]?message.supportedReceiveCodecIntersection[j]:$root.SdkVideoCodecCapability[message.supportedReceiveCodecIntersection[j]]:message.supportedReceiveCodecIntersection[j]}return object},SdkIndexFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkIndexFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkIndexFrame"},SdkIndexFrame}(),$root.SdkPauseResumeFrame=function(){function SdkPauseResumeFrame(properties){if(this.streamIds=[],this.groupIds=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkPauseResumeFrame.prototype.streamIds=$util.emptyArray,SdkPauseResumeFrame.prototype.groupIds=$util.emptyArray,SdkPauseResumeFrame.create=function create(properties){return new SdkPauseResumeFrame(properties)},SdkPauseResumeFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.streamIds&&message.streamIds.length)for(var i=0;i<message.streamIds.length;++i)writer.uint32(8).uint32(message.streamIds[i]);if(null!=message.groupIds&&message.groupIds.length)for(i=0;i<message.groupIds.length;++i)writer.uint32(16).uint32(message.groupIds[i]);return writer},SdkPauseResumeFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkPauseResumeFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkPauseResumeFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:if(message.streamIds&&message.streamIds.length||(message.streamIds=[]),2==(7&tag))for(var end2=reader.uint32()+reader.pos;reader.pos<end2;)message.streamIds.push(reader.uint32());else message.streamIds.push(reader.uint32());break;case 2:if(message.groupIds&&message.groupIds.length||(message.groupIds=[]),2==(7&tag))for(end2=reader.uint32()+reader.pos;reader.pos<end2;)message.groupIds.push(reader.uint32());else message.groupIds.push(reader.uint32());break;default:reader.skipType(7&tag)}}return message},SdkPauseResumeFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkPauseResumeFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.streamIds&&message.hasOwnProperty("streamIds")){if(!Array.isArray(message.streamIds))return"streamIds: array expected";for(var i=0;i<message.streamIds.length;++i)if(!$util.isInteger(message.streamIds[i]))return"streamIds: integer[] expected"}if(null!=message.groupIds&&message.hasOwnProperty("groupIds")){if(!Array.isArray(message.groupIds))return"groupIds: array expected";for(i=0;i<message.groupIds.length;++i)if(!$util.isInteger(message.groupIds[i]))return"groupIds: integer[] expected"}return null},SdkPauseResumeFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkPauseResumeFrame)return object;var message=new $root.SdkPauseResumeFrame;if(object.streamIds){if(!Array.isArray(object.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");message.streamIds=[];for(var i=0;i<object.streamIds.length;++i)message.streamIds[i]=object.streamIds[i]>>>0}if(object.groupIds){if(!Array.isArray(object.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");message.groupIds=[];for(i=0;i<object.groupIds.length;++i)message.groupIds[i]=object.groupIds[i]>>>0}return message},SdkPauseResumeFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.streamIds=[],object.groupIds=[]),message.streamIds&&message.streamIds.length){object.streamIds=[];for(var j=0;j<message.streamIds.length;++j)object.streamIds[j]=message.streamIds[j]}if(message.groupIds&&message.groupIds.length){object.groupIds=[];for(j=0;j<message.groupIds.length;++j)object.groupIds[j]=message.groupIds[j]}return object},SdkPauseResumeFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkPauseResumeFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkPauseResumeFrame"},SdkPauseResumeFrame}(),$root.SdkBitrateFrame=function(){function SdkBitrateFrame(properties){if(this.bitrates=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkBitrateFrame.prototype.bitrates=$util.emptyArray,SdkBitrateFrame.prototype.serverAvailableOutgoingBitrate=0,SdkBitrateFrame.create=function create(properties){return new SdkBitrateFrame(properties)},SdkBitrateFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.bitrates&&message.bitrates.length)for(var i=0;i<message.bitrates.length;++i)$root.SdkBitrate.encode(message.bitrates[i],writer.uint32(10).fork()).ldelim();return null!=message.serverAvailableOutgoingBitrate&&Object.hasOwnProperty.call(message,"serverAvailableOutgoingBitrate")&&writer.uint32(16).uint32(message.serverAvailableOutgoingBitrate),writer},SdkBitrateFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkBitrateFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkBitrateFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.bitrates&&message.bitrates.length||(message.bitrates=[]),message.bitrates.push($root.SdkBitrate.decode(reader,reader.uint32()));break;case 2:message.serverAvailableOutgoingBitrate=reader.uint32();break;default:reader.skipType(7&tag)}}return message},SdkBitrateFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkBitrateFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.bitrates&&message.hasOwnProperty("bitrates")){if(!Array.isArray(message.bitrates))return"bitrates: array expected";for(var i=0;i<message.bitrates.length;++i){var error=$root.SdkBitrate.verify(message.bitrates[i]);if(error)return"bitrates."+error}}return null!=message.serverAvailableOutgoingBitrate&&message.hasOwnProperty("serverAvailableOutgoingBitrate")&&!$util.isInteger(message.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},SdkBitrateFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkBitrateFrame)return object;var message=new $root.SdkBitrateFrame;if(object.bitrates){if(!Array.isArray(object.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");message.bitrates=[];for(var i=0;i<object.bitrates.length;++i){if("object"!=typeof object.bitrates[i])throw TypeError(".SdkBitrateFrame.bitrates: object expected");message.bitrates[i]=$root.SdkBitrate.fromObject(object.bitrates[i])}}return null!=object.serverAvailableOutgoingBitrate&&(message.serverAvailableOutgoingBitrate=object.serverAvailableOutgoingBitrate>>>0),message},SdkBitrateFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.bitrates=[]),options.defaults&&(object.serverAvailableOutgoingBitrate=0),message.bitrates&&message.bitrates.length){object.bitrates=[];for(var j=0;j<message.bitrates.length;++j)object.bitrates[j]=$root.SdkBitrate.toObject(message.bitrates[j],options)}return null!=message.serverAvailableOutgoingBitrate&&message.hasOwnProperty("serverAvailableOutgoingBitrate")&&(object.serverAvailableOutgoingBitrate=message.serverAvailableOutgoingBitrate),object},SdkBitrateFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkBitrateFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkBitrateFrame"},SdkBitrateFrame}(),$root.SdkStreamDescriptor=function(){function SdkStreamDescriptor(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkStreamDescriptor.prototype.streamId=0,SdkStreamDescriptor.prototype.framerate=0,SdkStreamDescriptor.prototype.maxBitrateKbps=0,SdkStreamDescriptor.prototype.trackLabel="",SdkStreamDescriptor.prototype.groupId=0,SdkStreamDescriptor.prototype.avgBitrateBps=0,SdkStreamDescriptor.prototype.attendeeId="",SdkStreamDescriptor.prototype.mediaType=1,SdkStreamDescriptor.prototype.externalUserId="",SdkStreamDescriptor.prototype.width=0,SdkStreamDescriptor.prototype.height=0,SdkStreamDescriptor.create=function create(properties){return new SdkStreamDescriptor(properties)},SdkStreamDescriptor.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.streamId&&Object.hasOwnProperty.call(message,"streamId")&&writer.uint32(8).uint32(message.streamId),null!=message.framerate&&Object.hasOwnProperty.call(message,"framerate")&&writer.uint32(16).uint32(message.framerate),null!=message.maxBitrateKbps&&Object.hasOwnProperty.call(message,"maxBitrateKbps")&&writer.uint32(24).uint32(message.maxBitrateKbps),null!=message.trackLabel&&Object.hasOwnProperty.call(message,"trackLabel")&&writer.uint32(34).string(message.trackLabel),null!=message.groupId&&Object.hasOwnProperty.call(message,"groupId")&&writer.uint32(48).uint32(message.groupId),null!=message.avgBitrateBps&&Object.hasOwnProperty.call(message,"avgBitrateBps")&&writer.uint32(56).uint32(message.avgBitrateBps),null!=message.attendeeId&&Object.hasOwnProperty.call(message,"attendeeId")&&writer.uint32(66).string(message.attendeeId),null!=message.mediaType&&Object.hasOwnProperty.call(message,"mediaType")&&writer.uint32(72).int32(message.mediaType),null!=message.externalUserId&&Object.hasOwnProperty.call(message,"externalUserId")&&writer.uint32(82).string(message.externalUserId),null!=message.width&&Object.hasOwnProperty.call(message,"width")&&writer.uint32(88).uint32(message.width),null!=message.height&&Object.hasOwnProperty.call(message,"height")&&writer.uint32(96).uint32(message.height),writer},SdkStreamDescriptor.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkStreamDescriptor.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkStreamDescriptor;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.streamId=reader.uint32();break;case 2:message.framerate=reader.uint32();break;case 3:message.maxBitrateKbps=reader.uint32();break;case 4:message.trackLabel=reader.string();break;case 6:message.groupId=reader.uint32();break;case 7:message.avgBitrateBps=reader.uint32();break;case 8:message.attendeeId=reader.string();break;case 9:message.mediaType=reader.int32();break;case 10:message.externalUserId=reader.string();break;case 11:message.width=reader.uint32();break;case 12:message.height=reader.uint32();break;default:reader.skipType(7&tag)}}return message},SdkStreamDescriptor.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkStreamDescriptor.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.streamId&&message.hasOwnProperty("streamId")&&!$util.isInteger(message.streamId))return"streamId: integer expected";if(null!=message.framerate&&message.hasOwnProperty("framerate")&&!$util.isInteger(message.framerate))return"framerate: integer expected";if(null!=message.maxBitrateKbps&&message.hasOwnProperty("maxBitrateKbps")&&!$util.isInteger(message.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(null!=message.trackLabel&&message.hasOwnProperty("trackLabel")&&!$util.isString(message.trackLabel))return"trackLabel: string expected";if(null!=message.groupId&&message.hasOwnProperty("groupId")&&!$util.isInteger(message.groupId))return"groupId: integer expected";if(null!=message.avgBitrateBps&&message.hasOwnProperty("avgBitrateBps")&&!$util.isInteger(message.avgBitrateBps))return"avgBitrateBps: integer expected";if(null!=message.attendeeId&&message.hasOwnProperty("attendeeId")&&!$util.isString(message.attendeeId))return"attendeeId: string expected";if(null!=message.mediaType&&message.hasOwnProperty("mediaType"))switch(message.mediaType){default:return"mediaType: enum value expected";case 1:case 2:}return null!=message.externalUserId&&message.hasOwnProperty("externalUserId")&&!$util.isString(message.externalUserId)?"externalUserId: string expected":null!=message.width&&message.hasOwnProperty("width")&&!$util.isInteger(message.width)?"width: integer expected":null!=message.height&&message.hasOwnProperty("height")&&!$util.isInteger(message.height)?"height: integer expected":null},SdkStreamDescriptor.fromObject=function fromObject(object){if(object instanceof $root.SdkStreamDescriptor)return object;var message=new $root.SdkStreamDescriptor;switch(null!=object.streamId&&(message.streamId=object.streamId>>>0),null!=object.framerate&&(message.framerate=object.framerate>>>0),null!=object.maxBitrateKbps&&(message.maxBitrateKbps=object.maxBitrateKbps>>>0),null!=object.trackLabel&&(message.trackLabel=String(object.trackLabel)),null!=object.groupId&&(message.groupId=object.groupId>>>0),null!=object.avgBitrateBps&&(message.avgBitrateBps=object.avgBitrateBps>>>0),null!=object.attendeeId&&(message.attendeeId=String(object.attendeeId)),object.mediaType){default:if("number"==typeof object.mediaType){message.mediaType=object.mediaType;break}break;case"AUDIO":case 1:message.mediaType=1;break;case"VIDEO":case 2:message.mediaType=2}return null!=object.externalUserId&&(message.externalUserId=String(object.externalUserId)),null!=object.width&&(message.width=object.width>>>0),null!=object.height&&(message.height=object.height>>>0),message},SdkStreamDescriptor.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.streamId=0,object.framerate=0,object.maxBitrateKbps=0,object.trackLabel="",object.groupId=0,object.avgBitrateBps=0,object.attendeeId="",object.mediaType=options.enums===String?"AUDIO":1,object.externalUserId="",object.width=0,object.height=0),null!=message.streamId&&message.hasOwnProperty("streamId")&&(object.streamId=message.streamId),null!=message.framerate&&message.hasOwnProperty("framerate")&&(object.framerate=message.framerate),null!=message.maxBitrateKbps&&message.hasOwnProperty("maxBitrateKbps")&&(object.maxBitrateKbps=message.maxBitrateKbps),null!=message.trackLabel&&message.hasOwnProperty("trackLabel")&&(object.trackLabel=message.trackLabel),null!=message.groupId&&message.hasOwnProperty("groupId")&&(object.groupId=message.groupId),null!=message.avgBitrateBps&&message.hasOwnProperty("avgBitrateBps")&&(object.avgBitrateBps=message.avgBitrateBps),null!=message.attendeeId&&message.hasOwnProperty("attendeeId")&&(object.attendeeId=message.attendeeId),null!=message.mediaType&&message.hasOwnProperty("mediaType")&&(object.mediaType=options.enums===String?void 0===$root.SdkStreamMediaType[message.mediaType]?message.mediaType:$root.SdkStreamMediaType[message.mediaType]:message.mediaType),null!=message.externalUserId&&message.hasOwnProperty("externalUserId")&&(object.externalUserId=message.externalUserId),null!=message.width&&message.hasOwnProperty("width")&&(object.width=message.width),null!=message.height&&message.hasOwnProperty("height")&&(object.height=message.height),object},SdkStreamDescriptor.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkStreamDescriptor.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkStreamDescriptor"},SdkStreamDescriptor}(),$root.SdkStreamAllocation=function(){function SdkStreamAllocation(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkStreamAllocation.prototype.trackLabel="",SdkStreamAllocation.prototype.streamId=0,SdkStreamAllocation.prototype.groupId=0,SdkStreamAllocation.create=function create(properties){return new SdkStreamAllocation(properties)},SdkStreamAllocation.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.trackLabel&&Object.hasOwnProperty.call(message,"trackLabel")&&writer.uint32(10).string(message.trackLabel),null!=message.streamId&&Object.hasOwnProperty.call(message,"streamId")&&writer.uint32(16).uint32(message.streamId),null!=message.groupId&&Object.hasOwnProperty.call(message,"groupId")&&writer.uint32(24).uint32(message.groupId),writer},SdkStreamAllocation.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkStreamAllocation.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkStreamAllocation;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.trackLabel=reader.string();break;case 2:message.streamId=reader.uint32();break;case 3:message.groupId=reader.uint32();break;default:reader.skipType(7&tag)}}return message},SdkStreamAllocation.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkStreamAllocation.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.trackLabel&&message.hasOwnProperty("trackLabel")&&!$util.isString(message.trackLabel)?"trackLabel: string expected":null!=message.streamId&&message.hasOwnProperty("streamId")&&!$util.isInteger(message.streamId)?"streamId: integer expected":null!=message.groupId&&message.hasOwnProperty("groupId")&&!$util.isInteger(message.groupId)?"groupId: integer expected":null},SdkStreamAllocation.fromObject=function fromObject(object){if(object instanceof $root.SdkStreamAllocation)return object;var message=new $root.SdkStreamAllocation;return null!=object.trackLabel&&(message.trackLabel=String(object.trackLabel)),null!=object.streamId&&(message.streamId=object.streamId>>>0),null!=object.groupId&&(message.groupId=object.groupId>>>0),message},SdkStreamAllocation.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.trackLabel="",object.streamId=0,object.groupId=0),null!=message.trackLabel&&message.hasOwnProperty("trackLabel")&&(object.trackLabel=message.trackLabel),null!=message.streamId&&message.hasOwnProperty("streamId")&&(object.streamId=message.streamId),null!=message.groupId&&message.hasOwnProperty("groupId")&&(object.groupId=message.groupId),object},SdkStreamAllocation.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkStreamAllocation.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkStreamAllocation"},SdkStreamAllocation}(),$root.SdkTrackMapping=function(){function SdkTrackMapping(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkTrackMapping.prototype.streamId=0,SdkTrackMapping.prototype.ssrc=0,SdkTrackMapping.prototype.trackLabel="",SdkTrackMapping.create=function create(properties){return new SdkTrackMapping(properties)},SdkTrackMapping.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.streamId&&Object.hasOwnProperty.call(message,"streamId")&&writer.uint32(8).uint32(message.streamId),null!=message.ssrc&&Object.hasOwnProperty.call(message,"ssrc")&&writer.uint32(16).uint32(message.ssrc),null!=message.trackLabel&&Object.hasOwnProperty.call(message,"trackLabel")&&writer.uint32(26).string(message.trackLabel),writer},SdkTrackMapping.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkTrackMapping.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkTrackMapping;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.streamId=reader.uint32();break;case 2:message.ssrc=reader.uint32();break;case 3:message.trackLabel=reader.string();break;default:reader.skipType(7&tag)}}return message},SdkTrackMapping.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkTrackMapping.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.streamId&&message.hasOwnProperty("streamId")&&!$util.isInteger(message.streamId)?"streamId: integer expected":null!=message.ssrc&&message.hasOwnProperty("ssrc")&&!$util.isInteger(message.ssrc)?"ssrc: integer expected":null!=message.trackLabel&&message.hasOwnProperty("trackLabel")&&!$util.isString(message.trackLabel)?"trackLabel: string expected":null},SdkTrackMapping.fromObject=function fromObject(object){if(object instanceof $root.SdkTrackMapping)return object;var message=new $root.SdkTrackMapping;return null!=object.streamId&&(message.streamId=object.streamId>>>0),null!=object.ssrc&&(message.ssrc=object.ssrc>>>0),null!=object.trackLabel&&(message.trackLabel=String(object.trackLabel)),message},SdkTrackMapping.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.streamId=0,object.ssrc=0,object.trackLabel=""),null!=message.streamId&&message.hasOwnProperty("streamId")&&(object.streamId=message.streamId),null!=message.ssrc&&message.hasOwnProperty("ssrc")&&(object.ssrc=message.ssrc),null!=message.trackLabel&&message.hasOwnProperty("trackLabel")&&(object.trackLabel=message.trackLabel),object},SdkTrackMapping.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkTrackMapping.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkTrackMapping"},SdkTrackMapping}(),$root.SdkBitrate=function(){function SdkBitrate(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkBitrate.prototype.sourceStreamId=0,SdkBitrate.prototype.avgBitrateBps=0,SdkBitrate.create=function create(properties){return new SdkBitrate(properties)},SdkBitrate.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.sourceStreamId&&Object.hasOwnProperty.call(message,"sourceStreamId")&&writer.uint32(8).uint32(message.sourceStreamId),null!=message.avgBitrateBps&&Object.hasOwnProperty.call(message,"avgBitrateBps")&&writer.uint32(16).uint32(message.avgBitrateBps),writer},SdkBitrate.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkBitrate.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkBitrate;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.sourceStreamId=reader.uint32();break;case 2:message.avgBitrateBps=reader.uint32();break;default:reader.skipType(7&tag)}}return message},SdkBitrate.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkBitrate.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.sourceStreamId&&message.hasOwnProperty("sourceStreamId")&&!$util.isInteger(message.sourceStreamId)?"sourceStreamId: integer expected":null!=message.avgBitrateBps&&message.hasOwnProperty("avgBitrateBps")&&!$util.isInteger(message.avgBitrateBps)?"avgBitrateBps: integer expected":null},SdkBitrate.fromObject=function fromObject(object){if(object instanceof $root.SdkBitrate)return object;var message=new $root.SdkBitrate;return null!=object.sourceStreamId&&(message.sourceStreamId=object.sourceStreamId>>>0),null!=object.avgBitrateBps&&(message.avgBitrateBps=object.avgBitrateBps>>>0),message},SdkBitrate.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.sourceStreamId=0,object.avgBitrateBps=0),null!=message.sourceStreamId&&message.hasOwnProperty("sourceStreamId")&&(object.sourceStreamId=message.sourceStreamId),null!=message.avgBitrateBps&&message.hasOwnProperty("avgBitrateBps")&&(object.avgBitrateBps=message.avgBitrateBps),object},SdkBitrate.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkBitrate.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkBitrate"},SdkBitrate}(),$root.SdkAudioControlFrame=function(){function SdkAudioControlFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkAudioControlFrame.prototype.muted=!1,SdkAudioControlFrame.create=function create(properties){return new SdkAudioControlFrame(properties)},SdkAudioControlFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.muted&&Object.hasOwnProperty.call(message,"muted")&&writer.uint32(8).bool(message.muted),writer},SdkAudioControlFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkAudioControlFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkAudioControlFrame;reader.pos<end;){var tag=reader.uint32();if(tag>>>3==1)message.muted=reader.bool();else reader.skipType(7&tag)}return message},SdkAudioControlFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkAudioControlFrame.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.muted&&message.hasOwnProperty("muted")&&"boolean"!=typeof message.muted?"muted: boolean expected":null},SdkAudioControlFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkAudioControlFrame)return object;var message=new $root.SdkAudioControlFrame;return null!=object.muted&&(message.muted=Boolean(object.muted)),message},SdkAudioControlFrame.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.muted=!1),null!=message.muted&&message.hasOwnProperty("muted")&&(object.muted=message.muted),object},SdkAudioControlFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkAudioControlFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkAudioControlFrame"},SdkAudioControlFrame}(),$root.SdkAudioMetadataFrame=function(){function SdkAudioMetadataFrame(properties){if(this.attendeeStates=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkAudioMetadataFrame.prototype.attendeeStates=$util.emptyArray,SdkAudioMetadataFrame.create=function create(properties){return new SdkAudioMetadataFrame(properties)},SdkAudioMetadataFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.attendeeStates&&message.attendeeStates.length)for(var i=0;i<message.attendeeStates.length;++i)$root.SdkAudioAttendeeState.encode(message.attendeeStates[i],writer.uint32(10).fork()).ldelim();return writer},SdkAudioMetadataFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkAudioMetadataFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkAudioMetadataFrame;reader.pos<end;){var tag=reader.uint32();if(tag>>>3==1)message.attendeeStates&&message.attendeeStates.length||(message.attendeeStates=[]),message.attendeeStates.push($root.SdkAudioAttendeeState.decode(reader,reader.uint32()));else reader.skipType(7&tag)}return message},SdkAudioMetadataFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkAudioMetadataFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.attendeeStates&&message.hasOwnProperty("attendeeStates")){if(!Array.isArray(message.attendeeStates))return"attendeeStates: array expected";for(var i=0;i<message.attendeeStates.length;++i){var error=$root.SdkAudioAttendeeState.verify(message.attendeeStates[i]);if(error)return"attendeeStates."+error}}return null},SdkAudioMetadataFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkAudioMetadataFrame)return object;var message=new $root.SdkAudioMetadataFrame;if(object.attendeeStates){if(!Array.isArray(object.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");message.attendeeStates=[];for(var i=0;i<object.attendeeStates.length;++i){if("object"!=typeof object.attendeeStates[i])throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");message.attendeeStates[i]=$root.SdkAudioAttendeeState.fromObject(object.attendeeStates[i])}}return message},SdkAudioMetadataFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.attendeeStates=[]),message.attendeeStates&&message.attendeeStates.length){object.attendeeStates=[];for(var j=0;j<message.attendeeStates.length;++j)object.attendeeStates[j]=$root.SdkAudioAttendeeState.toObject(message.attendeeStates[j],options)}return object},SdkAudioMetadataFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkAudioMetadataFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkAudioMetadataFrame"},SdkAudioMetadataFrame}(),$root.SdkAudioAttendeeState=function(){function SdkAudioAttendeeState(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkAudioAttendeeState.prototype.audioStreamId=0,SdkAudioAttendeeState.prototype.volume=0,SdkAudioAttendeeState.prototype.muted=!1,SdkAudioAttendeeState.prototype.signalStrength=0,SdkAudioAttendeeState.create=function create(properties){return new SdkAudioAttendeeState(properties)},SdkAudioAttendeeState.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.audioStreamId&&Object.hasOwnProperty.call(message,"audioStreamId")&&writer.uint32(8).uint32(message.audioStreamId),null!=message.volume&&Object.hasOwnProperty.call(message,"volume")&&writer.uint32(16).uint32(message.volume),null!=message.muted&&Object.hasOwnProperty.call(message,"muted")&&writer.uint32(24).bool(message.muted),null!=message.signalStrength&&Object.hasOwnProperty.call(message,"signalStrength")&&writer.uint32(32).uint32(message.signalStrength),writer},SdkAudioAttendeeState.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkAudioAttendeeState.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkAudioAttendeeState;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.audioStreamId=reader.uint32();break;case 2:message.volume=reader.uint32();break;case 3:message.muted=reader.bool();break;case 4:message.signalStrength=reader.uint32();break;default:reader.skipType(7&tag)}}return message},SdkAudioAttendeeState.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkAudioAttendeeState.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.audioStreamId&&message.hasOwnProperty("audioStreamId")&&!$util.isInteger(message.audioStreamId)?"audioStreamId: integer expected":null!=message.volume&&message.hasOwnProperty("volume")&&!$util.isInteger(message.volume)?"volume: integer expected":null!=message.muted&&message.hasOwnProperty("muted")&&"boolean"!=typeof message.muted?"muted: boolean expected":null!=message.signalStrength&&message.hasOwnProperty("signalStrength")&&!$util.isInteger(message.signalStrength)?"signalStrength: integer expected":null},SdkAudioAttendeeState.fromObject=function fromObject(object){if(object instanceof $root.SdkAudioAttendeeState)return object;var message=new $root.SdkAudioAttendeeState;return null!=object.audioStreamId&&(message.audioStreamId=object.audioStreamId>>>0),null!=object.volume&&(message.volume=object.volume>>>0),null!=object.muted&&(message.muted=Boolean(object.muted)),null!=object.signalStrength&&(message.signalStrength=object.signalStrength>>>0),message},SdkAudioAttendeeState.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.audioStreamId=0,object.volume=0,object.muted=!1,object.signalStrength=0),null!=message.audioStreamId&&message.hasOwnProperty("audioStreamId")&&(object.audioStreamId=message.audioStreamId),null!=message.volume&&message.hasOwnProperty("volume")&&(object.volume=message.volume),null!=message.muted&&message.hasOwnProperty("muted")&&(object.muted=message.muted),null!=message.signalStrength&&message.hasOwnProperty("signalStrength")&&(object.signalStrength=message.signalStrength),object},SdkAudioAttendeeState.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkAudioAttendeeState.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkAudioAttendeeState"},SdkAudioAttendeeState}(),$root.SdkAudioStreamIdInfoFrame=function(){function SdkAudioStreamIdInfoFrame(properties){if(this.streams=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkAudioStreamIdInfoFrame.prototype.streams=$util.emptyArray,SdkAudioStreamIdInfoFrame.create=function create(properties){return new SdkAudioStreamIdInfoFrame(properties)},SdkAudioStreamIdInfoFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.streams&&message.streams.length)for(var i=0;i<message.streams.length;++i)$root.SdkAudioStreamIdInfo.encode(message.streams[i],writer.uint32(10).fork()).ldelim();return writer},SdkAudioStreamIdInfoFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkAudioStreamIdInfoFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkAudioStreamIdInfoFrame;reader.pos<end;){var tag=reader.uint32();if(tag>>>3==1)message.streams&&message.streams.length||(message.streams=[]),message.streams.push($root.SdkAudioStreamIdInfo.decode(reader,reader.uint32()));else reader.skipType(7&tag)}return message},SdkAudioStreamIdInfoFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkAudioStreamIdInfoFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.streams&&message.hasOwnProperty("streams")){if(!Array.isArray(message.streams))return"streams: array expected";for(var i=0;i<message.streams.length;++i){var error=$root.SdkAudioStreamIdInfo.verify(message.streams[i]);if(error)return"streams."+error}}return null},SdkAudioStreamIdInfoFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkAudioStreamIdInfoFrame)return object;var message=new $root.SdkAudioStreamIdInfoFrame;if(object.streams){if(!Array.isArray(object.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");message.streams=[];for(var i=0;i<object.streams.length;++i){if("object"!=typeof object.streams[i])throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");message.streams[i]=$root.SdkAudioStreamIdInfo.fromObject(object.streams[i])}}return message},SdkAudioStreamIdInfoFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.streams=[]),message.streams&&message.streams.length){object.streams=[];for(var j=0;j<message.streams.length;++j)object.streams[j]=$root.SdkAudioStreamIdInfo.toObject(message.streams[j],options)}return object},SdkAudioStreamIdInfoFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkAudioStreamIdInfoFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkAudioStreamIdInfoFrame"},SdkAudioStreamIdInfoFrame}(),$root.SdkAudioStreamIdInfo=function(){function SdkAudioStreamIdInfo(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkAudioStreamIdInfo.prototype.audioStreamId=0,SdkAudioStreamIdInfo.prototype.attendeeId="",SdkAudioStreamIdInfo.prototype.muted=!1,SdkAudioStreamIdInfo.prototype.externalUserId="",SdkAudioStreamIdInfo.prototype.dropped=!1,SdkAudioStreamIdInfo.create=function create(properties){return new SdkAudioStreamIdInfo(properties)},SdkAudioStreamIdInfo.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.audioStreamId&&Object.hasOwnProperty.call(message,"audioStreamId")&&writer.uint32(8).uint32(message.audioStreamId),null!=message.attendeeId&&Object.hasOwnProperty.call(message,"attendeeId")&&writer.uint32(18).string(message.attendeeId),null!=message.muted&&Object.hasOwnProperty.call(message,"muted")&&writer.uint32(24).bool(message.muted),null!=message.externalUserId&&Object.hasOwnProperty.call(message,"externalUserId")&&writer.uint32(34).string(message.externalUserId),null!=message.dropped&&Object.hasOwnProperty.call(message,"dropped")&&writer.uint32(40).bool(message.dropped),writer},SdkAudioStreamIdInfo.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkAudioStreamIdInfo.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkAudioStreamIdInfo;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.audioStreamId=reader.uint32();break;case 2:message.attendeeId=reader.string();break;case 3:message.muted=reader.bool();break;case 4:message.externalUserId=reader.string();break;case 5:message.dropped=reader.bool();break;default:reader.skipType(7&tag)}}return message},SdkAudioStreamIdInfo.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkAudioStreamIdInfo.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.audioStreamId&&message.hasOwnProperty("audioStreamId")&&!$util.isInteger(message.audioStreamId)?"audioStreamId: integer expected":null!=message.attendeeId&&message.hasOwnProperty("attendeeId")&&!$util.isString(message.attendeeId)?"attendeeId: string expected":null!=message.muted&&message.hasOwnProperty("muted")&&"boolean"!=typeof message.muted?"muted: boolean expected":null!=message.externalUserId&&message.hasOwnProperty("externalUserId")&&!$util.isString(message.externalUserId)?"externalUserId: string expected":null!=message.dropped&&message.hasOwnProperty("dropped")&&"boolean"!=typeof message.dropped?"dropped: boolean expected":null},SdkAudioStreamIdInfo.fromObject=function fromObject(object){if(object instanceof $root.SdkAudioStreamIdInfo)return object;var message=new $root.SdkAudioStreamIdInfo;return null!=object.audioStreamId&&(message.audioStreamId=object.audioStreamId>>>0),null!=object.attendeeId&&(message.attendeeId=String(object.attendeeId)),null!=object.muted&&(message.muted=Boolean(object.muted)),null!=object.externalUserId&&(message.externalUserId=String(object.externalUserId)),null!=object.dropped&&(message.dropped=Boolean(object.dropped)),message},SdkAudioStreamIdInfo.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.audioStreamId=0,object.attendeeId="",object.muted=!1,object.externalUserId="",object.dropped=!1),null!=message.audioStreamId&&message.hasOwnProperty("audioStreamId")&&(object.audioStreamId=message.audioStreamId),null!=message.attendeeId&&message.hasOwnProperty("attendeeId")&&(object.attendeeId=message.attendeeId),null!=message.muted&&message.hasOwnProperty("muted")&&(object.muted=message.muted),null!=message.externalUserId&&message.hasOwnProperty("externalUserId")&&(object.externalUserId=message.externalUserId),null!=message.dropped&&message.hasOwnProperty("dropped")&&(object.dropped=message.dropped),object},SdkAudioStreamIdInfo.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkAudioStreamIdInfo.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkAudioStreamIdInfo"},SdkAudioStreamIdInfo}(),$root.SdkPingPongType=function(){var valuesById={},values=Object.create(valuesById);return values[valuesById[1]="PING"]=1,values[valuesById[2]="PONG"]=2,values}(),$root.SdkPingPongFrame=function(){function SdkPingPongFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkPingPongFrame.prototype.type=1,SdkPingPongFrame.prototype.pingId=0,SdkPingPongFrame.create=function create(properties){return new SdkPingPongFrame(properties)},SdkPingPongFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),writer.uint32(8).int32(message.type),writer.uint32(16).uint32(message.pingId),writer},SdkPingPongFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkPingPongFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkPingPongFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.type=reader.int32();break;case 2:message.pingId=reader.uint32();break;default:reader.skipType(7&tag)}}if(!message.hasOwnProperty("type"))throw $util.ProtocolError("missing required 'type'",{instance:message});if(!message.hasOwnProperty("pingId"))throw $util.ProtocolError("missing required 'pingId'",{instance:message});return message},SdkPingPongFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkPingPongFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";switch(message.type){default:return"type: enum value expected";case 1:case 2:}return $util.isInteger(message.pingId)?null:"pingId: integer expected"},SdkPingPongFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkPingPongFrame)return object;var message=new $root.SdkPingPongFrame;switch(object.type){default:if("number"==typeof object.type){message.type=object.type;break}break;case"PING":case 1:message.type=1;break;case"PONG":case 2:message.type=2}return null!=object.pingId&&(message.pingId=object.pingId>>>0),message},SdkPingPongFrame.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.type=options.enums===String?"PING":1,object.pingId=0),null!=message.type&&message.hasOwnProperty("type")&&(object.type=options.enums===String?void 0===$root.SdkPingPongType[message.type]?message.type:$root.SdkPingPongType[message.type]:message.type),null!=message.pingId&&message.hasOwnProperty("pingId")&&(object.pingId=message.pingId),object},SdkPingPongFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkPingPongFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkPingPongFrame"},SdkPingPongFrame}(),$root.SdkAudioStatusFrame=function(){function SdkAudioStatusFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkAudioStatusFrame.prototype.audioStatus=0,SdkAudioStatusFrame.create=function create(properties){return new SdkAudioStatusFrame(properties)},SdkAudioStatusFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.audioStatus&&Object.hasOwnProperty.call(message,"audioStatus")&&writer.uint32(8).uint32(message.audioStatus),writer},SdkAudioStatusFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkAudioStatusFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkAudioStatusFrame;reader.pos<end;){var tag=reader.uint32();if(tag>>>3==1)message.audioStatus=reader.uint32();else reader.skipType(7&tag)}return message},SdkAudioStatusFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkAudioStatusFrame.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.audioStatus&&message.hasOwnProperty("audioStatus")&&!$util.isInteger(message.audioStatus)?"audioStatus: integer expected":null},SdkAudioStatusFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkAudioStatusFrame)return object;var message=new $root.SdkAudioStatusFrame;return null!=object.audioStatus&&(message.audioStatus=object.audioStatus>>>0),message},SdkAudioStatusFrame.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.audioStatus=0),null!=message.audioStatus&&message.hasOwnProperty("audioStatus")&&(object.audioStatus=message.audioStatus),object},SdkAudioStatusFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkAudioStatusFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkAudioStatusFrame"},SdkAudioStatusFrame}(),$root.SdkMetric=function(){function SdkMetric(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkMetric.prototype.type=1,SdkMetric.prototype.value=0,SdkMetric.create=function create(properties){return new SdkMetric(properties)},SdkMetric.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.type&&Object.hasOwnProperty.call(message,"type")&&writer.uint32(8).int32(message.type),null!=message.value&&Object.hasOwnProperty.call(message,"value")&&writer.uint32(17).double(message.value),writer},SdkMetric.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkMetric.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkMetric;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.type=reader.int32();break;case 2:message.value=reader.double();break;default:reader.skipType(7&tag)}}return message},SdkMetric.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkMetric.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.type&&message.hasOwnProperty("type"))switch(message.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 60:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:}return null!=message.value&&message.hasOwnProperty("value")&&"number"!=typeof message.value?"value: number expected":null},SdkMetric.fromObject=function fromObject(object){if(object instanceof $root.SdkMetric)return object;var message=new $root.SdkMetric;switch(object.type){default:if("number"==typeof object.type){message.type=object.type;break}break;case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:message.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:message.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:message.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:message.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:message.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:message.type=6;break;case"STUN_RTT_MS":case 7:message.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:message.type=8;break;case"RTC_MIC_JITTER_MS":case 9:message.type=9;break;case"RTC_MIC_PPS":case 10:message.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:message.type=11;break;case"RTC_MIC_BITRATE":case 12:message.type=12;break;case"RTC_MIC_RTT_MS":case 13:message.type=13;break;case"RTC_SPK_PPS":case 14:message.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:message.type=15;break;case"RTC_SPK_JITTER_MS":case 16:message.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:message.type=17;break;case"RTC_SPK_BITRATE":case 18:message.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:message.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:message.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:message.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:message.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:message.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:message.type=24;break;case"VIDEO_ENCODE_MS":case 25:message.type=25;break;case"VIDEO_INPUT_FPS":case 26:message.type=26;break;case"VIDEO_ENCODE_FPS":case 27:message.type=27;break;case"VIDEO_SENT_FPS":case 28:message.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:message.type=29;break;case"VIDEO_SENT_PPS":case 30:message.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:message.type=31;break;case"VIDEO_SENT_BITRATE":case 32:message.type=32;break;case"VIDEO_DROPPED_FPS":case 33:message.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:message.type=34;break;case"VIDEO_DECODE_MS":case 35:message.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:message.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:message.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:message.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:message.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:message.type=40;break;case"VIDEO_DECODE_FPS":case 41:message.type=41;break;case"VIDEO_NACKS_SENT":case 42:message.type=42;break;case"VIDEO_FIRS_SENT":case 43:message.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:message.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:message.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:message.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:message.type=47;break;case"VIDEO_PLIS_SENT":case 48:message.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:message.type=49;break;case"VIDEO_INPUT_HEIGHT":case 60:message.type=60;break;case"VIDEO_ENCODE_HEIGHT":case 64:message.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:message.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:message.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:message.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:message.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:message.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:message.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:message.type=89;break;case"VIDEO_FREEZE_COUNT":case 90:message.type=90;break;case"VIDEO_FREEZE_DURATION":case 91:message.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:message.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:message.type=93;break;case"VIDEO_QUALITY_REASON":case 94:message.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:message.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:message.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:message.type=97;break;case"RTC_SPK_TOTAL_LOST":case 98:message.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:message.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:message.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:message.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:message.type=102;break;case"VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU":case 103:message.type=103;break;case"VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE":case 104:message.type=104;break;case"VIDEO_RENDER_HEIGHT":case 105:message.type=105;break;case"VIDEO_RENDER_WIDTH":case 106:message.type=106;break;case"VIDEO_INPUT_WIDTH":case 107:message.type=107;break;case"VIDEO_SENT_JITTER_MS":case 108:message.type=108}return null!=object.value&&(message.value=Number(object.value)),message},SdkMetric.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.type=options.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,object.value=0),null!=message.type&&message.hasOwnProperty("type")&&(object.type=options.enums===String?void 0===$root.SdkMetric.Type[message.type]?message.type:$root.SdkMetric.Type[message.type]:message.type),null!=message.value&&message.hasOwnProperty("value")&&(object.value=options.json&&!isFinite(message.value)?String(message.value):message.value),object},SdkMetric.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkMetric.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkMetric"},SdkMetric.Type=function(){var valuesById={},values=Object.create(valuesById);return values[valuesById[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,values[valuesById[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,values[valuesById[3]="VIDEO_RETRANSMIT_BITRATE"]=3,values[valuesById[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,values[valuesById[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,values[valuesById[6]="VIDEO_BUCKET_DELAY_MS"]=6,values[valuesById[7]="STUN_RTT_MS"]=7,values[valuesById[8]="SOCKET_DISCARDED_PPS"]=8,values[valuesById[9]="RTC_MIC_JITTER_MS"]=9,values[valuesById[10]="RTC_MIC_PPS"]=10,values[valuesById[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,values[valuesById[12]="RTC_MIC_BITRATE"]=12,values[valuesById[13]="RTC_MIC_RTT_MS"]=13,values[valuesById[14]="RTC_SPK_PPS"]=14,values[valuesById[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,values[valuesById[16]="RTC_SPK_JITTER_MS"]=16,values[valuesById[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,values[valuesById[18]="RTC_SPK_BITRATE"]=18,values[valuesById[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,values[valuesById[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,values[valuesById[21]="VIDEO_SENT_RTT_MS"]=21,values[valuesById[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,values[valuesById[23]="VIDEO_NACKS_RECEIVED"]=23,values[valuesById[24]="VIDEO_PLIS_RECEIVED"]=24,values[valuesById[25]="VIDEO_ENCODE_MS"]=25,values[valuesById[26]="VIDEO_INPUT_FPS"]=26,values[valuesById[27]="VIDEO_ENCODE_FPS"]=27,values[valuesById[28]="VIDEO_SENT_FPS"]=28,values[valuesById[29]="VIDEO_FIRS_RECEIVED"]=29,values[valuesById[30]="VIDEO_SENT_PPS"]=30,values[valuesById[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,values[valuesById[32]="VIDEO_SENT_BITRATE"]=32,values[valuesById[33]="VIDEO_DROPPED_FPS"]=33,values[valuesById[34]="VIDEO_TARGET_DELAY_MS"]=34,values[valuesById[35]="VIDEO_DECODE_MS"]=35,values[valuesById[36]="VIDEO_OUTPUT_FPS"]=36,values[valuesById[37]="VIDEO_RECEIVED_PPS"]=37,values[valuesById[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,values[valuesById[39]="VIDEO_RENDER_DELAY_MS"]=39,values[valuesById[40]="VIDEO_RECEIVED_FPS"]=40,values[valuesById[41]="VIDEO_DECODE_FPS"]=41,values[valuesById[42]="VIDEO_NACKS_SENT"]=42,values[valuesById[43]="VIDEO_FIRS_SENT"]=43,values[valuesById[44]="VIDEO_RECEIVED_BITRATE"]=44,values[valuesById[45]="VIDEO_CURRENT_DELAY_MS"]=45,values[valuesById[46]="VIDEO_JITTER_BUFFER_MS"]=46,values[valuesById[47]="VIDEO_DISCARDED_PPS"]=47,values[valuesById[48]="VIDEO_PLIS_SENT"]=48,values[valuesById[49]="VIDEO_RECEIVED_JITTER_MS"]=49,values[valuesById[60]="VIDEO_INPUT_HEIGHT"]=60,values[valuesById[64]="VIDEO_ENCODE_HEIGHT"]=64,values[valuesById[66]="VIDEO_SENT_QP_SUM"]=66,values[valuesById[69]="VIDEO_DECODE_HEIGHT"]=69,values[valuesById[72]="VIDEO_RECEIVED_QP_SUM"]=72,values[valuesById[86]="VIDEO_ENCODE_WIDTH"]=86,values[valuesById[87]="VIDEO_DECODE_WIDTH"]=87,values[valuesById[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,values[valuesById[89]="VIDEO_DECODER_IS_HARDWARE"]=89,values[valuesById[90]="VIDEO_FREEZE_COUNT"]=90,values[valuesById[91]="VIDEO_FREEZE_DURATION"]=91,values[valuesById[92]="VIDEO_PAUSE_COUNT"]=92,values[valuesById[93]="VIDEO_PAUSE_DURATION"]=93,values[valuesById[94]="VIDEO_QUALITY_REASON"]=94,values[valuesById[95]="VIDEO_PROCESSING_TIME"]=95,values[valuesById[96]="RTC_SPK_AUDIO_LEVEL"]=96,values[valuesById[97]="RTC_MIC_AUDIO_LEVEL"]=97,values[valuesById[98]="RTC_SPK_TOTAL_LOST"]=98,values[valuesById[99]="RTC_SPK_TOTAL_EXPECTED"]=99,values[valuesById[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,values[valuesById[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,values[valuesById[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,values[valuesById[103]="VIDEO_CODEC_DEGRADATION_HIGH_ENCODE_CPU"]=103,values[valuesById[104]="VIDEO_CODEC_DEGRADATION_ENCODE_FAILURE"]=104,values[valuesById[105]="VIDEO_RENDER_HEIGHT"]=105,values[valuesById[106]="VIDEO_RENDER_WIDTH"]=106,values[valuesById[107]="VIDEO_INPUT_WIDTH"]=107,values[valuesById[108]="VIDEO_SENT_JITTER_MS"]=108,values}(),SdkMetric}(),$root.SdkStreamMetricFrame=function(){function SdkStreamMetricFrame(properties){if(this.metrics=[],this.dimensions=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkStreamMetricFrame.prototype.streamId=0,SdkStreamMetricFrame.prototype.groupId=0,SdkStreamMetricFrame.prototype.metrics=$util.emptyArray,SdkStreamMetricFrame.prototype.dimensions=$util.emptyArray,SdkStreamMetricFrame.prototype.mediaType=1,SdkStreamMetricFrame.create=function create(properties){return new SdkStreamMetricFrame(properties)},SdkStreamMetricFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.streamId&&Object.hasOwnProperty.call(message,"streamId")&&writer.uint32(24).uint32(message.streamId),null!=message.groupId&&Object.hasOwnProperty.call(message,"groupId")&&writer.uint32(32).uint32(message.groupId),null!=message.metrics&&message.metrics.length)for(var i=0;i<message.metrics.length;++i)$root.SdkMetric.encode(message.metrics[i],writer.uint32(42).fork()).ldelim();if(null!=message.dimensions&&message.dimensions.length)for(i=0;i<message.dimensions.length;++i)$root.SdkStreamDimension.encode(message.dimensions[i],writer.uint32(50).fork()).ldelim();return null!=message.mediaType&&Object.hasOwnProperty.call(message,"mediaType")&&writer.uint32(56).int32(message.mediaType),writer},SdkStreamMetricFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkStreamMetricFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkStreamMetricFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 3:message.streamId=reader.uint32();break;case 4:message.groupId=reader.uint32();break;case 5:message.metrics&&message.metrics.length||(message.metrics=[]),message.metrics.push($root.SdkMetric.decode(reader,reader.uint32()));break;case 6:message.dimensions&&message.dimensions.length||(message.dimensions=[]),message.dimensions.push($root.SdkStreamDimension.decode(reader,reader.uint32()));break;case 7:message.mediaType=reader.int32();break;default:reader.skipType(7&tag)}}return message},SdkStreamMetricFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkStreamMetricFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.streamId&&message.hasOwnProperty("streamId")&&!$util.isInteger(message.streamId))return"streamId: integer expected";if(null!=message.groupId&&message.hasOwnProperty("groupId")&&!$util.isInteger(message.groupId))return"groupId: integer expected";if(null!=message.metrics&&message.hasOwnProperty("metrics")){if(!Array.isArray(message.metrics))return"metrics: array expected";for(var i=0;i<message.metrics.length;++i){if(error=$root.SdkMetric.verify(message.metrics[i]))return"metrics."+error}}if(null!=message.dimensions&&message.hasOwnProperty("dimensions")){if(!Array.isArray(message.dimensions))return"dimensions: array expected";for(i=0;i<message.dimensions.length;++i){var error;if(error=$root.SdkStreamDimension.verify(message.dimensions[i]))return"dimensions."+error}}if(null!=message.mediaType&&message.hasOwnProperty("mediaType"))switch(message.mediaType){default:return"mediaType: enum value expected";case 1:case 2:}return null},SdkStreamMetricFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkStreamMetricFrame)return object;var message=new $root.SdkStreamMetricFrame;if(null!=object.streamId&&(message.streamId=object.streamId>>>0),null!=object.groupId&&(message.groupId=object.groupId>>>0),object.metrics){if(!Array.isArray(object.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");message.metrics=[];for(var i=0;i<object.metrics.length;++i){if("object"!=typeof object.metrics[i])throw TypeError(".SdkStreamMetricFrame.metrics: object expected");message.metrics[i]=$root.SdkMetric.fromObject(object.metrics[i])}}if(object.dimensions){if(!Array.isArray(object.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");message.dimensions=[];for(i=0;i<object.dimensions.length;++i){if("object"!=typeof object.dimensions[i])throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");message.dimensions[i]=$root.SdkStreamDimension.fromObject(object.dimensions[i])}}switch(object.mediaType){default:if("number"==typeof object.mediaType){message.mediaType=object.mediaType;break}break;case"AUDIO":case 1:message.mediaType=1;break;case"VIDEO":case 2:message.mediaType=2}return message},SdkStreamMetricFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.metrics=[],object.dimensions=[]),options.defaults&&(object.streamId=0,object.groupId=0,object.mediaType=options.enums===String?"AUDIO":1),null!=message.streamId&&message.hasOwnProperty("streamId")&&(object.streamId=message.streamId),null!=message.groupId&&message.hasOwnProperty("groupId")&&(object.groupId=message.groupId),message.metrics&&message.metrics.length){object.metrics=[];for(var j=0;j<message.metrics.length;++j)object.metrics[j]=$root.SdkMetric.toObject(message.metrics[j],options)}if(message.dimensions&&message.dimensions.length){object.dimensions=[];for(j=0;j<message.dimensions.length;++j)object.dimensions[j]=$root.SdkStreamDimension.toObject(message.dimensions[j],options)}return null!=message.mediaType&&message.hasOwnProperty("mediaType")&&(object.mediaType=options.enums===String?void 0===$root.SdkStreamMediaType[message.mediaType]?message.mediaType:$root.SdkStreamMediaType[message.mediaType]:message.mediaType),object},SdkStreamMetricFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkStreamMetricFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkStreamMetricFrame"},SdkStreamMetricFrame}(),$root.SdkClientMetricFrame=function(){function SdkClientMetricFrame(properties){if(this.globalMetrics=[],this.streamMetricFrames=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkClientMetricFrame.prototype.globalMetrics=$util.emptyArray,SdkClientMetricFrame.prototype.streamMetricFrames=$util.emptyArray,SdkClientMetricFrame.create=function create(properties){return new SdkClientMetricFrame(properties)},SdkClientMetricFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.globalMetrics&&message.globalMetrics.length)for(var i=0;i<message.globalMetrics.length;++i)$root.SdkMetric.encode(message.globalMetrics[i],writer.uint32(10).fork()).ldelim();if(null!=message.streamMetricFrames&&message.streamMetricFrames.length)for(i=0;i<message.streamMetricFrames.length;++i)$root.SdkStreamMetricFrame.encode(message.streamMetricFrames[i],writer.uint32(18).fork()).ldelim();return writer},SdkClientMetricFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkClientMetricFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkClientMetricFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.globalMetrics&&message.globalMetrics.length||(message.globalMetrics=[]),message.globalMetrics.push($root.SdkMetric.decode(reader,reader.uint32()));break;case 2:message.streamMetricFrames&&message.streamMetricFrames.length||(message.streamMetricFrames=[]),message.streamMetricFrames.push($root.SdkStreamMetricFrame.decode(reader,reader.uint32()));break;default:reader.skipType(7&tag)}}return message},SdkClientMetricFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkClientMetricFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.globalMetrics&&message.hasOwnProperty("globalMetrics")){if(!Array.isArray(message.globalMetrics))return"globalMetrics: array expected";for(var i=0;i<message.globalMetrics.length;++i){if(error=$root.SdkMetric.verify(message.globalMetrics[i]))return"globalMetrics."+error}}if(null!=message.streamMetricFrames&&message.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(message.streamMetricFrames))return"streamMetricFrames: array expected";for(i=0;i<message.streamMetricFrames.length;++i){var error;if(error=$root.SdkStreamMetricFrame.verify(message.streamMetricFrames[i]))return"streamMetricFrames."+error}}return null},SdkClientMetricFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkClientMetricFrame)return object;var message=new $root.SdkClientMetricFrame;if(object.globalMetrics){if(!Array.isArray(object.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");message.globalMetrics=[];for(var i=0;i<object.globalMetrics.length;++i){if("object"!=typeof object.globalMetrics[i])throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");message.globalMetrics[i]=$root.SdkMetric.fromObject(object.globalMetrics[i])}}if(object.streamMetricFrames){if(!Array.isArray(object.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");message.streamMetricFrames=[];for(i=0;i<object.streamMetricFrames.length;++i){if("object"!=typeof object.streamMetricFrames[i])throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");message.streamMetricFrames[i]=$root.SdkStreamMetricFrame.fromObject(object.streamMetricFrames[i])}}return message},SdkClientMetricFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.globalMetrics=[],object.streamMetricFrames=[]),message.globalMetrics&&message.globalMetrics.length){object.globalMetrics=[];for(var j=0;j<message.globalMetrics.length;++j)object.globalMetrics[j]=$root.SdkMetric.toObject(message.globalMetrics[j],options)}if(message.streamMetricFrames&&message.streamMetricFrames.length){object.streamMetricFrames=[];for(j=0;j<message.streamMetricFrames.length;++j)object.streamMetricFrames[j]=$root.SdkStreamMetricFrame.toObject(message.streamMetricFrames[j],options)}return object},SdkClientMetricFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkClientMetricFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkClientMetricFrame"},SdkClientMetricFrame}(),$root.SdkStreamDimension=function(){function SdkStreamDimension(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkStreamDimension.prototype.type=1,SdkStreamDimension.prototype.value=null,SdkStreamDimension.create=function create(properties){return new SdkStreamDimension(properties)},SdkStreamDimension.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.type&&Object.hasOwnProperty.call(message,"type")&&writer.uint32(8).int32(message.type),null!=message.value&&Object.hasOwnProperty.call(message,"value")&&$root.SdkDimensionValue.encode(message.value,writer.uint32(18).fork()).ldelim(),writer},SdkStreamDimension.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkStreamDimension.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkStreamDimension;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.type=reader.int32();break;case 2:message.value=$root.SdkDimensionValue.decode(reader,reader.uint32());break;default:reader.skipType(7&tag)}}return message},SdkStreamDimension.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkStreamDimension.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.type&&message.hasOwnProperty("type"))switch(message.type){default:return"type: enum value expected";case 1:case 2:}if(null!=message.value&&message.hasOwnProperty("value")){var error=$root.SdkDimensionValue.verify(message.value);if(error)return"value."+error}return null},SdkStreamDimension.fromObject=function fromObject(object){if(object instanceof $root.SdkStreamDimension)return object;var message=new $root.SdkStreamDimension;switch(object.type){default:if("number"==typeof object.type){message.type=object.type;break}break;case"VIDEO_ENCODER_NAME":case 1:message.type=1;break;case"VIDEO_DECODER_NAME":case 2:message.type=2}if(null!=object.value){if("object"!=typeof object.value)throw TypeError(".SdkStreamDimension.value: object expected");message.value=$root.SdkDimensionValue.fromObject(object.value)}return message},SdkStreamDimension.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.type=options.enums===String?"VIDEO_ENCODER_NAME":1,object.value=null),null!=message.type&&message.hasOwnProperty("type")&&(object.type=options.enums===String?void 0===$root.SdkStreamDimension.Type[message.type]?message.type:$root.SdkStreamDimension.Type[message.type]:message.type),null!=message.value&&message.hasOwnProperty("value")&&(object.value=$root.SdkDimensionValue.toObject(message.value,options)),object},SdkStreamDimension.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkStreamDimension.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkStreamDimension"},SdkStreamDimension.Type=function(){var valuesById={},values=Object.create(valuesById);return values[valuesById[1]="VIDEO_ENCODER_NAME"]=1,values[valuesById[2]="VIDEO_DECODER_NAME"]=2,values}(),SdkStreamDimension}(),$root.SdkDimensionValue=function(){function SdkDimensionValue(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkDimensionValue.prototype.stringValue="",SdkDimensionValue.prototype.boolValue=!1,SdkDimensionValue.prototype.uintValue=$util.Long?$util.Long.fromBits(0,0,!0):0,SdkDimensionValue.create=function create(properties){return new SdkDimensionValue(properties)},SdkDimensionValue.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.stringValue&&Object.hasOwnProperty.call(message,"stringValue")&&writer.uint32(10).string(message.stringValue),null!=message.boolValue&&Object.hasOwnProperty.call(message,"boolValue")&&writer.uint32(16).bool(message.boolValue),null!=message.uintValue&&Object.hasOwnProperty.call(message,"uintValue")&&writer.uint32(24).uint64(message.uintValue),writer},SdkDimensionValue.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkDimensionValue.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkDimensionValue;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.stringValue=reader.string();break;case 2:message.boolValue=reader.bool();break;case 3:message.uintValue=reader.uint64();break;default:reader.skipType(7&tag)}}return message},SdkDimensionValue.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkDimensionValue.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.stringValue&&message.hasOwnProperty("stringValue")&&!$util.isString(message.stringValue)?"stringValue: string expected":null!=message.boolValue&&message.hasOwnProperty("boolValue")&&"boolean"!=typeof message.boolValue?"boolValue: boolean expected":null!=message.uintValue&&message.hasOwnProperty("uintValue")&&!($util.isInteger(message.uintValue)||message.uintValue&&$util.isInteger(message.uintValue.low)&&$util.isInteger(message.uintValue.high))?"uintValue: integer|Long expected":null},SdkDimensionValue.fromObject=function fromObject(object){if(object instanceof $root.SdkDimensionValue)return object;var message=new $root.SdkDimensionValue;return null!=object.stringValue&&(message.stringValue=String(object.stringValue)),null!=object.boolValue&&(message.boolValue=Boolean(object.boolValue)),null!=object.uintValue&&($util.Long?(message.uintValue=$util.Long.fromValue(object.uintValue)).unsigned=!0:"string"==typeof object.uintValue?message.uintValue=parseInt(object.uintValue,10):"number"==typeof object.uintValue?message.uintValue=object.uintValue:"object"==typeof object.uintValue&&(message.uintValue=new $util.LongBits(object.uintValue.low>>>0,object.uintValue.high>>>0).toNumber(!0))),message},SdkDimensionValue.toObject=function toObject(message,options){options||(options={});var object={};if(options.defaults)if(object.stringValue="",object.boolValue=!1,$util.Long){var long=new $util.Long(0,0,!0);object.uintValue=options.longs===String?long.toString():options.longs===Number?long.toNumber():long}else object.uintValue=options.longs===String?"0":0;return null!=message.stringValue&&message.hasOwnProperty("stringValue")&&(object.stringValue=message.stringValue),null!=message.boolValue&&message.hasOwnProperty("boolValue")&&(object.boolValue=message.boolValue),null!=message.uintValue&&message.hasOwnProperty("uintValue")&&("number"==typeof message.uintValue?object.uintValue=options.longs===String?String(message.uintValue):message.uintValue:object.uintValue=options.longs===String?$util.Long.prototype.toString.call(message.uintValue):options.longs===Number?new $util.LongBits(message.uintValue.low>>>0,message.uintValue.high>>>0).toNumber(!0):message.uintValue),object},SdkDimensionValue.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkDimensionValue.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkDimensionValue"},SdkDimensionValue}(),$root.SdkDataMessageFrame=function(){function SdkDataMessageFrame(properties){if(this.messages=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkDataMessageFrame.prototype.messages=$util.emptyArray,SdkDataMessageFrame.create=function create(properties){return new SdkDataMessageFrame(properties)},SdkDataMessageFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.messages&&message.messages.length)for(var i=0;i<message.messages.length;++i)$root.SdkDataMessagePayload.encode(message.messages[i],writer.uint32(10).fork()).ldelim();return writer},SdkDataMessageFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkDataMessageFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkDataMessageFrame;reader.pos<end;){var tag=reader.uint32();if(tag>>>3==1)message.messages&&message.messages.length||(message.messages=[]),message.messages.push($root.SdkDataMessagePayload.decode(reader,reader.uint32()));else reader.skipType(7&tag)}return message},SdkDataMessageFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkDataMessageFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.messages&&message.hasOwnProperty("messages")){if(!Array.isArray(message.messages))return"messages: array expected";for(var i=0;i<message.messages.length;++i){var error=$root.SdkDataMessagePayload.verify(message.messages[i]);if(error)return"messages."+error}}return null},SdkDataMessageFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkDataMessageFrame)return object;var message=new $root.SdkDataMessageFrame;if(object.messages){if(!Array.isArray(object.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");message.messages=[];for(var i=0;i<object.messages.length;++i){if("object"!=typeof object.messages[i])throw TypeError(".SdkDataMessageFrame.messages: object expected");message.messages[i]=$root.SdkDataMessagePayload.fromObject(object.messages[i])}}return message},SdkDataMessageFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.messages=[]),message.messages&&message.messages.length){object.messages=[];for(var j=0;j<message.messages.length;++j)object.messages[j]=$root.SdkDataMessagePayload.toObject(message.messages[j],options)}return object},SdkDataMessageFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkDataMessageFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkDataMessageFrame"},SdkDataMessageFrame}(),$root.SdkDataMessagePayload=function(){function SdkDataMessagePayload(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkDataMessagePayload.prototype.topic="",SdkDataMessagePayload.prototype.data=$util.newBuffer([]),SdkDataMessagePayload.prototype.lifetimeMs=0,SdkDataMessagePayload.prototype.senderAttendeeId="",SdkDataMessagePayload.prototype.ingestTimeNs=$util.Long?$util.Long.fromBits(0,0,!1):0,SdkDataMessagePayload.prototype.senderExternalUserId="",SdkDataMessagePayload.create=function create(properties){return new SdkDataMessagePayload(properties)},SdkDataMessagePayload.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.topic&&Object.hasOwnProperty.call(message,"topic")&&writer.uint32(10).string(message.topic),null!=message.data&&Object.hasOwnProperty.call(message,"data")&&writer.uint32(18).bytes(message.data),null!=message.lifetimeMs&&Object.hasOwnProperty.call(message,"lifetimeMs")&&writer.uint32(24).uint32(message.lifetimeMs),null!=message.senderAttendeeId&&Object.hasOwnProperty.call(message,"senderAttendeeId")&&writer.uint32(34).string(message.senderAttendeeId),null!=message.ingestTimeNs&&Object.hasOwnProperty.call(message,"ingestTimeNs")&&writer.uint32(40).int64(message.ingestTimeNs),null!=message.senderExternalUserId&&Object.hasOwnProperty.call(message,"senderExternalUserId")&&writer.uint32(50).string(message.senderExternalUserId),writer},SdkDataMessagePayload.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkDataMessagePayload.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkDataMessagePayload;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.topic=reader.string();break;case 2:message.data=reader.bytes();break;case 3:message.lifetimeMs=reader.uint32();break;case 4:message.senderAttendeeId=reader.string();break;case 5:message.ingestTimeNs=reader.int64();break;case 6:message.senderExternalUserId=reader.string();break;default:reader.skipType(7&tag)}}return message},SdkDataMessagePayload.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkDataMessagePayload.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.topic&&message.hasOwnProperty("topic")&&!$util.isString(message.topic)?"topic: string expected":null!=message.data&&message.hasOwnProperty("data")&&!(message.data&&"number"==typeof message.data.length||$util.isString(message.data))?"data: buffer expected":null!=message.lifetimeMs&&message.hasOwnProperty("lifetimeMs")&&!$util.isInteger(message.lifetimeMs)?"lifetimeMs: integer expected":null!=message.senderAttendeeId&&message.hasOwnProperty("senderAttendeeId")&&!$util.isString(message.senderAttendeeId)?"senderAttendeeId: string expected":null!=message.ingestTimeNs&&message.hasOwnProperty("ingestTimeNs")&&!($util.isInteger(message.ingestTimeNs)||message.ingestTimeNs&&$util.isInteger(message.ingestTimeNs.low)&&$util.isInteger(message.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":null!=message.senderExternalUserId&&message.hasOwnProperty("senderExternalUserId")&&!$util.isString(message.senderExternalUserId)?"senderExternalUserId: string expected":null},SdkDataMessagePayload.fromObject=function fromObject(object){if(object instanceof $root.SdkDataMessagePayload)return object;var message=new $root.SdkDataMessagePayload;return null!=object.topic&&(message.topic=String(object.topic)),null!=object.data&&("string"==typeof object.data?$util.base64.decode(object.data,message.data=$util.newBuffer($util.base64.length(object.data)),0):object.data.length>=0&&(message.data=object.data)),null!=object.lifetimeMs&&(message.lifetimeMs=object.lifetimeMs>>>0),null!=object.senderAttendeeId&&(message.senderAttendeeId=String(object.senderAttendeeId)),null!=object.ingestTimeNs&&($util.Long?(message.ingestTimeNs=$util.Long.fromValue(object.ingestTimeNs)).unsigned=!1:"string"==typeof object.ingestTimeNs?message.ingestTimeNs=parseInt(object.ingestTimeNs,10):"number"==typeof object.ingestTimeNs?message.ingestTimeNs=object.ingestTimeNs:"object"==typeof object.ingestTimeNs&&(message.ingestTimeNs=new $util.LongBits(object.ingestTimeNs.low>>>0,object.ingestTimeNs.high>>>0).toNumber())),null!=object.senderExternalUserId&&(message.senderExternalUserId=String(object.senderExternalUserId)),message},SdkDataMessagePayload.toObject=function toObject(message,options){options||(options={});var object={};if(options.defaults){if(object.topic="",options.bytes===String?object.data="":(object.data=[],options.bytes!==Array&&(object.data=$util.newBuffer(object.data))),object.lifetimeMs=0,object.senderAttendeeId="",$util.Long){var long=new $util.Long(0,0,!1);object.ingestTimeNs=options.longs===String?long.toString():options.longs===Number?long.toNumber():long}else object.ingestTimeNs=options.longs===String?"0":0;object.senderExternalUserId=""}return null!=message.topic&&message.hasOwnProperty("topic")&&(object.topic=message.topic),null!=message.data&&message.hasOwnProperty("data")&&(object.data=options.bytes===String?$util.base64.encode(message.data,0,message.data.length):options.bytes===Array?Array.prototype.slice.call(message.data):message.data),null!=message.lifetimeMs&&message.hasOwnProperty("lifetimeMs")&&(object.lifetimeMs=message.lifetimeMs),null!=message.senderAttendeeId&&message.hasOwnProperty("senderAttendeeId")&&(object.senderAttendeeId=message.senderAttendeeId),null!=message.ingestTimeNs&&message.hasOwnProperty("ingestTimeNs")&&("number"==typeof message.ingestTimeNs?object.ingestTimeNs=options.longs===String?String(message.ingestTimeNs):message.ingestTimeNs:object.ingestTimeNs=options.longs===String?$util.Long.prototype.toString.call(message.ingestTimeNs):options.longs===Number?new $util.LongBits(message.ingestTimeNs.low>>>0,message.ingestTimeNs.high>>>0).toNumber():message.ingestTimeNs),null!=message.senderExternalUserId&&message.hasOwnProperty("senderExternalUserId")&&(object.senderExternalUserId=message.senderExternalUserId),object},SdkDataMessagePayload.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkDataMessagePayload.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkDataMessagePayload"},SdkDataMessagePayload}(),$root.SdkTurnCredentials=function(){function SdkTurnCredentials(properties){if(this.uris=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkTurnCredentials.prototype.username="",SdkTurnCredentials.prototype.password="",SdkTurnCredentials.prototype.ttl=0,SdkTurnCredentials.prototype.uris=$util.emptyArray,SdkTurnCredentials.create=function create(properties){return new SdkTurnCredentials(properties)},SdkTurnCredentials.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.username&&Object.hasOwnProperty.call(message,"username")&&writer.uint32(10).string(message.username),null!=message.password&&Object.hasOwnProperty.call(message,"password")&&writer.uint32(18).string(message.password),null!=message.ttl&&Object.hasOwnProperty.call(message,"ttl")&&writer.uint32(24).uint32(message.ttl),null!=message.uris&&message.uris.length)for(var i=0;i<message.uris.length;++i)writer.uint32(34).string(message.uris[i]);return writer},SdkTurnCredentials.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkTurnCredentials.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkTurnCredentials;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.username=reader.string();break;case 2:message.password=reader.string();break;case 3:message.ttl=reader.uint32();break;case 4:message.uris&&message.uris.length||(message.uris=[]),message.uris.push(reader.string());break;default:reader.skipType(7&tag)}}return message},SdkTurnCredentials.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkTurnCredentials.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.username&&message.hasOwnProperty("username")&&!$util.isString(message.username))return"username: string expected";if(null!=message.password&&message.hasOwnProperty("password")&&!$util.isString(message.password))return"password: string expected";if(null!=message.ttl&&message.hasOwnProperty("ttl")&&!$util.isInteger(message.ttl))return"ttl: integer expected";if(null!=message.uris&&message.hasOwnProperty("uris")){if(!Array.isArray(message.uris))return"uris: array expected";for(var i=0;i<message.uris.length;++i)if(!$util.isString(message.uris[i]))return"uris: string[] expected"}return null},SdkTurnCredentials.fromObject=function fromObject(object){if(object instanceof $root.SdkTurnCredentials)return object;var message=new $root.SdkTurnCredentials;if(null!=object.username&&(message.username=String(object.username)),null!=object.password&&(message.password=String(object.password)),null!=object.ttl&&(message.ttl=object.ttl>>>0),object.uris){if(!Array.isArray(object.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");message.uris=[];for(var i=0;i<object.uris.length;++i)message.uris[i]=String(object.uris[i])}return message},SdkTurnCredentials.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.uris=[]),options.defaults&&(object.username="",object.password="",object.ttl=0),null!=message.username&&message.hasOwnProperty("username")&&(object.username=message.username),null!=message.password&&message.hasOwnProperty("password")&&(object.password=message.password),null!=message.ttl&&message.hasOwnProperty("ttl")&&(object.ttl=message.ttl),message.uris&&message.uris.length){object.uris=[];for(var j=0;j<message.uris.length;++j)object.uris[j]=message.uris[j]}return object},SdkTurnCredentials.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkTurnCredentials.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkTurnCredentials"},SdkTurnCredentials}(),$root.SdkTranscriptItem=function(){function SdkTranscriptItem(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkTranscriptItem.prototype.content="",SdkTranscriptItem.prototype.endTime=$util.Long?$util.Long.fromBits(0,0,!1):0,SdkTranscriptItem.prototype.speakerAttendeeId="",SdkTranscriptItem.prototype.speakerExternalUserId="",SdkTranscriptItem.prototype.startTime=$util.Long?$util.Long.fromBits(0,0,!1):0,SdkTranscriptItem.prototype.type=1,SdkTranscriptItem.prototype.vocabularyFilterMatch=!1,SdkTranscriptItem.prototype.confidence=0,SdkTranscriptItem.prototype.stable=!1,SdkTranscriptItem.create=function create(properties){return new SdkTranscriptItem(properties)},SdkTranscriptItem.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.content&&Object.hasOwnProperty.call(message,"content")&&writer.uint32(10).string(message.content),null!=message.endTime&&Object.hasOwnProperty.call(message,"endTime")&&writer.uint32(16).int64(message.endTime),null!=message.speakerAttendeeId&&Object.hasOwnProperty.call(message,"speakerAttendeeId")&&writer.uint32(26).string(message.speakerAttendeeId),null!=message.speakerExternalUserId&&Object.hasOwnProperty.call(message,"speakerExternalUserId")&&writer.uint32(34).string(message.speakerExternalUserId),null!=message.startTime&&Object.hasOwnProperty.call(message,"startTime")&&writer.uint32(40).int64(message.startTime),null!=message.type&&Object.hasOwnProperty.call(message,"type")&&writer.uint32(48).int32(message.type),null!=message.vocabularyFilterMatch&&Object.hasOwnProperty.call(message,"vocabularyFilterMatch")&&writer.uint32(56).bool(message.vocabularyFilterMatch),null!=message.confidence&&Object.hasOwnProperty.call(message,"confidence")&&writer.uint32(65).double(message.confidence),null!=message.stable&&Object.hasOwnProperty.call(message,"stable")&&writer.uint32(72).bool(message.stable),writer},SdkTranscriptItem.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkTranscriptItem.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkTranscriptItem;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.content=reader.string();break;case 2:message.endTime=reader.int64();break;case 3:message.speakerAttendeeId=reader.string();break;case 4:message.speakerExternalUserId=reader.string();break;case 5:message.startTime=reader.int64();break;case 6:message.type=reader.int32();break;case 7:message.vocabularyFilterMatch=reader.bool();break;case 8:message.confidence=reader.double();break;case 9:message.stable=reader.bool();break;default:reader.skipType(7&tag)}}return message},SdkTranscriptItem.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkTranscriptItem.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.content&&message.hasOwnProperty("content")&&!$util.isString(message.content))return"content: string expected";if(null!=message.endTime&&message.hasOwnProperty("endTime")&&!($util.isInteger(message.endTime)||message.endTime&&$util.isInteger(message.endTime.low)&&$util.isInteger(message.endTime.high)))return"endTime: integer|Long expected";if(null!=message.speakerAttendeeId&&message.hasOwnProperty("speakerAttendeeId")&&!$util.isString(message.speakerAttendeeId))return"speakerAttendeeId: string expected";if(null!=message.speakerExternalUserId&&message.hasOwnProperty("speakerExternalUserId")&&!$util.isString(message.speakerExternalUserId))return"speakerExternalUserId: string expected";if(null!=message.startTime&&message.hasOwnProperty("startTime")&&!($util.isInteger(message.startTime)||message.startTime&&$util.isInteger(message.startTime.low)&&$util.isInteger(message.startTime.high)))return"startTime: integer|Long expected";if(null!=message.type&&message.hasOwnProperty("type"))switch(message.type){default:return"type: enum value expected";case 1:case 2:}return null!=message.vocabularyFilterMatch&&message.hasOwnProperty("vocabularyFilterMatch")&&"boolean"!=typeof message.vocabularyFilterMatch?"vocabularyFilterMatch: boolean expected":null!=message.confidence&&message.hasOwnProperty("confidence")&&"number"!=typeof message.confidence?"confidence: number expected":null!=message.stable&&message.hasOwnProperty("stable")&&"boolean"!=typeof message.stable?"stable: boolean expected":null},SdkTranscriptItem.fromObject=function fromObject(object){if(object instanceof $root.SdkTranscriptItem)return object;var message=new $root.SdkTranscriptItem;switch(null!=object.content&&(message.content=String(object.content)),null!=object.endTime&&($util.Long?(message.endTime=$util.Long.fromValue(object.endTime)).unsigned=!1:"string"==typeof object.endTime?message.endTime=parseInt(object.endTime,10):"number"==typeof object.endTime?message.endTime=object.endTime:"object"==typeof object.endTime&&(message.endTime=new $util.LongBits(object.endTime.low>>>0,object.endTime.high>>>0).toNumber())),null!=object.speakerAttendeeId&&(message.speakerAttendeeId=String(object.speakerAttendeeId)),null!=object.speakerExternalUserId&&(message.speakerExternalUserId=String(object.speakerExternalUserId)),null!=object.startTime&&($util.Long?(message.startTime=$util.Long.fromValue(object.startTime)).unsigned=!1:"string"==typeof object.startTime?message.startTime=parseInt(object.startTime,10):"number"==typeof object.startTime?message.startTime=object.startTime:"object"==typeof object.startTime&&(message.startTime=new $util.LongBits(object.startTime.low>>>0,object.startTime.high>>>0).toNumber())),object.type){default:if("number"==typeof object.type){message.type=object.type;break}break;case"PRONUNCIATION":case 1:message.type=1;break;case"PUNCTUATION":case 2:message.type=2}return null!=object.vocabularyFilterMatch&&(message.vocabularyFilterMatch=Boolean(object.vocabularyFilterMatch)),null!=object.confidence&&(message.confidence=Number(object.confidence)),null!=object.stable&&(message.stable=Boolean(object.stable)),message},SdkTranscriptItem.toObject=function toObject(message,options){options||(options={});var object={};if(options.defaults){if(object.content="",$util.Long){var long=new $util.Long(0,0,!1);object.endTime=options.longs===String?long.toString():options.longs===Number?long.toNumber():long}else object.endTime=options.longs===String?"0":0;if(object.speakerAttendeeId="",object.speakerExternalUserId="",$util.Long){long=new $util.Long(0,0,!1);object.startTime=options.longs===String?long.toString():options.longs===Number?long.toNumber():long}else object.startTime=options.longs===String?"0":0;object.type=options.enums===String?"PRONUNCIATION":1,object.vocabularyFilterMatch=!1,object.confidence=0,object.stable=!1}return null!=message.content&&message.hasOwnProperty("content")&&(object.content=message.content),null!=message.endTime&&message.hasOwnProperty("endTime")&&("number"==typeof message.endTime?object.endTime=options.longs===String?String(message.endTime):message.endTime:object.endTime=options.longs===String?$util.Long.prototype.toString.call(message.endTime):options.longs===Number?new $util.LongBits(message.endTime.low>>>0,message.endTime.high>>>0).toNumber():message.endTime),null!=message.speakerAttendeeId&&message.hasOwnProperty("speakerAttendeeId")&&(object.speakerAttendeeId=message.speakerAttendeeId),null!=message.speakerExternalUserId&&message.hasOwnProperty("speakerExternalUserId")&&(object.speakerExternalUserId=message.speakerExternalUserId),null!=message.startTime&&message.hasOwnProperty("startTime")&&("number"==typeof message.startTime?object.startTime=options.longs===String?String(message.startTime):message.startTime:object.startTime=options.longs===String?$util.Long.prototype.toString.call(message.startTime):options.longs===Number?new $util.LongBits(message.startTime.low>>>0,message.startTime.high>>>0).toNumber():message.startTime),null!=message.type&&message.hasOwnProperty("type")&&(object.type=options.enums===String?void 0===$root.SdkTranscriptItem.Type[message.type]?message.type:$root.SdkTranscriptItem.Type[message.type]:message.type),null!=message.vocabularyFilterMatch&&message.hasOwnProperty("vocabularyFilterMatch")&&(object.vocabularyFilterMatch=message.vocabularyFilterMatch),null!=message.confidence&&message.hasOwnProperty("confidence")&&(object.confidence=options.json&&!isFinite(message.confidence)?String(message.confidence):message.confidence),null!=message.stable&&message.hasOwnProperty("stable")&&(object.stable=message.stable),object},SdkTranscriptItem.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkTranscriptItem.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkTranscriptItem"},SdkTranscriptItem.Type=function(){var valuesById={},values=Object.create(valuesById);return values[valuesById[1]="PRONUNCIATION"]=1,values[valuesById[2]="PUNCTUATION"]=2,values}(),SdkTranscriptItem}(),$root.SdkTranscriptEntity=function(){function SdkTranscriptEntity(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkTranscriptEntity.prototype.category="",SdkTranscriptEntity.prototype.confidence=0,SdkTranscriptEntity.prototype.content="",SdkTranscriptEntity.prototype.endTime=$util.Long?$util.Long.fromBits(0,0,!1):0,SdkTranscriptEntity.prototype.startTime=$util.Long?$util.Long.fromBits(0,0,!1):0,SdkTranscriptEntity.prototype.type="",SdkTranscriptEntity.create=function create(properties){return new SdkTranscriptEntity(properties)},SdkTranscriptEntity.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.category&&Object.hasOwnProperty.call(message,"category")&&writer.uint32(10).string(message.category),null!=message.confidence&&Object.hasOwnProperty.call(message,"confidence")&&writer.uint32(17).double(message.confidence),null!=message.content&&Object.hasOwnProperty.call(message,"content")&&writer.uint32(26).string(message.content),null!=message.endTime&&Object.hasOwnProperty.call(message,"endTime")&&writer.uint32(32).int64(message.endTime),null!=message.startTime&&Object.hasOwnProperty.call(message,"startTime")&&writer.uint32(40).int64(message.startTime),null!=message.type&&Object.hasOwnProperty.call(message,"type")&&writer.uint32(50).string(message.type),writer},SdkTranscriptEntity.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkTranscriptEntity.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkTranscriptEntity;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.category=reader.string();break;case 2:message.confidence=reader.double();break;case 3:message.content=reader.string();break;case 4:message.endTime=reader.int64();break;case 5:message.startTime=reader.int64();break;case 6:message.type=reader.string();break;default:reader.skipType(7&tag)}}return message},SdkTranscriptEntity.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkTranscriptEntity.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.category&&message.hasOwnProperty("category")&&!$util.isString(message.category)?"category: string expected":null!=message.confidence&&message.hasOwnProperty("confidence")&&"number"!=typeof message.confidence?"confidence: number expected":null!=message.content&&message.hasOwnProperty("content")&&!$util.isString(message.content)?"content: string expected":null!=message.endTime&&message.hasOwnProperty("endTime")&&!($util.isInteger(message.endTime)||message.endTime&&$util.isInteger(message.endTime.low)&&$util.isInteger(message.endTime.high))?"endTime: integer|Long expected":null!=message.startTime&&message.hasOwnProperty("startTime")&&!($util.isInteger(message.startTime)||message.startTime&&$util.isInteger(message.startTime.low)&&$util.isInteger(message.startTime.high))?"startTime: integer|Long expected":null!=message.type&&message.hasOwnProperty("type")&&!$util.isString(message.type)?"type: string expected":null},SdkTranscriptEntity.fromObject=function fromObject(object){if(object instanceof $root.SdkTranscriptEntity)return object;var message=new $root.SdkTranscriptEntity;return null!=object.category&&(message.category=String(object.category)),null!=object.confidence&&(message.confidence=Number(object.confidence)),null!=object.content&&(message.content=String(object.content)),null!=object.endTime&&($util.Long?(message.endTime=$util.Long.fromValue(object.endTime)).unsigned=!1:"string"==typeof object.endTime?message.endTime=parseInt(object.endTime,10):"number"==typeof object.endTime?message.endTime=object.endTime:"object"==typeof object.endTime&&(message.endTime=new $util.LongBits(object.endTime.low>>>0,object.endTime.high>>>0).toNumber())),null!=object.startTime&&($util.Long?(message.startTime=$util.Long.fromValue(object.startTime)).unsigned=!1:"string"==typeof object.startTime?message.startTime=parseInt(object.startTime,10):"number"==typeof object.startTime?message.startTime=object.startTime:"object"==typeof object.startTime&&(message.startTime=new $util.LongBits(object.startTime.low>>>0,object.startTime.high>>>0).toNumber())),null!=object.type&&(message.type=String(object.type)),message},SdkTranscriptEntity.toObject=function toObject(message,options){options||(options={});var object={};if(options.defaults){if(object.category="",object.confidence=0,object.content="",$util.Long){var long=new $util.Long(0,0,!1);object.endTime=options.longs===String?long.toString():options.longs===Number?long.toNumber():long}else object.endTime=options.longs===String?"0":0;if($util.Long){long=new $util.Long(0,0,!1);object.startTime=options.longs===String?long.toString():options.longs===Number?long.toNumber():long}else object.startTime=options.longs===String?"0":0;object.type=""}return null!=message.category&&message.hasOwnProperty("category")&&(object.category=message.category),null!=message.confidence&&message.hasOwnProperty("confidence")&&(object.confidence=options.json&&!isFinite(message.confidence)?String(message.confidence):message.confidence),null!=message.content&&message.hasOwnProperty("content")&&(object.content=message.content),null!=message.endTime&&message.hasOwnProperty("endTime")&&("number"==typeof message.endTime?object.endTime=options.longs===String?String(message.endTime):message.endTime:object.endTime=options.longs===String?$util.Long.prototype.toString.call(message.endTime):options.longs===Number?new $util.LongBits(message.endTime.low>>>0,message.endTime.high>>>0).toNumber():message.endTime),null!=message.startTime&&message.hasOwnProperty("startTime")&&("number"==typeof message.startTime?object.startTime=options.longs===String?String(message.startTime):message.startTime:object.startTime=options.longs===String?$util.Long.prototype.toString.call(message.startTime):options.longs===Number?new $util.LongBits(message.startTime.low>>>0,message.startTime.high>>>0).toNumber():message.startTime),null!=message.type&&message.hasOwnProperty("type")&&(object.type=message.type),object},SdkTranscriptEntity.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkTranscriptEntity.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkTranscriptEntity"},SdkTranscriptEntity}(),$root.SdkTranscriptAlternative=function(){function SdkTranscriptAlternative(properties){if(this.items=[],this.entities=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkTranscriptAlternative.prototype.items=$util.emptyArray,SdkTranscriptAlternative.prototype.transcript="",SdkTranscriptAlternative.prototype.entities=$util.emptyArray,SdkTranscriptAlternative.create=function create(properties){return new SdkTranscriptAlternative(properties)},SdkTranscriptAlternative.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.items&&message.items.length)for(var i=0;i<message.items.length;++i)$root.SdkTranscriptItem.encode(message.items[i],writer.uint32(10).fork()).ldelim();if(null!=message.transcript&&Object.hasOwnProperty.call(message,"transcript")&&writer.uint32(18).string(message.transcript),null!=message.entities&&message.entities.length)for(i=0;i<message.entities.length;++i)$root.SdkTranscriptEntity.encode(message.entities[i],writer.uint32(26).fork()).ldelim();return writer},SdkTranscriptAlternative.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkTranscriptAlternative.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkTranscriptAlternative;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.items&&message.items.length||(message.items=[]),message.items.push($root.SdkTranscriptItem.decode(reader,reader.uint32()));break;case 2:message.transcript=reader.string();break;case 3:message.entities&&message.entities.length||(message.entities=[]),message.entities.push($root.SdkTranscriptEntity.decode(reader,reader.uint32()));break;default:reader.skipType(7&tag)}}return message},SdkTranscriptAlternative.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkTranscriptAlternative.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.items&&message.hasOwnProperty("items")){if(!Array.isArray(message.items))return"items: array expected";for(var i=0;i<message.items.length;++i){if(error=$root.SdkTranscriptItem.verify(message.items[i]))return"items."+error}}if(null!=message.transcript&&message.hasOwnProperty("transcript")&&!$util.isString(message.transcript))return"transcript: string expected";if(null!=message.entities&&message.hasOwnProperty("entities")){if(!Array.isArray(message.entities))return"entities: array expected";for(i=0;i<message.entities.length;++i){var error;if(error=$root.SdkTranscriptEntity.verify(message.entities[i]))return"entities."+error}}return null},SdkTranscriptAlternative.fromObject=function fromObject(object){if(object instanceof $root.SdkTranscriptAlternative)return object;var message=new $root.SdkTranscriptAlternative;if(object.items){if(!Array.isArray(object.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");message.items=[];for(var i=0;i<object.items.length;++i){if("object"!=typeof object.items[i])throw TypeError(".SdkTranscriptAlternative.items: object expected");message.items[i]=$root.SdkTranscriptItem.fromObject(object.items[i])}}if(null!=object.transcript&&(message.transcript=String(object.transcript)),object.entities){if(!Array.isArray(object.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");message.entities=[];for(i=0;i<object.entities.length;++i){if("object"!=typeof object.entities[i])throw TypeError(".SdkTranscriptAlternative.entities: object expected");message.entities[i]=$root.SdkTranscriptEntity.fromObject(object.entities[i])}}return message},SdkTranscriptAlternative.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.items=[],object.entities=[]),options.defaults&&(object.transcript=""),message.items&&message.items.length){object.items=[];for(var j=0;j<message.items.length;++j)object.items[j]=$root.SdkTranscriptItem.toObject(message.items[j],options)}if(null!=message.transcript&&message.hasOwnProperty("transcript")&&(object.transcript=message.transcript),message.entities&&message.entities.length){object.entities=[];for(j=0;j<message.entities.length;++j)object.entities[j]=$root.SdkTranscriptEntity.toObject(message.entities[j],options)}return object},SdkTranscriptAlternative.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkTranscriptAlternative.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkTranscriptAlternative"},SdkTranscriptAlternative}(),$root.SdkTranscriptLanguageWithScore=function(){function SdkTranscriptLanguageWithScore(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkTranscriptLanguageWithScore.prototype.languageCode="",SdkTranscriptLanguageWithScore.prototype.score=0,SdkTranscriptLanguageWithScore.create=function create(properties){return new SdkTranscriptLanguageWithScore(properties)},SdkTranscriptLanguageWithScore.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.languageCode&&Object.hasOwnProperty.call(message,"languageCode")&&writer.uint32(10).string(message.languageCode),null!=message.score&&Object.hasOwnProperty.call(message,"score")&&writer.uint32(17).double(message.score),writer},SdkTranscriptLanguageWithScore.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkTranscriptLanguageWithScore.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkTranscriptLanguageWithScore;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.languageCode=reader.string();break;case 2:message.score=reader.double();break;default:reader.skipType(7&tag)}}return message},SdkTranscriptLanguageWithScore.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkTranscriptLanguageWithScore.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.languageCode&&message.hasOwnProperty("languageCode")&&!$util.isString(message.languageCode)?"languageCode: string expected":null!=message.score&&message.hasOwnProperty("score")&&"number"!=typeof message.score?"score: number expected":null},SdkTranscriptLanguageWithScore.fromObject=function fromObject(object){if(object instanceof $root.SdkTranscriptLanguageWithScore)return object;var message=new $root.SdkTranscriptLanguageWithScore;return null!=object.languageCode&&(message.languageCode=String(object.languageCode)),null!=object.score&&(message.score=Number(object.score)),message},SdkTranscriptLanguageWithScore.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.languageCode="",object.score=0),null!=message.languageCode&&message.hasOwnProperty("languageCode")&&(object.languageCode=message.languageCode),null!=message.score&&message.hasOwnProperty("score")&&(object.score=options.json&&!isFinite(message.score)?String(message.score):message.score),object},SdkTranscriptLanguageWithScore.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkTranscriptLanguageWithScore.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkTranscriptLanguageWithScore"},SdkTranscriptLanguageWithScore}(),$root.SdkTranscriptResult=function(){function SdkTranscriptResult(properties){if(this.alternatives=[],this.languageIdentification=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkTranscriptResult.prototype.alternatives=$util.emptyArray,SdkTranscriptResult.prototype.channelId="",SdkTranscriptResult.prototype.endTime=$util.Long?$util.Long.fromBits(0,0,!1):0,SdkTranscriptResult.prototype.isPartial=!1,SdkTranscriptResult.prototype.resultId="",SdkTranscriptResult.prototype.startTime=$util.Long?$util.Long.fromBits(0,0,!1):0,SdkTranscriptResult.prototype.languageCode="",SdkTranscriptResult.prototype.languageIdentification=$util.emptyArray,SdkTranscriptResult.create=function create(properties){return new SdkTranscriptResult(properties)},SdkTranscriptResult.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.alternatives&&message.alternatives.length)for(var i=0;i<message.alternatives.length;++i)$root.SdkTranscriptAlternative.encode(message.alternatives[i],writer.uint32(10).fork()).ldelim();if(null!=message.channelId&&Object.hasOwnProperty.call(message,"channelId")&&writer.uint32(18).string(message.channelId),null!=message.endTime&&Object.hasOwnProperty.call(message,"endTime")&&writer.uint32(24).int64(message.endTime),null!=message.isPartial&&Object.hasOwnProperty.call(message,"isPartial")&&writer.uint32(32).bool(message.isPartial),null!=message.resultId&&Object.hasOwnProperty.call(message,"resultId")&&writer.uint32(42).string(message.resultId),null!=message.startTime&&Object.hasOwnProperty.call(message,"startTime")&&writer.uint32(48).int64(message.startTime),null!=message.languageCode&&Object.hasOwnProperty.call(message,"languageCode")&&writer.uint32(58).string(message.languageCode),null!=message.languageIdentification&&message.languageIdentification.length)for(i=0;i<message.languageIdentification.length;++i)$root.SdkTranscriptLanguageWithScore.encode(message.languageIdentification[i],writer.uint32(66).fork()).ldelim();return writer},SdkTranscriptResult.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkTranscriptResult.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkTranscriptResult;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.alternatives&&message.alternatives.length||(message.alternatives=[]),message.alternatives.push($root.SdkTranscriptAlternative.decode(reader,reader.uint32()));break;case 2:message.channelId=reader.string();break;case 3:message.endTime=reader.int64();break;case 4:message.isPartial=reader.bool();break;case 5:message.resultId=reader.string();break;case 6:message.startTime=reader.int64();break;case 7:message.languageCode=reader.string();break;case 8:message.languageIdentification&&message.languageIdentification.length||(message.languageIdentification=[]),message.languageIdentification.push($root.SdkTranscriptLanguageWithScore.decode(reader,reader.uint32()));break;default:reader.skipType(7&tag)}}return message},SdkTranscriptResult.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkTranscriptResult.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.alternatives&&message.hasOwnProperty("alternatives")){if(!Array.isArray(message.alternatives))return"alternatives: array expected";for(var i=0;i<message.alternatives.length;++i){if(error=$root.SdkTranscriptAlternative.verify(message.alternatives[i]))return"alternatives."+error}}if(null!=message.channelId&&message.hasOwnProperty("channelId")&&!$util.isString(message.channelId))return"channelId: string expected";if(null!=message.endTime&&message.hasOwnProperty("endTime")&&!($util.isInteger(message.endTime)||message.endTime&&$util.isInteger(message.endTime.low)&&$util.isInteger(message.endTime.high)))return"endTime: integer|Long expected";if(null!=message.isPartial&&message.hasOwnProperty("isPartial")&&"boolean"!=typeof message.isPartial)return"isPartial: boolean expected";if(null!=message.resultId&&message.hasOwnProperty("resultId")&&!$util.isString(message.resultId))return"resultId: string expected";if(null!=message.startTime&&message.hasOwnProperty("startTime")&&!($util.isInteger(message.startTime)||message.startTime&&$util.isInteger(message.startTime.low)&&$util.isInteger(message.startTime.high)))return"startTime: integer|Long expected";if(null!=message.languageCode&&message.hasOwnProperty("languageCode")&&!$util.isString(message.languageCode))return"languageCode: string expected";if(null!=message.languageIdentification&&message.hasOwnProperty("languageIdentification")){if(!Array.isArray(message.languageIdentification))return"languageIdentification: array expected";for(i=0;i<message.languageIdentification.length;++i){var error;if(error=$root.SdkTranscriptLanguageWithScore.verify(message.languageIdentification[i]))return"languageIdentification."+error}}return null},SdkTranscriptResult.fromObject=function fromObject(object){if(object instanceof $root.SdkTranscriptResult)return object;var message=new $root.SdkTranscriptResult;if(object.alternatives){if(!Array.isArray(object.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");message.alternatives=[];for(var i=0;i<object.alternatives.length;++i){if("object"!=typeof object.alternatives[i])throw TypeError(".SdkTranscriptResult.alternatives: object expected");message.alternatives[i]=$root.SdkTranscriptAlternative.fromObject(object.alternatives[i])}}if(null!=object.channelId&&(message.channelId=String(object.channelId)),null!=object.endTime&&($util.Long?(message.endTime=$util.Long.fromValue(object.endTime)).unsigned=!1:"string"==typeof object.endTime?message.endTime=parseInt(object.endTime,10):"number"==typeof object.endTime?message.endTime=object.endTime:"object"==typeof object.endTime&&(message.endTime=new $util.LongBits(object.endTime.low>>>0,object.endTime.high>>>0).toNumber())),null!=object.isPartial&&(message.isPartial=Boolean(object.isPartial)),null!=object.resultId&&(message.resultId=String(object.resultId)),null!=object.startTime&&($util.Long?(message.startTime=$util.Long.fromValue(object.startTime)).unsigned=!1:"string"==typeof object.startTime?message.startTime=parseInt(object.startTime,10):"number"==typeof object.startTime?message.startTime=object.startTime:"object"==typeof object.startTime&&(message.startTime=new $util.LongBits(object.startTime.low>>>0,object.startTime.high>>>0).toNumber())),null!=object.languageCode&&(message.languageCode=String(object.languageCode)),object.languageIdentification){if(!Array.isArray(object.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");message.languageIdentification=[];for(i=0;i<object.languageIdentification.length;++i){if("object"!=typeof object.languageIdentification[i])throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");message.languageIdentification[i]=$root.SdkTranscriptLanguageWithScore.fromObject(object.languageIdentification[i])}}return message},SdkTranscriptResult.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.alternatives=[],object.languageIdentification=[]),options.defaults){if(object.channelId="",$util.Long){var long=new $util.Long(0,0,!1);object.endTime=options.longs===String?long.toString():options.longs===Number?long.toNumber():long}else object.endTime=options.longs===String?"0":0;if(object.isPartial=!1,object.resultId="",$util.Long){long=new $util.Long(0,0,!1);object.startTime=options.longs===String?long.toString():options.longs===Number?long.toNumber():long}else object.startTime=options.longs===String?"0":0;object.languageCode=""}if(message.alternatives&&message.alternatives.length){object.alternatives=[];for(var j=0;j<message.alternatives.length;++j)object.alternatives[j]=$root.SdkTranscriptAlternative.toObject(message.alternatives[j],options)}if(null!=message.channelId&&message.hasOwnProperty("channelId")&&(object.channelId=message.channelId),null!=message.endTime&&message.hasOwnProperty("endTime")&&("number"==typeof message.endTime?object.endTime=options.longs===String?String(message.endTime):message.endTime:object.endTime=options.longs===String?$util.Long.prototype.toString.call(message.endTime):options.longs===Number?new $util.LongBits(message.endTime.low>>>0,message.endTime.high>>>0).toNumber():message.endTime),null!=message.isPartial&&message.hasOwnProperty("isPartial")&&(object.isPartial=message.isPartial),null!=message.resultId&&message.hasOwnProperty("resultId")&&(object.resultId=message.resultId),null!=message.startTime&&message.hasOwnProperty("startTime")&&("number"==typeof message.startTime?object.startTime=options.longs===String?String(message.startTime):message.startTime:object.startTime=options.longs===String?$util.Long.prototype.toString.call(message.startTime):options.longs===Number?new $util.LongBits(message.startTime.low>>>0,message.startTime.high>>>0).toNumber():message.startTime),null!=message.languageCode&&message.hasOwnProperty("languageCode")&&(object.languageCode=message.languageCode),message.languageIdentification&&message.languageIdentification.length){object.languageIdentification=[];for(j=0;j<message.languageIdentification.length;++j)object.languageIdentification[j]=$root.SdkTranscriptLanguageWithScore.toObject(message.languageIdentification[j],options)}return object},SdkTranscriptResult.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkTranscriptResult.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkTranscriptResult"},SdkTranscriptResult}(),$root.SdkTranscript=function(){function SdkTranscript(properties){if(this.results=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkTranscript.prototype.results=$util.emptyArray,SdkTranscript.create=function create(properties){return new SdkTranscript(properties)},SdkTranscript.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.results&&message.results.length)for(var i=0;i<message.results.length;++i)$root.SdkTranscriptResult.encode(message.results[i],writer.uint32(10).fork()).ldelim();return writer},SdkTranscript.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkTranscript.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkTranscript;reader.pos<end;){var tag=reader.uint32();if(tag>>>3==1)message.results&&message.results.length||(message.results=[]),message.results.push($root.SdkTranscriptResult.decode(reader,reader.uint32()));else reader.skipType(7&tag)}return message},SdkTranscript.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkTranscript.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.results&&message.hasOwnProperty("results")){if(!Array.isArray(message.results))return"results: array expected";for(var i=0;i<message.results.length;++i){var error=$root.SdkTranscriptResult.verify(message.results[i]);if(error)return"results."+error}}return null},SdkTranscript.fromObject=function fromObject(object){if(object instanceof $root.SdkTranscript)return object;var message=new $root.SdkTranscript;if(object.results){if(!Array.isArray(object.results))throw TypeError(".SdkTranscript.results: array expected");message.results=[];for(var i=0;i<object.results.length;++i){if("object"!=typeof object.results[i])throw TypeError(".SdkTranscript.results: object expected");message.results[i]=$root.SdkTranscriptResult.fromObject(object.results[i])}}return message},SdkTranscript.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.results=[]),message.results&&message.results.length){object.results=[];for(var j=0;j<message.results.length;++j)object.results[j]=$root.SdkTranscriptResult.toObject(message.results[j],options)}return object},SdkTranscript.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkTranscript.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkTranscript"},SdkTranscript}(),$root.SdkTranscriptionStatus=function(){function SdkTranscriptionStatus(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkTranscriptionStatus.prototype.type=1,SdkTranscriptionStatus.prototype.eventTime=$util.Long?$util.Long.fromBits(0,0,!1):0,SdkTranscriptionStatus.prototype.transcriptionRegion="",SdkTranscriptionStatus.prototype.transcriptionConfiguration="",SdkTranscriptionStatus.prototype.message="",SdkTranscriptionStatus.create=function create(properties){return new SdkTranscriptionStatus(properties)},SdkTranscriptionStatus.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.type&&Object.hasOwnProperty.call(message,"type")&&writer.uint32(8).int32(message.type),null!=message.eventTime&&Object.hasOwnProperty.call(message,"eventTime")&&writer.uint32(16).int64(message.eventTime),null!=message.transcriptionRegion&&Object.hasOwnProperty.call(message,"transcriptionRegion")&&writer.uint32(26).string(message.transcriptionRegion),null!=message.transcriptionConfiguration&&Object.hasOwnProperty.call(message,"transcriptionConfiguration")&&writer.uint32(34).string(message.transcriptionConfiguration),null!=message.message&&Object.hasOwnProperty.call(message,"message")&&writer.uint32(42).string(message.message),writer},SdkTranscriptionStatus.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkTranscriptionStatus.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkTranscriptionStatus;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.type=reader.int32();break;case 2:message.eventTime=reader.int64();break;case 3:message.transcriptionRegion=reader.string();break;case 4:message.transcriptionConfiguration=reader.string();break;case 5:message.message=reader.string();break;default:reader.skipType(7&tag)}}return message},SdkTranscriptionStatus.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkTranscriptionStatus.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.type&&message.hasOwnProperty("type"))switch(message.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:}return null!=message.eventTime&&message.hasOwnProperty("eventTime")&&!($util.isInteger(message.eventTime)||message.eventTime&&$util.isInteger(message.eventTime.low)&&$util.isInteger(message.eventTime.high))?"eventTime: integer|Long expected":null!=message.transcriptionRegion&&message.hasOwnProperty("transcriptionRegion")&&!$util.isString(message.transcriptionRegion)?"transcriptionRegion: string expected":null!=message.transcriptionConfiguration&&message.hasOwnProperty("transcriptionConfiguration")&&!$util.isString(message.transcriptionConfiguration)?"transcriptionConfiguration: string expected":null!=message.message&&message.hasOwnProperty("message")&&!$util.isString(message.message)?"message: string expected":null},SdkTranscriptionStatus.fromObject=function fromObject(object){if(object instanceof $root.SdkTranscriptionStatus)return object;var message=new $root.SdkTranscriptionStatus;switch(object.type){default:if("number"==typeof object.type){message.type=object.type;break}break;case"STARTED":case 1:message.type=1;break;case"INTERRUPTED":case 2:message.type=2;break;case"RESUMED":case 3:message.type=3;break;case"STOPPED":case 4:message.type=4;break;case"FAILED":case 5:message.type=5}return null!=object.eventTime&&($util.Long?(message.eventTime=$util.Long.fromValue(object.eventTime)).unsigned=!1:"string"==typeof object.eventTime?message.eventTime=parseInt(object.eventTime,10):"number"==typeof object.eventTime?message.eventTime=object.eventTime:"object"==typeof object.eventTime&&(message.eventTime=new $util.LongBits(object.eventTime.low>>>0,object.eventTime.high>>>0).toNumber())),null!=object.transcriptionRegion&&(message.transcriptionRegion=String(object.transcriptionRegion)),null!=object.transcriptionConfiguration&&(message.transcriptionConfiguration=String(object.transcriptionConfiguration)),null!=object.message&&(message.message=String(object.message)),message},SdkTranscriptionStatus.toObject=function toObject(message,options){options||(options={});var object={};if(options.defaults){if(object.type=options.enums===String?"STARTED":1,$util.Long){var long=new $util.Long(0,0,!1);object.eventTime=options.longs===String?long.toString():options.longs===Number?long.toNumber():long}else object.eventTime=options.longs===String?"0":0;object.transcriptionRegion="",object.transcriptionConfiguration="",object.message=""}return null!=message.type&&message.hasOwnProperty("type")&&(object.type=options.enums===String?void 0===$root.SdkTranscriptionStatus.Type[message.type]?message.type:$root.SdkTranscriptionStatus.Type[message.type]:message.type),null!=message.eventTime&&message.hasOwnProperty("eventTime")&&("number"==typeof message.eventTime?object.eventTime=options.longs===String?String(message.eventTime):message.eventTime:object.eventTime=options.longs===String?$util.Long.prototype.toString.call(message.eventTime):options.longs===Number?new $util.LongBits(message.eventTime.low>>>0,message.eventTime.high>>>0).toNumber():message.eventTime),null!=message.transcriptionRegion&&message.hasOwnProperty("transcriptionRegion")&&(object.transcriptionRegion=message.transcriptionRegion),null!=message.transcriptionConfiguration&&message.hasOwnProperty("transcriptionConfiguration")&&(object.transcriptionConfiguration=message.transcriptionConfiguration),null!=message.message&&message.hasOwnProperty("message")&&(object.message=message.message),object},SdkTranscriptionStatus.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkTranscriptionStatus.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkTranscriptionStatus"},SdkTranscriptionStatus.Type=function(){var valuesById={},values=Object.create(valuesById);return values[valuesById[1]="STARTED"]=1,values[valuesById[2]="INTERRUPTED"]=2,values[valuesById[3]="RESUMED"]=3,values[valuesById[4]="STOPPED"]=4,values[valuesById[5]="FAILED"]=5,values}(),SdkTranscriptionStatus}(),$root.SdkTranscriptEvent=function(){function SdkTranscriptEvent(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}var $oneOfFields;return SdkTranscriptEvent.prototype.status=null,SdkTranscriptEvent.prototype.transcript=null,Object.defineProperty(SdkTranscriptEvent.prototype,"Event",{get:$util.oneOfGetter($oneOfFields=["status","transcript"]),set:$util.oneOfSetter($oneOfFields)}),SdkTranscriptEvent.create=function create(properties){return new SdkTranscriptEvent(properties)},SdkTranscriptEvent.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.status&&Object.hasOwnProperty.call(message,"status")&&$root.SdkTranscriptionStatus.encode(message.status,writer.uint32(10).fork()).ldelim(),null!=message.transcript&&Object.hasOwnProperty.call(message,"transcript")&&$root.SdkTranscript.encode(message.transcript,writer.uint32(18).fork()).ldelim(),writer},SdkTranscriptEvent.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkTranscriptEvent.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkTranscriptEvent;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.status=$root.SdkTranscriptionStatus.decode(reader,reader.uint32());break;case 2:message.transcript=$root.SdkTranscript.decode(reader,reader.uint32());break;default:reader.skipType(7&tag)}}return message},SdkTranscriptEvent.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkTranscriptEvent.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";var properties={};if(null!=message.status&&message.hasOwnProperty("status")&&(properties.Event=1,error=$root.SdkTranscriptionStatus.verify(message.status)))return"status."+error;if(null!=message.transcript&&message.hasOwnProperty("transcript")){if(1===properties.Event)return"Event: multiple values";var error;if(properties.Event=1,error=$root.SdkTranscript.verify(message.transcript))return"transcript."+error}return null},SdkTranscriptEvent.fromObject=function fromObject(object){if(object instanceof $root.SdkTranscriptEvent)return object;var message=new $root.SdkTranscriptEvent;if(null!=object.status){if("object"!=typeof object.status)throw TypeError(".SdkTranscriptEvent.status: object expected");message.status=$root.SdkTranscriptionStatus.fromObject(object.status)}if(null!=object.transcript){if("object"!=typeof object.transcript)throw TypeError(".SdkTranscriptEvent.transcript: object expected");message.transcript=$root.SdkTranscript.fromObject(object.transcript)}return message},SdkTranscriptEvent.toObject=function toObject(message,options){options||(options={});var object={};return null!=message.status&&message.hasOwnProperty("status")&&(object.status=$root.SdkTranscriptionStatus.toObject(message.status,options),options.oneofs&&(object.Event="status")),null!=message.transcript&&message.hasOwnProperty("transcript")&&(object.transcript=$root.SdkTranscript.toObject(message.transcript,options),options.oneofs&&(object.Event="transcript")),object},SdkTranscriptEvent.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkTranscriptEvent.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkTranscriptEvent"},SdkTranscriptEvent}(),$root.SdkTranscriptFrame=function(){function SdkTranscriptFrame(properties){if(this.events=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkTranscriptFrame.prototype.events=$util.emptyArray,SdkTranscriptFrame.create=function create(properties){return new SdkTranscriptFrame(properties)},SdkTranscriptFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.events&&message.events.length)for(var i=0;i<message.events.length;++i)$root.SdkTranscriptEvent.encode(message.events[i],writer.uint32(10).fork()).ldelim();return writer},SdkTranscriptFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkTranscriptFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkTranscriptFrame;reader.pos<end;){var tag=reader.uint32();if(tag>>>3==1)message.events&&message.events.length||(message.events=[]),message.events.push($root.SdkTranscriptEvent.decode(reader,reader.uint32()));else reader.skipType(7&tag)}return message},SdkTranscriptFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkTranscriptFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.events&&message.hasOwnProperty("events")){if(!Array.isArray(message.events))return"events: array expected";for(var i=0;i<message.events.length;++i){var error=$root.SdkTranscriptEvent.verify(message.events[i]);if(error)return"events."+error}}return null},SdkTranscriptFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkTranscriptFrame)return object;var message=new $root.SdkTranscriptFrame;if(object.events){if(!Array.isArray(object.events))throw TypeError(".SdkTranscriptFrame.events: array expected");message.events=[];for(var i=0;i<object.events.length;++i){if("object"!=typeof object.events[i])throw TypeError(".SdkTranscriptFrame.events: object expected");message.events[i]=$root.SdkTranscriptEvent.fromObject(object.events[i])}}return message},SdkTranscriptFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.events=[]),message.events&&message.events.length){object.events=[];for(var j=0;j<message.events.length;++j)object.events[j]=$root.SdkTranscriptEvent.toObject(message.events[j],options)}return object},SdkTranscriptFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkTranscriptFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkTranscriptFrame"},SdkTranscriptFrame}(),$root.SdkRemoteVideoUpdateFrame=function(){function SdkRemoteVideoUpdateFrame(properties){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkRemoteVideoUpdateFrame.prototype.addedOrUpdatedVideoSubscriptions=$util.emptyArray,SdkRemoteVideoUpdateFrame.prototype.removedVideoSubscriptionMids=$util.emptyArray,SdkRemoteVideoUpdateFrame.create=function create(properties){return new SdkRemoteVideoUpdateFrame(properties)},SdkRemoteVideoUpdateFrame.encode=function encode(message,writer){if(writer||(writer=$Writer.create()),null!=message.addedOrUpdatedVideoSubscriptions&&message.addedOrUpdatedVideoSubscriptions.length)for(var i=0;i<message.addedOrUpdatedVideoSubscriptions.length;++i)$root.SdkVideoSubscriptionConfiguration.encode(message.addedOrUpdatedVideoSubscriptions[i],writer.uint32(10).fork()).ldelim();if(null!=message.removedVideoSubscriptionMids&&message.removedVideoSubscriptionMids.length)for(i=0;i<message.removedVideoSubscriptionMids.length;++i)writer.uint32(18).string(message.removedVideoSubscriptionMids[i]);return writer},SdkRemoteVideoUpdateFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkRemoteVideoUpdateFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkRemoteVideoUpdateFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.addedOrUpdatedVideoSubscriptions&&message.addedOrUpdatedVideoSubscriptions.length||(message.addedOrUpdatedVideoSubscriptions=[]),message.addedOrUpdatedVideoSubscriptions.push($root.SdkVideoSubscriptionConfiguration.decode(reader,reader.uint32()));break;case 2:message.removedVideoSubscriptionMids&&message.removedVideoSubscriptionMids.length||(message.removedVideoSubscriptionMids=[]),message.removedVideoSubscriptionMids.push(reader.string());break;default:reader.skipType(7&tag)}}return message},SdkRemoteVideoUpdateFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkRemoteVideoUpdateFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.addedOrUpdatedVideoSubscriptions&&message.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(message.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var i=0;i<message.addedOrUpdatedVideoSubscriptions.length;++i){var error=$root.SdkVideoSubscriptionConfiguration.verify(message.addedOrUpdatedVideoSubscriptions[i]);if(error)return"addedOrUpdatedVideoSubscriptions."+error}}if(null!=message.removedVideoSubscriptionMids&&message.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(message.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(i=0;i<message.removedVideoSubscriptionMids.length;++i)if(!$util.isString(message.removedVideoSubscriptionMids[i]))return"removedVideoSubscriptionMids: string[] expected"}return null},SdkRemoteVideoUpdateFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkRemoteVideoUpdateFrame)return object;var message=new $root.SdkRemoteVideoUpdateFrame;if(object.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(object.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");message.addedOrUpdatedVideoSubscriptions=[];for(var i=0;i<object.addedOrUpdatedVideoSubscriptions.length;++i){if("object"!=typeof object.addedOrUpdatedVideoSubscriptions[i])throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");message.addedOrUpdatedVideoSubscriptions[i]=$root.SdkVideoSubscriptionConfiguration.fromObject(object.addedOrUpdatedVideoSubscriptions[i])}}if(object.removedVideoSubscriptionMids){if(!Array.isArray(object.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");message.removedVideoSubscriptionMids=[];for(i=0;i<object.removedVideoSubscriptionMids.length;++i)message.removedVideoSubscriptionMids[i]=String(object.removedVideoSubscriptionMids[i])}return message},SdkRemoteVideoUpdateFrame.toObject=function toObject(message,options){options||(options={});var object={};if((options.arrays||options.defaults)&&(object.addedOrUpdatedVideoSubscriptions=[],object.removedVideoSubscriptionMids=[]),message.addedOrUpdatedVideoSubscriptions&&message.addedOrUpdatedVideoSubscriptions.length){object.addedOrUpdatedVideoSubscriptions=[];for(var j=0;j<message.addedOrUpdatedVideoSubscriptions.length;++j)object.addedOrUpdatedVideoSubscriptions[j]=$root.SdkVideoSubscriptionConfiguration.toObject(message.addedOrUpdatedVideoSubscriptions[j],options)}if(message.removedVideoSubscriptionMids&&message.removedVideoSubscriptionMids.length){object.removedVideoSubscriptionMids=[];for(j=0;j<message.removedVideoSubscriptionMids.length;++j)object.removedVideoSubscriptionMids[j]=message.removedVideoSubscriptionMids[j]}return object},SdkRemoteVideoUpdateFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkRemoteVideoUpdateFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkRemoteVideoUpdateFrame"},SdkRemoteVideoUpdateFrame}(),$root.SdkVideoQualityAdaptationPreference=function(){var valuesById={},values=Object.create(valuesById);return values[valuesById[1]="BALANCED"]=1,values[valuesById[2]="MAINTAIN_FRAMERATE"]=2,values[valuesById[3]="MAINTAIN_RESOLUTION"]=3,values}(),$root.SdkVideoSubscriptionConfiguration=function(){function SdkVideoSubscriptionConfiguration(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkVideoSubscriptionConfiguration.prototype.mid="",SdkVideoSubscriptionConfiguration.prototype.attendeeId="",SdkVideoSubscriptionConfiguration.prototype.streamId=0,SdkVideoSubscriptionConfiguration.prototype.priority=0,SdkVideoSubscriptionConfiguration.prototype.targetBitrateKbps=0,SdkVideoSubscriptionConfiguration.prototype.groupId=0,SdkVideoSubscriptionConfiguration.prototype.qualityAdaptationPreference=1,SdkVideoSubscriptionConfiguration.create=function create(properties){return new SdkVideoSubscriptionConfiguration(properties)},SdkVideoSubscriptionConfiguration.encode=function encode(message,writer){return writer||(writer=$Writer.create()),writer.uint32(10).string(message.mid),null!=message.attendeeId&&Object.hasOwnProperty.call(message,"attendeeId")&&writer.uint32(18).string(message.attendeeId),null!=message.streamId&&Object.hasOwnProperty.call(message,"streamId")&&writer.uint32(24).uint32(message.streamId),null!=message.priority&&Object.hasOwnProperty.call(message,"priority")&&writer.uint32(32).uint32(message.priority),null!=message.targetBitrateKbps&&Object.hasOwnProperty.call(message,"targetBitrateKbps")&&writer.uint32(40).uint32(message.targetBitrateKbps),null!=message.groupId&&Object.hasOwnProperty.call(message,"groupId")&&writer.uint32(48).uint32(message.groupId),null!=message.qualityAdaptationPreference&&Object.hasOwnProperty.call(message,"qualityAdaptationPreference")&&writer.uint32(56).int32(message.qualityAdaptationPreference),writer},SdkVideoSubscriptionConfiguration.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkVideoSubscriptionConfiguration.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkVideoSubscriptionConfiguration;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.mid=reader.string();break;case 2:message.attendeeId=reader.string();break;case 3:message.streamId=reader.uint32();break;case 4:message.priority=reader.uint32();break;case 5:message.targetBitrateKbps=reader.uint32();break;case 6:message.groupId=reader.uint32();break;case 7:message.qualityAdaptationPreference=reader.int32();break;default:reader.skipType(7&tag)}}if(!message.hasOwnProperty("mid"))throw $util.ProtocolError("missing required 'mid'",{instance:message});return message},SdkVideoSubscriptionConfiguration.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkVideoSubscriptionConfiguration.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(!$util.isString(message.mid))return"mid: string expected";if(null!=message.attendeeId&&message.hasOwnProperty("attendeeId")&&!$util.isString(message.attendeeId))return"attendeeId: string expected";if(null!=message.streamId&&message.hasOwnProperty("streamId")&&!$util.isInteger(message.streamId))return"streamId: integer expected";if(null!=message.priority&&message.hasOwnProperty("priority")&&!$util.isInteger(message.priority))return"priority: integer expected";if(null!=message.targetBitrateKbps&&message.hasOwnProperty("targetBitrateKbps")&&!$util.isInteger(message.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(null!=message.groupId&&message.hasOwnProperty("groupId")&&!$util.isInteger(message.groupId))return"groupId: integer expected";if(null!=message.qualityAdaptationPreference&&message.hasOwnProperty("qualityAdaptationPreference"))switch(message.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:}return null},SdkVideoSubscriptionConfiguration.fromObject=function fromObject(object){if(object instanceof $root.SdkVideoSubscriptionConfiguration)return object;var message=new $root.SdkVideoSubscriptionConfiguration;switch(null!=object.mid&&(message.mid=String(object.mid)),null!=object.attendeeId&&(message.attendeeId=String(object.attendeeId)),null!=object.streamId&&(message.streamId=object.streamId>>>0),null!=object.priority&&(message.priority=object.priority>>>0),null!=object.targetBitrateKbps&&(message.targetBitrateKbps=object.targetBitrateKbps>>>0),null!=object.groupId&&(message.groupId=object.groupId>>>0),object.qualityAdaptationPreference){default:if("number"==typeof object.qualityAdaptationPreference){message.qualityAdaptationPreference=object.qualityAdaptationPreference;break}break;case"BALANCED":case 1:message.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:message.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:message.qualityAdaptationPreference=3}return message},SdkVideoSubscriptionConfiguration.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.mid="",object.attendeeId="",object.streamId=0,object.priority=0,object.targetBitrateKbps=0,object.groupId=0,object.qualityAdaptationPreference=options.enums===String?"BALANCED":1),null!=message.mid&&message.hasOwnProperty("mid")&&(object.mid=message.mid),null!=message.attendeeId&&message.hasOwnProperty("attendeeId")&&(object.attendeeId=message.attendeeId),null!=message.streamId&&message.hasOwnProperty("streamId")&&(object.streamId=message.streamId),null!=message.priority&&message.hasOwnProperty("priority")&&(object.priority=message.priority),null!=message.targetBitrateKbps&&message.hasOwnProperty("targetBitrateKbps")&&(object.targetBitrateKbps=message.targetBitrateKbps),null!=message.groupId&&message.hasOwnProperty("groupId")&&(object.groupId=message.groupId),null!=message.qualityAdaptationPreference&&message.hasOwnProperty("qualityAdaptationPreference")&&(object.qualityAdaptationPreference=options.enums===String?void 0===$root.SdkVideoQualityAdaptationPreference[message.qualityAdaptationPreference]?message.qualityAdaptationPreference:$root.SdkVideoQualityAdaptationPreference[message.qualityAdaptationPreference]:message.qualityAdaptationPreference),object},SdkVideoSubscriptionConfiguration.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkVideoSubscriptionConfiguration.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkVideoSubscriptionConfiguration"},SdkVideoSubscriptionConfiguration}(),$root.SdkNotificationFrame=function(){function SdkNotificationFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkNotificationFrame.prototype.level=3,SdkNotificationFrame.prototype.message="",SdkNotificationFrame.create=function create(properties){return new SdkNotificationFrame(properties)},SdkNotificationFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.level&&Object.hasOwnProperty.call(message,"level")&&writer.uint32(8).int32(message.level),null!=message.message&&Object.hasOwnProperty.call(message,"message")&&writer.uint32(18).string(message.message),writer},SdkNotificationFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkNotificationFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkNotificationFrame;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.level=reader.int32();break;case 2:message.message=reader.string();break;default:reader.skipType(7&tag)}}return message},SdkNotificationFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkNotificationFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.level&&message.hasOwnProperty("level"))switch(message.level){default:return"level: enum value expected";case 1:case 2:case 3:}return null!=message.message&&message.hasOwnProperty("message")&&!$util.isString(message.message)?"message: string expected":null},SdkNotificationFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkNotificationFrame)return object;var message=new $root.SdkNotificationFrame;switch(object.level){case"INFO":case 1:message.level=1;break;case"WARNING":case 2:message.level=2;break;default:if("number"==typeof object.level){message.level=object.level;break}break;case"ERROR":case 3:message.level=3}return null!=object.message&&(message.message=String(object.message)),message},SdkNotificationFrame.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.level=options.enums===String?"ERROR":3,object.message=""),null!=message.level&&message.hasOwnProperty("level")&&(object.level=options.enums===String?void 0===$root.SdkNotificationFrame.NotificationLevel[message.level]?message.level:$root.SdkNotificationFrame.NotificationLevel[message.level]:message.level),null!=message.message&&message.hasOwnProperty("message")&&(object.message=message.message),object},SdkNotificationFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkNotificationFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkNotificationFrame"},SdkNotificationFrame.NotificationLevel=function(){var valuesById={},values=Object.create(valuesById);return values[valuesById[1]="INFO"]=1,values[valuesById[2]="WARNING"]=2,values[valuesById[3]="ERROR"]=3,values}(),SdkNotificationFrame}(),$root.SdkPrimaryMeetingJoinFrame=function(){function SdkPrimaryMeetingJoinFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkPrimaryMeetingJoinFrame.prototype.credentials=null,SdkPrimaryMeetingJoinFrame.create=function create(properties){return new SdkPrimaryMeetingJoinFrame(properties)},SdkPrimaryMeetingJoinFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.credentials&&Object.hasOwnProperty.call(message,"credentials")&&$root.SdkMeetingSessionCredentials.encode(message.credentials,writer.uint32(10).fork()).ldelim(),writer},SdkPrimaryMeetingJoinFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkPrimaryMeetingJoinFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkPrimaryMeetingJoinFrame;reader.pos<end;){var tag=reader.uint32();if(tag>>>3==1)message.credentials=$root.SdkMeetingSessionCredentials.decode(reader,reader.uint32());else reader.skipType(7&tag)}return message},SdkPrimaryMeetingJoinFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkPrimaryMeetingJoinFrame.verify=function verify(message){if("object"!=typeof message||null===message)return"object expected";if(null!=message.credentials&&message.hasOwnProperty("credentials")){var error=$root.SdkMeetingSessionCredentials.verify(message.credentials);if(error)return"credentials."+error}return null},SdkPrimaryMeetingJoinFrame.fromObject=function fromObject(object){if(object instanceof $root.SdkPrimaryMeetingJoinFrame)return object;var message=new $root.SdkPrimaryMeetingJoinFrame;if(null!=object.credentials){if("object"!=typeof object.credentials)throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");message.credentials=$root.SdkMeetingSessionCredentials.fromObject(object.credentials)}return message},SdkPrimaryMeetingJoinFrame.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.credentials=null),null!=message.credentials&&message.hasOwnProperty("credentials")&&(object.credentials=$root.SdkMeetingSessionCredentials.toObject(message.credentials,options)),object},SdkPrimaryMeetingJoinFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkPrimaryMeetingJoinFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkPrimaryMeetingJoinFrame"},SdkPrimaryMeetingJoinFrame}(),$root.SdkPrimaryMeetingJoinAckFrame=function(){function SdkPrimaryMeetingJoinAckFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkPrimaryMeetingJoinAckFrame.create=function create(properties){return new SdkPrimaryMeetingJoinAckFrame(properties)},SdkPrimaryMeetingJoinAckFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),writer},SdkPrimaryMeetingJoinAckFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkPrimaryMeetingJoinAckFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkPrimaryMeetingJoinAckFrame;reader.pos<end;){var tag=reader.uint32();reader.skipType(7&tag)}return message},SdkPrimaryMeetingJoinAckFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkPrimaryMeetingJoinAckFrame.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null},SdkPrimaryMeetingJoinAckFrame.fromObject=function fromObject(object){return object instanceof $root.SdkPrimaryMeetingJoinAckFrame?object:new $root.SdkPrimaryMeetingJoinAckFrame},SdkPrimaryMeetingJoinAckFrame.toObject=function toObject(){return{}},SdkPrimaryMeetingJoinAckFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkPrimaryMeetingJoinAckFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkPrimaryMeetingJoinAckFrame"},SdkPrimaryMeetingJoinAckFrame}(),$root.SdkPrimaryMeetingLeaveFrame=function(){function SdkPrimaryMeetingLeaveFrame(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkPrimaryMeetingLeaveFrame.create=function create(properties){return new SdkPrimaryMeetingLeaveFrame(properties)},SdkPrimaryMeetingLeaveFrame.encode=function encode(message,writer){return writer||(writer=$Writer.create()),writer},SdkPrimaryMeetingLeaveFrame.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkPrimaryMeetingLeaveFrame.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkPrimaryMeetingLeaveFrame;reader.pos<end;){var tag=reader.uint32();reader.skipType(7&tag)}return message},SdkPrimaryMeetingLeaveFrame.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkPrimaryMeetingLeaveFrame.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null},SdkPrimaryMeetingLeaveFrame.fromObject=function fromObject(object){return object instanceof $root.SdkPrimaryMeetingLeaveFrame?object:new $root.SdkPrimaryMeetingLeaveFrame},SdkPrimaryMeetingLeaveFrame.toObject=function toObject(){return{}},SdkPrimaryMeetingLeaveFrame.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkPrimaryMeetingLeaveFrame.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkPrimaryMeetingLeaveFrame"},SdkPrimaryMeetingLeaveFrame}(),$root.SdkMeetingSessionCredentials=function(){function SdkMeetingSessionCredentials(properties){if(properties)for(var keys=Object.keys(properties),i=0;i<keys.length;++i)null!=properties[keys[i]]&&(this[keys[i]]=properties[keys[i]])}return SdkMeetingSessionCredentials.prototype.attendeeId="",SdkMeetingSessionCredentials.prototype.externalUserId="",SdkMeetingSessionCredentials.prototype.joinToken="",SdkMeetingSessionCredentials.create=function create(properties){return new SdkMeetingSessionCredentials(properties)},SdkMeetingSessionCredentials.encode=function encode(message,writer){return writer||(writer=$Writer.create()),null!=message.attendeeId&&Object.hasOwnProperty.call(message,"attendeeId")&&writer.uint32(10).string(message.attendeeId),null!=message.externalUserId&&Object.hasOwnProperty.call(message,"externalUserId")&&writer.uint32(18).string(message.externalUserId),null!=message.joinToken&&Object.hasOwnProperty.call(message,"joinToken")&&writer.uint32(26).string(message.joinToken),writer},SdkMeetingSessionCredentials.encodeDelimited=function encodeDelimited(message,writer){return this.encode(message,writer).ldelim()},SdkMeetingSessionCredentials.decode=function decode(reader,length){reader instanceof $Reader||(reader=$Reader.create(reader));for(var end=void 0===length?reader.len:reader.pos+length,message=new $root.SdkMeetingSessionCredentials;reader.pos<end;){var tag=reader.uint32();switch(tag>>>3){case 1:message.attendeeId=reader.string();break;case 2:message.externalUserId=reader.string();break;case 3:message.joinToken=reader.string();break;default:reader.skipType(7&tag)}}return message},SdkMeetingSessionCredentials.decodeDelimited=function decodeDelimited(reader){return reader instanceof $Reader||(reader=new $Reader(reader)),this.decode(reader,reader.uint32())},SdkMeetingSessionCredentials.verify=function verify(message){return"object"!=typeof message||null===message?"object expected":null!=message.attendeeId&&message.hasOwnProperty("attendeeId")&&!$util.isString(message.attendeeId)?"attendeeId: string expected":null!=message.externalUserId&&message.hasOwnProperty("externalUserId")&&!$util.isString(message.externalUserId)?"externalUserId: string expected":null!=message.joinToken&&message.hasOwnProperty("joinToken")&&!$util.isString(message.joinToken)?"joinToken: string expected":null},SdkMeetingSessionCredentials.fromObject=function fromObject(object){if(object instanceof $root.SdkMeetingSessionCredentials)return object;var message=new $root.SdkMeetingSessionCredentials;return null!=object.attendeeId&&(message.attendeeId=String(object.attendeeId)),null!=object.externalUserId&&(message.externalUserId=String(object.externalUserId)),null!=object.joinToken&&(message.joinToken=String(object.joinToken)),message},SdkMeetingSessionCredentials.toObject=function toObject(message,options){options||(options={});var object={};return options.defaults&&(object.attendeeId="",object.externalUserId="",object.joinToken=""),null!=message.attendeeId&&message.hasOwnProperty("attendeeId")&&(object.attendeeId=message.attendeeId),null!=message.externalUserId&&message.hasOwnProperty("externalUserId")&&(object.externalUserId=message.externalUserId),null!=message.joinToken&&message.hasOwnProperty("joinToken")&&(object.joinToken=message.joinToken),object},SdkMeetingSessionCredentials.prototype.toJSON=function toJSON(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},SdkMeetingSessionCredentials.getTypeUrl=function getTypeUrl(typeUrlPrefix){return void 0===typeUrlPrefix&&(typeUrlPrefix="type.googleapis.com"),typeUrlPrefix+"/SdkMeetingSessionCredentials"},SdkMeetingSessionCredentials}(),$root.SdkVideoCodecCapability=function(){var valuesById={},values=Object.create(valuesById);return values[valuesById[1]="VP8"]=1,values[valuesById[2]="H264_BASELINE_PROFILE"]=2,values[valuesById[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,values[valuesById[4]="H264_MAIN_PROFILE"]=4,values[valuesById[5]="H264_HIGH_PROFILE"]=5,values[valuesById[6]="H264_CONSTRAINED_HIGH_PROFILE"]=6,values[valuesById[8]="VP9_PROFILE_0"]=8,values[valuesById[11]="AV1_MAIN_PROFILE"]=11,values}(),module.exports=$root,$util.Long=void 0,$protobuf.configure()},"./node_modules/amazon-chime-sdk-js/build/sigv4/DefaultSigV4.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const sha256_js_1=__webpack_require__("./node_modules/@aws-crypto/sha256-js/build/index.js"),util_hex_encoding_1=__webpack_require__("./node_modules/@aws-sdk/util-hex-encoding/dist-es/index.js"),Versioning_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/versioning/Versioning.js"));exports.default=class DefaultSigV4{constructor(chimeClient){this.chimeClient=chimeClient}makeTwoDigits(n){return n>9?n.toString():"0"+n.toString()}hmac(data,secret){const hash=new sha256_js_1.Sha256(secret);return hash.update(data),hash.digest()}getDateTimeString(){const d=new Date;return d.getUTCFullYear()+this.makeTwoDigits(d.getUTCMonth()+1)+this.makeTwoDigits(d.getUTCDate())+"T"+this.makeTwoDigits(d.getUTCHours())+this.makeTwoDigits(d.getUTCMinutes())+this.makeTwoDigits(d.getUTCSeconds())+"Z"}getDateString(dateTimeString){return dateTimeString.substring(0,dateTimeString.indexOf("T"))}getSignatureKey(key,date,regionName,serviceName){return __awaiter(this,void 0,void 0,(function*(){const kDate=yield this.hmac(date,"AWS4"+key),kRegion=yield this.hmac(regionName,kDate),kService=yield this.hmac(serviceName,kRegion);return yield this.hmac("aws4_request",kService)}))}signURL(method,scheme,serviceName,hostname,path,payload,queryParams){return __awaiter(this,void 0,void 0,(function*(){const now=this.getDateTimeString(),today=this.getDateString(now);let region="";region=this.chimeClient.config.region instanceof Function?yield this.chimeClient.config.region():this.chimeClient.config.region;const canonicalHeaders="host:"+hostname.toLowerCase()+"\n",credentialScope=today+"/"+region+"/"+serviceName+"/aws4_request";let credentials;credentials=this.chimeClient.config.credentials instanceof Function?yield this.chimeClient.config.credentials():this.chimeClient.config.credentials;let params=new Map;params.set("X-Amz-Algorithm",["AWS4-HMAC-SHA256"]),params.set("X-Amz-Credential",[encodeURIComponent(credentials.accessKeyId+"/"+credentialScope)]),params.set("X-Amz-Date",[now]),params.set("X-Amz-Expires",["10"]),params.set("X-Amz-SignedHeaders",["host"]),credentials.sessionToken&&params.set("X-Amz-Security-Token",[encodeURIComponent(credentials.sessionToken)]),params.set(Versioning_1.default.X_AMZN_VERSION,[encodeURIComponent(Versioning_1.default.sdkVersion)]),params.set(Versioning_1.default.X_AMZN_USER_AGENT,[encodeURIComponent(Versioning_1.default.sdkUserAgentLowResolution)]),null==queryParams||queryParams.forEach(((values,key)=>{const encodedKey=encodeURIComponent(key);values.sort().forEach((value=>{params.has(encodedKey)||params.set(encodedKey,[]),params.get(encodedKey).push(encodeURIComponent(value))}))}));let canonicalQuerystring="";params=new Map([...params.entries()].sort()),params.forEach(((values,key)=>{values.forEach((value=>{canonicalQuerystring.length&&(canonicalQuerystring+="&"),canonicalQuerystring+=key+"="+value}))}));const canonicalRequest=method+"\n"+path+"\n"+canonicalQuerystring+"\n"+canonicalHeaders+"\nhost\n"+util_hex_encoding_1.toHex(yield this.hmac(payload)),hashedCanonicalRequest=util_hex_encoding_1.toHex(yield this.hmac(canonicalRequest)),stringToSign="AWS4-HMAC-SHA256\n"+now+"\n"+today+"/"+region+"/"+serviceName+"/aws4_request\n"+hashedCanonicalRequest,signingKey=yield this.getSignatureKey(credentials.secretAccessKey,today,region,serviceName),signature=util_hex_encoding_1.toHex(yield this.hmac(stringToSign,signingKey));return scheme+"://"+hostname+path+"?"+(canonicalQuerystring+"&X-Amz-Signature="+signature)}))}}},"./node_modules/amazon-chime-sdk-js/build/simulcastlayers/SimulcastLayers.js":(__unused_webpack_module,exports)=>{"use strict";var SimulcastLayers;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimulcastLayers=void 0,function(SimulcastLayers){SimulcastLayers[SimulcastLayers.Low=0]="Low",SimulcastLayers[SimulcastLayers.LowAndMedium=1]="LowAndMedium",SimulcastLayers[SimulcastLayers.LowAndHigh=2]="LowAndHigh",SimulcastLayers[SimulcastLayers.Medium=3]="Medium",SimulcastLayers[SimulcastLayers.MediumAndHigh=4]="MediumAndHigh",SimulcastLayers[SimulcastLayers.High=5]="High"}(SimulcastLayers=exports.SimulcastLayers||(exports.SimulcastLayers={})),exports.default=SimulcastLayers},"./node_modules/amazon-chime-sdk-js/build/statscollector/AudioLogEvent.js":(__unused_webpack_module,exports)=>{"use strict";var AudioLogEvent;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioLogEvent=void 0,function(AudioLogEvent){AudioLogEvent[AudioLogEvent.DeviceChanged=0]="DeviceChanged",AudioLogEvent[AudioLogEvent.MutedLocal=1]="MutedLocal",AudioLogEvent[AudioLogEvent.UnmutedLocal=2]="UnmutedLocal",AudioLogEvent[AudioLogEvent.Connected=3]="Connected",AudioLogEvent[AudioLogEvent.ConnectFailed=4]="ConnectFailed",AudioLogEvent[AudioLogEvent.RedmicStartLoss=5]="RedmicStartLoss",AudioLogEvent[AudioLogEvent.RedmicEndLoss=6]="RedmicEndLoss"}(AudioLogEvent=exports.AudioLogEvent||(exports.AudioLogEvent={})),exports.default=AudioLogEvent},"./node_modules/amazon-chime-sdk-js/build/statscollector/StatsCollector.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const ClientMetricReport_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReport.js")),ClientMetricReportDirection_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportDirection.js")),ClientMetricReportMediaType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportMediaType.js")),RedundantAudioRecoveryMetricReport_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/RedundantAudioRecoveryMetricReport.js")),StreamMetricReport_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/StreamMetricReport.js")),MeetingSessionLifecycleEvent_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionLifecycleEvent.js")),MeetingSessionLifecycleEventCondition_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionLifecycleEventCondition.js")),IntervalScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/IntervalScheduler.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),Types_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Types.js"),AudioLogEvent_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/statscollector/AudioLogEvent.js")),VideoLogEvent_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/statscollector/VideoLogEvent.js"));class StatsCollector{constructor(audioVideoController,logger,interval=StatsCollector.INTERVAL_MS){this.audioVideoController=audioVideoController,this.logger=logger,this.interval=interval,this.intervalScheduler=null,this.redRecoveryMetricReport=new RedundantAudioRecoveryMetricReport_1.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0,this.resolutionMap=new Map,this.metricsAddTime=(_name,_duration,_attributes)=>{},this.metricsLogEvent=(_name,_attributes)=>{}}toAttribute(str){return this.toSuffix(str).substring(1)}toSuffix(str){return str.toLowerCase()===str?`_${str}`:str.toUpperCase()===str?`_${str.toLowerCase()}`:str.replace(/([A-Z][a-z]+)/g,(function($1){return`_${$1}`})).replace(/([A-Z][A-Z]+)/g,(function($1){return`_${$1}`})).toLowerCase()}logLatency(eventName,timeMs,attributes){const event=this.toSuffix(eventName);this.logEventTime("meeting"+event,timeMs,attributes)}logStateTimeout(stateName,attributes){const state=this.toSuffix(stateName);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},attributes),{state:`state${state}`}))}logAudioEvent(eventName,attributes){const event="audio"+this.toSuffix(AudioLogEvent_1.default[eventName]);this.logEvent(event,attributes)}logVideoEvent(eventName,attributes){const event="video"+this.toSuffix(VideoLogEvent_1.default[eventName]);this.logEvent(event,attributes)}logEventTime(eventName,timeMs,attributes={}){const finalAttributes=Object.assign(Object.assign({},attributes),{call_id:this.audioVideoController.configuration.meetingId,client_type:StatsCollector.CLIENT_TYPE,metric_type:"latency"});this.logger.debug((()=>`[StatsCollector] ${eventName}: ${JSON.stringify(finalAttributes)}`)),this.metricsAddTime(eventName,timeMs,finalAttributes)}logMeetingSessionStatus(status){const statusEventName=`${status.statusCode()}`;this.logEvent(statusEventName);const statusAttribute={status:statusEventName,status_code:`${status.statusCode()}`};this.logEvent("meeting_session_status",statusAttribute),status.isTerminal()&&this.logEvent("meeting_session_stopped",statusAttribute),status.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",statusAttribute),status.isFailure()&&this.logEvent("meeting_session_failed",statusAttribute)}logLifecycleEvent(lifecycleEvent,condition){const attributes={lifecycle_event:`lifecycle${this.toSuffix(MeetingSessionLifecycleEvent_1.default[lifecycleEvent])}`,lifecycle_event_code:`${lifecycleEvent}`,lifecycle_event_condition:`condition${this.toSuffix(MeetingSessionLifecycleEventCondition_1.default[condition])}`,lifecycle_event_condition_code:`${condition}`};this.logEvent("meeting_session_lifecycle",attributes)}logEvent(eventName,attributes={}){const finalAttributes=Object.assign(Object.assign({},attributes),{call_id:this.audioVideoController.configuration.meetingId,client_type:StatsCollector.CLIENT_TYPE});this.logger.debug((()=>`[StatsCollector] ${eventName}: ${JSON.stringify(finalAttributes)}`)),this.metricsLogEvent(eventName,finalAttributes)}start(signalingClient,videoStreamIndex){return!this.intervalScheduler&&(this.logger.info("Starting StatsCollector"),this.signalingClient=signalingClient,this.videoStreamIndex=videoStreamIndex,this.clientMetricReport=new ClientMetricReport_1.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new IntervalScheduler_1.default(this.interval),this.intervalScheduler.start((()=>__awaiter(this,void 0,void 0,(function*(){yield this.getStatsWrapper()})))),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}videoTileResolutionDidChange(attendeeId,newWidth,newHeight){this.resolutionMap.set(attendeeId,{width:newWidth,height:newHeight})}videoTileUnbound(attendeeId){this.resolutionMap.delete(attendeeId)}updateMetricValues(rawMetricReport,isStream){const metricReport=isStream?this.clientMetricReport.streamMetricReports[Number(rawMetricReport.ssrc)]:this.clientMetricReport.globalMetricReport;let metricMap;if(isStream){const mediaType=metricReport.mediaType,direction=metricReport.direction;metricMap=this.clientMetricReport.getMetricMap(mediaType,direction),mediaType===ClientMetricReportMediaType_1.default.VIDEO&&direction===ClientMetricReportDirection_1.default.DOWNSTREAM&&this.addRenderResolutionToVideoDownstreamMetrics(metricReport,rawMetricReport.ssrc)}else metricMap=this.clientMetricReport.getMetricMap();for(const rawMetric in rawMetricReport)rawMetric in metricMap&&("number"==typeof rawMetricReport[rawMetric]?(metricReport.previousMetrics[rawMetric]=metricReport.currentMetrics[rawMetric],metricReport.currentMetrics[rawMetric]=rawMetricReport[rawMetric]):"string"==typeof rawMetricReport[rawMetric]?metricReport.currentStringMetrics[rawMetric]=rawMetricReport[rawMetric]:"object"==typeof rawMetricReport[rawMetric]?(metricReport.previousObjectMetrics[rawMetric]=void 0===metricReport.currentObjectMetrics[rawMetric]?rawMetricReport[rawMetric]:metricReport.currentObjectMetrics[rawMetric],metricReport.currentObjectMetrics[rawMetric]=rawMetricReport[rawMetric]):this.logger.error(`Unknown metric value type ${typeof rawMetricReport[rawMetric]} for metric ${rawMetric}`))}processRawMetricReports(rawMetricReports){this.clientMetricReport.currentSsrcs={};const timeStamp=Date.now();for(const rawMetricReport of rawMetricReports){if(this.isVideoSourceMetricReport(rawMetricReport))continue;const isStream=this.isStreamRawMetricReport(rawMetricReport);if(isStream){const existingStreamMetricReport=this.clientMetricReport.streamMetricReports[Number(rawMetricReport.ssrc)];if(existingStreamMetricReport)existingStreamMetricReport.mediaType===ClientMetricReportMediaType_1.default.VIDEO&&existingStreamMetricReport.direction===ClientMetricReportDirection_1.default.UPSTREAM?existingStreamMetricReport.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(rawMetricReport.rid):existingStreamMetricReport.streamId=this.videoStreamIndex.streamIdForSSRC(Number(rawMetricReport.ssrc));else{const streamMetricReport=new StreamMetricReport_1.default;streamMetricReport.mediaType=this.getMediaType(rawMetricReport),streamMetricReport.direction=this.getDirectionType(rawMetricReport),streamMetricReport.mediaType===ClientMetricReportMediaType_1.default.VIDEO&&streamMetricReport.direction===ClientMetricReportDirection_1.default.UPSTREAM?streamMetricReport.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(rawMetricReport.rid):this.videoStreamIndex.allStreams().empty()||(streamMetricReport.streamId=this.videoStreamIndex.streamIdForSSRC(Number(rawMetricReport.ssrc)),void 0!==this.videoStreamIndex.groupIdForSSRC&&(streamMetricReport.groupId=this.videoStreamIndex.groupIdForSSRC(Number(rawMetricReport.ssrc)))),this.clientMetricReport.streamMetricReports[Number(rawMetricReport.ssrc)]=streamMetricReport}this.clientMetricReport.currentSsrcs[Number(rawMetricReport.ssrc)]=1}this.updateMetricValues(rawMetricReport,isStream)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=timeStamp,this.clientMetricReport.print()}addStreamMetricDimensionFrames(streamMetricFrame,streamMetricReport){const streamDimensionMap=this.clientMetricReport.getStreamDimensionMap();for(const metricName in streamMetricReport.currentStringMetrics)if(metricName in streamDimensionMap){const dimensionFrame=SignalingProtocol_js_1.SdkStreamDimension.create();dimensionFrame.type=streamDimensionMap[metricName];const dimensionValue=SignalingProtocol_js_1.SdkDimensionValue.create();dimensionValue.stringValue=streamMetricReport.currentStringMetrics[metricName],dimensionFrame.value=dimensionValue,streamMetricFrame.dimensions.push(dimensionFrame)}}addMetricFrame(metricName,clientMetricFrame,metricSpec,ssrc){const type=metricSpec.type,transform=metricSpec.transform,sourceMetric=metricSpec.source,streamMetricFramesLength=clientMetricFrame.streamMetricFrames.length,latestStreamMetricFrame=clientMetricFrame.streamMetricFrames[streamMetricFramesLength-1];if(type){const metricFrame=SignalingProtocol_js_1.SdkMetric.create();metricFrame.type=type,metricFrame.value=transform(sourceMetric||metricName,ssrc),ssrc?latestStreamMetricFrame.metrics.push(metricFrame):clientMetricFrame.globalMetrics.push(metricFrame)}}addGlobalMetricsToProtobuf(clientMetricFrame){const metricMap=this.clientMetricReport.getMetricMap();for(const metricName in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(metricName,clientMetricFrame,metricMap[metricName])}addStreamMetricsToProtobuf(clientMetricFrame){for(const ssrc in this.clientMetricReport.streamMetricReports){const streamMetricReport=this.clientMetricReport.streamMetricReports[ssrc],streamMetricFrame=SignalingProtocol_js_1.SdkStreamMetricFrame.create();streamMetricFrame.streamId=streamMetricReport.streamId,streamMetricFrame.mediaType=streamMetricReport.mediaType===ClientMetricReportMediaType_1.default.AUDIO?SignalingProtocol_js_1.SdkStreamMediaType.AUDIO:SignalingProtocol_js_1.SdkStreamMediaType.VIDEO,streamMetricFrame.metrics=[],this.addStreamMetricDimensionFrames(streamMetricFrame,streamMetricReport),clientMetricFrame.streamMetricFrames.push(streamMetricFrame);const metricMap=this.clientMetricReport.getMetricMap(streamMetricReport.mediaType,streamMetricReport.direction);for(const metricName in metricMap)this.hasMetricDependenciesInReport(metricName,streamMetricReport)&&this.addMetricFrame(metricName,clientMetricFrame,metricMap[metricName],Number(ssrc))}}hasMetricDependenciesInReport(metricName,streamMetricReport){return"decoderLoss"===metricName&&void 0!==streamMetricReport.currentMetrics.concealedSamples&&void 0!==streamMetricReport.currentMetrics.totalSamplesReceived||"jitterBufferMs"===metricName&&void 0!==streamMetricReport.currentMetrics.jitterBufferDelay&&void 0!==streamMetricReport.currentMetrics.jitterBufferEmittedCount||metricName in streamMetricReport.currentMetrics||metricName in streamMetricReport.currentStringMetrics||metricName in streamMetricReport.currentObjectMetrics}makeClientMetricProtobuf(){const clientMetricFrame=SignalingProtocol_js_1.SdkClientMetricFrame.create();return clientMetricFrame.globalMetrics=[],clientMetricFrame.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(clientMetricFrame),this.addStreamMetricsToProtobuf(clientMetricFrame),clientMetricFrame}sendClientMetricProtobuf(clientMetricFrame){this.signalingClient.sendClientMetrics(clientMetricFrame)}isStreamRawMetricReport(rawMetricReport){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(rawMetricReport.type)||this.isVideoSourceMetricReport(rawMetricReport)}getMediaType(rawMetricReport){return"audio"===rawMetricReport.kind?ClientMetricReportMediaType_1.default.AUDIO:ClientMetricReportMediaType_1.default.VIDEO}getDirectionType(rawMetricReport){const{type}=rawMetricReport;return"inbound-rtp"===type||"remote-outbound-rtp"===type||"inbound-rtp-red"===type?ClientMetricReportDirection_1.default.DOWNSTREAM:ClientMetricReportDirection_1.default.UPSTREAM}isValidStandardRawMetric(rawMetricReport){return"inbound-rtp"===rawMetricReport.type||"inbound-rtp-red"===rawMetricReport.type||"outbound-rtp"===rawMetricReport.type||"remote-inbound-rtp"===rawMetricReport.type||"remote-outbound-rtp"===rawMetricReport.type||"candidate-pair"===rawMetricReport.type&&"succeeded"===rawMetricReport.state||"media-source"===rawMetricReport.type}isValidSsrc(rawMetricReport){let validSsrc=!0;return this.isStreamRawMetricReport(rawMetricReport)&&this.getDirectionType(rawMetricReport)===ClientMetricReportDirection_1.default.DOWNSTREAM&&this.getMediaType(rawMetricReport)===ClientMetricReportMediaType_1.default.VIDEO&&(validSsrc=this.videoStreamIndex.streamIdForSSRC(Number(rawMetricReport.ssrc))>0),validSsrc}isValidRawMetricReport(rawMetricReport){return this.isValidStandardRawMetric(rawMetricReport)&&this.isValidSsrc(rawMetricReport)}filterRawMetricReports(rawMetricReports){const filteredRawMetricReports=[];for(const rawMetricReport of rawMetricReports)this.isValidRawMetricReport(rawMetricReport)&&filteredRawMetricReports.push(rawMetricReport);return filteredRawMetricReports}handleRawMetricReports(rawMetricReports){const filteredRawMetricReports=this.filterRawMetricReports(rawMetricReports);this.logger.debug((()=>`Filtered raw metrics : ${JSON.stringify(filteredRawMetricReports)}`));const customStatsReports=[];this.maybeAddRedRecoveryMetrics(customStatsReports);const videoUpstreamSsrc=this.getVideoUpstreamSsrcFromRawMetricReports(filteredRawMetricReports);null!==videoUpstreamSsrc&&this.addVideoCodecDegradationMetrics(customStatsReports,videoUpstreamSsrc),this.clientMetricReport.customStatsReports=customStatsReports,filteredRawMetricReports.push(...customStatsReports),this.processRawMetricReports(filteredRawMetricReports),this.updateVideoSourceMetrics(filteredRawMetricReports);const clientMetricFrame=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(clientMetricFrame),this.audioVideoController.forEachObserver((observer=>{Types_1.Maybe.of(observer.metricsDidReceive).map((f=>f.bind(observer)(this.clientMetricReport.clone())))}))}getStatsWrapper(){return __awaiter(this,void 0,void 0,(function*(){if(!this.audioVideoController.rtcPeerConnection)return;const rawMetricReports=[];try{const report=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=report,report.forEach((item=>{rawMetricReports.push(item)})),this.handleRawMetricReports(rawMetricReports)}catch(error){this.logger.error(error.message)}}))}overrideObservableMetric(name,value){this.clientMetricReport.overrideObservableMetric(name,value)}recoveryMetricsDidReceive(metricReport){this.redRecoveryMetricReport=metricReport}maybeAddRedRecoveryMetrics(customStatsReports){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(customStatsReports.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}videoCodecDegradationHighEncodeCpuDidReceive(){this.videoCodecDegradationHighEncodeCpuCount+=1}videoCodecDegradationEncodeFailureDidReceive(){this.videoCodecDegradationEncodeFailureCount+=1}addVideoCodecDegradationMetrics(customStatsReports,videoUpstreamSsrc){customStatsReports.push({kind:"video",type:"outbound-rtp",ssrc:videoUpstreamSsrc,timestamp:Date.now(),videoCodecDegradationHighEncodeCpu:this.videoCodecDegradationHighEncodeCpuCount,videoCodecDegradationEncodeFailure:this.videoCodecDegradationEncodeFailureCount}),this.videoCodecDegradationHighEncodeCpuCount=0,this.videoCodecDegradationEncodeFailureCount=0}getVideoUpstreamSsrcFromRawMetricReports(rawMetricReports){for(const rawMetricReport of rawMetricReports)if(this.isStreamRawMetricReport(rawMetricReport)&&this.getMediaType(rawMetricReport)===ClientMetricReportMediaType_1.default.VIDEO&&this.getDirectionType(rawMetricReport)===ClientMetricReportDirection_1.default.UPSTREAM)return rawMetricReport.ssrc;return null}isVideoSourceMetricReport(rawMetricReport){return"media-source"===rawMetricReport.type&&"video"===rawMetricReport.kind}addRenderResolutionToVideoDownstreamMetrics(metricReport,ssrc){const streamId=this.videoStreamIndex.streamIdForSSRC(Number(ssrc)),attendeeId=this.videoStreamIndex.attendeeIdForStreamId(streamId);void 0!==streamId&&""!==attendeeId?this.resolutionMap.has(attendeeId)&&(metricReport.currentMetrics.videoRenderWidth=this.resolutionMap.get(attendeeId).width,metricReport.currentMetrics.videoRenderHeight=this.resolutionMap.get(attendeeId).height):this.logger.warn(`No attendee found for ssrc ${ssrc}`)}updateVideoSourceMetrics(rawMetricReports){for(const rawMetricReport of rawMetricReports)if(this.isVideoSourceMetricReport(rawMetricReport)){const videoUpstreamSsrcs=this.clientMetricReport.getVideoUpstreamSsrcs();if(0===videoUpstreamSsrcs.length)return void this.logger.warn("No video upstream ssrcs found");for(const ssrc of videoUpstreamSsrcs)this.clientMetricReport.streamMetricReports[ssrc].currentMetrics.videoInputWidth=rawMetricReport.width,this.clientMetricReport.streamMetricReports[ssrc].currentMetrics.videoInputHeight=rawMetricReport.height}}}exports.default=StatsCollector,StatsCollector.INTERVAL_MS=1e3,StatsCollector.CLIENT_TYPE="amazon-chime-sdk-js"},"./node_modules/amazon-chime-sdk-js/build/statscollector/VideoLogEvent.js":(__unused_webpack_module,exports)=>{"use strict";var VideoLogEvent;Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoLogEvent=void 0,function(VideoLogEvent){VideoLogEvent[VideoLogEvent.InputAttached=0]="InputAttached",VideoLogEvent[VideoLogEvent.SendingFailed=1]="SendingFailed",VideoLogEvent[VideoLogEvent.SendingSuccess=2]="SendingSuccess"}(VideoLogEvent=exports.VideoLogEvent||(exports.VideoLogEvent={})),exports.default=VideoLogEvent},"./node_modules/amazon-chime-sdk-js/build/task/AttachMediaInputTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const VideoLogEvent_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/statscollector/VideoLogEvent.js")),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class AttachMediaInputTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="AttachMediaInputTask"}run(){return __awaiter(this,void 0,void 0,(function*(){const transceiverController=this.context.transceiverController;transceiverController.setPeer(this.context.peer),transceiverController.setupLocalTransceivers();const audioInput=this.context.activeAudioInput;if(audioInput){const audioTracks=audioInput.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield transceiverController.setAudioInput(audioTracks.length?audioTracks[0]:null)}else yield transceiverController.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const videoInput=this.context.activeVideoInput;if(videoInput){const videoTracks=videoInput.getVideoTracks(),videoTrack=videoTracks.length?videoTracks[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield transceiverController.setVideoInput(videoTrack),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const encodingParam=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();transceiverController.setEncodingParameters(encodingParam)}videoTrack&&this.context.statsCollector.logVideoEvent(VideoLogEvent_1.default.InputAttached,this.context.videoDeviceInformation)}else yield transceiverController.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=transceiverController.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive),this.context.videoStreamIndex.subscribeFrameSent()}))}setAudioCodecPreferences(){const supportsSetCodecPreferences=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,enableAudioRedundancy=this.context.audioProfile.hasRedundancyEnabled();if(!supportsSetCodecPreferences)return void this.context.logger.warn("Setting codec preferences not supported");const audioTransceiver=this.context.transceiverController.localAudioTransceiver(),{codecs}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(codecs,null,4)}`);const redCodecIndex=codecs.findIndex((c=>"audio/red"===c.mimeType));if(audioTransceiver){if(redCodecIndex>=0){const redCodec=codecs[redCodecIndex];return codecs.splice(redCodecIndex,1),enableAudioRedundancy?(codecs.unshift(redCodec),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),void audioTransceiver.setCodecPreferences(codecs)}this.context.logger.info("audio/red codec not supported")}else this.context.logger.error("audio transceiver is null")}}exports.default=AttachMediaInputTask},"./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const OnceTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/OnceTask.js")),TaskStatus_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/TaskStatus.js"));exports.default=class BaseTask{constructor(logger){this.logger=logger,this.taskName="BaseTask",this.parentTask=null,this.status=TaskStatus_1.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}once(...dependencies){return new OnceTask_1.default(this.logger,this,dependencies)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(parentTask){this.parentTask=parentTask}getStatus(){return this.status}logAndThrow(message){throw this.logger.info(message),new Error(message)}baseRun(originalRun){return __awaiter(this,void 0,void 0,(function*(){try{const startTime=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case TaskStatus_1.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case TaskStatus_1.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case TaskStatus_1.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=TaskStatus_1.default.RUNNING,yield originalRun.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-startTime)} ms`)}catch(err){throw err}finally{this.status!==TaskStatus_1.default.CANCELED&&(this.status=TaskStatus_1.default.FINISHED)}}))}baseCancel(originalCancel){this.status!==TaskStatus_1.default.CANCELED&&this.status!==TaskStatus_1.default.FINISHED?(this.logger.info(`canceling task ${this.name()}`),this.status=TaskStatus_1.default.CANCELED,originalCancel.call(this)):this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`)}}},"./node_modules/amazon-chime-sdk-js/build/task/CleanRestartedSessionTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class CleanRestartedSessionTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="CleanRestartedSessionTask"}run(){return __awaiter(this,void 0,void 0,(function*(){this.context.resetConnectionSpecificState()}))}}exports.default=CleanRestartedSessionTask},"./node_modules/amazon-chime-sdk-js/build/task/CleanStoppedSessionTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class CleanStoppedSessionTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return __awaiter(this,void 0,void 0,(function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(error){throw error}finally{for(const observer of this.context.removableObservers)observer.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const tile=this.context.videoTileController.getLocalVideoTile();tile&&tile.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}}))}receiveWebSocketClosedEvent(){return new Promise(((resolve,reject)=>{const interceptor=new class Interceptor{constructor(signalingClient){this.signalingClient=signalingClient}cancel(){this.signalingClient.removeObserver(this),reject(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(event){event.type===SignalingClientEventType_1.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),resolve())}}(this.context.signalingClient);this.taskCanceler=interceptor,this.context.signalingClient.registerObserver(interceptor)}))}}exports.default=CleanStoppedSessionTask},"./node_modules/amazon-chime-sdk-js/build/task/CreatePeerConnectionTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class CreatePeerConnectionTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=event=>{const track=event.track;if(this.context.logger.info(`received track event: kind=${track.kind} id=${track.id} label=${track.label}`),event.transceiver&&"inactive"===event.transceiver.currentDirection)return;if(0===event.streams.length)return void this.context.logger.warn("Track event but no stream");const stream=event.streams[0];"audio"===track.kind?this.context.audioMixController.bindAudioStream(stream):"video"!==track.kind||this.trackIsVideoInput(track)||this.addRemoteVideoTrack(track,stream)}}removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const trackId in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[trackId]()}addPeerConnectionEventLogger(){const peer=this.context.peer;peer.addEventListener("connectionstatechange",(()=>{this.context.logger.info(`peer connection state changed: ${peer.connectionState}`)})),peer.addEventListener("negotiationneeded",(()=>{this.context.logger.info("peer connection negotiation is needed")})),peer.addEventListener("icegatheringstatechange",(()=>{this.context.logger.info(`peer connection ice gathering state changed: ${peer.iceGatheringState}`)})),peer.addEventListener("icecandidate",(event=>{this.context.logger.info(`peer connection ice candidate: ${event.candidate?event.candidate.candidate:"(null)"}`)})),peer.addEventListener("iceconnectionstatechange",(()=>{this.context.logger.info(`peer connection ice connection state changed: ${peer.iceConnectionState}`)}))}run(){return __awaiter(this,void 0,void 0,(function*(){this.context.removableObservers.push(this);const configuration=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};configuration.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),configuration.sdpSemantics="unified-plan",configuration.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(configuration),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)}))}trackIsVideoInput(track){return!!this.context.transceiverController.useTransceivers()&&(this.logger.debug((()=>"getting video track type")),this.context.transceiverController.trackIsVideoInput(track))}addRemoteVideoTrack(track,stream){var _a;const trackId=stream.id,attendeeId=this.context.videoStreamIndex.attendeeIdForTrack(trackId);let skipAdding,tile;if(this.context.videoTileController.getVideoTileForAttendeeId?(tile=this.context.videoTileController.getVideoTileForAttendeeId(attendeeId),skipAdding=!!(null===(_a=null==tile?void 0:tile.state())||void 0===_a?void 0:_a.boundVideoStream)):skipAdding=this.context.videoTileController.haveVideoTileForAttendeeId(attendeeId),skipAdding)return void this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${attendeeId}`);tile||(tile=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${tile.id()}`));let streamId=this.context.videoStreamIndex.streamIdForTrack(trackId);void 0===streamId&&(this.logger.warn(`stream not found for tile=${tile.id()} track=${trackId}`),streamId=null);let width,height,groupId=this.context.videoStreamIndex.groupIdForStreamId(streamId);void 0===groupId&&(groupId=null);for(let i=0;i<this.trackEvents.length;i++){const trackEvent=this.trackEvents[i],videoTracks=stream.getVideoTracks();if(videoTracks&&videoTracks.length){const videoTrack=videoTracks[0],callback=()=>{this.context.logger.info(`received the ${trackEvent} event for tile=${tile.id()} id=${track.id} streamId=${streamId}`),"ended"===trackEvent&&this.removeRemoteVideoTrack(track,tile.state())};videoTrack.addEventListener(trackEvent,callback),this.removeVideoTrackEventListeners[track.id]||(this.removeVideoTrackEventListeners[track.id]=[]),this.removeVideoTrackEventListeners[track.id].push((()=>{videoTrack.removeEventListener(trackEvent,callback)}))}}if(track.getSettings){const cap=track.getSettings();width=cap.width,height=cap.height}else{const cap=track.getCapabilities();width=cap.width,height=cap.height}const externalUserId=this.context.videoStreamIndex.externalUserIdForTrack(trackId);tile.bindVideoStream(attendeeId,!1,stream,width,height,streamId,externalUserId,groupId),this.logger.info(`video track added, use tile=${tile.id()} track=${trackId} streamId=${streamId} groupId=${groupId}`);const target=stream,trackRemovedHandler=()=>this.removeRemoteVideoTrack(track,tile.state());this.removeTrackRemovedEventListeners[track.id]=()=>{target.removeEventListener("removetrack",trackRemovedHandler),delete this.removeTrackRemovedEventListeners[track.id]},target.addEventListener("removetrack",trackRemovedHandler)}removeRemoteVideoTrack(track,tileState){if(this.removeTrackRemovedEventListeners.hasOwnProperty(track.id)){this.removeTrackRemovedEventListeners[track.id]();for(const removeVideoTrackEventListener of this.removeVideoTrackEventListeners[track.id])removeVideoTrackEventListener();delete this.removeVideoTrackEventListeners[track.id]}this.logger.info(`video track ended, removing tile=${tileState.tileId} id=${track.id} stream=${tileState.streamId}`),tileState.streamId?this.context.videosPaused.remove(tileState.streamId):this.logger.warn(`no stream found for tile=${tileState.tileId}`),this.context.videoTileController.removeVideoTile(tileState.tileId)}}exports.default=CreatePeerConnectionTask,CreatePeerConnectionTask.REMOVE_HANDLER_INTERVAL_MS=1e4},"./node_modules/amazon-chime-sdk-js/build/task/CreateSDPTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const MeetingSessionStatusCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatusCode.js")),SDP_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/SDP.js")),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class CreateSDPTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="CreateSDPTask"}cancel(){if(this.cancelPromise){const error=new Error(`canceling ${this.name()}`);this.cancelPromise(error),delete this.cancelPromise}}sessionUsesAudio(){var _a,_b;return!!(null===(_b=null===(_a=this.context.meetingSessionConfiguration)||void 0===_a?void 0:_a.urls)||void 0===_b?void 0:_b.audioHostURL)}sessionUsesVideo(){let sending;sending=this.context.transceiverController.useTransceivers()?this.context.transceiverController.hasVideoInput():this.context.videoTileController.hasStartedLocalVideoTile();const receiving=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),usesVideo=sending||receiving;return this.context.logger.info(`uses video: ${usesVideo} (enabled: true, sending: ${sending}, receiving: ${receiving})`),usesVideo}run(){return __awaiter(this,void 0,void 0,(function*(){const offerOptions={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(offerOptions)}`),yield new Promise(((resolve,reject)=>__awaiter(this,void 0,void 0,(function*(){this.cancelPromise=error=>{reject(error)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(offerOptions),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new SDP_1.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const error=new Error(`canceling ${this.name()} due to the meeting status code: ${MeetingSessionStatusCode_1.default.IncompatibleSDP}`);return this.context.previousSdpOffer=null,void reject(error)}resolve()}catch(error){reject(error)}finally{delete this.cancelPromise}}))))}))}}exports.default=CreateSDPTask},"./node_modules/amazon-chime-sdk-js/build/task/FinishGatheringICECandidatesTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const MeetingSessionStatusCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatusCode.js")),SDP_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/SDP.js")),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class FinishGatheringICECandidatesTask extends BaseTask_1.default{constructor(context,chromeVpnTimeoutMs=FinishGatheringICECandidatesTask.CHROME_VPN_TIMEOUT_MS){super(context.logger),this.context=context,this.chromeVpnTimeoutMs=chromeVpnTimeoutMs,this.taskName="FinishGatheringICECandidatesTask"}removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let error;if(this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs){Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(error=new Error(`canceling ${this.name()} due to the meeting status code: ${MeetingSessionStatusCode_1.default.ICEGatheringTimeoutWorkaround}`))}this.cancelPromise&&(error=error||new Error(`canceling ${this.name()}`),this.cancelPromise(error),delete this.cancelPromise)}run(){return __awaiter(this,void 0,void 0,(function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new SDP_1.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines())return void this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`)}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if(!this.context.browserBehavior.hasFirefoxWebRTC()&&"complete"!==this.context.peer.iceGatheringState||!new SDP_1.default(this.context.peer.localDescription.sdp).hasCandidates())try{yield new Promise(((resolve,reject)=>{this.cancelPromise=error=>{this.removeEventListener(),reject(error)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if("complete"===this.context.peer.iceGatheringState)return this.removeEventListener(),resolve(),void delete this.cancelPromise},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=event=>{if(this.context.logger.info(`ice candidate: ${event.candidate?event.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),event.candidate&&(SDP_1.default.isRTPCandidate(event.candidate.candidate)&&this.context.iceCandidates.push(event.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1))return this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),resolve(),void delete this.cancelPromise;"complete"===this.context.peer.iceGatheringState&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),new SDP_1.default(this.context.peer.localDescription.sdp).hasCandidates()&&0!==this.context.iceCandidates.length?(resolve(),delete this.cancelPromise):(reject(new Error("no ice candidates were gathered")),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()}))}catch(error){throw error}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}else this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering")}))}}exports.default=FinishGatheringICECandidatesTask,FinishGatheringICECandidatesTask.CHROME_VPN_TIMEOUT_MS=5e3},"./node_modules/amazon-chime-sdk-js/build/task/JoinAndReceiveIndexTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const MeetingSessionStatus_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatus.js")),MeetingSessionStatusCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatusCode.js")),MeetingSessionTURNCredentials_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionTURNCredentials.js")),ServerSideNetworkAdaption_1=__importStar(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/ServerSideNetworkAdaption.js")),SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),SignalingClientJoin_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientJoin.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class JoinAndReceiveIndexTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return __awaiter(this,void 0,void 0,(function*(){const indexFrame=yield new Promise(((resolve,reject)=>{const context=this.context;context.turnCredentials=null;const interceptor=new class IndexFrameInterceptor{constructor(signalingClient){this.signalingClient=signalingClient}cancel(){this.signalingClient.removeObserver(this),reject(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(event){if(event.type===SignalingClientEventType_1.default.WebSocketClosed){let message=`The signaling connection was closed with code ${event.closeCode} and reason: ${event.closeReason}`;context.logger.warn(message);let statusCode=MeetingSessionStatusCode_1.default.SignalingBadRequest;return 4410===event.closeCode?(message="The meeting already ended.",context.logger.warn(message),statusCode=MeetingSessionStatusCode_1.default.MeetingEnded):event.closeCode>=4500&&event.closeCode<4600&&(statusCode=MeetingSessionStatusCode_1.default.SignalingInternalServerError),void context.audioVideoController.handleMeetingSessionStatus(new MeetingSessionStatus_1.default(statusCode),new Error(message))}if(event.type!==SignalingClientEventType_1.default.ReceivedSignalFrame)return;if(event.message.type===SignalingProtocol_js_1.SdkSignalFrame.Type.JOIN_ACK){const joinAckFrame=event.message.joinack;if(!joinAckFrame)return void context.audioVideoController.handleMeetingSessionStatus(new MeetingSessionStatus_1.default(MeetingSessionStatusCode_1.default.SignalingRequestFailed),new Error("Join ACK message did not include expected frame"));if(joinAckFrame.videoSubscriptionLimit&&(context.videoSubscriptionLimit=joinAckFrame.videoSubscriptionLimit),context.serverSupportsCompression=joinAckFrame.wantsCompressedSdp,void 0!==joinAckFrame.defaultServerSideNetworkAdaption&&joinAckFrame.defaultServerSideNetworkAdaption!==ServerSideNetworkAdaption_1.default.Default&&void 0!==context.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption){const defaultServerSideNetworkAdaption=joinAckFrame.defaultServerSideNetworkAdaption;context.logger.info(`Overriding server side network adaption value to ${defaultServerSideNetworkAdaption}`),context.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(ServerSideNetworkAdaption_1.convertServerSideNetworkAdaptionEnumFromSignaled(defaultServerSideNetworkAdaption))}return void(joinAckFrame&&joinAckFrame.turnCredentials?(context.turnCredentials=new MeetingSessionTURNCredentials_1.default,context.turnCredentials.username=joinAckFrame.turnCredentials.username,context.turnCredentials.password=joinAckFrame.turnCredentials.password,context.turnCredentials.ttl=joinAckFrame.turnCredentials.ttl,context.turnCredentials.uris=joinAckFrame.turnCredentials.uris.map((uri=>context.meetingSessionConfiguration.urls.urlRewriter(uri))).filter((uri=>!!uri))):context.logger.error("missing TURN credentials in JoinAckFrame"))}if(event.message.type!==SignalingProtocol_js_1.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const indexFrame=event.message.index;resolve(indexFrame)}}(this.context.signalingClient);this.context.signalingClient.registerObserver(interceptor),this.taskCanceler=interceptor,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const join=new SignalingClientJoin_1.default(this.context.meetingSessionConfiguration.applicationMetadata);void 0!==this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption&&void 0!==this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions&&(join.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),join.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),void 0!==this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex&&(join.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),join.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(join)}));this.context.logger.info(`received first index ${JSON.stringify(indexFrame)}`),this.context.indexFrame=indexFrame}))}}exports.default=JoinAndReceiveIndexTask},"./node_modules/amazon-chime-sdk-js/build/task/LeaveAndReceiveLeaveAckTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class LeaveAndReceiveLeaveAckTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return __awaiter(this,void 0,void 0,(function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())}))}receiveLeaveAck(){return new Promise(((resolve,reject)=>{const interceptor=new class Interceptor{constructor(signalingClient,logger){this.signalingClient=signalingClient,this.logger=logger}cancel(){this.signalingClient.removeObserver(this),reject(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(event){if(event.isConnectionTerminated())return this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),void resolve();event.type===SignalingClientEventType_1.default.ReceivedSignalFrame&&event.message.type===SignalingProtocol_js_1.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),resolve())}}(this.context.signalingClient,this.context.logger);this.taskCanceler=interceptor,this.context.signalingClient.registerObserver(interceptor)}))}}exports.default=LeaveAndReceiveLeaveAckTask},"./node_modules/amazon-chime-sdk-js/build/task/ListenForVolumeIndicatorsTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class ListenForVolumeIndicatorsTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=muted=>{this.context.signalingClient.mute(muted)}}run(){return __awaiter(this,void 0,void 0,(function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)}))}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(event){if(event.type===SignalingClientEventType_1.default.ReceivedSignalFrame)if(event.message.type===SignalingProtocol_js_1.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const audioStreamIdInfo=event.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(audioStreamIdInfo)}else if(event.message.type===SignalingProtocol_js_1.SdkSignalFrame.Type.AUDIO_METADATA){const audioMetadata=event.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(audioMetadata)}}}exports.default=ListenForVolumeIndicatorsTask},"./node_modules/amazon-chime-sdk-js/build/task/MonitorTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const ClientMetricReportDirection_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportDirection.js")),ClientMetricReportMediaType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportMediaType.js")),ReconnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/ReconnectionHealthPolicy.js")),SendingAudioFailureConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/SendingAudioFailureConnectionHealthPolicy.js")),UnusableAudioWarningConnectionHealthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/UnusableAudioWarningConnectionHealthPolicy.js")),VideoEncodingConnectionHealthPolicyName_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/connectionhealthpolicy/VideoEncodingConnectionHealthPolicyName.js")),MeetingSessionStatus_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatus.js")),MeetingSessionStatusCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatusCode.js")),VideoCodecCapability_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/VideoCodecCapability.js")),SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),SignalingProtocol_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),AudioLogEvent_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/statscollector/AudioLogEvent.js")),Types_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Types.js"),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class MonitorTask extends BaseTask_1.default{constructor(context,connectionHealthPolicyConfiguration,initialConnectionHealthData){super(context.logger),this.context=context,this.initialConnectionHealthData=initialConnectionHealthData,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.videoEncodingHealthPolicies=[],this.checkAndSendWeakSignalEvent=signalStrength=>{const isCurrentSignalBad=signalStrength<1,isPrevSignalBad=this.prevSignalStrength<1,signalStrengthEventType=isCurrentSignalBad?isPrevSignalBad?null:AudioLogEvent_1.default.RedmicStartLoss:isPrevSignalBad?AudioLogEvent_1.default.RedmicEndLoss:null;signalStrengthEventType&&this.context.statsCollector.logAudioEvent(signalStrengthEventType),this.prevSignalStrength=signalStrength},this.realtimeFatalErrorCallback=error=>{this.logger.error(`realtime error: ${error}: ${error.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new MeetingSessionStatus_1.default(MeetingSessionStatusCode_1.default.RealtimeApiFailed),error)},this.realtimeAttendeeIdPresenceHandler=(presentAttendeeId,present)=>{var _a;const attendeeId=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${attendeeId}`),attendeeId===presentAttendeeId&&present&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,null===(_a=this.context.eventController)||void 0===_a||_a.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs,startTimeMs,iceGatheringDurationMs,attendeePresenceDurationMs,meetingStartDurationMs}=this.context;return{meetingDurationMs:null===startTimeMs?0:Math.round(Date.now()-startTimeMs),signalingOpenDurationMs,iceGatheringDurationMs,attendeePresenceDurationMs,meetingStartDurationMs}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const baseAttributes=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},baseAttributes),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new ReconnectionHealthPolicy_1.default(context.logger,Object.assign({},connectionHealthPolicyConfiguration),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new UnusableAudioWarningConnectionHealthPolicy_1.default(Object.assign({},connectionHealthPolicyConfiguration),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new SendingAudioFailureConnectionHealthPolicy_1.default(context.logger,Object.assign({},connectionHealthPolicyConfiguration),this.initialConnectionHealthData.clone());for(const policy of connectionHealthPolicyConfiguration.videoEncodingHealthPolicies)this.videoEncodingHealthPolicies.push(new policy(Object.assign({},connectionHealthPolicyConfiguration),this.initialConnectionHealthData.clone()))}removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return __awaiter(this,void 0,void 0,(function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)}))}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(_tileState){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(clientMetricReport){if(this.isResubscribeCheckPaused)return this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),void(this.pendingMetricsReport=clientMetricReport);this.pendingMetricsReport=void 0;const metricReport=clientMetricReport.getObservableMetrics(),availableSendBandwidth=metricReport.availableOutgoingBitrate,nackCountPerSecond=metricReport.nackCountReceivedPerSecond;let needResubscribe=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(clientMetricReport);const resubscribeForDownlink=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(needResubscribe=needResubscribe||resubscribeForDownlink,resubscribeForDownlink){const videoSubscriptionIdSet=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=videoSubscriptionIdSet.truncate(this.context.videoSubscriptionLimit),videoSubscriptionIdSet.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${resubscribeForDownlink}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:availableSendBandwidth/1e3,nackCountPerSecond});const resubscribeForUplink=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();needResubscribe=needResubscribe||resubscribeForUplink,resubscribeForUplink&&(this.logger.info(`trigger resubscribe for up=${resubscribeForUplink}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters())}return needResubscribe}metricsDidReceive(clientMetricReport){if(this.checkResubscribe(clientMetricReport)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const streamMetricReport=clientMetricReport.streamMetricReports,downlinkVideoStream=new Map;for(const ssrc in streamMetricReport)streamMetricReport[ssrc].mediaType===ClientMetricReportMediaType_1.default.VIDEO&&streamMetricReport[ssrc].direction===ClientMetricReportDirection_1.default.DOWNSTREAM&&downlinkVideoStream.set(streamMetricReport[ssrc].streamId,streamMetricReport[ssrc])}connectionHealthDidChange(connectionHealthData){0===connectionHealthData.consecutiveMissedPongs&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,connectionHealthData,(()=>{this.context.audioVideoController.handleMeetingSessionStatus(new MeetingSessionStatus_1.default(MeetingSessionStatusCode_1.default.ConnectionHealthReconnect),null)})),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,connectionHealthData,(()=>{var _a;this.context.poorConnectionCount+=1;const attributes=this.generateAudioVideoEventAttributesForReceivingAudioDropped();null===(_a=this.context.eventController)||void 0===_a||_a.publishEvent("receivingAudioDropped",attributes),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver((observer=>{Types_1.Maybe.of(observer.connectionDidSuggestStopVideo).map((f=>f.bind(observer)()))})):this.context.audioVideoController.forEachObserver((observer=>{Types_1.Maybe.of(observer.connectionDidBecomePoor).map((f=>f.bind(observer)()))}))}),(()=>{this.context.audioVideoController.forEachObserver((observer=>{Types_1.Maybe.of(observer.connectionDidBecomeGood).map((f=>f.bind(observer)()))}))}));for(const policy of this.videoEncodingHealthPolicies)this.applyHealthPolicy(policy,connectionHealthData,(()=>{switch(this.degradeVideoCodec(policy.name),policy.name){case VideoEncodingConnectionHealthPolicyName_1.default.VideoEncodingCpuHealth:this.context.statsCollector.videoCodecDegradationHighEncodeCpuDidReceive();break;case VideoEncodingConnectionHealthPolicyName_1.default.VideoEncodingFramerateHealth:this.context.statsCollector.videoCodecDegradationEncodeFailureDidReceive()}}));this.context.isSessionConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,connectionHealthData,(()=>{var _a;const attributes=this.generateBaseAudioVideoEventAttributes();null===(_a=this.context.eventController)||void 0===_a||_a.publishEvent("sendingAudioFailed",attributes)}),(()=>{var _a;const attributes=this.generateBaseAudioVideoEventAttributes();null===(_a=this.context.eventController)||void 0===_a||_a.publishEvent("sendingAudioRecovered",attributes)}))}applyHealthPolicy(healthPolicy,connectionHealthData,unhealthyCallback,healthyCallback){healthPolicy.update(connectionHealthData);const healthValue=healthPolicy.healthIfChanged();null!==healthValue&&(this.logger.info(`${healthPolicy.name} value is now ${healthValue}`),healthValue<=healthPolicy.minimumHealth()?Types_1.Maybe.of(unhealthyCallback).map((f=>f.bind(this)())):Types_1.Maybe.of(healthyCallback).map((f=>f.bind(this)())))}handleBitrateFrame(bitrates){this.currentAvailableStreamAvgBitrates=bitrates,bitrates.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${bitrates.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",1e3*bitrates.serverAvailableOutgoingBitrate))}handleSignalingClientEvent(event){var _a;if(event.type===SignalingClientEventType_1.default.WebSocketClosed&&this.isUnexpectedWebsocketCloseCode(event.closeCode)||event.type===SignalingClientEventType_1.default.WebSocketError||event.type===SignalingClientEventType_1.default.WebSocketFailed){if(event.type===SignalingClientEventType_1.default.WebSocketClosed&&this.context.logger.info(`The signaling connection was closed with code ${event.closeCode} and reason: ${event.closeReason}`),!this.hasSignalingError){const attributes=this.generateAudioVideoEventAttributesForReceivingAudioDropped();null===(_a=this.context.eventController)||void 0===_a||_a.publishEvent("signalingDropped",attributes),this.hasSignalingError=!0}this.context.isSessionConnected&&this.context.audioVideoController.handleMeetingSessionStatus(new MeetingSessionStatus_1.default(this.isInternalServerFailureCloseCode(event.closeCode)?MeetingSessionStatusCode_1.default.SignalingInternalServerError:MeetingSessionStatusCode_1.default.SignalingChannelClosedUnexpectedly),null)}else event.type===SignalingClientEventType_1.default.WebSocketOpen&&(this.hasSignalingError=!1);if(event.type===SignalingClientEventType_1.default.ReceivedSignalFrame){if(event.message.type===SignalingProtocol_1.SdkSignalFrame.Type.NOTIFICATION){switch(event.message.notification.level){case SignalingProtocol_1.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${event.message.notification.message}`);break;case SignalingProtocol_1.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${event.message.notification.message}`);break;case SignalingProtocol_1.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${event.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${event.message.notification.level}: ${event.message.notification.message}`)}return}if(event.message.bitrates){const bitrateFrame=event.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(bitrateFrame),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(event.message.bitrates)}const status=MeetingSessionStatus_1.default.fromSignalFrame(event.message);event.message.type!==SignalingProtocol_1.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&status.statusCode()!==MeetingSessionStatusCode_1.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(status,null)}}isUnexpectedWebsocketCloseCode(closeCode){return 1006===closeCode||this.isInternalServerFailureCloseCode(closeCode)}isInternalServerFailureCloseCode(closeCode){return closeCode>=4500&&closeCode<4600}degradeVideoCodec(cause){if(void 0!==this.context.meetingSupportedVideoSendCodecPreferences&&this.context.meetingSupportedVideoSendCodecPreferences.length>1&&!this.context.meetingSupportedVideoSendCodecPreferences[0].equals(VideoCodecCapability_1.default.h264ConstrainedBaselineProfile())&&!this.context.meetingSupportedVideoSendCodecPreferences[0].equals(VideoCodecCapability_1.default.vp8())){const newMeetingSupportedVideoSendCodecPreferences=[];for(const capability of this.context.videoSendCodecPreferences)capability.equals(this.context.meetingSupportedVideoSendCodecPreferences[0])||newMeetingSupportedVideoSendCodecPreferences.push(capability);newMeetingSupportedVideoSendCodecPreferences.length>0?(this.context.logger.info(`Downgrading codec from ${this.context.meetingSupportedVideoSendCodecPreferences[0].codecName} to ${newMeetingSupportedVideoSendCodecPreferences[0].codecName} due to ${cause}`),this.context.degradedVideoSendCodecs.push(this.context.meetingSupportedVideoSendCodecPreferences[0]),this.context.meetingSupportedVideoSendCodecPreferences=newMeetingSupportedVideoSendCodecPreferences,this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),this.context.audioVideoController.update({needsRenegotiation:!0})):this.context.logger.warn(`Degrading video codec failed since there is no alternative codec to select. Currently degraded codecs: ${this.context.degradedVideoSendCodecs.map((capability=>capability.codecName)).join(",")}`)}}}exports.default=MonitorTask},"./node_modules/amazon-chime-sdk-js/build/task/NoOpTask.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class NoOpTask{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(_parentTask){}}},"./node_modules/amazon-chime-sdk-js/build/task/OnceTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const LogLevel_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/LogLevel.js")),AsyncScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js"));exports.default=class OnceTask{constructor(logger,task,dependencies){this.logger=logger,this.task=task,this.dependencies=dependencies,this.canceled=!1}name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const dep of this.dependencies)dep.cancel();this.logger.info(`Canceling ${this.name()}`),AsyncScheduler_1.default.nextTick((()=>this.task.cancel())),this.canceled=!0,this.cancelPromise&&AsyncScheduler_1.default.nextTick((()=>this.cancelPromise(new Error(`canceling ${this.name()}`))))}}logDependencies(){if(this.logger.getLogLevel()>LogLevel_1.default.INFO)return;if(!this.dependencies)return;const names=this.dependencies.filter((d=>d)).map((d=>d.name())).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${names}`)}run(){if(this.promise)return this.promise;const dependencies=this.dependencies?Promise.all(this.dependencies.map((d=>null==d?void 0:d.run()))):Promise.resolve();return this.logDependencies(),this.ongoing=dependencies.then((()=>this.task.run())),this.promise=new Promise(((resolve,reject)=>{this.cancelPromise=reject,this.ongoing.then(resolve).catch(reject)}))}setParent(parentTask){this.task.setParent(parentTask)}}},"./node_modules/amazon-chime-sdk-js/build/task/OpenSignalingConnectionTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SignalingClientConnectionRequest_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientConnectionRequest.js")),SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class OpenSignalingConnectionTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return __awaiter(this,void 0,void 0,(function*(){const configuration=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new SignalingClientConnectionRequest_1.default(configuration.urls.signalingURL,configuration.credentials.joinToken));const startTimeMs=Date.now();try{yield new Promise(((resolve,reject)=>{const interceptor=new class WebSocketOpenInterceptor{constructor(signalingClient){this.signalingClient=signalingClient}cancel(){this.signalingClient.removeObserver(this),reject(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(event){switch(event.type){case SignalingClientEventType_1.default.WebSocketOpen:this.signalingClient.removeObserver(this),resolve();break;case SignalingClientEventType_1.default.WebSocketFailed:this.signalingClient.removeObserver(this),reject(new Error("WebSocket connection failed"))}}}(this.context.signalingClient);this.context.signalingClient.registerObserver(interceptor),this.taskCanceler=interceptor}))}catch(error){throw error}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-startTimeMs),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}}))}}exports.default=OpenSignalingConnectionTask},"./node_modules/amazon-chime-sdk-js/build/task/ParallelGroupTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class ParallelGroupTask extends BaseTask_1.default{constructor(logger,taskName,tasksToRunParallel){super(logger),this.taskName=taskName,this.tasksToRunParallel=tasksToRunParallel;for(const task of tasksToRunParallel)task.setParent(this)}cancel(){for(const task of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${task.name()}`),task.cancel()}run(){return __awaiter(this,void 0,void 0,(function*(){const taskResults=[];for(const task of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${task.name()}`),taskResults.push(task.run());const failures=[];for(let i=0;i<taskResults.length;i++){try{yield taskResults[i]}catch(err){failures.push(`task ${this.tasksToRunParallel[i].name()} failed: ${err.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[i].name()}`)}if(failures.length>0){const failureMessage=failures.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${failureMessage}`)}this.logger.info(`parallel group task ${this.name()} completed`)}))}}exports.default=ParallelGroupTask},"./node_modules/amazon-chime-sdk-js/build/task/PromoteToPrimaryMeetingTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const __1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/index.js"),SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class PromoteToPrimaryMeetingTask extends BaseTask_1.default{constructor(context,credentials,completionCallback){super(context.logger),this.context=context,this.credentials=credentials,this.completionCallback=completionCallback,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return __awaiter(this,void 0,void 0,(function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new __1.MeetingSessionStatus(__1.MeetingSessionStatusCode.SignalingRequestFailed))}))}receivePrimaryMeetingJoinAck(){return new Promise(((resolve,_)=>{const interceptor=new class Interceptor{constructor(signalingClient,completionCallback,logger){this.signalingClient=signalingClient,this.completionCallback=completionCallback,this.logger=logger}cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new __1.MeetingSessionStatus(__1.MeetingSessionStatusCode.SignalingRequestFailed)),resolve()}handleSignalingClientEvent(event){event.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new __1.MeetingSessionStatus(__1.MeetingSessionStatusCode.SignalingRequestFailed)),resolve()),event.type===SignalingClientEventType_1.default.ReceivedSignalFrame&&event.message.type===SignalingProtocol_js_1.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(__1.MeetingSessionStatus.fromSignalFrame(event.message)),resolve())}}(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=interceptor,this.context.signalingClient.registerObserver(interceptor)}))}}exports.default=PromoteToPrimaryMeetingTask},"./node_modules/amazon-chime-sdk-js/build/task/ReceiveAudioInputTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class ReceiveAudioInputTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="ReceiveAudioInputTask"}run(){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){if(!(null===(_b=null===(_a=this.context.meetingSessionConfiguration)||void 0===_a?void 0:_a.urls)||void 0===_b?void 0:_b.audioHostURL))return void this.context.logger.info("No audio connection: not acquiring audio input");if(this.context.activeAudioInput)return void this.context.logger.info("an active audio input exists");let audioInput;try{audioInput=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch(error){this.context.logger.warn("could not acquire audio input from current device")}audioInput?this.context.activeAudioInput=audioInput:this.context.logger.warn("an audio input is not available")}))}}exports.default=ReceiveAudioInputTask},"./node_modules/amazon-chime-sdk-js/build/task/ReceiveRemoteVideoPauseResumeTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class ReceiveRemoteVideoPauseResume extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return __awaiter(this,void 0,void 0,(function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)}))}updateSubscribedGroupdIds(groupIds){const existingVideoTileIds=new Set;for(const groupId of groupIds){const attendeeId=this.context.videoStreamIndex.attendeeIdForGroupId(groupId);if(0===attendeeId.length){this.logger.warn(`Could not find attendee ID for newly subscribed group ID ${groupId}`);continue}let videoTile=this.context.videoTileController.getVideoTileForAttendeeId(attendeeId);void 0===videoTile&&(this.logger.info(`No existing video tile for attendee ID ${attendeeId} with new group ID ${groupId}. Creating new one.`),videoTile=this.context.videoTileController.addVideoTile(),videoTile.bindVideoStream(attendeeId,!1,null,0,0,0,null)),existingVideoTileIds.add(videoTile.id())}this.serverPausedVideoTileIds.forEach((id=>{existingVideoTileIds.has(id)||this.serverPausedVideoTileIds.delete(id)}))}handleSignalingClientEvent(event){if(event.type!==SignalingClientEventType_1.default.ReceivedSignalFrame||event.message.type!==SignalingProtocol_js_1.SdkSignalFrame.Type.PAUSE&&event.message.type!==SignalingProtocol_js_1.SdkSignalFrame.Type.RESUME)return;const pauseResumeFrame=event.message.pause,messageType=event.message.type;if(this.logger.info(`Received new ${messageType===SignalingProtocol_js_1.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(pauseResumeFrame)}`),!pauseResumeFrame||void 0===this.context.videoTileController.getVideoTileForAttendeeId||void 0===this.context.videoDownlinkBandwidthPolicy.forEachObserver||void 0===this.context.videoStreamIndex.attendeeIdForGroupId)return;const tiles=pauseResumeFrame.groupIds.map((groupId=>{const attendeeId=this.context.videoStreamIndex.attendeeIdForGroupId(groupId);if(0!==attendeeId.length)return this.context.videoTileController.getVideoTileForAttendeeId(attendeeId);this.logger.warn(`Could not find attendee ID for paused group ID ${groupId}`)}));for(const tile of tiles)void 0!==tile&&(messageType===SignalingProtocol_js_1.SdkSignalFrame.Type.PAUSE?tile.state().paused||(this.serverPausedVideoTileIds.add(tile.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver((observer=>{observer.tileWillBePausedByDownlinkPolicy(tile.id())})),tile.pause()):tile.state().paused&&this.serverPausedVideoTileIds.has(tile.id())&&(this.serverPausedVideoTileIds.delete(tile.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver((observer=>{observer.tileWillBeUnpausedByDownlinkPolicy(tile.id())})),tile.unpause()))}}exports.default=ReceiveRemoteVideoPauseResume},"./node_modules/amazon-chime-sdk-js/build/task/ReceiveVideoInputTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultModality_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/modality/DefaultModality.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class ReceiveVideoInputTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="ReceiveVideoInputTask"}checkAndApplyVideoConstraint(isContentAttendee,mediaStreamTrack,width,height,frameRate){return __awaiter(this,void 0,void 0,(function*(){const videoQualitySettings=isContentAttendee?this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution;if(!isContentAttendee&&width<=videoQualitySettings.videoWidth&&height<=videoQualitySettings.videoHeight&&frameRate<=videoQualitySettings.videoFrameRate)return;const constraint={resizeMode:{ideal:"none"},width:{max:videoQualitySettings.videoWidth},height:{max:videoQualitySettings.videoHeight},frameRate:{ideal:frameRate,max:videoQualitySettings.videoFrameRate}};try{yield mediaStreamTrack.applyConstraints(constraint)}catch(error){this.context.logger.info(`Could not apply constraint for video track (content = ${isContentAttendee})`)}}))}run(){return __awaiter(this,void 0,void 0,(function*(){const receiveEnabled=this.context.videoDuplexMode===SignalingProtocol_js_1.SdkStreamServiceType.RX||this.context.videoDuplexMode===SignalingProtocol_js_1.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=receiveEnabled?SignalingProtocol_js_1.SdkStreamServiceType.DUPLEX:SignalingProtocol_js_1.SdkStreamServiceType.TX:this.context.videoDuplexMode=receiveEnabled?SignalingProtocol_js_1.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile())return this.context.logger.info("has not started local video tile"),void(this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([])));const localTile=this.context.videoTileController.getLocalVideoTile();let videoInput;try{videoInput=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch(error){this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const encodingParams=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(encodingParams.values()))}if(this.context.activeVideoInput=videoInput,videoInput){const videoTracks=videoInput.getVideoTracks();if(!videoTracks||0===videoTracks.length)return;const attendeeId=this.context.meetingSessionConfiguration.credentials.attendeeId,isContentAttendee=new DefaultModality_1.default(attendeeId).hasModality(DefaultModality_1.default.MODALITY_CONTENT),trackSettings=videoTracks[0].getSettings();this.checkAndApplyVideoConstraint(isContentAttendee,videoTracks[0],trackSettings.width,trackSettings.height,trackSettings.frameRate);const externalUserId=this.context.audioVideoController.configuration.credentials.externalUserId;localTile.bindVideoStream(attendeeId,!0,videoInput,trackSettings.width,trackSettings.height,null,externalUserId);for(const track of videoTracks)this.logger.info(`Using video device label=${track.label} id=${track.id}`),this.context.videoDeviceInformation.current_camera_name=track.label,this.context.videoDeviceInformation.current_camera_id=track.id}}))}}exports.default=ReceiveVideoInputTask},"./node_modules/amazon-chime-sdk-js/build/task/ReceiveVideoStreamIndexTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const MeetingSessionVideoAvailability_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionVideoAvailability.js")),DefaultModality_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/modality/DefaultModality.js")),VideoCodecCapability_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/VideoCodecCapability.js")),SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),Types_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Types.js"),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class ReceiveVideoStreamIndexTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return __awaiter(this,void 0,void 0,(function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)}))}handleSignalingClientEvent(event){if(event.type!==SignalingClientEventType_1.default.ReceivedSignalFrame||event.message.type!==SignalingProtocol_js_1.SdkSignalFrame.Type.INDEX)return;const indexFrame=event.message.index;this.context.logger.info(`received new index ${JSON.stringify(indexFrame)}`),this.handleIndexFrame(indexFrame)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(indexFrame){if(!indexFrame)return;if(this.isIngestionPaused)return this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),void(this.pendingIndex=indexFrame);this.pendingIndex=null;const selfAttendeeId=this.context.audioVideoController.configuration.credentials.attendeeId;indexFrame.sources=indexFrame.sources.filter((source=>{const modality=new DefaultModality_1.default(source.attendeeId);return!(modality.base()===selfAttendeeId&&modality.hasModality(DefaultModality_1.default.MODALITY_CONTENT))}));const{videoStreamIndex,videoDownlinkBandwidthPolicy,videoUplinkBandwidthPolicy}=this.context,oldVideoSources=videoStreamIndex.allVideoSendingSourcesExcludingSelf(selfAttendeeId);videoStreamIndex.integrateIndexFrame(indexFrame),videoDownlinkBandwidthPolicy.updateIndex(videoStreamIndex),videoUplinkBandwidthPolicy.updateIndex(videoStreamIndex),this.resubscribe(videoDownlinkBandwidthPolicy,videoUplinkBandwidthPolicy),this.updateVideoAvailability(indexFrame),this.handleIndexVideosPausedAtSource(),indexFrame.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(indexFrame);const newVideoSources=videoStreamIndex.allVideoSendingSourcesExcludingSelf(selfAttendeeId);this.areVideoSourcesEqual(oldVideoSources,newVideoSources)||this.context.audioVideoController.forEachObserver((observer=>{Types_1.Maybe.of(observer.remoteVideoSourcesDidChange).map((f=>f.bind(observer)(newVideoSources)))}))}areVideoSourcesEqual(oldVideoSources,newVideoSources){if(oldVideoSources.length!==newVideoSources.length)return!1;const compare=(videoSourceA,videoSourceB)=>videoSourceA.attendee.attendeeId.localeCompare(videoSourceB.attendee.attendeeId),sortedOldVideoSources=[...oldVideoSources].sort(compare),sortedNewVideoSources=[...newVideoSources].sort(compare);for(let i=0;i<sortedOldVideoSources.length;i++)if(sortedOldVideoSources[i].attendee.attendeeId!==sortedNewVideoSources[i].attendee.attendeeId)return!1;return!0}resubscribe(videoDownlinkBandwidthPolicy,videoUplinkBandwidthPolicy){const resubscribeForDownlink=videoDownlinkBandwidthPolicy.wantsResubscribe(),resubscribeForUplink=(this.context.videoDuplexMode===SignalingProtocol_js_1.SdkStreamServiceType.TX||this.context.videoDuplexMode===SignalingProtocol_js_1.SdkStreamServiceType.DUPLEX)&&videoUplinkBandwidthPolicy.wantsResubscribe(),shouldResubscribe=resubscribeForDownlink||resubscribeForUplink;if(this.logger.info(`should resubscribe: ${shouldResubscribe} (downlink: ${resubscribeForDownlink} uplink: ${resubscribeForUplink})`),!shouldResubscribe)return;const videoSubscriptionIdSet=videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=videoSubscriptionIdSet.truncate(this.context.videoSubscriptionLimit),videoSubscriptionIdSet.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${resubscribeForUplink} down=${resubscribeForDownlink}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(indexFrame){if(!this.context.videosToReceive)return void this.logger.error("videosToReceive must be set in the meeting context.");const videoAvailability=new MeetingSessionVideoAvailability_1.default;videoAvailability.remoteVideoAvailable=!this.context.videosToReceive.empty(),videoAvailability.canStartLocalVideo=!indexFrame.atCapacity,this.context.lastKnownVideoAvailability&&this.context.lastKnownVideoAvailability.equal(videoAvailability)||(this.context.lastKnownVideoAvailability=videoAvailability.clone(),this.context.audioVideoController.forEachObserver((observer=>{Types_1.Maybe.of(observer.videoAvailabilityDidChange).map((f=>f.bind(observer)(videoAvailability.clone())))})))}handleSupportedVideoReceiveCodecIntersection(index){if(void 0===this.context.videoSendCodecPreferences)return;const newMeetingSupportedVideoSendCodecPreferences=[];let willNeedUpdate=!1;for(const capability of this.context.videoSendCodecPreferences)if(this.context.degradedVideoSendCodecs.some((degradedCapability=>capability.equals(degradedCapability))))this.logger.info(`Skipping ${capability.codecName} since the codec has been identfied as degraded`);else for(const signaledCapability of index.supportedReceiveCodecIntersection)if(capability.equals(VideoCodecCapability_1.default.fromSignaled(signaledCapability))){newMeetingSupportedVideoSendCodecPreferences.push(capability);break}if(newMeetingSupportedVideoSendCodecPreferences.length>0){const firstMatchingCodecPreference=newMeetingSupportedVideoSendCodecPreferences.find((capability=>this.context.prioritizedSendVideoCodecCapabilities.some((prioritizedCapability=>capability.equals(prioritizedCapability)))));void 0===this.context.currentVideoSendCodec||void 0!==firstMatchingCodecPreference&&this.context.currentVideoSendCodec.equals(firstMatchingCodecPreference)||(willNeedUpdate=!0),this.context.meetingSupportedVideoSendCodecPreferences=newMeetingSupportedVideoSendCodecPreferences}else this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0;this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),willNeedUpdate&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const streamsPausedAtSource=this.context.videoStreamIndex.streamsPausedAtSource();for(const tile of this.context.videoTileController.getAllVideoTiles()){const tileState=tile.state();streamsPausedAtSource.contain(tileState.streamId)?tile.markPoorConnection()&&this.logger.info(`marks the tile ${tileState.tileId} as having a poor connection`):tile.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${tileState.tileId} as having a poor connection`)}}}exports.default=ReceiveVideoStreamIndexTask},"./node_modules/amazon-chime-sdk-js/build/task/RunnableTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class RunnableTask extends BaseTask_1.default{constructor(logger,fn,taskName="RunnableTask"){super(logger),this.fn=fn,this.taskName=taskName}run(){return this.fn().then((()=>{}))}}exports.default=RunnableTask},"./node_modules/amazon-chime-sdk-js/build/task/SendAndReceiveDataMessagesTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DataMessage_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/datamessage/DataMessage.js")),SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class SendAndReceiveDataMessagesTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(topic,data,lifetimeMs)=>{if(this.context.signalingClient.ready()){let uint8Data;uint8Data=data instanceof Uint8Array?data:"string"==typeof data?(new TextEncoder).encode(data):(new TextEncoder).encode(JSON.stringify(data)),this.validateDataMessage(topic,uint8Data,lifetimeMs);const message=SignalingProtocol_js_1.SdkDataMessagePayload.create();message.topic=topic,message.lifetimeMs=lifetimeMs,message.data=uint8Data;const messageFrame=SignalingProtocol_js_1.SdkDataMessageFrame.create();messageFrame.messages=[message],this.context.signalingClient.sendDataMessage(messageFrame)}else this.context.logger.error("Cannot send data message because signaling client is not ready")}}run(){return __awaiter(this,void 0,void 0,(function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)}))}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(event){if(event.type===SignalingClientEventType_1.default.ReceivedSignalFrame&&event.message.type===SignalingProtocol_js_1.SdkSignalFrame.Type.DATA_MESSAGE)for(const message of event.message.dataMessage.messages){const dataMessage=new DataMessage_1.default(message.ingestTimeNs/1e6,message.topic,message.data,message.senderAttendeeId,message.senderExternalUserId,0===message.ingestTimeNs);this.context.realtimeController.realtimeReceiveDataMessage(dataMessage)}}validateDataMessage(topic,data,lifetimeMs){if(!SendAndReceiveDataMessagesTask.TOPIC_REGEX.test(topic))throw new Error("Invalid topic");if(data.length>SendAndReceiveDataMessagesTask.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(lifetimeMs&&lifetimeMs<0)throw new Error("The life time of the message has to be non negative")}}exports.default=SendAndReceiveDataMessagesTask,SendAndReceiveDataMessagesTask.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),SendAndReceiveDataMessagesTask.DATA_SIZE=2048},"./node_modules/amazon-chime-sdk-js/build/task/SerialGroupTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js")),TaskStatus_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/TaskStatus.js"));class SerialGroupTask extends BaseTask_1.default{constructor(logger,taskName,tasksToRunSerially){super(logger),this.taskName=taskName,this.tasksToRunSerially=tasksToRunSerially,this.currentTask=null;for(const task of tasksToRunSerially)task.setParent(this)}cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return __awaiter(this,void 0,void 0,(function*(){for(const task of this.tasksToRunSerially){this.getStatus()===TaskStatus_1.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${task.name()}`),this.currentTask=task,yield task.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${task.name()}`)}catch(err){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${err.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)}))}}exports.default=SerialGroupTask},"./node_modules/amazon-chime-sdk-js/build/task/SetLocalDescriptionTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),SDP_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/SDP.js")),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class SetLocalDescriptionTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="SetLocalDescriptionTask"}cancel(){if(this.cancelPromise){const error=new Error(`canceling ${this.name()}`);this.cancelPromise(error),delete this.cancelPromise}}run(){return __awaiter(this,void 0,void 0,(function*(){const peer=this.context.peer;let sdp=this.context.sdpOfferInit.sdp;if(this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(sdp=new SDP_1.default(sdp).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&void 0!==this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(sdp=new SDP_1.default(sdp).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),(new DefaultBrowserBehavior_1.default).requiresDisablingH264Encoding()&&(sdp=new SDP_1.default(sdp).removeH264SupportFromSendSection().sdp),sdp=new SDP_1.default(sdp).withStartingVideoSendBitrate(1e3).sdp,void 0!==this.context.videoSendCodecPreferences&&this.context.videoSendCodecPreferences.length>0&&(sdp=new SDP_1.default(sdp).withVideoSendCodecPreferences(void 0!==this.context.meetingSupportedVideoSendCodecPreferences?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(sdp=new SDP_1.default(sdp).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(sdp=new SDP_1.default(sdp).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const audioPayloadMap=new SDP_1.default(sdp).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(audioPayloadMap)}this.logger.debug((()=>`local description is >>>${sdp}<<<`));const sdpOffer={type:"offer",sdp,toJSON:null};yield new Promise(((resolve,reject)=>__awaiter(this,void 0,void 0,(function*(){this.cancelPromise=error=>{reject(error)};try{yield peer.setLocalDescription(sdpOffer),resolve()}catch(error){reject(error)}finally{delete this.cancelPromise}})))),this.context.logger.info("set local description")}))}}exports.default=SetLocalDescriptionTask},"./node_modules/amazon-chime-sdk-js/build/task/SetRemoteDescriptionTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultModality_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/modality/DefaultModality.js")),SDP_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/SDP.js")),VideoCodecCapability_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/VideoCodecCapability.js")),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class SetRemoteDescriptionTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="SetRemoteDescriptionTask"}cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var _a;return __awaiter(this,void 0,void 0,(function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let sdp=this.context.sdpAnswer;sdp=new SDP_1.default(sdp).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(sdp=new SDP_1.default(sdp).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(sdp=new SDP_1.default(sdp).withStereoAudio().sdp)),void 0!==this.context.videoSendCodecPreferences&&this.context.videoSendCodecPreferences.length>0&&(sdp=new SDP_1.default(sdp).withVideoSendCodecPreferences(void 0!==this.context.meetingSupportedVideoSendCodecPreferences?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.prioritizedSendVideoCodecCapabilities=new SDP_1.default(sdp).prioritizedSendVideoCodecCapabilities(),this.context.currentVideoSendCodec=this.context.prioritizedSendVideoCodecCapabilities.length>0?this.context.prioritizedSendVideoCodecCapabilities[0]:void 0;const mediaStream=this.context.activeVideoInput;if(void 0!==mediaStream){const attendeeId=this.context.audioVideoController.configuration.credentials.attendeeId,isContent=new DefaultModality_1.default(attendeeId).hasModality(DefaultModality_1.default.MODALITY_CONTENT),videoTrack=mediaStream.getVideoTracks()[0];isContent&&((null===(_a=this.context.currentVideoSendCodec)||void 0===_a?void 0:_a.codecName)===VideoCodecCapability_1.default.av1Main().codecName?(videoTrack.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${attendeeId}`)):this.context.audioVideoController.configuration.enableSVC&&(videoTrack.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${attendeeId}`)))}this.logger.info(`processed remote description is >>>${sdp}<<<`);const remoteDescription={type:"answer",sdp,toJSON:null};try{yield this.createICEConnectionCompletedPromise(remoteDescription)}catch(err){throw err}}))}createICEConnectionCompletedPromise(remoteDescription){return new Promise(((resolve,reject)=>__awaiter(this,void 0,void 0,(function*(){const checkConnectionCompleted=()=>{"connected"!==this.context.peer.iceConnectionState&&"completed"!==this.context.peer.iceConnectionState||(this.context.peer.removeEventListener("iceconnectionstatechange",checkConnectionCompleted),resolve())};this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",checkConnectionCompleted),reject(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",checkConnectionCompleted);try{yield this.context.peer.setRemoteDescription(remoteDescription),this.logger.info("set remote description, waiting for ICE connection"),checkConnectionCompleted()}catch(err){reject(err)}}))))}}exports.default=SetRemoteDescriptionTask},"./node_modules/amazon-chime-sdk-js/build/task/SubscribeAndReceiveSubscribeAckTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const MeetingSessionStatus_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatus.js")),MeetingSessionStatusCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatusCode.js")),SDP_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/SDP.js")),ZLIBTextCompressor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/sdp/ZLIBTextCompressor.js")),ServerSideNetworkAdaption_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/ServerSideNetworkAdaption.js"),SignalingClientEventType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientEventType.js")),SignalingClientSubscribe_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientSubscribe.js")),SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),VideoPreferences_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPreferences.js"),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class SubscribeAndReceiveSubscribeAckTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new ZLIBTextCompressor_1.default(context.logger)}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return __awaiter(this,void 0,void 0,(function*(){let localSdp="";if(this.context.peer&&this.context.peer.localDescription&&(localSdp=new SDP_1.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let frameRate=0,maxEncodeBitrateKbps=0;this.context.videoCaptureAndEncodeParameter&&(frameRate=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),maxEncodeBitrateKbps=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const param={rid:"hi",maxBitrate:1e3*maxEncodeBitrateKbps,maxFramerate:frameRate,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([param])}const videoSubscriptions=this.fixUpSubscriptionOrder(localSdp,this.context.videoSubscriptions),isSendingStreams=this.context.videoDuplexMode===SignalingProtocol_js_1.SdkStreamServiceType.TX||this.context.videoDuplexMode===SignalingProtocol_js_1.SdkStreamServiceType.DUPLEX;let compressedSDPOffer,localSdpOffer=localSdp;if(void 0!==this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()||(localSdpOffer=new SDP_1.default(localSdpOffer).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const prevOffer=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";compressedSDPOffer=this.textCompressor.compress(localSdpOffer,prevOffer),this.context.logger.info(`Compressed the SDP message from ${localSdpOffer.length} to ${compressedSDPOffer.length} bytes.`),localSdp=""}this.context.previousSdpOffer=new SDP_1.default(localSdp);const subscribe=new SignalingClientSubscribe_1.default(this.context.meetingSessionConfiguration.credentials.attendeeId,localSdp,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,videoSubscriptions,isSendingStreams,this.context.videoStreamIndex.localStreamDescriptions(),!0,compressedSDPOffer);void 0===this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption||ServerSideNetworkAdaption_1.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())||void 0===this.context.videoDownlinkBandwidthPolicy.getVideoPreferences||(subscribe.videoSubscriptionConfiguration=VideoPreferences_1.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,videoSubscriptions.map((streamId=>0===streamId?0:this.context.videoStreamIndex.groupIdForStreamId(streamId))),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(subscribe)}`),this.context.signalingClient.subscribe(subscribe);const subscribeAckFrame=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(subscribeAckFrame)}`);let decompressedText="";subscribeAckFrame.compressedSdpAnswer&&subscribeAckFrame.compressedSdpAnswer.length?(decompressedText=this.textCompressor.decompress(subscribeAckFrame.compressedSdpAnswer,this.context.previousSdpAnswerAsString),0===decompressedText.length&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${subscribeAckFrame.compressedSdpAnswer.length} to ${decompressedText.length} bytes.`),this.context.sdpAnswer=decompressedText):this.context.sdpAnswer=subscribeAckFrame.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(subscribeAckFrame)}))}fixUpSubscriptionOrder(sdp,videoSubscriptions){if(void 0===this.context.transceiverController.getMidForStreamId)return videoSubscriptions;const midsToStreamIds=new Map;for(const streamId of videoSubscriptions){const mid=this.context.transceiverController.getMidForStreamId(streamId);void 0!==mid?midsToStreamIds.set(mid,streamId):0!==streamId&&this.logger.warn(`Could not find MID for stream ID: ${streamId}`)}const sections=new SDP_1.default(sdp).mediaSections(),newSubscriptions=[];for(const section of sections)if("video"===section.mediaType)if("recvonly"===section.direction){const streamId=midsToStreamIds.get(section.mid);if(void 0===streamId){this.logger.warn(`Could not find stream ID for MID: ${section.mid}`);continue}newSubscriptions.push(streamId)}else newSubscriptions.push(0);return this.logger.info(`Fixed up ${JSON.stringify(videoSubscriptions)} to ${JSON.stringify(newSubscriptions)} (may be same))}`),newSubscriptions}receiveSubscribeAck(){return new Promise(((resolve,reject)=>{const context=this.context;const interceptor=new class Interceptor{constructor(signalingClient){this.signalingClient=signalingClient}cancel(){this.signalingClient.removeObserver(this),reject(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(event){if(event.isConnectionTerminated()){const message=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${event.closeCode} and reason: ${event.closeReason}`;context.logger.warn(message);let statusCode=MeetingSessionStatusCode_1.default.TaskFailed;return event.closeCode>=4500&&event.closeCode<4600&&(statusCode=MeetingSessionStatusCode_1.default.SignalingInternalServerError),void context.audioVideoController.handleMeetingSessionStatus(new MeetingSessionStatus_1.default(statusCode),new Error(message))}if(event.type!==SignalingClientEventType_1.default.ReceivedSignalFrame||event.message.type!==SignalingProtocol_js_1.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const subackFrame=event.message.suback;resolve(subackFrame)}}(this.context.signalingClient);this.context.signalingClient.registerObserver(interceptor),this.taskCanceler=interceptor}))}}exports.default=SubscribeAndReceiveSubscribeAckTask},"./node_modules/amazon-chime-sdk-js/build/task/TaskStatus.js":(__unused_webpack_module,exports)=>{"use strict";var TaskStatus;Object.defineProperty(exports,"__esModule",{value:!0}),function(TaskStatus){TaskStatus.IDLE="IDLE",TaskStatus.RUNNING="RUNNING",TaskStatus.CANCELED="CANCELED",TaskStatus.FINISHED="FINISHED"}(TaskStatus||(TaskStatus={})),exports.default=TaskStatus},"./node_modules/amazon-chime-sdk-js/build/task/TimeoutTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const TimeoutScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/TimeoutScheduler.js")),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class TimeoutTask extends BaseTask_1.default{constructor(logger,taskToRunBeforeTimeout,timeoutMs){super(logger),this.taskToRunBeforeTimeout=taskToRunBeforeTimeout,this.timeoutMs=timeoutMs,this.taskName=`Timeout${this.timeoutMs}ms`,taskToRunBeforeTimeout.setParent(this)}cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return __awaiter(this,void 0,void 0,(function*(){const timer=new TimeoutScheduler_1.default(this.timeoutMs);timer.start((()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()}));try{yield this.taskToRunBeforeTimeout.run()}finally{timer.stop()}this.logger.info(`timeout task ${this.name()} completed`)}))}}exports.default=TimeoutTask},"./node_modules/amazon-chime-sdk-js/build/task/WaitForAttendeePresenceTask.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const MeetingSessionStatusCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/meetingsession/MeetingSessionStatusCode.js")),BaseTask_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/task/BaseTask.js"));class WaitForAttendeePresenceTask extends BaseTask_1.default{constructor(context){super(context.logger),this.context=context,this.taskName="WaitForAttendeePresenceTask"}cancel(){if(this.cancelPromise){const error=new Error(`canceling ${this.name()} due to the meeting status code: ${MeetingSessionStatusCode_1.default.NoAttendeePresent}`);this.cancelPromise(error),delete this.cancelPromise}}run(){return __awaiter(this,void 0,void 0,(function*(){const attendeeId=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise(((resolve,reject)=>{const handler=(presentAttendeeId,present,_externalUserId,_dropped,_pos)=>{attendeeId===presentAttendeeId&&present&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(handler),resolve(),delete this.cancelPromise)};this.cancelPromise=error=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(handler),reject(error)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(handler)}))}))}}exports.default=WaitForAttendeePresenceTask},"./node_modules/amazon-chime-sdk-js/build/transceivercontroller/DefaultTransceiverController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const AudioProfile_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/audioprofile/AudioProfile.js")),RedundantAudioRecoveryMetricReport_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/RedundantAudioRecoveryMetricReport.js")),RedundantAudioEncoder_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/redundantaudioencoder/RedundantAudioEncoder.js")),RedundantAudioEncoderWorkerCode_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/redundantaudioencoderworkercode/RedundantAudioEncoderWorkerCode.js")),AsyncScheduler_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/scheduler/AsyncScheduler.js"));exports.default=class DefaultTransceiverController{constructor(logger,browserBehavior,meetingSessionContext){this.logger=logger,this.browserBehavior=browserBehavior,this.meetingSessionContext=meetingSessionContext,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5e3,this.audioRedPacketLossLongEvalPeriodMs=15e3,this.audioRedHoldDownTimeMs=3e5,this.redRecoveryTimeMs=6e4}setEncodingParameters(encodingParamMap){return __awaiter(this,void 0,void 0,(function*(){if(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)return;const sender=this._localCameraTransceiver.sender;if(!encodingParamMap||0===encodingParamMap.size)return;const newEncodingParams=Array.from(encodingParamMap.values()),oldParam=sender.getParameters();if(oldParam.encodings&&0!==oldParam.encodings.length)for(const existing of oldParam.encodings)for(const changed of newEncodingParams){if((existing.rid||changed.rid)&&existing.rid!==changed.rid)continue;let key;for(key in changed)"rid"!==key&&"codecPayloadType"!==key&&changed.hasOwnProperty(key)&&(existing[key]=changed[key])}else oldParam.encodings=newEncodingParams;yield sender.setParameters(oldParam)}))}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(bitrateKbps){return __awaiter(this,void 0,void 0,(function*(){if(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)return;const sender=this._localCameraTransceiver.sender;if(!sender||bitrateKbps<=0)return;const param=sender.getParameters();param.encodings||(param.encodings=[{}]);for(const encodeParam of param.encodings)encodeParam.maxBitrate=1e3*bitrateKbps;yield sender.setParameters(param)}))}setPeer(peer){this.peer=peer}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&void 0!==this.peer.getTransceivers}hasVideoInput(){return!(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)}trackIsVideoInput(track){return!!this._localCameraTransceiver&&(track===this._localCameraTransceiver.sender.track||track===this._localCameraTransceiver.receiver.track)}setupLocalTransceivers(){var _a,_b;this.useTransceivers()&&(this.defaultMediaStream||"undefined"==typeof MediaStream||(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),(null===(_b=null===(_a=this.meetingSessionContext)||void 0===_a?void 0:_a.audioProfile)||void 0===_b?void 0:_b.hasRedundancyEnabled())&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(track){return __awaiter(this,void 0,void 0,(function*(){return this._localAudioTransceiver&&"sendrecv"===this._localAudioTransceiver.direction?(yield this._localAudioTransceiver.sender.replaceTrack(track),!0):(this.logger.info("audio transceiver direction is not set up or not activated"),!1)}))}setAudioInput(track){return __awaiter(this,void 0,void 0,(function*(){yield this.setTransceiverInput(this._localAudioTransceiver,track)}))}setVideoInput(track){return __awaiter(this,void 0,void 0,(function*(){yield this.setTransceiverInput(this._localCameraTransceiver,track)}))}updateVideoTransceivers(videoStreamIndex,videosToReceive){if(!this.useTransceivers())return videosToReceive.array();const transceivers=this.peer.getTransceivers();return this.videoSubscriptions=[0],videosToReceive=videosToReceive.clone(),this.updateTransceivers(transceivers,videoStreamIndex,videosToReceive),this.logger.debug((()=>this.debugDumpTransceivers())),this.videoSubscriptions}updateTransceivers(transceivers,videoStreamIndex,videosToReceive){const videosRemaining=videosToReceive.array();0===transceivers.length||transceivers[0].stop?0!==transceivers.length&&this.updateTransceiverWithStop(transceivers,videoStreamIndex,videosRemaining):(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(transceivers,videoStreamIndex,videosRemaining));for(const index of videosRemaining){const transceiver=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(index,transceiver),this.groupIdToTransceiver.set(videoStreamIndex.groupIdForStreamId(index),transceiver),this.videoSubscriptions.push(index),this.logger.info(`adding transceiver mid: ${transceiver.mid} subscription: ${index} direction: recvonly`)}}updateTransceiverWithStop(transceivers,videoStreamIndex,videosRemaining){let n=1;this.videoSubscriptions=[0];for(const transceiver of transceivers){if(transceiver===this._localCameraTransceiver||!this.transceiverIsVideo(transceiver)||!transceiver.mid)continue;let reusingTranceiver=!1;const streamId=videoStreamIndex.streamIdForTrack("v_"+transceiver.mid);if("inactive"!==transceiver.direction&&void 0!==streamId)for(const[index,recvStreamId]of videosRemaining.entries())if(videoStreamIndex.StreamIdsInSameGroup(streamId,recvStreamId)){transceiver.direction="recvonly",this.videoSubscriptions[n]=recvStreamId,reusingTranceiver=!0,this.streamIdToTransceiver.delete(streamId),this.streamIdToTransceiver.set(recvStreamId,transceiver),videosRemaining.splice(index,1);break}if(!reusingTranceiver){this.videoSubscriptions[n]=0,this.logger.info(`Stopping MID: ${transceiver.mid}, direction: ${transceiver.direction}, current direction: ${transceiver.currentDirection}`),transceiver.stop();for(const[streamId,previousTransceiver]of this.streamIdToTransceiver.entries())transceiver.mid===previousTransceiver.mid&&(this.streamIdToTransceiver.delete(streamId),this.groupIdToTransceiver.delete(videoStreamIndex.groupIdForStreamId(streamId)))}n+=1}}updateTransceiverWithoutStop(transceivers,videoStreamIndex,videosRemaining){let n=1;for(const transceiver of transceivers)if(transceiver!==this._localCameraTransceiver&&this.transceiverIsVideo(transceiver)){if(this.videoSubscriptions[n]=0,"inactive"!==transceiver.direction){const streamId=videoStreamIndex.streamIdForTrack("v_"+transceiver.mid);if(void 0!==streamId)for(const[index,recvStreamId]of videosRemaining.entries())if(videoStreamIndex.StreamIdsInSameGroup(streamId,recvStreamId)){transceiver.direction="recvonly",this.videoSubscriptions[n]=recvStreamId,this.streamIdToTransceiver.delete(streamId),this.streamIdToTransceiver.set(recvStreamId,transceiver),videosRemaining.splice(index,1);break}}n+=1}n=1;for(const transceiver of transceivers)if(transceiver!==this._localCameraTransceiver&&this.transceiverIsVideo(transceiver)){if("inactive"===transceiver.direction&&videosRemaining.length>0){transceiver.direction="recvonly";const streamId=videosRemaining.shift();this.videoSubscriptions[n]=streamId,this.streamIdToTransceiver.set(streamId,transceiver),this.groupIdToTransceiver.set(videoStreamIndex.groupIdForStreamId(streamId),transceiver)}else if(0===this.videoSubscriptions[n]){transceiver.direction="inactive";for(const[streamId,previousTransceiver]of this.streamIdToTransceiver.entries())transceiver===previousTransceiver&&(this.streamIdToTransceiver.delete(streamId),this.groupIdToTransceiver.delete(videoStreamIndex.groupIdForStreamId(streamId)))}n+=1}}getMidForStreamId(streamId){var _a;return null===(_a=this.streamIdToTransceiver.get(streamId))||void 0===_a?void 0:_a.mid}setStreamIdForMid(mid,newStreamId){for(const[streamId,transceiver]of this.streamIdToTransceiver.entries())if(transceiver.mid===mid)return this.streamIdToTransceiver.delete(streamId),void this.streamIdToTransceiver.set(newStreamId,transceiver)}getMidForGroupId(groupId){var _a,_b;return null!==(_b=null===(_a=this.groupIdToTransceiver.get(groupId))||void 0===_a?void 0:_a.mid)&&void 0!==_b?_b:void 0}transceiverIsVideo(transceiver){return transceiver.receiver&&transceiver.receiver.track&&"video"===transceiver.receiver.track.kind||transceiver.sender&&transceiver.sender.track&&"video"===transceiver.sender.track.kind}debugDumpTransceivers(){let msg="",n=0;for(const transceiver of this.peer.getTransceivers())this.transceiverIsVideo(transceiver)&&(msg+=`transceiver index=${n} mid=${transceiver.mid} subscription=${this.videoSubscriptions[n]} direction=${transceiver.direction}\n`,n+=1);return msg}setTransceiverInput(transceiver,track){return __awaiter(this,void 0,void 0,(function*(){transceiver&&(transceiver.direction=track?"sendrecv":"inactive",yield transceiver.sender.replaceTrack(track))}))}forEachRedMetricsObserver(redMetricReport){for(const observer of this.redMetricsObservers)AsyncScheduler_1.default.nextTick((()=>{this.redMetricsObservers.has(observer)&&observer.recoveryMetricsDidReceive(redMetricReport)}))}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new AudioProfile_1.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var _a,_b;const supportsRTCScriptTransform=!!window.RTCRtpScriptTransform,supportsInsertableStreams=!!RTCRtpSender.prototype.createEncodedStreams;if(supportsRTCScriptTransform)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else{if(!supportsInsertableStreams)throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream")}try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([RedundantAudioEncoderWorkerCode_1.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(error){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${error}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),error}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=event=>{if("REDWorkerLog"===event.data.type)this.logger.info(event.data.log);else if("RedundantAudioEncoderStats"===event.data.type){const redMetricReport=new RedundantAudioRecoveryMetricReport_1.default;redMetricReport.currentTimestampMs=Date.now(),redMetricReport.ssrc=event.data.ssrc,redMetricReport.totalAudioPacketsLost=event.data.totalAudioPacketsLost,redMetricReport.totalAudioPacketsExpected=event.data.totalAudioPacketsExpected,redMetricReport.totalAudioPacketsRecoveredRed=event.data.totalAudioPacketsRecoveredRed,redMetricReport.totalAudioPacketsRecoveredFec=event.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(redMetricReport)}},supportsRTCScriptTransform)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(supportsInsertableStreams){const sendStreams=this._localAudioTransceiver.sender.createEncodedStreams(),receiveStreams=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:sendStreams,receive:receiveStreams},[sendStreams.readable,sendStreams.writable,receiveStreams.readable,receiveStreams.writable])}null===(_a=this.meetingSessionContext)||void 0===_a||_a.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver(null===(_b=this.meetingSessionContext)||void 0===_b?void 0:_b.statsCollector)}addTransceiver(trackOrKind,init){var _a;const transceiver=this.peer.addTransceiver(trackOrKind,init);if(!(null===(_a=this.peer.getConfiguration())||void 0===_a?void 0:_a.encodedInsertableStreams)||!this.audioRedWorker)return transceiver;const supportsRTCScriptTransform=!!window.RTCRtpScriptTransform,supportsInsertableStreams=!!RTCRtpSender.prototype.createEncodedStreams;if(supportsRTCScriptTransform)transceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),transceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(supportsInsertableStreams){const sendStreams=transceiver.sender.createEncodedStreams(),receiveStreams=transceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"PassthroughTransform",send:sendStreams,receive:receiveStreams},[sendStreams.readable,sendStreams.writable,receiveStreams.readable,receiveStreams.writable])}return transceiver}destroyAudioRedWorkerAndStates(){var _a,_b;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker.terminate(),this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,null===(_a=this.meetingSessionContext)||void 0===_a||_a.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver(null===(_b=this.meetingSessionContext)||void 0===_b?void 0:_b.statsCollector))}setAudioPayloadTypes(payloadTypeMap){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:payloadTypeMap.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:payloadTypeMap.get("opus")}))}metricsDidReceive(clientMetricReport){const{currentTimestampMs}=clientMetricReport,rtcStatsReport=clientMetricReport.getRTCStatsReport();let receiverReportReceptionTimestampMs=0,currentTotalPacketsSent=0,currentTotalPacketsLost=0;rtcStatsReport.forEach((report=>{"audio"===report.kind&&("outbound-rtp"===report.type?currentTotalPacketsSent=report.packetsSent:"remote-inbound-rtp"===report.type&&(receiverReportReceptionTimestampMs=report.timestamp,currentTotalPacketsLost=report.packetsLost))})),(0===this.audioMetricsHistory.length||receiverReportReceptionTimestampMs>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&currentTotalPacketsSent>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:receiverReportReceptionTimestampMs,totalPacketsSent:currentTotalPacketsSent,totalPacketsLost:currentTotalPacketsLost}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const lossPercent5sTimewindow=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),lossPercent15sTimewindow=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),maxLossPercent=Math.max(lossPercent5sTimewindow,lossPercent15sTimewindow),[newNumRedundantEncodings,shouldTurnOffRed]=RedundantAudioEncoder_1.default.getNumRedundantEncodingsForPacketLoss(maxLossPercent);if(shouldTurnOffRed)return this.lastHighPacketLossEventTimestampMs=currentTimestampMs,void(this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=currentTimestampMs));if(!this.audioRedEnabled){const timeSinceRedOff=currentTimestampMs-this.lastAudioRedTurnOffTimestampMs,timeSinceLastHighPacketLossEvent=currentTimestampMs-this.lastHighPacketLossEventTimestampMs;if(timeSinceRedOff>=this.audioRedPacketLossLongEvalPeriodMs&&timeSinceLastHighPacketLossEvent<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(currentTimestampMs)}this.shouldUpdateAudioRedWorkerEncodings(currentTimestampMs,newNumRedundantEncodings)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:newNumRedundantEncodings})}maybeResetHoldDownTimer(currentTimestampMs){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=currentTimestampMs)}lossPercent(timeWindowMs){if(this.audioMetricsHistory.length<2)return 0;const latestReceiverReportTimestampMs=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,currentTotalPacketsSent=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,currentTotalPacketsLost=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let i=this.audioMetricsHistory.length-2;i>=0;i--)if(latestReceiverReportTimestampMs-this.audioMetricsHistory[i].timestampMs>=timeWindowMs){const lossPercent=(currentTotalPacketsLost-this.audioMetricsHistory[i].totalPacketsLost)/(currentTotalPacketsSent-this.audioMetricsHistory[i].totalPacketsSent)*100;return Math.max(0,Math.min(lossPercent,100))}return 0}shouldUpdateAudioRedWorkerEncodings(currentTimestampMs,newNumRedundantEncodings){return this.currentNumRedundantEncodings===newNumRedundantEncodings?(this.maybeResetHoldDownTimer(currentTimestampMs),!1):!(newNumRedundantEncodings<this.currentNumRedundantEncodings&&currentTimestampMs-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs)&&(this.currentNumRedundantEncodings=newNumRedundantEncodings,this.maybeResetHoldDownTimer(currentTimestampMs),!0)}addRedundantAudioRecoveryMetricsObserver(observer){this.redMetricsObservers.add(observer)}removeRedundantAudioRecoveryMetricsObserver(observer){this.redMetricsObservers.delete(observer)}}},"./node_modules/amazon-chime-sdk-js/build/transceivercontroller/SimulcastContentShareTransceiverController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SimulcastTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/SimulcastTransceiverController.js"));class SimulcastContentShareTransceiverController extends SimulcastTransceiverController_1.default{constructor(logger,browserBehavior,meetingSessionContext){super(logger,browserBehavior,meetingSessionContext);let scale=2;this.videoQualityControlParameterMap=new Map;for(let i=0;i<SimulcastContentShareTransceiverController.NAME_ARR_ASCENDING.length;i++){const ridName=SimulcastContentShareTransceiverController.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(ridName,{rid:ridName,scaleResolutionDownBy:scale,maxBitrate:1e3*SimulcastContentShareTransceiverController.BITRATE_ARR_ASCENDING[i]}),scale/=2}}setEncodingParameters(encodingParamMap){return __awaiter(this,void 0,void 0,(function*(){if(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)return;const sender=this._localCameraTransceiver.sender,newEncodingParams=Array.from(encodingParamMap.values());if(newEncodingParams.length<=0)return;const oldParam=sender.getParameters();if(oldParam.encodings)for(let i=0;i<oldParam.encodings.length;i++)oldParam.encodings[i].rid===SimulcastTransceiverController_1.default.LOW_LEVEL_NAME&&this.copyEncodingParams(encodingParamMap.get(SimulcastTransceiverController_1.default.LOW_LEVEL_NAME),oldParam.encodings[i]),oldParam.encodings[i].rid===SimulcastTransceiverController_1.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(encodingParamMap.get(SimulcastTransceiverController_1.default.HIGH_LEVEL_NAME),oldParam.encodings[i]);else oldParam.encodings=newEncodingParams;yield sender.setParameters(oldParam),this.logVideoTransceiverParameters()}))}}exports.default=SimulcastContentShareTransceiverController,SimulcastContentShareTransceiverController.NAME_ARR_ASCENDING=["low","hi"],SimulcastContentShareTransceiverController.BITRATE_ARR_ASCENDING=[300,1200]},"./node_modules/amazon-chime-sdk-js/build/transceivercontroller/SimulcastTransceiverController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/DefaultTransceiverController.js"));class SimulcastTransceiverController extends DefaultTransceiverController_1.default{constructor(logger,browserBehavior,meetingSessionContext){super(logger,browserBehavior,meetingSessionContext),this.videoQualityControlParameterMap=new Map;let scale=4;for(let i=0;i<SimulcastTransceiverController.NAME_ARR_ASCENDING.length;i++){const ridName=SimulcastTransceiverController.NAME_ARR_ASCENDING[i];this.videoQualityControlParameterMap.set(ridName,{rid:ridName,scaleResolutionDownBy:scale,maxBitrate:1e3*SimulcastTransceiverController.BITRATE_ARR_ASCENDING[i]}),scale/=2}}setEncodingParameters(encodingParamMap){return __awaiter(this,void 0,void 0,(function*(){if(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)return;const sender=this._localCameraTransceiver.sender,newEncodingParams=Array.from(encodingParamMap.values());if(newEncodingParams.length<=0)return;const oldParam=sender.getParameters();if(oldParam.encodings)for(const encoding of oldParam.encodings)encoding.rid===SimulcastTransceiverController.LOW_LEVEL_NAME&&this.copyEncodingParams(encodingParamMap.get(SimulcastTransceiverController.LOW_LEVEL_NAME),encoding),encoding.rid===SimulcastTransceiverController.MID_LEVEL_NAME&&this.copyEncodingParams(encodingParamMap.get(SimulcastTransceiverController.MID_LEVEL_NAME),encoding),encoding.rid===SimulcastTransceiverController.HIGH_LEVEL_NAME&&this.copyEncodingParams(encodingParamMap.get(SimulcastTransceiverController.HIGH_LEVEL_NAME),encoding);else oldParam.encodings=newEncodingParams;yield sender.setParameters(oldParam),this.logVideoTransceiverParameters()}))}setVideoSendingBitrateKbps(_bitrateKbps){return __awaiter(this,void 0,void 0,(function*(){}))}setupLocalTransceivers(){var _a,_b;if(this.useTransceivers()&&(this.defaultMediaStream||"undefined"==typeof MediaStream||(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),(null===(_b=null===(_a=this.meetingSessionContext)||void 0===_a?void 0:_a.audioProfile)||void 0===_b?void 0:_b.hasRedundancyEnabled())&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const encodingParams=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:encodingParams})}}logVideoTransceiverParameters(){const encodings=this._localCameraTransceiver.sender.getParameters().encodings;let msg="simulcast: current encoding parameters \n";for(const encodingParam of encodings)msg+=`rid=${encodingParam.rid} maxBitrate=${encodingParam.maxBitrate} active=${encodingParam.active} scaleDownBy=${encodingParam.scaleResolutionDownBy} maxFrameRate = ${encodingParam.maxFramerate} \n`;this.logger.info(msg)}copyEncodingParams(fromEncodingParams,toEncodingParams){toEncodingParams.active=fromEncodingParams.active,toEncodingParams.maxBitrate=fromEncodingParams.maxBitrate,toEncodingParams.scaleResolutionDownBy=fromEncodingParams.scaleResolutionDownBy,toEncodingParams.maxFramerate=fromEncodingParams.maxFramerate}}exports.default=SimulcastTransceiverController,SimulcastTransceiverController.LOW_LEVEL_NAME="low",SimulcastTransceiverController.MID_LEVEL_NAME="mid",SimulcastTransceiverController.HIGH_LEVEL_NAME="hi",SimulcastTransceiverController.NAME_ARR_ASCENDING=["low","mid","hi"],SimulcastTransceiverController.BITRATE_ARR_ASCENDING=[200,400,1100]},"./node_modules/amazon-chime-sdk-js/build/transceivercontroller/VideoOnlyTransceiverController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/DefaultTransceiverController.js"));class VideoOnlyTransceiverController extends DefaultTransceiverController_1.default{constructor(logger,browserBehavior,meetingSessionContext){super(logger,browserBehavior,meetingSessionContext)}setupLocalTransceivers(){this.useTransceivers()&&(this.defaultMediaStream||"undefined"==typeof MediaStream||(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}}exports.default=VideoOnlyTransceiverController},"./node_modules/amazon-chime-sdk-js/build/transcript/DefaultTranscriptionController.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const TranscriptEvent_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptEvent.js");exports.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";exports.default=class DefaultTranscriptionController{constructor(realtimeController){this.realtimeController=realtimeController,this.transcriptEventCallbacks=new Set}subscribeToTranscriptEvent(callback){0===this.transcriptEventCallbacks.size&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(exports.TRANSCRIPTION_DATA_MESSAGE_TOPIC,(dataMessage=>{for(const transcriptEvent of TranscriptEvent_1.TranscriptEventConverter.from(dataMessage))for(const transcriptEventCallback of this.transcriptEventCallbacks)transcriptEventCallback(transcriptEvent)})),this.transcriptEventCallbacks.add(callback)}unsubscribeFromTranscriptEvent(callback){this.transcriptEventCallbacks.delete(callback),0===this.transcriptEventCallbacks.size&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(exports.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}}},"./node_modules/amazon-chime-sdk-js/build/transcript/Transcript.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class Transcript{}},"./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptAlternative.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class TranscriptAlternative{}},"./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptEntity.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class TranscriptEntity{}},"./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptEvent.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TranscriptEventConverter=void 0;const SignalingProtocol_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),Transcript_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/Transcript.js")),TranscriptionStatus_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptionStatus.js")),TranscriptionStatusType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptionStatusType.js")),TranscriptItemType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptItemType.js")),TranscriptionStatusTypes={[SignalingProtocol_1.SdkTranscriptionStatus.Type.STARTED]:TranscriptionStatusType_1.default.STARTED,[SignalingProtocol_1.SdkTranscriptionStatus.Type.INTERRUPTED]:TranscriptionStatusType_1.default.INTERRUPTED,[SignalingProtocol_1.SdkTranscriptionStatus.Type.RESUMED]:TranscriptionStatusType_1.default.RESUMED,[SignalingProtocol_1.SdkTranscriptionStatus.Type.STOPPED]:TranscriptionStatusType_1.default.STOPPED,[SignalingProtocol_1.SdkTranscriptionStatus.Type.FAILED]:TranscriptionStatusType_1.default.FAILED};exports.TranscriptEventConverter=class TranscriptEventConverter{static from(dataMessage){let frame;try{frame=SignalingProtocol_1.SdkTranscriptFrame.decode(dataMessage.data)}catch(e){throw new Error("Cannot decode transcript data message: "+e)}const transcriptEvents=[];for(const sdkTranscriptEvent of frame.events)if(sdkTranscriptEvent.status){const transcriptionStatusType=TranscriptionStatusTypes[sdkTranscriptEvent.status.type];if(!transcriptionStatusType)continue;const transcriptionStatus=new TranscriptionStatus_1.default;transcriptionStatus.type=transcriptionStatusType,transcriptionStatus.eventTimeMs=sdkTranscriptEvent.status.eventTime,transcriptionStatus.transcriptionRegion=sdkTranscriptEvent.status.transcriptionRegion,transcriptionStatus.transcriptionConfiguration=sdkTranscriptEvent.status.transcriptionConfiguration,sdkTranscriptEvent.status.message&&(transcriptionStatus.message=sdkTranscriptEvent.status.message),transcriptEvents.push(transcriptionStatus)}else if(sdkTranscriptEvent.transcript){const transcript=new Transcript_1.default;transcript.results=[];for(const result of sdkTranscriptEvent.transcript.results){const transcriptResult={channelId:result.channelId,isPartial:result.isPartial,resultId:result.resultId,startTimeMs:result.startTime,endTimeMs:result.endTime,alternatives:[]};if(result.languageCode&&(transcriptResult.languageCode=result.languageCode),result.languageIdentification&&result.languageIdentification.length>0){transcriptResult.languageIdentification=[];for(const languageIdentification of result.languageIdentification){const transcriptLanguageWithScore={languageCode:languageIdentification.languageCode,score:languageIdentification.score};transcriptResult.languageIdentification.push(transcriptLanguageWithScore)}}for(const alternative of result.alternatives){const transcriptAlternative={items:[],transcript:alternative.transcript};for(const item of alternative.items){const transcriptItem={content:item.content,attendee:{attendeeId:item.speakerAttendeeId,externalUserId:item.speakerExternalUserId},startTimeMs:item.startTime,endTimeMs:item.endTime,type:null};switch(item.vocabularyFilterMatch&&(transcriptItem.vocabularyFilterMatch=item.vocabularyFilterMatch),item.hasOwnProperty("stable")&&(transcriptItem.stable=item.stable),item.hasOwnProperty("confidence")&&(transcriptItem.confidence=item.confidence),item.type){case SignalingProtocol_1.SdkTranscriptItem.Type.PRONUNCIATION:transcriptItem.type=TranscriptItemType_1.default.PRONUNCIATION;break;case SignalingProtocol_1.SdkTranscriptItem.Type.PUNCTUATION:transcriptItem.type=TranscriptItemType_1.default.PUNCTUATION}transcriptAlternative.items.push(transcriptItem)}for(const entity of alternative.entities){transcriptAlternative.entities||(transcriptAlternative.entities=[]);const transcriptEntity={category:entity.category,confidence:entity.confidence,content:entity.content,startTimeMs:entity.startTime,endTimeMs:entity.endTime};entity.type&&(transcriptEntity.type=entity.type),transcriptAlternative.entities.push(transcriptEntity)}transcriptResult.alternatives.push(transcriptAlternative)}transcript.results.push(transcriptResult)}transcriptEvents.push(transcript)}return transcriptEvents}}},"./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptItem.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class TranscriptItem{}},"./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptItemType.js":(__unused_webpack_module,exports)=>{"use strict";var TranscriptItemType;Object.defineProperty(exports,"__esModule",{value:!0}),function(TranscriptItemType){TranscriptItemType.PRONUNCIATION="pronunciation",TranscriptItemType.PUNCTUATION="punctuation"}(TranscriptItemType||(TranscriptItemType={})),exports.default=TranscriptItemType},"./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptLanguageWithScore.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class TranscriptLanguageWithScore{}},"./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptResult.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class TranscriptResult{}},"./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptionStatus.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class TranscriptionStatus{}},"./node_modules/amazon-chime-sdk-js/build/transcript/TranscriptionStatusType.js":(__unused_webpack_module,exports)=>{"use strict";var TranscriptionStatusType;Object.defineProperty(exports,"__esModule",{value:!0}),function(TranscriptionStatusType){TranscriptionStatusType.STARTED="started",TranscriptionStatusType.INTERRUPTED="interrupted",TranscriptionStatusType.RESUMED="resumed",TranscriptionStatusType.STOPPED="stopped",TranscriptionStatusType.FAILED="failed"}(TranscriptionStatusType||(TranscriptionStatusType={})),exports.default=TranscriptionStatusType},"./node_modules/amazon-chime-sdk-js/build/useragentparser/DefaultUserAgentParser.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const ua_parser_js_1=__webpack_require__("./node_modules/ua-parser-js/src/ua-parser.js"),Versioning_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/versioning/Versioning.js"));class DefaultUserAgentParser{constructor(logger){var _a,_b,_c,_d,_e,_f,_g;try{this.parserResult=navigator&&navigator.userAgent?new ua_parser_js_1.UAParser(navigator.userAgent).getResult():void 0}catch(error){logger.error(error.message)}this.browserMajorVersion=(null===(_c=null===(_b=null===(_a=this.parserResult)||void 0===_a?void 0:_a.browser)||void 0===_b?void 0:_b.version)||void 0===_c?void 0:_c.split(".")[0])||DefaultUserAgentParser.UNAVAILABLE,this.browserName=(null===(_d=this.parserResult)||void 0===_d?void 0:_d.browser.name)||DefaultUserAgentParser.UNAVAILABLE,this.browserVersion=(null===(_e=this.parserResult)||void 0===_e?void 0:_e.browser.version)||DefaultUserAgentParser.UNAVAILABLE,this.deviceName=[(null===(_f=this.parserResult)||void 0===_f?void 0:_f.device.vendor)||"",(null===(_g=this.parserResult)||void 0===_g?void 0:_g.device.model)||""].join(" ").trim()||DefaultUserAgentParser.UNAVAILABLE}getParserResult(){var _a,_b;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:(null===(_a=this.parserResult)||void 0===_a?void 0:_a.os.name)||DefaultUserAgentParser.UNAVAILABLE,osVersion:(null===(_b=this.parserResult)||void 0===_b?void 0:_b.os.version)||DefaultUserAgentParser.UNAVAILABLE,sdkVersion:Versioning_1.default.sdkVersion,sdkName:Versioning_1.default.sdkName}}}exports.default=DefaultUserAgentParser,DefaultUserAgentParser.UNAVAILABLE="Unavailable"},"./node_modules/amazon-chime-sdk-js/build/utils/PromiseQueue.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class PromiseQueue{constructor(){this.queue=Promise.resolve()}add(func){return new Promise(((resolve,reject)=>{this.queue=this.queue.then(func).then(resolve).catch(reject)}))}}},"./node_modules/amazon-chime-sdk-js/build/utils/Types.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.None=exports.Some=exports.Maybe=void 0;class Maybe{static of(value){return null==value?None.of():Some.of(value)}}exports.Maybe=Maybe;class Some{constructor(value){this.value=value,this.isSome=!0,this.isNone=!1}map(f){return Maybe.of(f(this.value))}flatMap(f){return f(this.value)}get(){return this.value}getOrElse(_value){return this.value}defaulting(value){return Maybe.of(this.getOrElse(value))}static of(value){if(null==value)throw new Error("value is ${value}");return new Some(value)}}exports.Some=Some;class None{constructor(){this.isSome=!1,this.isNone=!0}get(){throw new Error("value is null")}getOrElse(value){return value}map(_f){return new None}flatMap(_f){return new None}defaulting(value){return Maybe.of(this.getOrElse(value))}static of(){return new None}}exports.None=None},"./node_modules/amazon-chime-sdk-js/build/utils/Utils.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.iterateEvery=exports.SuppressedError=exports.getRandomValues=exports.getFormattedOffset=exports.getDefaultAssetSpec=exports.toLowerCasePropertyNames=exports.isIFramed=exports.wait=void 0;const Versioning_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/versioning/Versioning.js"));exports.wait=function wait(waitTimeMs){return new Promise((resolve=>setTimeout(resolve,waitTimeMs)))},exports.isIFramed=function isIFramed(){var _a;try{return"IFRAME"===(null===(_a=window.frameElement)||void 0===_a?void 0:_a.nodeName)||parent!==top}catch(e){return!0}},exports.toLowerCasePropertyNames=function toLowerCasePropertyNames(input){return null===input?null:"object"!=typeof input?input:Array.isArray(input)?input.map(toLowerCasePropertyNames):Object.keys(input).reduce(((result,key)=>{const value=input[key],newValue="object"==typeof value?toLowerCasePropertyNames(value):value;return result[key.toLowerCase()]=newValue,result}),{})},exports.getDefaultAssetSpec=function getDefaultAssetSpec(){const version=Versioning_1.default.sdkVersionSemVer;return{assetGroup:`sdk-${version.major}.${version.minor}`}},exports.getFormattedOffset=function getFormattedOffset(utcOffset){const offset=Math.abs(utcOffset);return`${utcOffset<=0?"+":"-"}${Math.floor(offset/60).toString().padStart(2,"0")}:${Math.floor(offset%60).toString().padStart(2,"0")}`},exports.getRandomValues=function getRandomValues(buffer){try{window.crypto.getRandomValues(buffer)}catch(error){new DataView(buffer.buffer).setUint32(0,Math.trunc(Math.random()*Math.pow(2,32)),!0)}};class SuppressedError extends Error{constructor(error,suppressed,message){var _a;super(null!=message?message:`${null!==(_a=null==error?void 0:error.message)&&void 0!==_a?_a:error}`),this.error=error,this.suppressed=suppressed}}exports.SuppressedError=SuppressedError,exports.iterateEvery=function iterateEvery(iterable,callback){if(!iterable)return;let suppressedError;for(const value of iterable)try{callback(value)}catch(err){suppressedError=new SuppressedError(err,suppressedError)}if(suppressedError)throw suppressedError}},"./node_modules/amazon-chime-sdk-js/build/versioning/Versioning.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),version_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/versioning/version.js"));class Versioning{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return version_1.default.semverString}static get sdkVersionSemVer(){var _a,_b,_c,_d;const v=version_1.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:null===(_a=null==v?void 0:v.groups)||void 0===_a?void 0:_a.major,minor:null===(_b=null==v?void 0:v.groups)||void 0===_b?void 0:_b.minor,patch:null===(_c=null==v?void 0:v.groups)||void 0===_c?void 0:_c.patch,preRelease:null===(_d=null==v?void 0:v.groups)||void 0===_d?void 0:_d.preRelease}}static get buildSHA(){return version_1.default.hash.substring(1)}static get sdkUserAgentLowResolution(){const browserBehavior=new DefaultBrowserBehavior_1.default;return`${browserBehavior.name()}-${browserBehavior.majorVersion()}`}static urlWithVersion(url){const urlWithVersion=new URL(url);return urlWithVersion.searchParams.append(Versioning.X_AMZN_VERSION,Versioning.sdkVersion),urlWithVersion.searchParams.append(Versioning.X_AMZN_USER_AGENT,Versioning.sdkUserAgentLowResolution),urlWithVersion.toString()}}exports.default=Versioning,Versioning.X_AMZN_VERSION="X-Amzn-Version",Versioning.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},"./node_modules/amazon-chime-sdk-js/build/versioning/version.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={hash:"7f7da4f",raw:"v3.27.1",semverString:"3.27.1"}},"./node_modules/amazon-chime-sdk-js/build/videocaptureandencodeparameter/DefaultVideoCaptureAndEncodeParameter.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class DefaultVideoCaptureAndEncodeParameter{constructor(cameraWidth,cameraHeight,cameraFrameRate,maxEncodeBitrateKbps,isSimulcast,scaleResolutionDownBy=1,isSVC=!1){this.cameraWidth=cameraWidth,this.cameraHeight=cameraHeight,this.cameraFrameRate=cameraFrameRate,this.maxEncodeBitrateKbps=maxEncodeBitrateKbps,this.isSimulcast=isSimulcast,this.scaleResolutionDownBy=scaleResolutionDownBy,this.isSVC=isSVC}equal(other){let checkForEqual=other.captureWidth()===this.cameraWidth&&other.captureHeight()===this.cameraHeight&&other.captureFrameRate()===this.cameraFrameRate&&other.encodeBitrates().length===this.encodeBitrates().length&&other.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&other.encodeWidths().length===this.encodeWidths().length&&other.encodeHeights().length===this.encodeHeights().length&&other.isSVCEncoding()===this.isSVC;if(checkForEqual)for(let i=0;i<other.encodeWidths().length;i++)if(other.encodeWidths()[i]!==this.encodeWidths()[i]||other.encodeHeights()[i]!==this.encodeHeights()[i]||other.encodeBitrates()[i]!==this.encodeBitrates()[i]||other.encodeScaleResolutionDownBy()[i]!==this.encodeScaleResolutionDownBy()[i])return checkForEqual=!1,checkForEqual;return checkForEqual}clone(){return new DefaultVideoCaptureAndEncodeParameter(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}}exports.default=DefaultVideoCaptureAndEncodeParameter},"./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/AllHighestVideoBandwidthPolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultVideoStreamIdSet_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamidset/DefaultVideoStreamIdSet.js"));class AllHighestVideoBandwidthPolicy{constructor(selfAttendeeId){this.selfAttendeeId=selfAttendeeId,this.reset()}reset(){this.optimalReceiveSet=new DefaultVideoStreamIdSet_1.default,this.subscribedReceiveSet=new DefaultVideoStreamIdSet_1.default,this.videoSources=void 0}updateIndex(videoIndex){this.videoIndex=videoIndex,this.optimalReceiveSet=this.calculateOptimalReceiveSet(videoIndex)}updateMetrics(_clientMetricReport){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(videoSources){this.videoSources=videoSources,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(videoIndex){const streamSelectionSet=new DefaultVideoStreamIdSet_1.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return streamSelectionSet;const receiveSet=videoIndex.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),videoSources=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),remoteInfos=this.videoIndex.remoteStreamDescriptions(),mapOfAttendeeIdToRemoteDescriptions=new Map;for(const info of remoteInfos)receiveSet.contain(info.streamId)&&mapOfAttendeeIdToRemoteDescriptions.set(info.attendeeId,info);let totalBitrateKbps=0;for(const videoSource of videoSources){const attendeeId=videoSource.attendee.attendeeId;if(mapOfAttendeeIdToRemoteDescriptions.has(attendeeId)){const info=mapOfAttendeeIdToRemoteDescriptions.get(attendeeId);if(!(totalBitrateKbps+info.maxBitrateKbps<=AllHighestVideoBandwidthPolicy.maxReceiveBitrateKbps)){console.warn("total bitrate "+(totalBitrateKbps+info.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}streamSelectionSet.add(info.streamId),totalBitrateKbps+=info.maxBitrateKbps}}return streamSelectionSet}}exports.default=AllHighestVideoBandwidthPolicy,AllHighestVideoBandwidthPolicy.maxReceiveBitrateKbps=15e3},"./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/NoVideoDownlinkBandwidthPolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultVideoStreamIdSet_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamidset/DefaultVideoStreamIdSet.js"));exports.default=class NoVideoDownlinkBandwidthPolicy{reset(){}updateIndex(_videoIndex){}updateMetrics(_clientMetricReport){}wantsResubscribe(){return!1}chooseSubscriptions(){return new DefaultVideoStreamIdSet_1.default}}},"./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/TargetDisplaySize.js":(__unused_webpack_module,exports)=>{"use strict";var TargetDisplaySize;Object.defineProperty(exports,"__esModule",{value:!0}),exports.TargetDisplaySize=void 0,function(TargetDisplaySize){TargetDisplaySize[TargetDisplaySize.Low=0]="Low",TargetDisplaySize[TargetDisplaySize.Medium=1]="Medium",TargetDisplaySize[TargetDisplaySize.High=2]="High",TargetDisplaySize[TargetDisplaySize.Maximum=3]="Maximum"}(TargetDisplaySize=exports.TargetDisplaySize||(exports.TargetDisplaySize={})),exports.default=TargetDisplaySize},"./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoAdaptiveProbePolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const ContentShareConstants_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/ContentShareConstants.js")),ServerSideNetworkAdaption_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/ServerSideNetworkAdaption.js")),VideoPreference_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPreference.js")),VideoPreferences_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPreferences.js"),VideoPriorityBasedPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPriorityBasedPolicy.js")),VideoPriorityBasedPolicyConfig_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPriorityBasedPolicyConfig.js"));class VideoAdaptiveProbePolicy extends VideoPriorityBasedPolicy_1.default{constructor(logger){super(logger,VideoAdaptiveProbePolicy.createConfig()),this.logger=logger,super.shouldPauseTiles=!1,this.videoPreferences=void 0}static createConfig(){const config=new VideoPriorityBasedPolicyConfig_1.default;return config.serverSideNetworkAdaption=ServerSideNetworkAdaption_1.default.None,config}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(videoIndex){super.updateIndex(videoIndex);const newPreferences=VideoPreferences_1.VideoPreferences.prepare();let containsContent=!1;const remoteInfos=videoIndex.remoteStreamDescriptions();for(const info of remoteInfos)newPreferences.some((preference=>preference.attendeeId===info.attendeeId))||(info.attendeeId.endsWith(ContentShareConstants_1.default.Modality)?(newPreferences.add(new VideoPreference_1.default(info.attendeeId,1)),containsContent=!0):newPreferences.add(new VideoPreference_1.default(info.attendeeId,2)));containsContent?(this.videoPreferences=newPreferences.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(_preferences){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}}exports.default=VideoAdaptiveProbePolicy},"./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPreference.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const TargetDisplaySize_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/TargetDisplaySize.js")),VideoQualityAdaptationPreference_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoQualityAdaptationPreference.js"));class VideoPreference{constructor(attendeeId,priority,targetSize,degradationPreference){this.attendeeId=attendeeId,this.priority=priority,this.targetSize=void 0!==targetSize?targetSize:TargetDisplaySize_1.default.Maximum,this.degradationPreference=void 0!==degradationPreference?degradationPreference:VideoQualityAdaptationPreference_1.default.Balanced}partialCompare(other){return this.priority-other.priority}equals(other){return this.attendeeId===other.attendeeId&&this.targetSize===other.targetSize&&this.priority===other.priority&&this.degradationPreference===other.degradationPreference}clone(){return new VideoPreference(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(targetSize){switch(targetSize){case TargetDisplaySize_1.default.Maximum:return VideoPreference.MAXIMUM_BITRATE_KBPS;case TargetDisplaySize_1.default.High:return VideoPreference.HIGH_BITRATE_KBPS;case TargetDisplaySize_1.default.Medium:return VideoPreference.MID_BITRATE_KBPS;case TargetDisplaySize_1.default.Low:return VideoPreference.LOW_BITRATE_KBPS}}}exports.default=VideoPreference,VideoPreference.LOW_BITRATE_KBPS=300,VideoPreference.MID_BITRATE_KBPS=600,VideoPreference.HIGH_BITRATE_KBPS=1500,VideoPreference.MAXIMUM_BITRATE_KBPS=1e4},"./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPreferences.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoPreferences=exports.MutableVideoPreferences=exports.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const SignalingClientVideoSubscriptionConfiguration_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/SignalingClientVideoSubscriptionConfiguration.js"));exports.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=function convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(context,receiveGroupIds,preferences){if(void 0===context.transceiverController.getMidForGroupId||void 0===context.videoStreamIndex.attendeeIdForGroupId||void 0===preferences)return[];const configurations=new Array,attendeeIdToMid=new Map,attendeeIdToGroupId=new Map;for(const groupId of receiveGroupIds){const mid=context.transceiverController.getMidForGroupId(groupId);if(void 0===mid)continue;const attendeeId=context.videoStreamIndex.attendeeIdForGroupId(groupId);attendeeIdToMid.set(attendeeId,mid),attendeeIdToGroupId.set(attendeeId,groupId)}for(const preference of preferences){const configuration=new SignalingClientVideoSubscriptionConfiguration_1.default,mid=attendeeIdToMid.get(preference.attendeeId);void 0!==mid&&(configuration.mid=mid,configuration.attendeeId=preference.attendeeId,configuration.groupId=attendeeIdToGroupId.get(preference.attendeeId),configuration.priority=Number.MAX_SAFE_INTEGER-preference.priority,configuration.targetBitrateKbps=preference.targetSizeToBitrateKbps(preference.targetSize),configuration.qualityAdaptationPreference=preference.degradationPreference,configurations.push(configuration))}return configurations};class ObjectSet{constructor(items=[]){this.items=items}static default(){return new ObjectSet([])}[Symbol.iterator](){let i=0;const items=this.items;return{next:()=>i<items.length?{done:!1,value:items[i++]}:{done:!0,value:null}}}first(){return this.items[0]}add(item){this.items.push(item)}replaceFirst(newItem,f){const pos=this.items.findIndex(f);-1===pos?this.items.push(newItem):this.has(newItem)?this.items.splice(pos,1):this.items[pos]=newItem}remove(item){this.items=this.items.filter((a=>!a.equals(item)))}clear(){this.items=[]}isEmpty(){return 0===this.items.length}equals(other){if(other===this)return!0;if(other.items.length!==this.items.length)return!1;for(const item of this.items)if(!other.items.some((a=>a.equals(item))))return!1;return!0}has(item){return this.items.some((a=>a.equals(item)))}some(f){return this.items.some(f)}clone(){return new ObjectSet([...this.items])}sort(){this.items.sort(((a,b)=>a.partialCompare(b)))}modify(){return new SetBuilder(this)}}class SetBuilder{constructor(items=new ObjectSet){this.items=items,this.copied=!1}cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(item){this.items.has(item)||(this.cow(),this.items.add(item))}replaceFirst(newItem,f){this.items.has(newItem)&&!this.items.some(f)||(this.cow(),this.items.replaceFirst(newItem,f))}remove(item){this.items.has(item)&&(this.cow(),this.items.remove(item))}some(f){return this.items.some(f)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}}class MutableVideoPreferences{constructor(builder){this.builder=builder}add(pref){this.builder.add(pref)}replaceFirst(newPref,f){this.builder.replaceFirst(newPref,f)}remove(pref){this.builder.remove(pref)}some(f){return this.builder.some(f)}clear(){this.builder.clear()}build(){return new VideoPreferences(this.builder.build())}}exports.MutableVideoPreferences=MutableVideoPreferences;class VideoPreferences{constructor(items){this.items=items}static prepare(){return new MutableVideoPreferences(new SetBuilder)}static default(){return new VideoPreferences(ObjectSet.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var _a;return null===(_a=this.items.first())||void 0===_a?void 0:_a.priority}sorted(){return this.items[Symbol.iterator]()}equals(other){return other===this||this.items.equals(other.items)}modify(){return new MutableVideoPreferences(this.items.modify())}some(f){return this.items.some(f)}isEmpty(){return this.items.isEmpty()}clone(){const videoPreferences=VideoPreferences.prepare();for(const preference of this.items)videoPreferences.add(preference.clone());return videoPreferences.build()}}exports.VideoPreferences=VideoPreferences,exports.default=VideoPreferences},"./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPriorityBasedPolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const Attendee_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/attendee/Attendee.js")),ClientMetricReportDirection_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportDirection.js")),ClientMetricReportMediaType_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/clientmetricreport/ClientMetricReportMediaType.js")),ContentShareConstants_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/contentsharecontroller/ContentShareConstants.js")),LogLevel_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/LogLevel.js"),ServerSideNetworkAdaption_1=__importStar(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/ServerSideNetworkAdaption.js")),VideoSource_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videosource/VideoSource.js")),DefaultVideoStreamIdSet_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamidset/DefaultVideoStreamIdSet.js")),AllHighestVideoBandwidthPolicy_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/AllHighestVideoBandwidthPolicy.js")),TargetDisplaySize_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/TargetDisplaySize.js")),VideoPreference_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPreference.js")),VideoPreferences_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPreferences.js"),VideoPriorityBasedPolicyConfig_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPriorityBasedPolicyConfig.js")),VideoQualityAdaptationPreference_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoQualityAdaptationPreference.js"));class LinkMediaStats{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}}class VideoPriorityBasedPolicy{constructor(logger,videoPriorityBasedPolicyConfig=VideoPriorityBasedPolicyConfig_1.default.Default){this.logger=logger,this.videoPriorityBasedPolicyConfig=videoPriorityBasedPolicyConfig,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption===ServerSideNetworkAdaption_1.default.Default&&(this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption=ServerSideNetworkAdaption_1.default.BandwidthProbingAndRemoteVideoQualityAdaption),this.reset()}reset(){this.allHighestPolicy=new AllHighestVideoBandwidthPolicy_1.default(""),this.optimalReceiveSet=new DefaultVideoStreamIdSet_1.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new DefaultVideoStreamIdSet_1.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new DefaultVideoStreamIdSet_1.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=VideoPriorityBasedPolicy.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=VideoPriorityBasedPolicy.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new LinkMediaStats,this.prevDownlinkStats=new LinkMediaStats,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(tileController){this.tileController=tileController,this.logger.info("tileController bound")}setWantsResubscribeObserver(observer){this.wantsResubscribeObserver=observer}chooseRemoteVideoSources(preferences){var _a;if(!(null===(_a=this.videoPreferences)||void 0===_a?void 0:_a.equals(preferences)))if(this.videoPreferences=null==preferences?void 0:preferences.clone(),ServerSideNetworkAdaption_1.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)||(this.pendingActionAfterUpdatedPreferences=!0,void 0!==this.wantsResubscribeObserver&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption!==ServerSideNetworkAdaption_1.default.BandwidthProbingAndRemoteVideoQualityAdaption))this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(preferences)}`);else{const desiredVideoSources=new Array;for(const preference of this.videoPreferences){const source=new VideoSource_1.default;source.attendee=new Attendee_1.default,source.attendee.attendeeId=preference.attendeeId,desiredVideoSources.push(source)}this.allHighestPolicy.chooseRemoteVideoSources(desiredVideoSources)}}updateIndex(videoIndex){this.videoIndex=videoIndex,this.serverSideNetworkAdaption===ServerSideNetworkAdaption_1.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(videoIndex),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const attendeeIds=new Set;for(const stream of this.videoIndex.remoteStreamDescriptions())attendeeIds.add(stream.attendeeId);const prefs=VideoPreferences_1.VideoPreferences.prepare(),numAttendees=attendeeIds.size;let targetDisplaySize=TargetDisplaySize_1.default.Maximum;numAttendees>8?targetDisplaySize=TargetDisplaySize_1.default.Low:numAttendees>4&&(targetDisplaySize=TargetDisplaySize_1.default.Medium);for(const attendeeId of attendeeIds)prefs.add(new VideoPreference_1.default(attendeeId,1,targetDisplaySize));this.defaultVideoPreferences=prefs.build()}updateMetrics(clientMetricReport){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new LinkMediaStats;const metricReport=clientMetricReport.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=metricReport.availableIncomingBitrate/1e3;for(const ssrcStr in clientMetricReport.streamMetricReports){const ssrc=Number.parseInt(ssrcStr,10),metrics=clientMetricReport.streamMetricReports[ssrc];metrics.direction===ClientMetricReportDirection_1.default.DOWNSTREAM&&metrics.mediaType===ClientMetricReportMediaType_1.default.VIDEO&&(metrics.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=clientMetricReport.countPerSecond("nackCount",ssrc)),metrics.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=clientMetricReport.countPerSecond("packetsLost",ssrc)),metrics.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=clientMetricReport.bitsPerSecond("bytesReceived",ssrc)/1e3))}}wantsResubscribe(){let wants=!1;return ServerSideNetworkAdaption_1.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)||(wants||(wants=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption!==ServerSideNetworkAdaption_1.default.BandwidthProbingAndRemoteVideoQualityAdaption)?(this.calculateOptimalReceiveSet(),wants||(wants=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),wants):wants||this.allHighestPolicy.wantsResubscribe()}chooseSubscriptions(){return ServerSideNetworkAdaption_1.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)||(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption!==ServerSideNetworkAdaption_1.default.BandwidthProbingAndRemoteVideoQualityAdaption)?(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone()):this.allHighestPolicy.chooseSubscriptions()}addObserver(observer){this.observerQueue.add(observer)}removeObserver(observer){this.observerQueue.delete(observer)}forEachObserver(observerFunc){for(const observer of this.observerQueue)observerFunc(observer)}setVideoPriorityBasedPolicyConfigs(config){this.videoPriorityBasedPolicyConfig=config}calculateOptimalReceiveStreams(){var _a;const chosenStreams=[],remoteInfos=this.videoIndex.remoteStreamDescriptions();if(0===remoteInfos.length||(null===(_a=this.videoPreferences)||void 0===_a?void 0:_a.isEmpty()))return void(this.optimalReceiveStreams=[]);const lastProbeState=this.rateProbeState;this.cleanBwPausedTiles(remoteInfos),this.handleAppPausedStreams(chosenStreams,remoteInfos);const attendeeIdToPreference=new Map;for(const preference of this.getCurrentVideoPreferences())attendeeIdToPreference.set(preference.attendeeId,preference);const remoteInfosWithPreference=remoteInfos.filter((stream=>attendeeIdToPreference.has(stream.attendeeId))),sameStreamChoices=!this.streamsWithPreferenceDidChange(remoteInfosWithPreference),noMajorChange=!this.startupPeriod&&sameStreamChoices;if(noMajorChange&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;remoteInfosWithPreference.sort(((a,b)=>a.maxBitrateKbps===b.maxBitrateKbps?a.streamId-b.streamId:a.maxBitrateKbps-b.maxBitrateKbps));for(const info of remoteInfosWithPreference)(0===info.avgBitrateKbps||info.avgBitrateKbps>info.maxBitrateKbps)&&(info.attendeeId.endsWith(ContentShareConstants_1.default.Modality)&&info.maxBitrateKbps<100?info.maxBitrateKbps=info.avgBitrateKbps:info.avgBitrateKbps=info.maxBitrateKbps);const streamIdsToRemove=new Set;for(const preference of this.getCurrentVideoPreferences()){const streamsForAttendees=remoteInfosWithPreference.filter((description=>description.attendeeId===preference.attendeeId));if(streamsForAttendees.length<3)continue;let lastInfo,maxFrameRate=15,maxPixels=153600;streamsForAttendees.forEach((stream=>{maxFrameRate=Math.max(maxFrameRate,stream.maxFrameRate),maxPixels=Math.max(maxPixels,stream.totalPixels())})),streamsForAttendees.sort(((a,b)=>{if(preference.degradationPreference===VideoQualityAdaptationPreference_1.default.MaintainResolution)return Math.abs(a.maxFrameRate-b.maxFrameRate)<2?a.totalPixels()-b.totalPixels():a.maxFrameRate-b.maxFrameRate;if(preference.degradationPreference===VideoQualityAdaptationPreference_1.default.MaintainFramerate)return a.totalPixels()===b.totalPixels()?a.maxFrameRate-b.maxFrameRate:a.totalPixels()-b.totalPixels();{const framerateExponentConstant=5,resolutionBaseConstant=2,weighByFramerate=stream=>stream.avgBitrateKbps*Math.pow(2,framerateExponentConstant*stream.maxFrameRate/maxFrameRate*Math.pow(2*resolutionBaseConstant,stream.totalPixels()/maxPixels));return weighByFramerate(a)-weighByFramerate(b)}}));for(const info of streamsForAttendees)void 0!==lastInfo&&(info.maxFrameRate<lastInfo.maxFrameRate&&Math.abs(lastInfo.maxFrameRate-info.maxFrameRate)>2||info.totalPixels()<lastInfo.totalPixels())?streamIdsToRemove.add(info.streamId):lastInfo=info}const filteredRemoteAttendeesWithPreference=remoteInfosWithPreference.filter((info=>!streamIdsToRemove.has(info.streamId)));this.logger.info(`Filtered to ${JSON.stringify(filteredRemoteAttendeesWithPreference)}`);const rates={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};rates.targetDownlinkBitrate=this.determineTargetRate();const numberOfParticipants=this.subscribedReceiveSet.size(),currentEstimated=this.downlinkStats.bandwidthEstimateKbps,dontAllowSubscribe=!this.videoPriorityBasedPolicyConfig.allowSubscribe(numberOfParticipants,currentEstimated);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=VideoPriorityBasedPolicy.MIN_TIME_BETWEEN_SUBSCRIBE_MS,noMajorChange&&dontAllowSubscribe))return;const upgradeStream=this.priorityPolicy(rates,filteredRemoteAttendeesWithPreference,chosenStreams);let subscriptionChoice=0;if(!ServerSideNetworkAdaption_1.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)||this.startupPeriod||!sameStreamChoices?(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0):"Probing"===this.rateProbeState?subscriptionChoice=this.handleProbe(chosenStreams,rates.targetDownlinkBitrate):0!==rates.deltaToNextUpgrade&&(subscriptionChoice=this.maybeOverrideOrProbe(chosenStreams,rates,upgradeStream)),this.previousStreamsWithPreference=remoteInfosWithPreference,this.videoPreferencesUpdated=!1,1===subscriptionChoice)return this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),void(this.prevTargetRateKbps=rates.targetDownlinkBitrate);if(2===subscriptionChoice){const subscribedRate=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);return this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(remoteInfosWithPreference,this.preProbeNonPausedReceiveStreams),void this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+subscribedRate)}this.optimalNonPausedReceiveStreams=chosenStreams.slice();const lastNumberPaused=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(remoteInfosWithPreference,chosenStreams),this.logger.getLogLevel()<=LogLevel_1.LogLevel.INFO&&(this.logCount%15==0||this.rateProbeState!==lastProbeState||this.optimalReceiveStreams.length!==chosenStreams.length||lastNumberPaused!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(remoteInfos,rates.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=rates.targetDownlinkBitrate,this.optimalReceiveStreams=chosenStreams.slice()}calculateOptimalReceiveSet(){const streamSelectionSet=new DefaultVideoStreamIdSet_1.default;this.calculateOptimalReceiveStreams();for(const stream of this.optimalReceiveStreams)streamSelectionSet.add(stream.streamId);if(!this.optimalReceiveSet.equal(streamSelectionSet)){const subscribedRate=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(streamSelectionSet)} subscribedRate:${subscribedRate}`)}this.optimalReceiveSet=streamSelectionSet}determineTargetRate(){let targetBitrate=0;const now=Date.now();return 0!==this.downlinkStats.bandwidthEstimateKbps?(0===this.firstEstimateTimestamp&&(this.firstEstimateTimestamp=now),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>VideoPriorityBasedPolicy.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||now-this.firstEstimateTimestamp>VideoPriorityBasedPolicy.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?targetBitrate=VideoPriorityBasedPolicy.DEFAULT_BANDWIDTH_KBPS:"Probing"===this.rateProbeState&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<VideoPriorityBasedPolicy.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),targetBitrate=this.downlinkStats.usedBandwidthKbps+VideoPriorityBasedPolicy.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):targetBitrate=this.downlinkStats.bandwidthEstimateKbps):targetBitrate=0===this.firstEstimateTimestamp?VideoPriorityBasedPolicy.DEFAULT_BANDWIDTH_KBPS:this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-VideoPriorityBasedPolicy.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*VideoPriorityBasedPolicy.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&0===this.downlinkStats.packetsLost?(this.logger.debug((()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps)),this.usingPrevTargetRate=!0,targetBitrate=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,targetBitrate>15e3&&this.logger.warn("bwe: "+targetBitrate+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(targetBitrate,15e3)}setProbeState(newState){if(this.rateProbeState===newState)return!1;const now=Date.now();switch(newState){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(!(0===this.lastProbeTimestamp||now-this.lastProbeTimestamp>VideoPriorityBasedPolicy.MIN_TIME_BETWEEN_PROBE_MS))return!1;this.probePendingStartTimestamp=now;break;case"Probing":if(!(now-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs))return!1;this.lastProbeTimestamp=now,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(2*this.timeBeforeAllowProbeMs,VideoPriorityBasedPolicy.MAX_HOLD_BEFORE_PROBE_MS)}return this.logger.info("bwe: setProbeState to "+newState+" from "+this.rateProbeState),this.rateProbeState=newState,!0}upgradeToStream(chosenStreams,upgradeStream){for(let i=0;i<chosenStreams.length;i++)if(chosenStreams[i].groupId===upgradeStream.groupId){const diffRate=upgradeStream.avgBitrateKbps-chosenStreams[i].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(chosenStreams[i])+" to "+upgradeStream),this.lastUpgradeRateKbps=diffRate,chosenStreams[i]=upgradeStream,diffRate}return chosenStreams.push(upgradeStream),this.lastUpgradeRateKbps=upgradeStream.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(chosenStreams,targetDownlinkBitrate){if(Date.now()-this.lastProbeTimestamp>VideoPriorityBasedPolicy.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>VideoPriorityBasedPolicy.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=3*Math.max(VideoPriorityBasedPolicy.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs),2;const subscribedRate=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(chosenStreams)||targetDownlinkBitrate>subscribedRate?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=VideoPriorityBasedPolicy.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(chosenStreams,rates,upgradeStream){const sameSubscriptions=this.chosenStreamsSameAsLast(chosenStreams);let useLastSubscriptions=0;const triggerPercent=rates.targetDownlinkBitrate>VideoPriorityBasedPolicy.LOW_BITRATE_THRESHOLD_KBPS?VideoPriorityBasedPolicy.TARGET_RATE_CHANGE_TRIGGER_PERCENT:2*VideoPriorityBasedPolicy.TARGET_RATE_CHANGE_TRIGGER_PERCENT,minTargetBitrateDelta=rates.targetDownlinkBitrate*triggerPercent/100;if(this.targetRateBaselineForDeltaCheckKbps=void 0!==this.targetRateBaselineForDeltaCheckKbps?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!sameSubscriptions&&Math.abs(rates.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<minTargetBitrateDelta?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),useLastSubscriptions=1):this.targetRateBaselineForDeltaCheckKbps=rates.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,useLastSubscriptions;if(sameSubscriptions||1===useLastSubscriptions)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(chosenStreams,upgradeStream),useLastSubscriptions=0)}else this.setProbeState("Not Probing");return useLastSubscriptions}calculateSubscribeRate(streams){let subscribeRate=0;for(const stream of streams)this.pausedStreamIds.contain(stream.streamId)||this.pausedBwAttendeeIds.has(stream.attendeeId)||(subscribeRate+=stream.maxBitrateKbps);return subscribeRate}handleAppPausedStreams(chosenStreams,remoteInfos){if(!this.tileController)return void this.logger.warn("tileController not found!");this.pausedStreamIds=new DefaultVideoStreamIdSet_1.default;const remoteTiles=this.tileController.getAllRemoteVideoTiles();for(const tile of remoteTiles){const state=tile.state();if(state.paused&&!this.pausedBwAttendeeIds.has(state.boundAttendeeId)){let j=remoteInfos.length;for(;j--;)remoteInfos[j].attendeeId===state.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+state.boundAttendeeId+" streamId: "+remoteInfos[j].streamId),this.pausedStreamIds.add(remoteInfos[j].streamId),this.subscribedReceiveSet.contain(remoteInfos[j].streamId)&&chosenStreams.push(remoteInfos[j]),remoteInfos.splice(j,1))}}}processBwPausedStreams(remoteInfos,chosenStreams){if(!this.tileController)return void this.logger.warn("tileController not found!");const preferences=this.getCurrentVideoPreferences();if(preferences&&this.shouldPauseTiles){const videoTiles=this.tileController.getAllVideoTiles();for(const preference of preferences){const videoTile=this.getVideoTileForAttendeeId(preference.attendeeId,videoTiles),paused=(null==videoTile?void 0:videoTile.state().paused)||!1;if(chosenStreams.some((stream=>stream.attendeeId===preference.attendeeId)))paused&&this.pausedBwAttendeeIds.has(preference.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${preference.attendeeId} due to bandwidth`),this.forEachObserver((observer=>{observer.tileWillBeUnpausedByDownlinkPolicy(videoTile.id())})),this.tileController.unpauseVideoTile(videoTile.id()),this.pausedBwAttendeeIds.delete(preference.attendeeId));else{const streamExists=remoteInfos.some((stream=>stream.attendeeId===preference.attendeeId));if(videoTile&&streamExists){const info=this.optimalReceiveStreams.find((stream=>stream.attendeeId===preference.attendeeId));void 0!==info&&(paused||(this.logger.info(`bwe: pausing streamId ${info.streamId} attendee ${preference.attendeeId} due to bandwidth`),this.forEachObserver((observer=>{observer.tileWillBePausedByDownlinkPolicy(videoTile.id())})),this.tileController.pauseVideoTile(videoTile.id())),chosenStreams.push(info)),this.pausedBwAttendeeIds.add(preference.attendeeId)}else if(streamExists){const newTile=this.tileController.addVideoTile();newTile.bindVideoStream(preference.attendeeId,!1,null,0,0,0,null),this.forEachObserver((observer=>{observer.tileWillBePausedByDownlinkPolicy(newTile.id())})),newTile.pause(),this.logger.info(`bwe: Created video tile ${newTile.id()} for bw paused attendee ${preference.attendeeId}`),this.pausedBwAttendeeIds.add(preference.attendeeId)}}}}}cleanBwPausedTiles(remoteInfos){if(!this.tileController)return void this.logger.warn("tileController not found!");const tiles=this.tileController.getAllRemoteVideoTiles(),preferences=this.getCurrentVideoPreferences();for(const tile of tiles){const state=tile.state();state.boundVideoStream||(remoteInfos.some((stream=>stream.attendeeId===state.boundAttendeeId))?void 0===preferences||preferences.some((pref=>pref.attendeeId===state.boundAttendeeId))||this.tileController.removeVideoTile(state.tileId):(this.tileController.removeVideoTile(state.tileId),this.logger.info(`bwe: Removed video tile ${state.tileId} for bw paused attendee ${state.boundAttendeeId}`)))}}priorityPolicy(rates,remoteInfos,chosenStreams){let upgradeStream;const videoPreferences=this.getCurrentVideoPreferences(),highestPriority=videoPreferences.highestPriority();let nextPriority,priority=highestPriority;for(;-1!==priority;){nextPriority=-1;for(const preference of videoPreferences)if(preference.priority===priority)for(const info of remoteInfos)info.attendeeId===preference.attendeeId&&(chosenStreams.some((stream=>stream.groupId===info.groupId))||(rates.chosenTotalBitrate+info.avgBitrateKbps<=rates.targetDownlinkBitrate?(chosenStreams.push(info),rates.chosenTotalBitrate+=info.avgBitrateKbps):0===rates.deltaToNextUpgrade&&(rates.deltaToNextUpgrade=info.avgBitrateKbps,upgradeStream=info)));else if(preference.priority>priority){nextPriority=preference.priority;break}for(const preference of videoPreferences)if(preference.priority===priority){for(const info of remoteInfos)if(info.attendeeId===preference.attendeeId){const index=chosenStreams.findIndex((stream=>stream.groupId===info.groupId&&stream.maxBitrateKbps<=info.maxBitrateKbps&&stream.avgBitrateKbps<info.avgBitrateKbps));if(-1!==index){const increaseKbps=info.avgBitrateKbps-chosenStreams[index].avgBitrateKbps;this.hasSimulcastStreams(remoteInfos,info.attendeeId,info.groupId)&&this.canUpgrade(info.avgBitrateKbps,preference.targetSize,preference.targetSizeToBitrateKbps(preference.targetSize),info.attendeeId.endsWith(ContentShareConstants_1.default.Modality))?(this.logger.info(`bwe: attendee: ${info.attendeeId} group: ${info.groupId} has simulcast and can upgrade avgBitrate: ${info.avgBitrateKbps} target: ${preference.targetSizeToBitrateKbps(preference.targetSize)} targetTotalBitrate: ${rates.targetDownlinkBitrate}`),rates.chosenTotalBitrate+increaseKbps<=rates.targetDownlinkBitrate?(rates.chosenTotalBitrate+=increaseKbps,chosenStreams[index]=info):0===rates.deltaToNextUpgrade&&(rates.deltaToNextUpgrade=increaseKbps,upgradeStream=info)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(preference.priority>priority)break;if(priority===highestPriority&&0!==rates.deltaToNextUpgrade)break;priority=nextPriority}return upgradeStream}getVideoTileForAttendeeId(attendeeId,videoTiles){for(const tile of videoTiles){if(tile.state().boundAttendeeId===attendeeId)return tile}return null}canUpgrade(bitrateKbps,targetResolution,targetBitrateKbps,isContent){let canUpgrade=!1;return(targetResolution===TargetDisplaySize_1.default.High||!isContent&&bitrateKbps<=targetBitrateKbps||isContent&&targetResolution===TargetDisplaySize_1.default.Medium&&bitrateKbps<=targetBitrateKbps)&&(canUpgrade=!0),canUpgrade?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${bitrateKbps} targetBitrateKbps: ${targetBitrateKbps}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${bitrateKbps} targetBitrateKbps: ${targetBitrateKbps}`),!1)}hasSimulcastStreams(remoteInfos,attendeeId,groupId){let streamCount=0;for(const info of remoteInfos)info.attendeeId===attendeeId&&info.groupId===groupId&&streamCount++;return this.logger.info(`bwe: attendeeId: ${attendeeId} groupId: ${groupId} hasSimulcastStreams: streamCount: ${streamCount}`),streamCount>1}streamsWithPreferenceDidChange(remoteInfos){if(void 0===this.previousStreamsWithPreference||remoteInfos.length!==this.previousStreamsWithPreference.length||!0===this.videoPreferencesUpdated)return!0;for(const info of remoteInfos){if(void 0===this.previousStreamsWithPreference.find((prevInfo=>prevInfo.groupId===info.groupId&&prevInfo.streamId===info.streamId&&prevInfo.maxBitrateKbps===info.maxBitrateKbps)))return!0}return!1}chosenStreamsSameAsLast(chosenStreams){if(this.optimalNonPausedReceiveStreams.length!==chosenStreams.length)return!1;for(const lastStream of this.optimalNonPausedReceiveStreams)if(!chosenStreams.some((stream=>stream.streamId===lastStream.streamId)))return!1;return!0}policyStateLogStr(remoteInfos,targetDownlinkBitrate){const optimalReceiveSet={targetBitrate:targetDownlinkBitrate,subscribedRate:this.calculateSubscribeRate(this.optimalReceiveStreams),probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let remoteInfoStr="remoteInfos: [";for(const info of remoteInfos)remoteInfoStr+=`{grpId:${info.groupId} strId:${info.streamId} maxBr:${info.maxBitrateKbps} avgBr:${info.avgBitrateKbps}}, `;remoteInfoStr+="]";let logString=`bwe: optimalReceiveSet ${JSON.stringify(optimalReceiveSet)}\nbwe:   prev ${JSON.stringify(this.prevDownlinkStats)}\nbwe:   now  ${JSON.stringify(this.downlinkStats)}\nbwe:   ${remoteInfoStr}\n`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(logString+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }\n`),this.videoPreferences?logString+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:logString+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,logString}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(adaption){this.serverSideNetworkAdaption=adaption,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[ServerSideNetworkAdaption_1.default.None,ServerSideNetworkAdaption_1.default.BandwidthProbing,ServerSideNetworkAdaption_1.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let preferences=this.getCurrentVideoPreferences();if(!preferences){preferences=VideoPreferences_1.VideoPreferences.prepare().build()}return preferences}wantsAllTemporalLayersInIndex(){return!0}}exports.default=VideoPriorityBasedPolicy,VideoPriorityBasedPolicy.DEFAULT_BANDWIDTH_KBPS=2800,VideoPriorityBasedPolicy.STARTUP_PERIOD_MS=6e3,VideoPriorityBasedPolicy.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,VideoPriorityBasedPolicy.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,VideoPriorityBasedPolicy.LOW_BITRATE_THRESHOLD_KBPS=300,VideoPriorityBasedPolicy.MIN_TIME_BETWEEN_PROBE_MS=5e3,VideoPriorityBasedPolicy.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,VideoPriorityBasedPolicy.MAX_HOLD_BEFORE_PROBE_MS=3e4,VideoPriorityBasedPolicy.MAX_ALLOWED_PROBE_TIME_MS=6e4,VideoPriorityBasedPolicy.SPURIOUS_PACKET_LOST_THRESHOLD=2,VideoPriorityBasedPolicy.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},"./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoPriorityBasedPolicyConfig.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const ServerSideNetworkAdaption_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingclient/ServerSideNetworkAdaption.js"));class VideoPriorityBasedPolicyConfig{constructor(networkIssueResponseDelayFactor=0,networkIssueRecoveryDelayFactor=0){this.networkIssueResponseDelayFactor=networkIssueResponseDelayFactor,this.networkIssueRecoveryDelayFactor=networkIssueRecoveryDelayFactor,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=ServerSideNetworkAdaption_1.default.BandwidthProbingAndRemoteVideoQualityAdaption,networkIssueResponseDelayFactor<0?networkIssueResponseDelayFactor=0:networkIssueResponseDelayFactor>1&&(networkIssueResponseDelayFactor=1),this.networkIssueResponseDelayFactor=networkIssueResponseDelayFactor,networkIssueRecoveryDelayFactor<0?networkIssueRecoveryDelayFactor=0:networkIssueRecoveryDelayFactor>1&&(networkIssueRecoveryDelayFactor=1),this.networkIssueRecoveryDelayFactor=networkIssueRecoveryDelayFactor}allowSubscribe(numberOfParticipants,currentEstimated){let timeBeforeAllowSubscribeMs=0;const previousNetworkEvent=this.currentNetworkEvent;if(currentEstimated>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=currentEstimated,!0;if(currentEstimated<this.referenceBitrate){if(this.currentNetworkEvent=1,timeBeforeAllowSubscribeMs=this.getSubscribeDelay(this.currentNetworkEvent,numberOfParticipants),1!==previousNetworkEvent)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>timeBeforeAllowSubscribeMs)return this.referenceBitrate=currentEstimated,!0;return!1}return this.currentNetworkEvent=0,!1}getSubscribeDelay(event,numberOfParticipants){let subscribeDelay=VideoPriorityBasedPolicyConfig.MINIMUM_DELAY_MS;const range=VideoPriorityBasedPolicyConfig.MAXIMUM_DELAY_MS-VideoPriorityBasedPolicyConfig.MINIMUM_DELAY_MS,responseFactor=this.networkIssueResponseDelayFactor;if(1===event)subscribeDelay+=range*responseFactor*(1+numberOfParticipants/10),subscribeDelay=Math.min(VideoPriorityBasedPolicyConfig.MAXIMUM_DELAY_MS,subscribeDelay);return subscribeDelay}}exports.default=VideoPriorityBasedPolicyConfig,VideoPriorityBasedPolicyConfig.MINIMUM_DELAY_MS=2e3,VideoPriorityBasedPolicyConfig.MAXIMUM_DELAY_MS=8e3,VideoPriorityBasedPolicyConfig.Default=new VideoPriorityBasedPolicyConfig(0,0),VideoPriorityBasedPolicyConfig.UnstableNetworkPreset=new VideoPriorityBasedPolicyConfig(0,1),VideoPriorityBasedPolicyConfig.StableNetworkPreset=new VideoPriorityBasedPolicyConfig(1,0)},"./node_modules/amazon-chime-sdk-js/build/videodownlinkbandwidthpolicy/VideoQualityAdaptationPreference.js":(__unused_webpack_module,exports)=>{"use strict";var VideoQualityAdaptationPreference;Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoQualityAdaptationPreference=void 0,function(VideoQualityAdaptationPreference){VideoQualityAdaptationPreference[VideoQualityAdaptationPreference.Balanced=0]="Balanced",VideoQualityAdaptationPreference[VideoQualityAdaptationPreference.MaintainFramerate=1]="MaintainFramerate",VideoQualityAdaptationPreference[VideoQualityAdaptationPreference.MaintainResolution=2]="MaintainResolution"}(VideoQualityAdaptationPreference=exports.VideoQualityAdaptationPreference||(exports.VideoQualityAdaptationPreference={})),exports.default=VideoQualityAdaptationPreference},"./node_modules/amazon-chime-sdk-js/build/videoelementfactory/NoOpVideoElementFactory.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class NoOpVideoElementFactory{create(){const element={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{element.paused=!0},play:()=>(element.paused=!1,Promise.resolve())};return element}}},"./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/CanvasVideoFrameBuffer.js":function(__unused_webpack_module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class CanvasVideoFrameBuffer{constructor(canvas){this.canvas=canvas,this.destroyed=!1}destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return __awaiter(this,void 0,void 0,(function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)}))}asCanvasElement(){return this.canvas}}},"./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/DefaultVideoFrameProcessorPipeline.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const CanvasVideoFrameBuffer_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/CanvasVideoFrameBuffer.js")),DefaultVideoFrameProcessorTimer_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/DefaultVideoFrameProcessorTimer.js"));exports.default=class DefaultVideoFrameProcessorPipeline{constructor(logger,stages,timer=new DefaultVideoFrameProcessorTimer_1.default){this.logger=logger,this.stages=stages,this.fr=15,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=_event=>__awaiter(this,void 0,void 0,(function*(){if(!this.inputVideoStream)return;const processVideoStart=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let imageSource,buffers=[];buffers.push(this.sourceBuffers[0]);try{for(const proc of this.processors)buffers=yield proc.process(buffers)}catch(_error){return void this.forEachObserver((obs=>{obs.processingDidFailToStart&&obs.processingDidFailToStart()}))}this.destBuffers=buffers;try{imageSource=yield this.destBuffers[0].asCanvasImageSource()}catch(error){return void(this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver((obs=>{obs.processingDidFailToStart&&obs.processingDidFailToStart()}))))}const frameWidth=imageSource.width,frameHeight=imageSource.height;0!==frameWidth&&0!==frameHeight&&(this.canvasOutput.width!==frameWidth&&this.canvasOutput.height!==frameHeight&&(this.canvasOutput.width=frameWidth,this.canvasOutput.height=frameHeight),this.outputCtx.drawImage(imageSource,0,0,frameWidth,frameHeight,0,0,frameWidth,frameHeight),this.hasStarted||(this.hasStarted=!0,this.forEachObserver((observer=>{observer.processingDidStart&&observer.processingDidStart()}))));const processVideoLatency=performance.now()-processVideoStart,leave=2e3/this.framerate-processVideoLatency,nextFrameDelay=Math.max(0,1e3/this.framerate-processVideoLatency);leave<=0&&this.forEachObserver((obs=>{obs.processingLatencyTooHigh&&obs.processingLatencyTooHigh(processVideoLatency)})),yield this.timer.start(nextFrameDelay,this.process.bind(this))})),this.timer=timer}destroy(){if(this.stop(),this.stages)for(const stage of this.stages)stage.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(value){this.fr=value<0?15:value}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const track of this.outputMediaStream.getVideoTracks())track.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver((observer=>{observer.processingDidStop&&observer.processingDidStop()})))}addObserver(observer){this.observers.add(observer)}removeObserver(observer){this.observers.delete(observer)}getInputMediaStream(){return __awaiter(this,void 0,void 0,(function*(){return this.inputVideoStream}))}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()||(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput()),this.outputMediaStream}setInputMediaStream(inputMediaStream){return __awaiter(this,void 0,void 0,(function*(){if(!inputMediaStream)return void this.stop();if(0===inputMediaStream.getVideoTracks().length)return void this.logger.error("No video tracks in input media stream, ignoring");this.inputVideoStream=inputMediaStream;const settings=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(settings)}`),this.framerate=settings.frameRate,this.canvasOutput.width=settings.width,this.canvasOutput.height=settings.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const canvasBuffer=new CanvasVideoFrameBuffer_1.default(this.canvasInput);this.sourceBuffers.push(canvasBuffer),this.videoInput.load();try{yield this.videoInput.play()}catch(_a){this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()}))}cloneInputAudioTracksToOutput(){if(this.isOutputMediaStreamActive()&&null!==this.inputVideoStream){for(const audioTrack of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${audioTrack.id} from output stream`),this.outputMediaStream.removeTrack(audioTrack);for(const audioTrack of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${audioTrack.id} to output stream`),this.outputMediaStream.addTrack(audioTrack)}else this.logger.info("Not cloning input audio tracks to output, do not have media streams ready")}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(stages){this.stages=stages}get processors(){return this.stages}forEachObserver(observerFunc){for(const observer of this.observers)setTimeout((()=>{observerFunc(observer)}),0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const track of this.inputVideoStream.getTracks())track.stop();this.inputVideoStream=null;for(const buffer of this.sourceBuffers)buffer.destroy();this.sourceBuffers=[]}}},"./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/DefaultVideoFrameProcessorTimer.js":function(__unused_webpack_module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class DefaultVideoFrameProcessorTimer{constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}createWorkerTimer(){try{const timerBlob=new Blob(["self.onmessage = async function(e){ \n            var timerID = null;\n            const awaitTimeout = delay => new Promise( resolve => {\n              timerID = setTimeout(resolve, delay);\n            })\n            await awaitTimeout(e.data);\n            postMessage(timerID);\n          }"],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(timerBlob))}catch(error){}}start(delay,callback){return __awaiter(this,void 0,void 0,(function*(){this.callback=callback,this.workerTimer?(this.workerTimer.onmessage=event=>{this.lastTimeout=event.data,this.callback()},this.workerTimer.postMessage(delay)):this.lastTimeout=setTimeout((()=>{this.callback()}),delay)}))}destroy(){return __awaiter(this,void 0,void 0,(function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)}))}}},"./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/DefaultVideoTransformDevice.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),DefaultVideoFrameProcessorPipeline_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/DefaultVideoFrameProcessorPipeline.js"));class DefaultVideoTransformDevice{constructor(logger,device,processors,browserBehavior=new DefaultBrowserBehavior_1.default){this.logger=logger,this.device=device,this.processors=processors,this.browserBehavior=browserBehavior,this.observers=new Set,this.pipe=new DefaultVideoFrameProcessorPipeline_1.default(this.logger,this.processors),this.pipe.addObserver(this)}get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(eventController){if(this.pipe.processors)for(const processor of this.pipe.processors)"function"==typeof processor.setEventController&&processor.setEventController(eventController)}chooseNewInnerDevice(newDevice){const newTransformDevice=new DefaultVideoTransformDevice(this.logger,newDevice,this.processors,this.browserBehavior);return newTransformDevice.pipe=this.pipe,newTransformDevice}getInnerDevice(){return this.device}intrinsicDevice(){return __awaiter(this,void 0,void 0,(function*(){return this.device}))}transformStream(mediaStream){return __awaiter(this,void 0,void 0,(function*(){return yield this.pipe.setInputMediaStream(mediaStream),this.inputMediaStream=mediaStream,this.pipe.getActiveOutputMediaStream()}))}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const deviceIsMediaStream=this.device&&this.device.id;if(this.pipe.stop(),!deviceIsMediaStream&&this.inputMediaStream)for(const track of this.inputMediaStream.getVideoTracks())track.stop()}stop(){return __awaiter(this,void 0,void 0,(function*(){if(this.inputMediaStream)for(const track of this.inputMediaStream.getVideoTracks())track.stop();this.pipe.destroy(),this.inputMediaStream=null}))}addObserver(observer){this.observers.add(observer)}removeObserver(observer){this.observers.delete(observer)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver((observer=>{observer.processingDidStart&&observer.processingDidStart()}))}processingLatencyTooHigh(latencyMs){this.forEachObserver((observer=>{observer.processingLatencyTooHigh&&observer.processingLatencyTooHigh(latencyMs)}))}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver((observer=>{observer.processingDidFailToStart&&observer.processingDidFailToStart()}))}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver((observer=>{observer.processingDidStop&&observer.processingDidStop()}))}forEachObserver(observerFunc){for(const observer of this.observers)setTimeout((()=>{observerFunc(observer)}),0)}get framerate(){return this.pipe.framerate}set framerate(value){this.pipe.framerate=value}}exports.default=DefaultVideoTransformDevice},"./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/NoOpVideoFrameProcessor.js":function(__unused_webpack_module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class NoOpVideoFrameProcessor{process(buffers){return __awaiter(this,void 0,void 0,(function*(){return buffers}))}destroy(){return __awaiter(this,void 0,void 0,(function*(){}))}}},"./node_modules/amazon-chime-sdk-js/build/videofx/DeferredPromise.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeferredPromise=void 0;exports.DeferredPromise=class DeferredPromise{constructor(){this.promise=new Promise(((resolve,reject)=>{this.resolve=resolve,this.reject=reject}))}getPromise(){return this.promise}resolvePromise(resolveParameter){this.resolve(resolveParameter)}resolveAndReplacePromise(resolveParameter){this.resolve(resolveParameter),this.promise=new Promise(((resolve,reject)=>{this.resolve=resolve,this.reject=reject}))}rejectPromise(rejectError){this.reject(rejectError)}rejectAndReplacePromise(rejectError){this.reject(rejectError),this.promise=new Promise(((resolve,reject)=>{this.resolve=resolve,this.reject=reject}))}}},"./node_modules/amazon-chime-sdk-js/build/videofx/VideoFxCanvasOpsManager.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoFxCanvasOpsManager=void 0;const VideoFxConstants_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videofx/VideoFxConstants.js");exports.VideoFxCanvasOpsManager=class VideoFxCanvasOpsManager{constructor(streamParameters,outputCanvas){this.streamParameters=streamParameters,this.outputCanvas=outputCanvas,this.configureCanvasPipeline()}getInferenceInputData(inputCanvas){this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(inputCanvas,0,0),this.inferenceCtx.restore();return this.inferenceCtx.getImageData(0,0,VideoFxConstants_1.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,VideoFxConstants_1.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(streamParameters){return __awaiter(this,void 0,void 0,(function*(){if(this.streamParameters=streamParameters,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const resizedCanvas=document.createElement("canvas");resizedCanvas.width=this.streamParameters.width,resizedCanvas.height=this.streamParameters.height,resizedCanvas.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=resizedCanvas}this.configureCanvasPipeline()}))}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=VideoFxConstants_1.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=VideoFxConstants_1.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=VideoFxConstants_1.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=VideoFxConstants_1.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(effectConfig){return __awaiter(this,void 0,void 0,(function*(){const imageURL=effectConfig.backgroundReplacement.backgroundImageURL,defaultColor=effectConfig.backgroundReplacement.defaultColor;if(imageURL)try{const backgroundImage=yield this.loadImage(imageURL);this.backgroundReplacementImage=backgroundImage,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(error){throw this.logger.error(error),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(defaultColor)}))}resizeAndSetReplacementImage(backgroundImage){const resizedCanvas=document.createElement("canvas"),resizedCtx=resizedCanvas.getContext("2d");resizedCanvas.width=this.streamParameters.width,resizedCanvas.height=this.streamParameters.height,resizedCtx.drawImage(backgroundImage,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=resizedCanvas}resizeAndSetReplacementColor(defaultColor){const resizedCanvas=document.createElement("canvas"),resizedCtx=resizedCanvas.getContext("2d");resizedCanvas.width=this.streamParameters.width,resizedCanvas.height=this.streamParameters.height,resizedCtx.fillStyle=defaultColor,resizedCtx.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=resizedCanvas}loadImage(backgroundImageURL){return __awaiter(this,void 0,void 0,(function*(){const image=yield fetch(backgroundImageURL).catch((error=>{throw this.logger.error(error.toString()),new Error("Failed to fetch image.")})),imageBlob=yield image.blob(),img=new Image;return img.src=URL.createObjectURL(imageBlob),new Promise(((resolve,reject)=>{img.onload=()=>{resolve(img)},img.onerror=error=>{reject(error)}}))}))}}},"./node_modules/amazon-chime-sdk-js/build/videofx/VideoFxConstants.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_VIDEO_FX_SPEC=exports.FXLIB_PATH=exports.WORKER_PATH=exports.CDN_BASE_PATH=exports.RESOURCE_CONSTRAINTS=exports.SEGMENTATION_MODEL=exports.DEFAULT_STREAM_PARAMETERS=exports.WORKER_MSG=void 0,exports.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},exports.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},exports.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},exports.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},exports.CDN_BASE_PATH="https://static.sdkassets.chime.aws";exports.WORKER_PATH="/ml_media_fx/otherassets/worker.js",exports.FXLIB_PATH="/ml_media_fx/otherassets/fxlib.js",exports.DEFAULT_VIDEO_FX_SPEC={paths:{cdnBasePath:exports.CDN_BASE_PATH,workerPath:exports.WORKER_PATH,fxLibPath:exports.FXLIB_PATH}}},"./node_modules/amazon-chime-sdk-js/build/videofx/VideoFxProcessor.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const fetch_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/fetch.js"),loader_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/loader.js"),support_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/support.js"),DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),NoOpLogger_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/logger/NoOpLogger.js")),Utils_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Utils.js"),Versioning_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/versioning/Versioning.js")),CanvasVideoFrameBuffer_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videoframeprocessor/CanvasVideoFrameBuffer.js")),DeferredPromise_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videofx/DeferredPromise.js"),VideoFxCanvasOpsManager_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videofx/VideoFxCanvasOpsManager.js"),VideoFxConstants_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videofx/VideoFxConstants.js"),VideoFxSegmentationRateManager_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videofx/VideoFxSegmentationRateManager.js");class VideoFxProcessor{constructor(logger,processingBudgetPerFrame=VideoFxConstants_1.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,eventController){this.logger=logger,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new CanvasVideoFrameBuffer_1.default(this.outputCanvas),this.videoFxSpec=VideoFxConstants_1.DEFAULT_VIDEO_FX_SPEC;try{this.validateProcessingBudgetPerFrame(processingBudgetPerFrame)}catch(error){throw this.logger.error(error),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${processingBudgetPerFrame}`)}eventController&&(this.eventController=eventController),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new DeferredPromise_1.DeferredPromise,this.segmentationRateManager=new VideoFxSegmentationRateManager_1.VideoFxSegmentationRateManager(this.logger,processingBudgetPerFrame),this.streamParameters={framerate:VideoFxConstants_1.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:VideoFxConstants_1.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:VideoFxConstants_1.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:VideoFxConstants_1.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},VideoFxProcessor.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(VideoFxConstants_1.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*VideoFxConstants_1.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${VideoFxProcessor.isSharedArrayBufferSupported}`),this.canvasOpsManager=new VideoFxCanvasOpsManager_1.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${processingBudgetPerFrame}`)}process(buffers){return __awaiter(this,void 0,void 0,(function*(){return buffers}))}fxProcess(buffers){return __awaiter(this,void 0,void 0,(function*(){const inputCanvas=buffers[0].asCanvasElement();this.didStreamParametersChange(inputCanvas)&&(yield this.adjustProcessorForNewStreamParameters(inputCanvas));try{yield this.manageSegmentationMask(inputCanvas)}catch(error){throw this.logger.error(error),new Error("Video stream could not be processed")}return yield this.renderer.render(inputCanvas,this.segmentationMask),buffers[0]=this.canvasVideoFrameBuffer,buffers}))}noOpProcess(buffers){return __awaiter(this,void 0,void 0,(function*(){return buffers}))}didStreamParametersChange(stream){return stream.width!==this.streamParameters.width||stream.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(stream){return __awaiter(this,void 0,void 0,(function*(){this.streamParameters.width=stream.width,this.streamParameters.height=stream.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)}))}destroy(){return __awaiter(this,void 0,void 0,(function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new DeferredPromise_1.DeferredPromise,this.engineWorker.postMessage({msg:VideoFxConstants_1.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:VideoFxConstants_1.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")}))}manageSegmentationMask(inputCanvas){return __awaiter(this,void 0,void 0,(function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const inferenceInputImageData=this.canvasOpsManager.getInferenceInputData(inputCanvas);this.segmentationMask=yield this.generateSegmentationMask(inferenceInputImageData),this.segmentationRateManager.completeSegmentation()}}catch(error){throw this.logger.error(error.toString()),new Error("Can not properly manage the returned segmentation mask")}}))}generateSegmentationMask(inferenceImageData){return __awaiter(this,void 0,void 0,(function*(){VideoFxProcessor.isSharedArrayBufferSupported?(this.sharedImageData.set(inferenceImageData.data),this.engineWorker.postMessage({msg:VideoFxConstants_1.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:VideoFxConstants_1.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:inferenceImageData},[inferenceImageData.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(error){throw this.logger.error(error.toString()),new Error("Segmentation mask could not be generated")}}))}cloneConfigFrom(effectConfig){return{backgroundBlur:{isEnabled:effectConfig.backgroundBlur.isEnabled,strength:effectConfig.backgroundBlur.strength},backgroundReplacement:{isEnabled:effectConfig.backgroundReplacement.isEnabled,backgroundImageURL:effectConfig.backgroundReplacement.backgroundImageURL,defaultColor:effectConfig.backgroundReplacement.defaultColor}}}setVideoFxSpec(videoFxSpec){videoFxSpec.paths&&(this.videoFxSpec.paths=videoFxSpec.paths)}setEffectConfig(effectConfig){return __awaiter(this,void 0,void 0,(function*(){if(this.sameVideoFxConfig(effectConfig,this.effectConfig))return;const newEffectConfig=this.cloneConfigFrom(effectConfig);try{yield this.validateEffectConfig(newEffectConfig)}catch(error){throw this.logger.error(error.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}newEffectConfig.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(newEffectConfig),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,newEffectConfig),this.effectConfig=newEffectConfig,this.effectConfig.backgroundBlur.isEnabled||this.effectConfig.backgroundReplacement.isEnabled?this.process=this.fxProcess:this.process=this.noOpProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()}))}validateEffectConfig(config){return __awaiter(this,void 0,void 0,(function*(){if(config.backgroundBlur.isEnabled&&config.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");config.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(config))}))}validateReplacementConfig(config){return __awaiter(this,void 0,void 0,(function*(){if(config.backgroundReplacement.backgroundImageURL&&config.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!config.backgroundReplacement.backgroundImageURL&&!config.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{config.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(config.backgroundReplacement.backgroundImageURL))}catch(error){throw this.logger.error(error.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const defaultColor=config.backgroundReplacement.defaultColor;if(defaultColor&&"black"!==defaultColor&&"#000000"!==defaultColor&&"#000"!==defaultColor){if(defaultColor.includes("#")){if(!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(defaultColor))throw new Error(`Invalid hexadecimal color code for default replacement background: ${defaultColor}`)}const testColorCtx=document.createElement("canvas").getContext("2d"),prevFillStyle=testColorCtx.fillStyle;if(testColorCtx.fillStyle=defaultColor,testColorCtx.fillStyle===prevFillStyle)throw new Error(`Invalid color for default replacement background: ${defaultColor}`)}}))}validateProcessingBudgetPerFrame(processingBudgetPerFrame){if(processingBudgetPerFrame<VideoFxConstants_1.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||processingBudgetPerFrame>VideoFxConstants_1.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${VideoFxConstants_1.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${VideoFxConstants_1.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return __awaiter(this,void 0,void 0,(function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const videoFxAssetParams=this.getVideoFxAssetParams();yield this.loadEngineWorker(videoFxAssetParams),yield this.buildEngine(videoFxAssetParams),yield this.loadFxLib(videoFxAssetParams),this.renderer=constructRenderer(VideoFxConstants_1.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,VideoFxConstants_1.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(error){throw this.logger.error(error.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")}))}getVideoFxAssetParams(){const defaultAssetSpec=Utils_1.getDefaultAssetSpec();return{assetGroup:defaultAssetSpec.assetGroup,revisionID:defaultAssetSpec.revisionID,sdk:encodeURIComponent(Versioning_1.default.sdkVersion),ua:encodeURIComponent(Versioning_1.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(basePath,videoFxAssetParams){const path=new URL(basePath);for(const[key,value]of Object.entries(videoFxAssetParams))if(void 0!==value){const uriEncodedKey=encodeURIComponent(key),uriEncodedValue=encodeURIComponent(value);path.searchParams.set(uriEncodedKey,uriEncodedValue)}return path.toString()}loadEngineWorker(videoFxAssetParams){return __awaiter(this,void 0,void 0,(function*(){try{const engineWorkerPath=this.getPathFromVideoFxAssetParams(this.videoFxSpec.paths.cdnBasePath+this.videoFxSpec.paths.workerPath,videoFxAssetParams);this.engineWorker=yield loader_1.loadWorker(engineWorkerPath,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",(event=>this.engineWorkerReceiver(event)))}catch(error){throw this.logger.error(error.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}}))}buildEngine(videoFxAssetParams){return __awaiter(this,void 0,void 0,(function*(){this.buildEnginePromise=new DeferredPromise_1.DeferredPromise,this.engineWorker.postMessage({msg:VideoFxConstants_1.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:this.videoFxSpec.paths.cdnBasePath,sdkVersioningParams:videoFxAssetParams}});try{yield this.buildEnginePromise.getPromise()}catch(error){throw this.logger.error(error.toString()),new Error("Failed to instantiate the VideoFxEngine")}}))}loadFxLib(videoFxAssetParams){return __awaiter(this,void 0,void 0,(function*(){const fxLibPath=this.getPathFromVideoFxAssetParams(this.videoFxSpec.paths.cdnBasePath+this.videoFxSpec.paths.fxLibPath,videoFxAssetParams),WORKER_FETCH_OPTIONS={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const res=yield fetch_1.fetchWithBehavior(fxLibPath,WORKER_FETCH_OPTIONS,{});if(!res.ok)throw new Error("Fetch failed.");const blobURL=window.URL.createObjectURL(yield res.blob());yield new Promise(((resolve,reject)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",blobURL),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",resolve),this.fxLibScript.addEventListener("error",reject),document.body.appendChild(this.fxLibScript)}))}catch(error){throw this.logger.error(error.toString()),new Error("Failed to load the fxlib")}}))}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(event){const msg=event.data;switch(msg.msg){case VideoFxConstants_1.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(msg.payload);break;case VideoFxConstants_1.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(msg.payload.output);break;case VideoFxConstants_1.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case VideoFxConstants_1.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(msg)}`)}}settleEngineBuildPromise(buildStatus){buildStatus!==VideoFxConstants_1.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(segmentationMask){segmentationMask?this.segmentationRequestPromise.resolveAndReplacePromise(segmentationMask):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const transformedImageData=new ImageData(new Uint8ClampedArray(this.sharedImageData),VideoFxConstants_1.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,VideoFxConstants_1.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(transformedImageData)}catch(_a){this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(logger=new NoOpLogger_1.default,attemptAssetLoad=!0){return __awaiter(this,void 0,void 0,(function*(){let allCheckedPassed=!0;const checkEnv=(badPromiseCondition,message)=>{badPromiseCondition&&(logger.info(message),allCheckedPassed=!1)};checkEnv("undefined"==typeof globalThis,"Browser does not have globalThis."),checkEnv(!support_1.supportsWorker(globalThis,logger),"Browser does not support web workers."),checkEnv(!support_1.supportsWASM(globalThis,logger),"Browser does not support wasm."),checkEnv(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");checkEnv(!(new DefaultBrowserBehavior_1.default).isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");return Promise.resolve(!!allCheckedPassed&&(yield(()=>__awaiter(this,void 0,void 0,(function*(){if(attemptAssetLoad)try{const testFxProcessor=new VideoFxProcessor(logger);yield testFxProcessor.loadAssets(),yield testFxProcessor.destroy()}catch(_a){return logger.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)})))()))}))}static create(logger,effectConfig,processingBudgetPerFrame=VideoFxConstants_1.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,spec){return __awaiter(this,void 0,void 0,(function*(){const videoFxProcessor=new VideoFxProcessor(logger,processingBudgetPerFrame);spec&&videoFxProcessor.setVideoFxSpec(spec);try{return yield videoFxProcessor.loadAssets(),yield videoFxProcessor.setEffectConfig(effectConfig),videoFxProcessor}catch(error){throw logger.error(error.toString()),videoFxProcessor.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}}))}setEventController(eventController){this.eventController?this.eventController=eventController:(this.eventController=eventController,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const mediaFXEventAttibutes={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",mediaFXEventAttibutes)}sameVideoFxConfig(firstConfig,secondConfig){return firstConfig.backgroundBlur.isEnabled===secondConfig.backgroundBlur.isEnabled&&firstConfig.backgroundBlur.strength===secondConfig.backgroundBlur.strength&&firstConfig.backgroundReplacement.backgroundImageURL===secondConfig.backgroundReplacement.backgroundImageURL&&firstConfig.backgroundReplacement.defaultColor===secondConfig.backgroundReplacement.defaultColor&&firstConfig.backgroundReplacement.isEnabled===secondConfig.backgroundReplacement.isEnabled}}exports.default=VideoFxProcessor,VideoFxProcessor.isSharedArrayBufferSupported="undefined"!=typeof SharedArrayBuffer},"./node_modules/amazon-chime-sdk-js/build/videofx/VideoFxSegmentationRateManager.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideoFxSegmentationRateManager=void 0;const VideoFxConstants_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videofx/VideoFxConstants.js");exports.VideoFxSegmentationRateManager=class VideoFxSegmentationRateManager{constructor(logger,targetSegmentationCycleTime){this.logger=logger,this.targetSegmentationCyclePercentage=targetSegmentationCycleTime/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=VideoFxConstants_1.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation==0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=VideoFxConstants_1.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(currentSegmentationCycleTime){currentSegmentationCycleTime>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&currentSegmentationCycleTime<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}}},"./node_modules/amazon-chime-sdk-js/build/videosource/VideoSource.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class VideoSource{}},"./node_modules/amazon-chime-sdk-js/build/videostreamidset/DefaultVideoStreamIdSet.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class DefaultVideoStreamIdSet{constructor(ids){this.ids=new Set(ids)}add(streamId){this.ids.add(streamId)}array(){return Array.from(this.ids.values()).sort(((a,b)=>a-b))}contain(streamId){return this.ids.has(streamId)}forEach(callbackFn){this.ids.forEach(callbackFn)}empty(){return 0===this.ids.size}size(){return this.ids.size}equal(other){if(!other)return 0===this.ids.size;const x=this.array(),y=other.array();if(x.length!==y.length)return!1;for(let i=0;i<x.length;i++)if(x[i]!==y[i])return!1;return!0}clone(){return new DefaultVideoStreamIdSet(this.array())}remove(streamId){this.ids.delete(streamId)}toJSON(){return this.array()}truncate(length){const x=this.array();return new DefaultVideoStreamIdSet(x.splice(0,length))}}exports.default=DefaultVideoStreamIdSet},"./node_modules/amazon-chime-sdk-js/build/videostreamindex/DefaultVideoStreamIndex.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),DefaultVideoStreamIdSet_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamidset/DefaultVideoStreamIdSet.js")),VideoStreamDescription_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamindex/VideoStreamDescription.js"));exports.default=class DefaultVideoStreamIndex{constructor(logger){this.logger=logger,this.currentIndex=null,this.indexForSubscribe=null,this.indexForLastRemoteVideoUpdate=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new VideoStreamDescription_1.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(avgBitrateBps){return avgBitrateBps>0&&avgBitrateBps<1e3?1:Math.trunc(avgBitrateBps/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const streamInfos=[];return this.currentIndex.sources.forEach((source=>{const description=new VideoStreamDescription_1.default;description.attendeeId=source.attendeeId,description.groupId=source.groupId,description.streamId=source.streamId,description.maxBitrateKbps=source.maxBitrateKbps,description.avgBitrateKbps=this.convertBpsToKbps(source.avgBitrateBps),description.width=source.width,description.height=source.height,description.maxFrameRate=source.framerate,streamInfos.push(description)})),streamInfos}integrateUplinkPolicyDecision(param){if(param&&param.length){const encodingParam=param[0];this.videoStreamDescription.maxBitrateKbps=encodingParam.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=encodingParam.maxFramerate}}integrateIndexFrame(indexFrame){if(this.currentIndex=indexFrame,!indexFrame)return;const attendeeIdToMainGroupIdMap=new Map;let attendeeWithMultipleGroupIdsExists=!1;for(const source of indexFrame.sources){if(!attendeeIdToMainGroupIdMap.has(source.attendeeId)){attendeeIdToMainGroupIdMap.set(source.attendeeId,source.groupId);continue}const currentGroupId=attendeeIdToMainGroupIdMap.get(source.attendeeId);currentGroupId<source.groupId&&(this.logger.warn(`Old group ID ${currentGroupId} found for attendee ID ${source.attendeeId}, replacing with newer group ID ${source.groupId}`),attendeeIdToMainGroupIdMap.set(source.attendeeId,source.groupId)),attendeeWithMultipleGroupIdsExists=!0}attendeeWithMultipleGroupIdsExists&&(this.currentIndex.sources=this.currentIndex.sources.filter((source=>attendeeIdToMainGroupIdMap.get(source.attendeeId)===source.groupId))),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}remoteVideoUpdateSent(){this.indexForLastRemoteVideoUpdate=this.currentIndex}integrateSubscribeAckFrame(subscribeAck){this.currentSubscribeAck=subscribeAck,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,subscribeAck.allocations&&void 0!==subscribeAck.allocations&&subscribeAck.allocations.length>0&&(this.sendVideoStreamId=subscribeAck.allocations[0].streamId)}integrateBitratesFrame(bitrates){if(this.currentIndex)for(const bitrate of bitrates.bitrates){const source=this.currentIndex.sources.find((source=>source.streamId===bitrate.sourceStreamId));void 0!==source&&(source.avgBitrateBps=bitrate.avgBitrateBps)}}allStreams(){const set=new DefaultVideoStreamIdSet_1.default;if(this.currentIndex)for(const source of this.currentIndex.sources)set.add(source.streamId);return set}allVideoSendingSourcesExcludingSelf(selfAttendeeId){const videoSources=[],attendeeSet=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const stream of this.currentIndex.sources){const{attendeeId,externalUserId,mediaType}=stream;attendeeId!==selfAttendeeId&&mediaType===SignalingProtocol_js_1.SdkStreamMediaType.VIDEO&&(attendeeSet.has(attendeeId)||(videoSources.push({attendee:{attendeeId,externalUserId}}),attendeeSet.add(attendeeId)))}return videoSources}streamSelectionUnderBandwidthConstraint(selfAttendeeId,largeTileAttendeeIds,smallTileAttendeeIds,bandwidthKbps){const newAttendees=new Set;if(this.currentIndex)for(const stream of this.currentIndex.sources)stream.attendeeId!==selfAttendeeId&&stream.mediaType===SignalingProtocol_js_1.SdkStreamMediaType.VIDEO&&(largeTileAttendeeIds.has(stream.attendeeId)||smallTileAttendeeIds.has(stream.attendeeId)||newAttendees.add(stream.attendeeId));const attendeeToStreamDescriptorMap=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(selfAttendeeId),selectionMap=new Map;let usage=0;attendeeToStreamDescriptorMap.forEach(((streams,attendeeId)=>{selectionMap.set(attendeeId,streams[0]),usage+=streams[0].maxBitrateKbps})),usage=this.trySelectHighBitrateForAttendees(attendeeToStreamDescriptorMap,largeTileAttendeeIds,usage,bandwidthKbps,selectionMap),this.trySelectHighBitrateForAttendees(attendeeToStreamDescriptorMap,newAttendees,usage,bandwidthKbps,selectionMap);const streamSelectionSet=new DefaultVideoStreamIdSet_1.default;for(const source of selectionMap.values())streamSelectionSet.add(source.streamId);return streamSelectionSet}highestQualityStreamFromEachGroupExcludingSelf(selfAttendeeId){const set=new DefaultVideoStreamIdSet_1.default;if(this.currentIndex){const maxes=new Map;for(const source of this.currentIndex.sources)source.attendeeId!==selfAttendeeId&&source.mediaType===SignalingProtocol_js_1.SdkStreamMediaType.VIDEO&&(!maxes.has(source.groupId)||source.maxBitrateKbps>maxes.get(source.groupId).maxBitrateKbps)&&maxes.set(source.groupId,source);for(const source of maxes.values())set.add(source.streamId)}return set}numberOfVideoPublishingParticipantsExcludingSelf(selfAttendeeId){return this.highestQualityStreamFromEachGroupExcludingSelf(selfAttendeeId).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(trackId){const streamId=this.streamIdForTrack(trackId);if(void 0===streamId||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${trackId}`),"";const attendeeId=this.subscribeStreamToAttendeeMap.get(streamId);return attendeeId||(this.logger.info(`track ${trackId} (stream ${streamId}) does not correspond to a known attendee`),"")}externalUserIdForTrack(trackId){const streamId=this.streamIdForTrack(trackId);if(void 0===streamId||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${trackId}`),"";const externalUserId=this.subscribeStreamToExternalUserIdMap.get(streamId);return externalUserId||(this.logger.info(`track ${trackId} (stream ${streamId}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(streamId){if(!this.streamToAttendeeMap){if(!this.currentIndex)return"";this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex)}const attendeeId=this.streamToAttendeeMap.get(streamId);return attendeeId||(this.logger.info(`stream ID ${streamId} does not correspond to a known attendee`),"")}attendeeIdForGroupId(groupId){if(!this.groupIdToAttendeeMap){if(!this.currentIndex)return"";this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex)}const attendeeId=this.groupIdToAttendeeMap.get(groupId);return attendeeId||(this.logger.info(`group ID ${groupId} does not correspond to a known attendee`),"")}groupIdForStreamId(streamId){if(this.currentIndex&&this.currentIndex.sources){for(const source of this.currentIndex.sources)if(source.streamId===streamId)return source.groupId;if(this.indexForSubscribe)for(const source of this.indexForSubscribe.sources)if(source.streamId===streamId)return source.groupId;if(this.indexForLastRemoteVideoUpdate)for(const source of this.indexForLastRemoteVideoUpdate.sources)if(source.streamId===streamId)return source.groupId}}StreamIdsInSameGroup(streamId1,streamId2){return this.groupIdForStreamId(streamId1)===this.groupIdForStreamId(streamId2)}streamIdForTrack(trackId){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(trackId)}streamIdForSSRC(ssrcId){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(ssrcId)}overrideStreamIdMappings(previous,current){if(this.subscribeTrackToStreamMap)for(const[track,streamId]of this.subscribeTrackToStreamMap.entries())if(previous===streamId){this.subscribeTrackToStreamMap.set(track,current);break}if(this.subscribeSsrcToStreamMap)for(const[ssrc,streamId]of this.subscribeSsrcToStreamMap.entries())if(previous===streamId){this.subscribeSsrcToStreamMap.set(ssrc,current);break}}groupIdForSSRC(ssrcId){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(ssrcId)}streamsPausedAtSource(){const paused=new DefaultVideoStreamIdSet_1.default;if(this.currentIndex)for(const streamId of this.currentIndex.pausedAtSourceIds)paused.add(streamId);return paused}sendVideoStreamIdFromRid(_rid){return this.sendVideoStreamId}buildTrackToStreamMap(subscribeAck){const map=new Map;this.logger.debug((()=>`trackMap ${JSON.stringify(subscribeAck.tracks)}`));for(const trackMapping of subscribeAck.tracks)trackMapping.trackLabel.length>0&&trackMapping.streamId>0&&map.set(trackMapping.trackLabel,trackMapping.streamId);return map}buildSSRCToStreamMap(subscribeAck){const map=new Map;this.logger.debug((()=>`ssrcMap ${JSON.stringify(subscribeAck.tracks)}`));for(const trackMapping of subscribeAck.tracks)trackMapping.trackLabel.length>0&&trackMapping.streamId>0&&map.set(trackMapping.ssrc,trackMapping.streamId);return map}buildSSRCToGroupMap(subscribeAck){const map=new Map;for(const trackMapping of subscribeAck.tracks)trackMapping.trackLabel.length>0&&trackMapping.streamId>0&&map.set(trackMapping.ssrc,this.groupIdForStreamId(trackMapping.streamId));return map}buildStreamToAttendeeMap(indexFrame){const map=new Map;if(indexFrame)for(const source of indexFrame.sources)map.set(source.streamId,source.attendeeId);return map}buildGroupIdToAttendeeMap(indexFrame){const map=new Map;for(const source of indexFrame.sources)map.set(source.groupId,source.attendeeId);return map}buildStreamExternalUserIdMap(indexFrame){const map=new Map;if(indexFrame)for(const source of indexFrame.sources)source.externalUserId&&map.set(source.streamId,source.externalUserId);return map}trySelectHighBitrateForAttendees(attendeeToStreamDescriptorMap,highAttendees,currentUsage,bandwidthKbps,currentSelectionRef){for(const attendeeId of highAttendees){if(currentUsage>=bandwidthKbps)break;if(attendeeToStreamDescriptorMap.has(attendeeId)){const streams=attendeeToStreamDescriptorMap.get(attendeeId);for(const l of streams.reverse())if(currentUsage-currentSelectionRef.get(attendeeId).maxBitrateKbps+l.maxBitrateKbps<bandwidthKbps){currentUsage=currentUsage-currentSelectionRef.get(attendeeId).maxBitrateKbps+l.maxBitrateKbps,currentSelectionRef.set(attendeeId,l);break}}}return currentUsage}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(selfAttendeeId){const attendeeToStreamDescriptorMap=new Map;if(this.currentIndex)for(const source of this.currentIndex.sources)source.attendeeId!==selfAttendeeId&&source.mediaType===SignalingProtocol_js_1.SdkStreamMediaType.VIDEO&&(attendeeToStreamDescriptorMap.has(source.attendeeId)?attendeeToStreamDescriptorMap.get(source.attendeeId).push(source):attendeeToStreamDescriptorMap.set(source.attendeeId,[source]));return attendeeToStreamDescriptorMap.forEach(((streams,_attendeeId)=>{streams.sort(((stream1,stream2)=>stream1.maxBitrateKbps>stream2.maxBitrateKbps?1:stream1.maxBitrateKbps<stream2.maxBitrateKbps?-1:0))})),attendeeToStreamDescriptorMap}}},"./node_modules/amazon-chime-sdk-js/build/videostreamindex/SimulcastVideoStreamIndex.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js"),DefaultVideoStreamIndex_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamindex/DefaultVideoStreamIndex.js")),VideoStreamDescription_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videostreamindex/VideoStreamDescription.js"));class SimulcastVideoStreamIndex extends DefaultVideoStreamIndex_1.default{constructor(){super(...arguments),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map}localStreamDescriptions(){const clonedDescriptions=[];return this._localStreamInfos.forEach((desc=>{clonedDescriptions.push(desc.clone())})),clonedDescriptions}integrateUplinkPolicyDecision(encodingParams){let hasStreamsToReuse=!0,localStreamIndex=0;for(let i=0;i<encodingParams.length;i++){const targetMaxBitrateKbps=encodingParams[i].maxBitrate/1e3,targetMaxFrameRate=encodingParams[i].maxFramerate;if(hasStreamsToReuse&&i!==this._localStreamInfos.length)0===this._localStreamInfos[localStreamIndex].maxBitrateKbps&&targetMaxBitrateKbps>0&&(this._localStreamInfos[localStreamIndex].timeEnabled=Date.now()),this._localStreamInfos[localStreamIndex].maxBitrateKbps=targetMaxBitrateKbps,this._localStreamInfos[localStreamIndex].maxFrameRate=targetMaxFrameRate,this._localStreamInfos[localStreamIndex].disabledByUplinkPolicy=0===targetMaxBitrateKbps,localStreamIndex++;else{hasStreamsToReuse=!1;const newInfo=new VideoStreamDescription_1.default;newInfo.maxBitrateKbps=targetMaxBitrateKbps,newInfo.maxFrameRate=targetMaxFrameRate,newInfo.disabledByUplinkPolicy=0===targetMaxBitrateKbps,newInfo.rid=encodingParams[i].rid,0!==targetMaxBitrateKbps&&(newInfo.timeEnabled=Date.now()),this._localStreamInfos.push(newInfo),localStreamIndex++}}hasStreamsToReuse&&this._localStreamInfos.splice(localStreamIndex)}integrateBitratesFrame(bitrateFrame){super.integrateBitratesFrame(bitrateFrame);const stillSending=new Set,existingSet=new Set(this.streamIdToBitrateKbpsMap.keys());for(const bitrateMsg of bitrateFrame.bitrates)stillSending.add(bitrateMsg.sourceStreamId),this.streamIdToBitrateKbpsMap.set(bitrateMsg.sourceStreamId,this.convertBpsToKbps(bitrateMsg.avgBitrateBps));for(const id of existingSet)if(!stillSending.has(id)){this.streamIdToBitrateKbpsMap.get(id)===SimulcastVideoStreamIndex.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(id,SimulcastVideoStreamIndex.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(id,SimulcastVideoStreamIndex.NOT_SENDING_STREAM_BITRATE)}this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let msg="";for(const desc of this._localStreamInfos)msg+=`streamId=${desc.streamId} maxBitrate=${desc.maxBitrateKbps} disabledByUplink=${desc.disabledByUplinkPolicy}\n`;this.logger.debug((()=>msg))}integrateIndexFrame(indexFrame){super.integrateIndexFrame(indexFrame);const newIndexStreamIdSet=new Set,existingSet=new Set(this.streamIdToBitrateKbpsMap.keys());for(const stream of this.currentIndex.sources)stream.mediaType===SignalingProtocol_js_1.SdkStreamMediaType.VIDEO&&(newIndexStreamIdSet.add(stream.streamId),this.streamIdToBitrateKbpsMap.has(stream.streamId)||this.streamIdToBitrateKbpsMap.set(stream.streamId,SimulcastVideoStreamIndex.UNSEEN_STREAM_BITRATE));for(const id of existingSet)newIndexStreamIdSet.has(id)||this.streamIdToBitrateKbpsMap.delete(id)}integrateSubscribeAckFrame(subscribeAck){if(super.integrateSubscribeAckFrame(subscribeAck),!subscribeAck.allocations||void 0===subscribeAck.allocations)return;let localStreamStartIndex=0;this._sendRidToVideoStreamIdMap.clear();for(const allocation of subscribeAck.allocations){if(this._localStreamInfos.length<localStreamStartIndex+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[localStreamStartIndex].groupId=allocation.groupId,this._localStreamInfos[localStreamStartIndex].streamId=allocation.streamId,this.streamIdToBitrateKbpsMap.has(allocation.streamId)||this.streamIdToBitrateKbpsMap.set(allocation.streamId,SimulcastVideoStreamIndex.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[localStreamStartIndex].rid,allocation.streamId),localStreamStartIndex++}}sendVideoStreamIdFromRid(rid){let res=0;return this._sendRidToVideoStreamIdMap.has(rid)&&(res=this._sendRidToVideoStreamIdMap.get(rid)),res}}exports.default=SimulcastVideoStreamIndex,SimulcastVideoStreamIndex.UNSEEN_STREAM_BITRATE=-2,SimulcastVideoStreamIndex.RECENTLY_INACTIVE_STREAM_BITRATE=-1,SimulcastVideoStreamIndex.NOT_SENDING_STREAM_BITRATE=0,SimulcastVideoStreamIndex.BitratesMsgFrequencyMs=4e3},"./node_modules/amazon-chime-sdk-js/build/videostreamindex/VideoStreamDescription.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const SignalingProtocol_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/signalingprotocol/SignalingProtocol.js");class VideoStreamDescription{constructor(attendeeId,groupId,streamId,maxBitrateKbps,avgBitrateKbps){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=attendeeId,this.groupId=groupId,this.streamId=streamId,this.maxBitrateKbps=maxBitrateKbps,this.avgBitrateKbps=avgBitrateKbps}clone(){const newInfo=new VideoStreamDescription;return newInfo.attendeeId=this.attendeeId,newInfo.groupId=this.groupId,newInfo.streamId=this.streamId,newInfo.ssrc=this.ssrc,newInfo.trackLabel=this.trackLabel,newInfo.maxBitrateKbps=this.maxBitrateKbps,newInfo.avgBitrateKbps=this.avgBitrateKbps,newInfo.maxFrameRate=this.maxFrameRate,newInfo.timeEnabled=this.timeEnabled,newInfo.disabledByUplinkPolicy=this.disabledByUplinkPolicy,newInfo.width=this.width,newInfo.height=this.height,newInfo}toStreamDescriptor(){const descriptor=SignalingProtocol_js_1.SdkStreamDescriptor.create();return descriptor.mediaType=SignalingProtocol_js_1.SdkStreamMediaType.VIDEO,descriptor.trackLabel=this.trackLabel,descriptor.attendeeId=this.attendeeId,descriptor.streamId=this.streamId,descriptor.groupId=this.groupId,descriptor.framerate=this.maxFrameRate,descriptor.maxBitrateKbps=this.disabledByUplinkPolicy?0:this.maxBitrateKbps,descriptor.avgBitrateBps=this.avgBitrateKbps,descriptor}totalPixels(){return this.width*this.height}}exports.default=VideoStreamDescription},"./node_modules/amazon-chime-sdk-js/build/videotile/DefaultVideoElementResolutionMonitor.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class DefaultVideoElementResolutionMonitor{constructor(){this.observerQueue=new Set,this.element=null,this.resizeObserver=new ResizeObserver((entries=>{for(const entry of entries){const{width,height}=entry.contentRect;this.notifyObservers(width,height)}}))}notifyObservers(newWidth,newHeight){for(const observer of this.observerQueue)observer.videoElementResolutionChanged(newWidth,newHeight)}registerObserver(observer){this.observerQueue.add(observer)}removeObserver(observer){this.observerQueue.delete(observer)}bindVideoElement(newElement){this.element!==newElement&&(this.element&&this.resizeObserver.unobserve(this.element),this.element=newElement,this.element&&this.resizeObserver.observe(this.element))}}},"./node_modules/amazon-chime-sdk-js/build/videotile/DefaultVideoTile.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js")),DefaultModality_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/modality/DefaultModality.js")),VideoTileState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotile/VideoTileState.js"));class DefaultVideoTile{constructor(tileId,localTile,tileController,devicePixelRatioMonitor,resolutionMonitor=void 0){this.tileController=tileController,this.devicePixelRatioMonitor=devicePixelRatioMonitor,this.resolutionMonitor=resolutionMonitor,this.tileState=new VideoTileState_1.default,this.tileState.tileId=tileId,this.tileState.localTile=localTile,this.devicePixelRatioMonitor.registerObserver(this)}static connectVideoStreamToVideoElement(videoStream,videoElement,localTile){const transform=localTile&&"environment"!==videoStream.getVideoTracks()[0].getSettings().facingMode?"rotateY(180deg)":"";if(DefaultVideoTile.setVideoElementFlag(videoElement,"disablePictureInPicture",localTile),DefaultVideoTile.setVideoElementFlag(videoElement,"disableRemotePlayback",localTile),videoElement.style.transform!==transform&&(videoElement.style.transform=transform),videoElement.hasAttribute("controls")&&videoElement.removeAttribute("controls"),videoElement.hasAttribute("autoplay")||videoElement.setAttribute("autoplay","true"),videoElement.hasAttribute("playsinline")||videoElement.setAttribute("playsinline","true"),videoElement.hasAttribute("muted")||(videoElement.setAttribute("muted","true"),videoElement.muted=!0),videoElement.srcObject!==videoStream&&(videoElement.srcObject=videoStream,(new DefaultBrowserBehavior_1.default).requiresVideoPlayWorkaround()&&videoElement.paused)){const promise=videoElement.play();void 0!==promise&&promise.catch((error=>{console.warn("Error playing video in Safari",error)})).then((()=>{console.debug("Video played successfully in Safari")}))}}static disconnectVideoStreamFromVideoElement(videoElement,dueToPause,keepLastFrameWhenPaused=!1){if(videoElement)if(dueToPause)keepLastFrameWhenPaused||(videoElement.srcObject=null,videoElement.style.transform="");else{if(!videoElement.srcObject)return;videoElement.pause(),videoElement.style.transform="",DefaultVideoTile.setVideoElementFlag(videoElement,"disablePictureInPicture",!1),DefaultVideoTile.setVideoElementFlag(videoElement,"disableRemotePlayback",!1),videoElement.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&DefaultVideoTile.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new VideoTileState_1.default}devicePixelRatioChanged(newDevicePixelRatio){this.tileState.devicePixelRatio=newDevicePixelRatio,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(attendeeId,localTile,mediaStream,contentWidth,contentHeight,streamId,externalUserId,groupId){let tileUpdated=!1;this.tileState.boundAttendeeId!==attendeeId&&(this.tileState.boundAttendeeId=attendeeId,new DefaultModality_1.default(attendeeId).hasModality(DefaultModality_1.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),tileUpdated=!0),this.tileState.boundExternalUserId!==externalUserId&&(this.tileState.boundExternalUserId=externalUserId,tileUpdated=!0),this.tileState.localTile!==localTile&&(this.tileState.localTile=localTile,tileUpdated=!0),this.tileState.boundVideoStream!==mediaStream&&(this.tileState.boundVideoStream=mediaStream,tileUpdated=!0),this.tileState.videoStreamContentWidth!==contentWidth&&(this.tileState.videoStreamContentWidth=contentWidth,tileUpdated=!0),this.tileState.videoStreamContentHeight!==contentHeight&&(this.tileState.videoStreamContentHeight=contentHeight,tileUpdated=!0),this.tileState.streamId!==streamId&&(this.tileState.streamId=streamId,tileUpdated=!0),this.tileState.groupId!==groupId&&(this.tileState.groupId=groupId,tileUpdated=!0),tileUpdated&&this.sendTileStateUpdate()}bindVideoElement(videoElement){var _a;let tileUpdated=!1;this.tileState.boundVideoElement!==videoElement&&(this.tileState.boundVideoElement=videoElement,null===(_a=this.resolutionMonitor)||void 0===_a||_a.bindVideoElement(this.tileState.boundVideoElement),tileUpdated=!0),null!==this.tileState.boundVideoElement?(this.tileState.videoElementCSSWidthPixels!==videoElement.clientWidth&&(this.tileState.videoElementCSSWidthPixels=videoElement.clientWidth,tileUpdated=!0),this.tileState.videoElementCSSHeightPixels!==videoElement.clientHeight&&(this.tileState.videoElementCSSHeightPixels=videoElement.clientHeight,tileUpdated=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),tileUpdated&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return!this.tileState.poorConnection&&(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return!!this.tileState.poorConnection&&(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0)}capture(){if(!this.tileState.active)return null;const canvas=document.createElement("canvas"),video=this.tileState.boundVideoElement;canvas.width=video.videoWidth||video.width,canvas.height=video.videoHeight||video.height;const ctx=canvas.getContext("2d");return ctx.drawImage(video,0,0,canvas.width,canvas.height),ctx.getImageData(0,0,canvas.width,canvas.height)}setStreamId(id){this.tileState.streamId=id,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!(this.tileState.paused||this.tileState.poorConnection||!this.tileState.boundAttendeeId||!this.tileState.boundVideoElement||!this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){"number"==typeof this.tileState.videoElementCSSWidthPixels&&"number"==typeof this.tileState.videoElementCSSHeightPixels?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?DefaultVideoTile.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):DefaultVideoTile.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(videoElement,flag,value){flag in videoElement&&(videoElement[flag]=value)}}exports.default=DefaultVideoTile},"./node_modules/amazon-chime-sdk-js/build/videotile/VideoTileState.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class VideoTileState{constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null,this.groupId=null}clone(){const cloned=new VideoTileState;return cloned.tileId=this.tileId,cloned.localTile=this.localTile,cloned.isContent=this.isContent,cloned.active=this.active,cloned.paused=this.paused,cloned.poorConnection=this.poorConnection,cloned.boundAttendeeId=this.boundAttendeeId,cloned.boundExternalUserId=this.boundExternalUserId,cloned.boundVideoStream=this.boundVideoStream,cloned.boundVideoElement=this.boundVideoElement,cloned.nameplate=this.nameplate,cloned.videoStreamContentWidth=this.videoStreamContentWidth,cloned.videoStreamContentHeight=this.videoStreamContentHeight,cloned.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,cloned.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,cloned.devicePixelRatio=this.devicePixelRatio,cloned.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,cloned.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,cloned.streamId=this.streamId,cloned.groupId=this.groupId,cloned}}exports.default=VideoTileState},"./node_modules/amazon-chime-sdk-js/build/videotilecontroller/DefaultVideoTileController.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const VideoQualitySettings_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicecontroller/VideoQualitySettings.js")),DefaultDevicePixelRatioMonitor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicepixelratiomonitor/DefaultDevicePixelRatioMonitor.js")),DevicePixelRatioWindowSource_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/devicepixelratiosource/DevicePixelRatioWindowSource.js")),Types_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Types.js"),DefaultVideoElementResolutionMonitor_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotile/DefaultVideoElementResolutionMonitor.js")),DefaultVideoTile_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotile/DefaultVideoTile.js"));exports.default=class DefaultVideoTileController{constructor(tileFactory,audioVideoController,logger){this.tileFactory=tileFactory,this.audioVideoController=audioVideoController,this.logger=logger,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.resolutionObservers=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=audioVideoController.configuration.keepLastFrameWhenPaused}createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new DefaultDevicePixelRatioMonitor_1.default(new DevicePixelRatioWindowSource_1.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return __awaiter(this,void 0,void 0,(function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const monitor=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,monitor.destroy()}))}bindVideoElement(tileId,videoElement){const tile=this.getVideoTile(tileId);null!==tile?tile.bindVideoElement(videoElement):this.logger.warn(`Ignoring video element binding for unknown tile id ${tileId}`)}unbindVideoElement(tileId,cleanUpVideoElement=!0){const tile=this.getVideoTile(tileId);if(null===tile)return void this.logger.warn(`Ignoring video element unbinding for unknown tile id ${tileId}`);this.logger.info("Unbinding the video element"),this.notifyRemoteObserversOfUnbound(tile.state().boundAttendeeId);const videoElement=tile.stateRef().boundVideoElement;tile.bindVideoElement(null),cleanUpVideoElement&&(this.logger.info("Cleaning up the video element"),DefaultVideoTile_1.default.disconnectVideoStreamFromVideoElement(videoElement,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===VideoQualitySettings_1.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const tile=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),tile.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!(!this.currentLocalTile||!this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(tileId){const tile=this.getVideoTile(tileId);tile&&(this.currentPausedTilesByIds.has(tileId)||(this.audioVideoController.pauseReceivingStream(tile.stateRef().streamId),this.currentPausedTilesByIds.add(tileId)),tile.pause())}unpauseVideoTile(tileId){const tile=this.getVideoTile(tileId);tile&&(this.currentPausedTilesByIds.has(tileId)&&(this.audioVideoController.resumeReceivingStream(tile.stateRef().streamId),this.currentPausedTilesByIds.delete(tileId)),tile.unpause())}getVideoTile(tileId){return this.tileMap.has(tileId)?this.tileMap.get(tileId):null}getVideoTileArea(tile){const state=tile.state();let tileHeight=0,tileWidth=0;return state.boundVideoElement&&(tileHeight=state.boundVideoElement.clientHeight*state.devicePixelRatio,tileWidth=state.boundVideoElement.clientWidth*state.devicePixelRatio),tileHeight*tileWidth}getAllRemoteVideoTiles(){const result=new Array;return this.tileMap.forEach(((tile,tileId)=>{this.currentLocalTile&&tileId===this.currentLocalTile.id()||result.push(tile)})),result}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(localTile=!1){const tileId=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const tile=this.tileFactory.makeTile(tileId,localTile,this,this.devicePixelRatioMonitor,this.createResolutionMonitor(tileId));return this.tileMap.set(tileId,tile),tile}removeVideoTile(tileId){if(!this.tileMap.has(tileId))return;const tile=this.tileMap.get(tileId);this.currentLocalTile===tile&&(this.currentLocalTile=null),tile.destroy(),this.tileMap.delete(tileId),this.audioVideoController.forEachObserver((observer=>{Types_1.Maybe.of(observer.videoTileWasRemoved).map((f=>f.bind(observer)(tileId)))})),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(attendeeId){const tilesRemoved=[];for(const tile of this.getAllVideoTiles()){const state=tile.state();state.boundAttendeeId===attendeeId&&(this.removeVideoTile(state.tileId),tilesRemoved.push(state.tileId))}return tilesRemoved}removeAllVideoTiles(){const tileIds=Array.from(this.tileMap.keys());for(const tileId of tileIds)this.removeVideoTile(tileId)}sendTileStateUpdate(tileState){this.audioVideoController.forEachObserver((observer=>{Types_1.Maybe.of(observer.videoTileDidUpdate).map((f=>f.bind(observer)(tileState)))}))}haveVideoTilesWithStreams(){for(const tile of this.getAllVideoTiles())if(tile.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(attendeeId){return!!this.getVideoTileForAttendeeId(attendeeId)}getVideoTileForAttendeeId(attendeeId){for(const tile of this.getAllVideoTiles()){if(tile.state().boundAttendeeId===attendeeId)return tile}}captureVideoTile(tileId){const tile=this.getVideoTile(tileId);return tile?tile.capture():null}registerVideoTileResolutionObserver(observer){this.resolutionObservers.add(observer)}removeVideoTileResolutionObserver(observer){this.resolutionObservers.delete(observer)}notifyResolutionObserversOfChange(attendeeId,newWidth,newHeight){for(const observer of this.resolutionObservers)observer.videoTileResolutionDidChange(attendeeId,newWidth,newHeight)}notifyRemoteObserversOfUnbound(attendeeId){for(const observer of this.resolutionObservers)observer.videoTileUnbound(attendeeId)}createResolutionMonitor(tileId){const observer=new class{constructor(controller,tileId){this.controller=controller,this.tileId=tileId}videoElementResolutionChanged(newWidth,newHeight){const tile=this.controller.getVideoTile(this.tileId);if(tile){const attendeeId=tile.state().boundAttendeeId;this.controller.notifyResolutionObserversOfChange(attendeeId,newWidth,newHeight)}}}(this,tileId),resolutionMonitor=new DefaultVideoElementResolutionMonitor_1.default;return resolutionMonitor.registerObserver(observer),resolutionMonitor}findOrCreateLocalVideoTile(){return this.currentLocalTile||(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId)),this.currentLocalTile}}},"./node_modules/amazon-chime-sdk-js/build/videotilefactory/DefaultVideoTileFactory.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultVideoTile_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videotile/DefaultVideoTile.js"));exports.default=class DefaultVideoTileFactory{makeTile(tileId,localTile,tileController,devicePixelRatioMonitor,resolutionMonitor){return new DefaultVideoTile_1.default(tileId,localTile,tileController,devicePixelRatioMonitor,resolutionMonitor)}}},"./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/BitrateParameters.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class BitrateParameters{}},"./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/DefaultSimulcastUplinkPolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SimulcastLayers_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/simulcastlayers/SimulcastLayers.js")),SimulcastTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/SimulcastTransceiverController.js")),Types_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Types.js"),DefaultVideoCaptureAndEncodeParameter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videocaptureandencodeparameter/DefaultVideoCaptureAndEncodeParameter.js")),BitrateParameters_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/BitrateParameters.js"));class DefaultSimulcastUplinkPolicy{constructor(selfAttendeeId,logger){this.selfAttendeeId=selfAttendeeId,this.logger=logger,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.videoIndex=null,this.observerQueue=new Set,this.hiTargetBitrateKbps=DefaultSimulcastUplinkPolicy.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=DefaultSimulcastUplinkPolicy.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=DefaultSimulcastUplinkPolicy.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new DefaultVideoCaptureAndEncodeParameter_1.default(0,0,0,0,!0),this.parametersInEffect=new DefaultVideoCaptureAndEncodeParameter_1.default(0,0,0,0,!0),this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}updateConnectionMetric(_metrics){}calculateEncodingParameters(){const newBitrates=[new BitrateParameters_1.default,new BitrateParameters_1.default,new BitrateParameters_1.default];this.shouldDisableSimulcast?(this.newActiveStreams=0,newBitrates[0].maxBitrateKbps=0,newBitrates[1].maxBitrateKbps=this.hiTargetBitrateKbps,newBitrates[2].maxBitrateKbps=0):this.numSenders<=4?(this.newActiveStreams=1,newBitrates[0].maxBitrateKbps=this.lowTargetBitrateKbps,newBitrates[1].maxBitrateKbps=0,newBitrates[2].maxBitrateKbps=this.hiTargetBitrateKbps):(this.newActiveStreams=2,newBitrates[0].maxBitrateKbps=2*this.lowTargetBitrateKbps/3,newBitrates[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:.6*this.midTargetBitrateKbps,newBitrates[2].maxBitrateKbps=0);const bitrates=newBitrates.map(((v,_i,_a)=>v.maxBitrateKbps));return this.newQualityMap=this.fillEncodingParamWithBitrates(bitrates),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`),this.newQualityMap}chooseMediaTrackConstraints(){}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(videoIndex){const numSenders=videoIndex.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,numSendersChanged=numSenders!==this.numSenders,numParticipants=videoIndex.numberOfParticipants(),newShouldDisableSimulcast=numParticipants>=0&&numParticipants<=2,shouldDisableSimulcastChanged=this.shouldDisableSimulcast!==newShouldDisableSimulcast;this.numSenders=numSenders,this.shouldDisableSimulcast=newShouldDisableSimulcast,this.optimalParameters=new DefaultVideoCaptureAndEncodeParameter_1.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=videoIndex,(numSendersChanged||shouldDisableSimulcastChanged)&&(this.newQualityMap=this.calculateEncodingParameters())}wantsResubscribe(){return!this.encodingParametersEqual()}compareEncodingParameter(encoding1,encoding2){return JSON.stringify(encoding1)===JSON.stringify(encoding2)}encodingParametersEqual(){let different=!1;for(const ridName of SimulcastTransceiverController_1.default.NAME_ARR_ASCENDING)if(different=different||!this.compareEncodingParameter(this.newQualityMap.get(ridName),this.currentQualityMap.get(ridName)),different)break;return!different}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(_idealMaxBandwidthKbps){}setHasBandwidthPriority(_hasBandwidthPriority){}setHighResolutionFeatureEnabled(enabled){this.enableFhdVideo=enabled,this.hiTargetBitrateKbps=enabled?DefaultSimulcastUplinkPolicy.kHiTargetBitrateKbpsFhd:DefaultSimulcastUplinkPolicy.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=enabled?DefaultSimulcastUplinkPolicy.kMidTargetBitrateKbpsFhd:DefaultSimulcastUplinkPolicy.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=enabled?DefaultSimulcastUplinkPolicy.kLowTargetBitrateKbpsFhd:DefaultSimulcastUplinkPolicy.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(bitratesKbps){const newMap=new Map,nameArr=SimulcastTransceiverController_1.default.NAME_ARR_ASCENDING,bitrateArr=bitratesKbps;let scale=this.shouldDisableSimulcast?1:4;for(let i=0;i<nameArr.length;i++){const ridName=nameArr[i];newMap.set(ridName,{rid:ridName,active:bitrateArr[i]>0,scaleResolutionDownBy:Math.max(scale,1),maxBitrate:1e3*bitrateArr[i]}),scale/=2}return newMap}getQualityMapString(params){let qualityString="";return 3===this.videoIndex.localStreamDescriptions().length&&params.forEach((value=>{qualityString+=`{ rid: ${value.rid} active:${value.active} maxBitrate:${value.maxBitrate}}`})),qualityString}getEncodingSimulcastLayer(activeStreams){switch(activeStreams){case 0:return SimulcastLayers_1.default.High;case 1:return SimulcastLayers_1.default.LowAndHigh;case 2:return SimulcastLayers_1.default.LowAndMedium}}publishEncodingSimulcastLayer(){const simulcastLayers=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver((observer=>{Types_1.Maybe.of(observer.encodingSimulcastLayersDidChange).map((f=>f.bind(observer)(simulcastLayers)))}))}addObserver(observer){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(observer)}removeObserver(observer){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(observer)}forEachObserver(observerFunc){for(const observer of this.observerQueue)observerFunc(observer)}}exports.default=DefaultSimulcastUplinkPolicy,DefaultSimulcastUplinkPolicy.kHiTargetBitrateKbpsHd=1200,DefaultSimulcastUplinkPolicy.kMidTargetBitrateKbpsHd=600,DefaultSimulcastUplinkPolicy.kLowTargetBitrateKbpsHd=300,DefaultSimulcastUplinkPolicy.kHiTargetBitrateKbpsFhd=2e3,DefaultSimulcastUplinkPolicy.kMidTargetBitrateKbpsFhd=1e3,DefaultSimulcastUplinkPolicy.kLowTargetBitrateKbpsFhd=500},"./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/DefaultSimulcastUplinkPolicyForContentShare.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const SimulcastContentShareTransceiverController_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/transceivercontroller/SimulcastContentShareTransceiverController.js"));exports.default=class DefaultSimulcastUplinkPolicyForContentShare{constructor(_logger,encodingParams){this.encodingParams=encodingParams,this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}updateConnectionMetric(_metrics){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m;const newMap=new Map,nameArr=SimulcastContentShareTransceiverController_1.default.NAME_ARR_ASCENDING;return newMap.set(nameArr[0],{rid:nameArr[0],active:!0,scaleResolutionDownBy:(null===(_b=null===(_a=this.encodingParams)||void 0===_a?void 0:_a.low)||void 0===_b?void 0:_b.scaleResolutionDownBy)||2,maxBitrate:1e3*((null===(_d=null===(_c=this.encodingParams)||void 0===_c?void 0:_c.low)||void 0===_d?void 0:_d.maxBitrateKbps)||this.defaultLowTargetBitrateKbps),maxFramerate:(null===(_f=null===(_e=this.encodingParams)||void 0===_e?void 0:_e.low)||void 0===_f?void 0:_f.maxFramerate)||5}),newMap.set(nameArr[1],{rid:nameArr[1],active:!0,scaleResolutionDownBy:(null===(_h=null===(_g=this.encodingParams)||void 0===_g?void 0:_g.high)||void 0===_h?void 0:_h.scaleResolutionDownBy)||1,maxBitrate:1e3*((null===(_k=null===(_j=this.encodingParams)||void 0===_j?void 0:_j.high)||void 0===_k?void 0:_k.maxBitrateKbps)||this.defaultHiTargetBitrateKbps),maxFramerate:null===(_m=null===(_l=this.encodingParams)||void 0===_l?void 0:_l.high)||void 0===_m?void 0:_m.maxFramerate}),newMap}updateIndex(_videoIndex){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(_idealMaxBandwidthKbps){}setHasBandwidthPriority(_hasBandwidthPriority){}setHighResolutionFeatureEnabled(enabled){this.enableUhdContent=enabled,this.defaultHiTargetBitrateKbps=enabled?2e3:1200,this.defaultLowTargetBitrateKbps=enabled?500:300}addObserver(_observer){}removeObserver(_observer){}forEachObserver(_observerFunc){}}},"./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/NScaleVideoUplinkBandwidthPolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultVideoCaptureAndEncodeParameter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videocaptureandencodeparameter/DefaultVideoCaptureAndEncodeParameter.js"));class NScaleVideoUplinkBandwidthPolicy{constructor(selfAttendeeId,scaleResolution=!0,logger=void 0,browserBehavior=void 0){this.selfAttendeeId=selfAttendeeId,this.scaleResolution=scaleResolution,this.logger=logger,this.browserBehavior=browserBehavior,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new DefaultVideoCaptureAndEncodeParameter_1.default(0,0,0,0,!1),this.parametersInEffect=new DefaultVideoCaptureAndEncodeParameter_1.default(0,0,0,0,!1),this.encodingParamMap.set(NScaleVideoUplinkBandwidthPolicy.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(_metrics){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(videoIndex){var _a;let hasLocalVideo=!0;this.transceiverController&&(hasLocalVideo=this.transceiverController.hasVideoInput());const numberOfPublishedVideoSources=videoIndex.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(hasLocalVideo?1:0),numParticipants=videoIndex.numberOfParticipants();this.numParticipants!==numParticipants||this.numberOfPublishedVideoSources!==numberOfPublishedVideoSources?(this.numberOfPublishedVideoSources=numberOfPublishedVideoSources,this.numParticipants=numParticipants,this.updateOptimalParameters()):null===(_a=this.logger)||void 0===_a||_a.debug("Skipping update index; Number of participants has not changed")}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let scale=1;if(this.transceiverController){const settings=this.getStreamCaptureSetting();if(settings){scale=this.calculateEncodingParameters(settings).scaleResolutionDownBy}}this.optimalParameters=new DefaultVideoCaptureAndEncodeParameter_1.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,scale,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let width=640;return this.getNumberOfPublishedVideoSources()>4&&(width=320),width}captureHeight(){let height=384;return this.getNumberOfPublishedVideoSources()>4&&(height=192),height}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let rate=0;return rate=this.getNumberOfPublishedVideoSources()<=2?this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?2*this.idealMaxBandwidthKbps/3:(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(rate)}setIdealMaxBandwidthKbps(idealMaxBandwidthKbps){this.idealMaxBandwidthKbps=idealMaxBandwidthKbps}setHasBandwidthPriority(hasBandwidthPriority){this.hasBandwidthPriority=hasBandwidthPriority}setTransceiverController(transceiverController){this.transceiverController=transceiverController}setSVCEnabled(enable){var _a;this.enableSVC=enable,null===(_a=this.logger)||void 0===_a||_a.info(`setSVCEnabled, enable: ${enable}}`)}setHighResolutionFeatureEnabled(enabled){this.enableHighResolutionFeature=enabled}updateTransceiverController(){return __awaiter(this,void 0,void 0,(function*(){const settings=this.getStreamCaptureSetting();if(!settings)return;const encodingParams=this.calculateEncodingParameters(settings);this.shouldUpdateEndcodingParameters(encodingParams)&&(this.encodingParamMap.set(NScaleVideoUplinkBandwidthPolicy.encodingMapKey,encodingParams),this.transceiverController.setEncodingParameters(this.encodingParamMap))}))}shouldUpdateEndcodingParameters(encoding){var _a,_b;const transceiverEncoding=null===(_b=null===(_a=this.transceiverController.localVideoTransceiver().sender.getParameters())||void 0===_a?void 0:_a.encodings)||void 0===_b?void 0:_b[0];return encoding.maxBitrate!==(null==transceiverEncoding?void 0:transceiverEncoding.maxBitrate)||encoding.scaleResolutionDownBy!==(null==transceiverEncoding?void 0:transceiverEncoding.scaleResolutionDownBy)||(null==encoding?void 0:encoding.scalabilityMode)!==(null==transceiverEncoding?void 0:transceiverEncoding.scalabilityMode)}calculateEncodingParameters(setting){var _a,_b,_c;const maxBitrate=1e3*this.maxBandwidthKbps();let scale=1,targetHeight=720;if(void 0!==setting.height&&void 0!==setting.width&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(targetHeight=NScaleVideoUplinkBandwidthPolicy.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),NScaleVideoUplinkBandwidthPolicy.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],480===targetHeight&&(null===(_a=this.browserBehavior)||void 0===_a?void 0:_a.disable480pResolutionScaleDown())&&(targetHeight=360),scale=Math.max(Math.min(setting.height,setting.width)/targetHeight,1),null===(_b=this.logger)||void 0===_b||_b.info(`Resolution scale factor is ${scale} for capture resolution ${setting.width}x${setting.height}. New dimension is ${setting.width/scale}x${setting.height/scale}`)),this.enableSVC){let scalabilityMode;return scalabilityMode=this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?"L1T1":"L3T3",null===(_c=this.logger)||void 0===_c||_c.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${maxBitrate}  targetHeight: ${targetHeight}  scalabilityMode: ${scalabilityMode}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:scale,maxBitrate,scalabilityMode}}return{scaleResolutionDownBy:scale,maxBitrate}}getStreamCaptureSetting(){var _a,_b,_c,_d;return null===(_d=null===(_c=null===(_b=null===(_a=this.transceiverController)||void 0===_a?void 0:_a.localVideoTransceiver())||void 0===_b?void 0:_b.sender)||void 0===_c?void 0:_c.track)||void 0===_d?void 0:_d.getSettings()}getNumberOfPublishedVideoSources(){var _a;return null!==(_a=this.numberOfPublishedVideoSources)&&void 0!==_a?_a:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(meetingSupportedVideoSendCodecPreferences,videoSendCodecPreferences){const codecs=null!=meetingSupportedVideoSendCodecPreferences?meetingSupportedVideoSendCodecPreferences:videoSendCodecPreferences,isUsingSVCCodec=codecs.length>0&&NScaleVideoUplinkBandwidthPolicy.SVCCodecNames.includes(codecs[0].codecName);isUsingSVCCodec!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=isUsingSVCCodec,this.updateOptimalParameters())}}exports.default=NScaleVideoUplinkBandwidthPolicy,NScaleVideoUplinkBandwidthPolicy.encodingMapKey="video",NScaleVideoUplinkBandwidthPolicy.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],NScaleVideoUplinkBandwidthPolicy.SVCCodecNames=["VP9"]},"./node_modules/amazon-chime-sdk-js/build/videouplinkbandwidthpolicy/NoVideoUplinkBandwidthPolicy.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultVideoCaptureAndEncodeParameter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/videocaptureandencodeparameter/DefaultVideoCaptureAndEncodeParameter.js"));exports.default=class NoVideoUplinkBandwidthPolicy{constructor(){}updateConnectionMetric(_metrics){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(_videoIndex){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new DefaultVideoCaptureAndEncodeParameter_1.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(_idealMaxBandwidthKbps){}setHasBandwidthPriority(_hasBandwidthPriority){}setHighResolutionFeatureEnabled(_enabled){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}}},"./node_modules/amazon-chime-sdk-js/build/voicefocus/LoggerAdapter.js":(__unused_webpack_module,exports)=>{"use strict";function stringify(args){return args.map((v=>"object"==typeof v?JSON.stringify(v):`${v}`)).join(" ")}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class LoggerAdapter{constructor(base){this.base=base}debug(...args){this.base.debug(stringify(args))}info(...args){this.base.info(stringify(args))}warn(...args){this.base.warn(stringify(args))}error(...args){this.base.error(stringify(args))}}},"./node_modules/amazon-chime-sdk-js/build/voicefocus/VoiceFocusDeviceTransformer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VoiceFocusDeviceTransformer=void 0;const voicefocus_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/voicefocus.js"),Utils_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/build/utils/Utils.js"),Versioning_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/versioning/Versioning.js")),LoggerAdapter_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/voicefocus/LoggerAdapter.js")),VoiceFocusTransformDevice_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/voicefocus/VoiceFocusTransformDevice.js")),VoiceFocusTransformDeviceDelegate_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/voicefocus/VoiceFocusTransformDeviceDelegate.js"));class VoiceFocusDeviceTransformer{constructor(spec,{preload=!0,logger,fetchBehavior=VoiceFocusDeviceTransformer.defaultFetchBehavior()},config){this.spec=spec,this.supported=!0,this.logger=logger,this.vfLogger=logger?new LoggerAdapter_1.default(logger):void 0,this.preload=preload,this.fetchBehavior=fetchBehavior,this.spec=VoiceFocusDeviceTransformer.augmentSpec(this.spec),config&&(this.configuration=Promise.resolve(config))}static isSupported(spec,options){var _a,_b;const opts={fetchBehavior:VoiceFocusDeviceTransformer.defaultFetchBehavior(),logger:(null==options?void 0:options.logger)?new LoggerAdapter_1.default(options.logger):void 0};if(Utils_1.isIFramed()){if(!1===(null==options?void 0:options.allowIFrame))return null===(_a=null==options?void 0:options.logger)||void 0===_a||_a.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);null===(_b=null==options?void 0:options.logger)||void 0===_b||_b.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return voicefocus_1.VoiceFocus.isSupported(VoiceFocusDeviceTransformer.augmentSpec(spec),opts)}static create(spec={},options={},config,createMeetingResponse,createAttendeeResponse){var _a,_b,_c;return __awaiter(this,void 0,void 0,(function*(){createMeetingResponse&&createMeetingResponse.Meeting.Meeting&&(createMeetingResponse=createMeetingResponse.Meeting);const meetingFeaturesAllowsES="AVAILABLE"===(null===(_c=null===(_b=null===(_a=null==createMeetingResponse?void 0:createMeetingResponse.Meeting)||void 0===_a?void 0:_a.MeetingFeatures)||void 0===_b?void 0:_b.Audio)||void 0===_c?void 0:_c.EchoReduction),forbiddenConfig=config&&!0===config.supported&&"ns_es"===config.model.name&&!meetingFeaturesAllowsES,forbiddenSpec="ns_es"===spec.name&&!meetingFeaturesAllowsES;if(forbiddenConfig||forbiddenSpec)throw new Error("Echo Reduction requested but not enabled.");const transformer=new VoiceFocusDeviceTransformer(spec,options,config);return yield transformer.init(),transformer}))}static configure(spec={},options={}){return __awaiter(this,void 0,void 0,(function*(){return new VoiceFocusDeviceTransformer(spec,options,void 0).configure(!0)}))}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(device,nodeOptions){return __awaiter(this,void 0,void 0,(function*(){if(this.supported)try{const preload=!0,[vf,delegate]=yield this.allocateVoiceFocus(preload),options=Object.assign(Object.assign({},nodeOptions),{es:"ns_es"===this.spec.name});return new VoiceFocusTransformDevice_1.default(device,vf,delegate,options)}catch(e){return}}))}static destroyVoiceFocus(transformer){var _a;return __awaiter(this,void 0,void 0,(function*(){null===(_a=null==transformer?void 0:transformer.vf)||void 0===_a||_a.destroy()}))}static augmentSpec(spec){return spec&&(spec.assetGroup||spec.revisionID)?spec:Object.assign(Object.assign({},spec),{assetGroup:VoiceFocusDeviceTransformer.currentSDKAssetGroup()})}configure(preResolve=!1){return __awaiter(this,void 0,void 0,(function*(){const options={fetchBehavior:this.fetchBehavior,preResolve,logger:this.vfLogger};return voicefocus_1.VoiceFocus.configure(this.spec,options)}))}init(){var _a;return __awaiter(this,void 0,void 0,(function*(){this.configuration||(this.configuration=this.configure());const config=yield this.configuration;if(config.supported){this.pendingVoiceFocus=this.createVoiceFocus(config,this.preload);try{yield this.pendingVoiceFocus}catch(e){null===(_a=this.logger)||void 0===_a||_a.error(`Unable to initialize Amazon Voice Focus: ${e}`),this.supported=!1}}else this.supported=!1}))}createVoiceFocus(config,preload){return __awaiter(this,void 0,void 0,(function*(){const delegate=new VoiceFocusTransformDeviceDelegate_1.default;return this.vf=yield voicefocus_1.VoiceFocus.init(config,{delegate,preload,logger:this.vfLogger}),[this.vf,delegate]}))}allocateVoiceFocus(preload){return __awaiter(this,void 0,void 0,(function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const vf=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,vf}return this.createVoiceFocus(yield this.configuration,preload)}))}static majorVersion(){return Versioning_1.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return Versioning_1.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const v=this.majorVersion();return v?`sdk-${v}`:"stable-v1"}static defaultFetchBehavior(){const version=VoiceFocusDeviceTransformer.majorMinorVersion()||"unknown",ua=Versioning_1.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(version)}&ua=${encodeURIComponent(ua)}`}}}exports.VoiceFocusDeviceTransformer=VoiceFocusDeviceTransformer,exports.default=VoiceFocusDeviceTransformer},"./node_modules/amazon-chime-sdk-js/build/voicefocus/VoiceFocusTransformDevice.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const DefaultBrowserBehavior_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/browserbehavior/DefaultBrowserBehavior.js"));class VoiceFocusTransformDevice{constructor(device,voiceFocus,delegate,nodeOptions,failed=!1,node=void 0,browserBehavior=new DefaultBrowserBehavior_1.default,farEndStreamToAudioSourceNode=new Map,mixDestNode=void 0,mixSourceNode=void 0){this.device=device,this.voiceFocus=voiceFocus,this.delegate=delegate,this.nodeOptions=nodeOptions,this.failed=failed,this.node=node,this.browserBehavior=browserBehavior,this.farEndStreamToAudioSourceNode=farEndStreamToAudioSourceNode,this.mixDestNode=mixDestNode,this.mixSourceNode=mixSourceNode}getInnerDevice(){return this.device}mute(muted){return __awaiter(this,void 0,void 0,(function*(){this.node&&(muted?yield this.node.disable():yield this.node.enable())}))}stop(){return __awaiter(this,void 0,void 0,(function*(){this.node&&(this.node.disconnect(),yield this.node.stop())}))}chooseNewInnerDevice(inner){return __awaiter(this,void 0,void 0,(function*(){return this.device!==inner||function isDefaultDevice(device){if("default"===device)return!0;if(!device||"object"!=typeof device)return!1;if("deviceId"in device&&"default"===device.deviceId)return!0;if("id"in device&&"default"===device.id)return!0;return!1}(inner)?new VoiceFocusTransformDevice(inner,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode):this}))}intrinsicDevice(){return __awaiter(this,void 0,void 0,(function*(){if(this.failed)return this.device;const isUsingES=this.nodeOptions.es,trackConstraints={echoCancellation:!isUsingES,googEchoCancellation:!isUsingES,googEchoCancellation2:!isUsingES,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let useBuiltInAGC;return useBuiltInAGC=!this.nodeOptions||void 0===this.nodeOptions.agc||this.nodeOptions.agc.useBuiltInAGC,trackConstraints.autoGainControl=useBuiltInAGC,trackConstraints.googAutoGainControl=useBuiltInAGC,trackConstraints.googAutoGainControl2=useBuiltInAGC,this.device?"string"==typeof this.device?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?trackConstraints.deviceId=this.device:trackConstraints.deviceId={exact:this.device},trackConstraints):this.device.id?this.device:Object.assign(Object.assign({},this.device),trackConstraints):trackConstraints}))}createAudioNode(context){var _a,_b;return __awaiter(this,void 0,void 0,(function*(){if((null===(_a=this.node)||void 0===_a?void 0:_a.context)===context)return{start:this.node,end:this.node};const options=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if(null===(_b=this.node)||void 0===_b||_b.disconnect(),this.node=yield this.voiceFocus.createNode(context,options),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(context,{channelCount:1,channelCountMode:"explicit"});for(const stream of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(stream);this.createMixSourceNode()}const start=this.node;return{start,end:this.node}}catch(e){throw this.failed=!0,this.delegate.onFallback(this,e),e}}))}observeMeetingAudio(audioVideo){return __awaiter(this,void 0,void 0,(function*(){if(!this.nodeOptions.es)return;audioVideo.addAudioMixObserver(this);const stream=yield audioVideo.getCurrentMeetingAudioStream();stream&&this.addFarEndStream(stream)}))}unObserveMeetingAudio(audioVideo){return __awaiter(this,void 0,void 0,(function*(){if(!this.nodeOptions.es)return;audioVideo.removeAudioMixObserver(this);const stream=yield audioVideo.getCurrentMeetingAudioStream();stream&&this.removeFarendStream(stream)}))}addObserver(observer){this.delegate.addObserver(observer)}removeObserver(observer){this.delegate.removeObserver(observer)}addFarEndStream(activeStream){return __awaiter(this,void 0,void 0,(function*(){this.nodeOptions.es&&activeStream&&!this.farEndStreamToAudioSourceNode.has(activeStream)&&(this.node?this.assignFarEndStreamToAudioSourceNode(activeStream):this.farEndStreamToAudioSourceNode.set(activeStream,null))}))}removeFarendStream(inactiveStream){var _a;return __awaiter(this,void 0,void 0,(function*(){null===(_a=this.farEndStreamToAudioSourceNode.get(inactiveStream))||void 0===_a||_a.disconnect(),this.farEndStreamToAudioSourceNode.delete(inactiveStream)}))}meetingAudioStreamBecameActive(activeStream){return __awaiter(this,void 0,void 0,(function*(){this.addFarEndStream(activeStream)}))}meetingAudioStreamBecameInactive(inactiveStream){return __awaiter(this,void 0,void 0,(function*(){this.removeFarendStream(inactiveStream)}))}assignFarEndStreamToAudioSourceNode(streamToAdd){const streamNodeToAdd=this.node.context.createMediaStreamSource(streamToAdd);streamNodeToAdd.channelCount=1,streamNodeToAdd.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(streamToAdd,streamNodeToAdd),streamNodeToAdd.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}}exports.default=VoiceFocusTransformDevice},"./node_modules/amazon-chime-sdk-js/build/voicefocus/VoiceFocusTransformDeviceDelegate.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class VoiceFocusTransformDeviceDelegate{constructor(){this.observers=new Set}addObserver(observer){this.observers.add(observer)}removeObserver(observer){this.observers.delete(observer)}onFallback(device,e){var _a;for(const observer of this.observers)null===(_a=observer.voiceFocusFellBackToInnerStream)||void 0===_a||_a.call(observer,device,e)}onCPUWarning(){var _a;for(const observer of this.observers)null===(_a=observer.voiceFocusInsufficientResources)||void 0===_a||_a.call(observer)}}},"./node_modules/amazon-chime-sdk-js/build/volumeindicatoradapter/DefaultVolumeIndicatorAdapter.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class DefaultVolumeIndicatorAdapter{constructor(logger,realtimeController,minVolumeDecibels,maxVolumeDecibels,selfAttendeeId){this.logger=logger,this.realtimeController=realtimeController,this.minVolumeDecibels=minVolumeDecibels,this.maxVolumeDecibels=maxVolumeDecibels,this.selfAttendeeId=selfAttendeeId,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(info){let streamIndex=0;for(const stream of info.streams){const hasAttendeeId=!!stream.attendeeId,hasExternalUserId=!!stream.externalUserId,hasMuted=stream.hasOwnProperty("muted"),hasDropped=!!stream.dropped;if(hasAttendeeId){this.attendeeIdToStreamId[stream.attendeeId]&&this.attendeeIdToStreamId[stream.attendeeId]<stream.audioStreamId&&delete this.attendeeIdToStreamId[stream.attendeeId],this.streamIdToAttendeeId[stream.audioStreamId]=stream.attendeeId;const externalUserId=hasExternalUserId?stream.externalUserId:stream.attendeeId;this.streamIdToExternalUserId[stream.audioStreamId]=externalUserId,this.attendeeIdToStreamId[stream.attendeeId]=stream.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(stream.attendeeId,!0,externalUserId,!1,{attendeeIndex:streamIndex++,attendeesInFrame:info.streams.length})}if(hasMuted){const attendeeId=this.streamIdToAttendeeId[stream.audioStreamId],externalUserId=this.streamIdToExternalUserId[stream.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(attendeeId,null,stream.muted,null,externalUserId)}if(!hasAttendeeId&&!hasMuted){const attendeeId=this.streamIdToAttendeeId[stream.audioStreamId];if(attendeeId){const externalUserId=this.streamIdToExternalUserId[stream.audioStreamId];delete this.streamIdToAttendeeId[stream.audioStreamId],delete this.streamIdToExternalUserId[stream.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[stream.audioStreamId],this.attendeeIdToStreamId[attendeeId]===stream.audioStreamId&&delete this.attendeeIdToStreamId[attendeeId];let attendeeHasNewStreamId=!1;for(const otherStreamId of Object.keys(this.streamIdToAttendeeId)){const otherStreamIdNumber=parseInt(otherStreamId);if(otherStreamIdNumber>stream.audioStreamId&&this.streamIdToAttendeeId[otherStreamIdNumber]===attendeeId){attendeeHasNewStreamId=!0;break}}attendeeHasNewStreamId||this.realtimeController.realtimeSetAttendeeIdPresence(attendeeId,!1,externalUserId,hasDropped,{attendeeIndex:streamIndex++,attendeesInFrame:info.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(info),this.sessionReconnected=!1)}cleanUpState(info){const localAttendeeIds=Object.values(this.streamIdToAttendeeId),remoteAttendeeIds=info.streams.map((stream=>stream.attendeeId)),deletedAttendeeIds=localAttendeeIds.filter((id=>!remoteAttendeeIds.includes(id)));for(const[index,deletedAttendeeId]of deletedAttendeeIds.entries()){const streamId=this.attendeeIdToStreamId[deletedAttendeeId],externalUserId=this.streamIdToExternalUserId[streamId];delete this.streamIdToAttendeeId[streamId],delete this.streamIdToExternalUserId[streamId],delete this.warnedAboutMissingStreamIdMapping[streamId],delete this.attendeeIdToStreamId[deletedAttendeeId],deletedAttendeeId!==this.selfAttendeeId?this.realtimeController.realtimeSetAttendeeIdPresence(deletedAttendeeId,!1,externalUserId,!1,{attendeeIndex:index,attendeesInFrame:deletedAttendeeId.length}):this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection")}}sendRealtimeUpdatesForAudioMetadata(metadata){let volumes=null,signalStrengths=null;for(const state of metadata.attendeeStates){const attendeeId=this.attendeeIdForStreamId(state.audioStreamId);state.hasOwnProperty("volume")&&(null===volumes&&(volumes={}),null!==attendeeId&&(volumes[attendeeId]=this.normalizedVolume(state))),state.hasOwnProperty("signalStrength")&&(null===signalStrengths&&(signalStrengths={}),null!==attendeeId&&(signalStrengths[attendeeId]=this.normalizedSignalStrength(state)))}this.applyRealtimeUpdatesForAudioMetadata(volumes,signalStrengths)}normalizedVolume(state){const normalized=1-(-state.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(normalized,0),1)}normalizedSignalStrength(state){const normalized=state.signalStrength/DefaultVolumeIndicatorAdapter.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(normalized,0),1)}applyRealtimeUpdatesForAudioMetadata(volumes,signalStrengths){for(const streamId in this.streamIdToAttendeeId){const attendeeId=this.streamIdToAttendeeId[streamId],externalUserId=this.streamIdToExternalUserId[streamId];let volumeUpdate=null,signalStrengthUpdate=null;null!==volumes&&(volumeUpdate=volumes.hasOwnProperty(attendeeId)?volumes[attendeeId]:DefaultVolumeIndicatorAdapter.IMPLICIT_VOLUME),null!==signalStrengths&&(signalStrengthUpdate=signalStrengths.hasOwnProperty(attendeeId)?signalStrengths[attendeeId]:DefaultVolumeIndicatorAdapter.IMPLICIT_SIGNAL_STRENGTH),null===volumeUpdate&&null===signalStrengthUpdate||this.realtimeController.realtimeUpdateVolumeIndicator(attendeeId,volumeUpdate,null,signalStrengthUpdate,externalUserId)}}attendeeIdForStreamId(streamId){if(0===streamId)return null;const attendeeId=this.streamIdToAttendeeId[streamId];return attendeeId||(this.warnedAboutMissingStreamIdMapping[streamId]||(this.warnedAboutMissingStreamIdMapping[streamId]=!0,this.logger.warn(`volume indicator stream id ${streamId} seen before being defined`)),null)}}exports.default=DefaultVolumeIndicatorAdapter,DefaultVolumeIndicatorAdapter.MAX_SIGNAL_STRENGTH_LEVELS=2,DefaultVolumeIndicatorAdapter.IMPLICIT_VOLUME=0,DefaultVolumeIndicatorAdapter.IMPLICIT_SIGNAL_STRENGTH=1},"./node_modules/amazon-chime-sdk-js/build/websocketadapter/DefaultWebSocketAdapter.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const Versioning_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/versioning/Versioning.js")),WebSocketReadyState_1=__importDefault(__webpack_require__("./node_modules/amazon-chime-sdk-js/build/websocketadapter/WebSocketReadyState.js"));exports.default=class DefaultWebSocketAdapter{constructor(logger){this.logger=logger}create(url,protocols,isSignedUrl){this.connection=new WebSocket(isSignedUrl?url:Versioning_1.default.urlWithVersion(url),protocols),this.connection.binaryType="arraybuffer"}send(message){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return message instanceof Uint8Array?this.connection.send(message.buffer):this.connection.send(message),!0}catch(err){return this.logger.debug((()=>`send error: ${err.message}, websocket state=${WebSocketReadyState_1.default[this.readyState()]}`)),!1}}close(code,reason){var _a;null===(_a=this.connection)||void 0===_a||_a.close(code,reason)}destroy(){this.connection=void 0}addEventListener(handler,eventListener){this.connection?this.connection.addEventListener(handler,eventListener):this.logger.warn("Cannot add event listener with no WebSocket connection.")}removeEventListener(handler,eventListener){var _a;null===(_a=this.connection)||void 0===_a||_a.removeEventListener(handler,eventListener)}readyState(){if(!this.connection)return WebSocketReadyState_1.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return WebSocketReadyState_1.default.Connecting;case WebSocket.OPEN:return WebSocketReadyState_1.default.Open;case WebSocket.CLOSING:return WebSocketReadyState_1.default.Closing;case WebSocket.CLOSED:return WebSocketReadyState_1.default.Closed}}}},"./node_modules/amazon-chime-sdk-js/build/websocketadapter/WebSocketReadyState.js":(__unused_webpack_module,exports)=>{"use strict";var WebSocketReadyState;Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebSocketReadyState=void 0,function(WebSocketReadyState){WebSocketReadyState[WebSocketReadyState.None=0]="None",WebSocketReadyState[WebSocketReadyState.Connecting=1]="Connecting",WebSocketReadyState[WebSocketReadyState.Open=2]="Open",WebSocketReadyState[WebSocketReadyState.Closing=3]="Closing",WebSocketReadyState[WebSocketReadyState.Closed=4]="Closed"}(WebSocketReadyState=exports.WebSocketReadyState||(exports.WebSocketReadyState={})),exports.default=WebSocketReadyState},"./node_modules/amazon-chime-sdk-js/libs/voicefocus/decider.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.decideModel=exports.measureAndDecideExecutionApproach=void 0;const loader_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/loader.js"),support_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/support.js"),PERFORMANCE_THRESHOLDS={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};class Estimator{constructor(fetchConfig,logger){this.fetchConfig=fetchConfig,this.logger=logger;const workerURL=`${fetchConfig.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:fetchConfig.headers,escapedQueryString:fetchConfig.escapedQueryString},this.worker=loader_js_1.loadWorker(workerURL,"VoiceFocusEstimator",this.fetchBehavior,logger)}roundtrip(toSend,receive,expectedKey){return new Promise(((resolve,reject)=>{this.worker.then((worker=>{let listener;listener=event=>{const{message,key}=event.data;message===receive&&key===expectedKey&&(worker.removeEventListener("message",listener),resolve(event.data))},worker.addEventListener("message",listener),worker.postMessage(toSend)})).catch((e=>{var _a;null===(_a=this.logger)||void 0===_a||_a.error("Failed to load worker.",e),reject(e)}))}))}supportsSIMD(url){const path=url||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,toSend={message:"supports-simd",fetchBehavior:this.fetchBehavior,path,key:"simd"};return this.roundtrip(toSend,"simd-support","simd").then((data=>data.supports))}measure(simd,budget){const benchWASM=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,benchSIMD=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,path=simd?benchSIMD:benchWASM,key=`bench:${simd}`,toSend={message:"measure",fetchBehavior:this.fetchBehavior,budget,path,key};return this.roundtrip(toSend,"measurement",key).then((data=>{if(data.measurement)return data.measurement;throw new Error("Failed to measure.")}))}stop(){this.worker.then((worker=>{var _a;null===(_a=this.logger)||void 0===_a||_a.debug("Stopping estimator worker."),worker.terminate()})).catch((e=>{}))}}const featureCheck=(forceSIMD,fetchConfig,logger,estimator)=>__awaiter(void 0,void 0,void 0,(function*(){const supports={supportsSIMD:forceSIMD,supportsSAB:support_js_1.supportsSharedArrayBuffer(globalThis,window,logger),duration:-1};if(forceSIMD)return null==logger||logger.info("Supports SIMD: true (force)"),supports;const cleanup=!estimator,e=estimator||new Estimator(fetchConfig,logger);try{const useSIMD=!support_js_1.isOldChrome(window,logger)&&(yield e.supportsSIMD());return null==logger||logger.info(`Supports SIMD: ${useSIMD} (force: ${forceSIMD})`),supports.supportsSIMD=useSIMD,supports}finally{cleanup&&e.stop()}}));exports.measureAndDecideExecutionApproach=(spec,fetchConfig,logger,thresholds=PERFORMANCE_THRESHOLDS)=>__awaiter(void 0,void 0,void 0,(function*(){let executionPreference=spec.executionPreference;const{usagePreference,variantPreference,namePreference,simdPreference,estimatorBudget,executionQuantaPreference}=spec;"interactivity"===usagePreference&&"inline"!==executionPreference&&(null==logger||logger.debug(`Overriding execution preference ${executionPreference} to reflect interactivity preference.`),executionPreference="inline");const forceSIMD="force"===simdPreference,knownModel="auto"!==variantPreference,knownExecution="auto"!==executionPreference;let supports;try{supports=knownModel&&knownExecution?yield featureCheck(forceSIMD,fetchConfig,logger):yield((forceSIMD,fetchConfig,estimatorBudget,logger)=>__awaiter(void 0,void 0,void 0,(function*(){const estimator=new Estimator(fetchConfig,logger);try{const supports=yield featureCheck(forceSIMD,fetchConfig,logger,estimator);if(supports.supportsSIMD)try{return supports.duration=yield estimator.measure(!0,estimatorBudget),null==logger||logger.info("SIMD timing:",supports.duration),supports}catch(e){null==logger||logger.warn("Failed SIMD estimation; falling back to non-SIMD."),supports.supportsSIMD=!1}return supports.duration=yield estimator.measure(!1,estimatorBudget),null==logger||logger.info("No-SIMD timing:",supports.duration),supports}catch(e){throw null==logger||logger.error("Could not feature check.",e),e}finally{estimator.stop()}})))(forceSIMD,fetchConfig,estimatorBudget,logger)}catch(e){throw null==logger||logger.error("Could not load estimator.",e),new Error("Could not load Voice Focus estimator.")}return(({supportsSIMD,supportsSAB,duration,executionPreference="auto",simdPreference,variantPreference="auto",namePreference="default",usagePreference,executionQuantaPreference=3},allThresholds=PERFORMANCE_THRESHOLDS,logger)=>{const useSIMD="force"===simdPreference||"disable"!==simdPreference&&supportsSIMD,checkScores=-1!==duration,baseScore=checkScores?(useSIMD?2.5:2.63)/duration:0,thresholds=useSIMD?allThresholds.simd:allThresholds.wasm,inlineScore=checkScores?((executionQuanta,usagePreference)=>1===executionQuanta?.6:"quality"===usagePreference?.65*executionQuanta:.5*executionQuanta)(executionQuantaPreference,usagePreference)*baseScore:0,workerScore=checkScores?.7*baseScore:0,name=namePreference,unsupported=reason=>({supported:!1,reason});if(checkScores){if(baseScore<thresholds.noSupport)return unsupported(`Performance score ${baseScore} worse than threshold ${thresholds.noSupport}.`)}else if("auto"===executionPreference||"auto"===variantPreference)return unsupported(`Missing explicit execution (${executionPreference}) or variant (${variantPreference}) preference, but no scoring performed.`);null==logger||logger.debug(`Bench duration ${duration} yields inline score ${inlineScore} and worker score ${workerScore}.`);const succeed=(processor,executionApproach,variant)=>({supported:!0,useSIMD,processor,executionApproach,variant,executionQuanta:"inline"===executionApproach?executionQuantaPreference:void 0,name}),resolveVariant=(score,variant,lookup)=>"auto"!==variant?!checkScores||score>lookup[variant]?variant:"failed":score>lookup.c100?"c100":score>lookup.c50?"c50":score>lookup.c20?"c20":score>lookup.c10?"c10":"failed",reducePreference=preference=>{switch(preference||"auto"){case"auto":{let inlineOption=reducePreference("inline"),workerOption=reducePreference("worker");return null==logger||logger.debug(`Reducing auto preference: ${JSON.stringify(inlineOption)} vs ${JSON.stringify(workerOption)}`),!1===inlineOption.supported||!1===workerOption.supported?workerOption:inlineOption.variant===workerOption.variant||"c50"===inlineOption.variant?inlineOption:workerOption}case"worker":return support_js_1.supportsSharedArrayBuffer(globalThis,window,logger)?reducePreference("worker-sab"):reducePreference("worker-postMessage");case"inline":{const variant=resolveVariant(inlineScore,variantPreference,thresholds.inline);return"failed"===variant?unsupported(`Performance score ${inlineScore} not sufficient for inline use with variant preference ${variantPreference}.`):succeed("voicefocus-inline-processor","inline",variant)}case"worker-sab":{if(!supportsSAB){const reason="Requested worker-sab but no SharedArrayBuffer support.";return null==logger||logger.warn(reason),{supported:!1,reason}}const variant=resolveVariant(workerScore,variantPreference,thresholds.worker);return"failed"===variant?unsupported(`Performance score ${workerScore} not sufficient for worker use with variant preference ${variantPreference}.`):succeed("voicefocus-worker-sab-processor","worker-sab",variant)}case"worker-postMessage":{const variant=resolveVariant(workerScore,variantPreference,thresholds.worker);if("failed"===variant)return unsupported(`Performance score ${workerScore} not sufficient for worker use.`);if("ns_es"===name){const reason="Requested echo suppression but postMessage executor does not support it.";return null==logger||logger.warn(reason),{supported:!1,reason}}return succeed("voicefocus-worker-postMessage-processor","worker-postMessage",variant)}}};return reducePreference(executionPreference)})(Object.assign(Object.assign({},supports),{simdPreference,executionPreference,variantPreference,namePreference,usagePreference,executionQuantaPreference}),thresholds,logger)}));exports.decideModel=({category,name,variant,simd,url})=>`${category}-${name}-${variant}-v1${simd?"_simd":""}`},"./node_modules/amazon-chime-sdk-js/libs/voicefocus/fetch.js":(__unused_webpack_module,exports)=>{"use strict";function fetchWithBehavior(url,init,fetchBehavior){if(!fetchBehavior)return fetch(url,init);const withQuery=withQueryString(url,fetchBehavior),withHeaders=withRequestHeaders(init,fetchBehavior);return fetch(withQuery,withHeaders)}function withRequestHeaders(init,fetchBehavior){return(null==fetchBehavior?void 0:fetchBehavior.headers)?init?Object.assign(Object.assign({},init),{headers:Object.assign(Object.assign({},init.headers||{}),fetchBehavior.headers)}):{headers:fetchBehavior.headers}:init}function withQueryString(url,fetchBehavior){if(!(null==fetchBehavior?void 0:fetchBehavior.escapedQueryString))return url;const hasQuery=-1!==url.lastIndexOf("?");return`${url}${hasQuery?"&":"?"}${fetchBehavior.escapedQueryString}`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isValidRevisionID=exports.isValidAssetGroup=exports.resolveURL=exports.addQueryParams=exports.withQueryString=exports.withRequestHeaders=exports.fetchWithBehavior=void 0,exports.fetchWithBehavior=fetchWithBehavior,exports.withRequestHeaders=withRequestHeaders,exports.withQueryString=withQueryString,exports.addQueryParams=function addQueryParams(fetchBehavior,queryParams){const keys=Object.keys(queryParams);if(!keys.length)return fetchBehavior;const params=new URLSearchParams(null==fetchBehavior?void 0:fetchBehavior.escapedQueryString);for(const key of keys)params.append(key,queryParams[key]);return Object.assign(Object.assign({},fetchBehavior),{escapedQueryString:params.toString()})};const HEAD_OPTIONS={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};exports.resolveURL=function resolveURL(url,fetchBehavior){return fetchWithBehavior(url,HEAD_OPTIONS,fetchBehavior).then((response=>response.redirected?response.url:url))},exports.isValidAssetGroup=function isValidAssetGroup(assetGroup){return!!assetGroup&&/^[-.a-zA-Z0-9]+$/.test(assetGroup)},exports.isValidRevisionID=function isValidRevisionID(revisionID){return!!revisionID&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(revisionID)}},"./node_modules/amazon-chime-sdk-js/libs/voicefocus/loader.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadWorker=void 0;const fetch_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/fetch.js"),WORKER_FETCH_OPTIONS={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};exports.loadWorker=(workerURL,name,fetchBehavior,logger)=>{null==logger||logger.debug(`Loading ${name} worker from ${workerURL}.`);let workerURLIsSameOrigin=!1;try{workerURLIsSameOrigin=self.origin===new URL(workerURL).origin}catch(e){null==logger||logger.error("Could not compare origins.",e)}if(workerURLIsSameOrigin){const workerURLWithQuery=fetch_js_1.withQueryString(workerURL,fetchBehavior);return Promise.resolve(new Worker(workerURLWithQuery,{name}))}return fetch_js_1.fetchWithBehavior(workerURL,WORKER_FETCH_OPTIONS,fetchBehavior).then((res=>{if(res.ok)return res.blob().then((blob=>new Worker(window.URL.createObjectURL(blob))));throw new Error("Fetch failed.")}))}},"./node_modules/amazon-chime-sdk-js/libs/voicefocus/support.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.isOldChrome=exports.supportsWASMStreaming=exports.supportsSharedArrayBuffer=exports.supportsWASM=exports.supportsAudioWorklet=exports.supportsWorker=exports.supportsVoiceFocusWorker=exports.supportsWASMPostMessage=exports.isSafari=void 0;const loader_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/loader.js");exports.isSafari=(global=globalThis)=>{const ua=global.navigator.userAgent,hasSafari=ua.match(/Safari\//),hasChrome=ua.match(/Chrom(?:e|ium)\//);return!(!hasSafari||hasChrome)};exports.supportsWASMPostMessage=(global=globalThis)=>{if(exports.isSafari(global))return!1;if(((global=globalThis)=>!!global.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/))(global)){return(chromeVersion(global)||0)<95}return!0};exports.supportsVoiceFocusWorker=(scope=globalThis,fetchConfig,logger)=>__awaiter(void 0,void 0,void 0,(function*(){if(!exports.supportsWorker(scope,logger))return!1;const workerURL=`${fetchConfig.paths.workers}worker-v1.js`;try{const worker=yield loader_js_1.loadWorker(workerURL,"VoiceFocusTestWorker",fetchConfig,logger);try{worker.terminate()}catch(e){null==logger||logger.debug("Failed to terminate worker.",e)}return!0}catch(e){return null==logger||logger.info("Failed to fetch and instantiate test worker",e),!1}}));exports.supportsWorker=(scope=globalThis,logger)=>{try{return!!scope.Worker}catch(e){return null==logger||logger.info("Does not support Worker",e),!1}};exports.supportsAudioWorklet=(scope=globalThis,logger)=>{try{return!!scope.AudioWorklet&&!!scope.AudioWorkletNode}catch(e){return null==logger||logger.info("Does not support Audio Worklet",e),!1}};exports.supportsWASM=(scope=globalThis,logger)=>{try{return!(!scope.WebAssembly||!scope.WebAssembly.compile&&!scope.WebAssembly.compileStreaming)}catch(e){return null==logger||logger.info("Does not support WASM",e),!1}};exports.supportsSharedArrayBuffer=(scope=globalThis,window=globalThis,logger)=>{try{return!(!scope.SharedArrayBuffer||!window.chrome&&!scope.crossOriginIsolated)}catch(e){return null==logger||logger.info("Does not support SharedArrayBuffer."),!1}};exports.supportsWASMStreaming=(scope=globalThis,logger)=>{var _a;try{return!!(null===(_a=scope.WebAssembly)||void 0===_a?void 0:_a.compileStreaming)}catch(e){return null==logger||logger.info("Does not support WASM streaming compilation",e),!1}};const chromeVersion=(global=globalThis)=>{try{if(!global.chrome)return}catch(e){}const versionCheck=global.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(versionCheck)return parseInt(versionCheck[1],10)};exports.isOldChrome=(global=globalThis,logger)=>{const version=chromeVersion(global);return!!version&&(version<90&&(null==logger||logger.debug(`Chrome ${version} has incomplete SIMD support.`),!0))}},"./node_modules/amazon-chime-sdk-js/libs/voicefocus/types.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VoiceFocusAudioWorkletNode=void 0;class VoiceFocusAudioWorkletNode extends("undefined"!=typeof globalThis&&globalThis.AudioWorkletNode||class Sadness{}){}exports.VoiceFocusAudioWorkletNode=VoiceFocusAudioWorkletNode},"./node_modules/amazon-chime-sdk-js/libs/voicefocus/voicefocus.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAudioInput=exports.createAudioContext=exports.VoiceFocus=void 0;const decider_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/decider.js"),fetch_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/fetch.js"),loader_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/loader.js"),support_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/support.js"),worklet_inline_node_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/worklet-inline-node.js"),worklet_worker_sab_node_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/worklet-worker-sab-node.js"),worklet_worker_postMessage_node_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/worklet-worker-postMessage-node.js"),DEFAULT_AGC_SETTING={useVoiceFocusAGC:!1,useBuiltInAGC:!0},DEFAULT_ASSET_GROUP="stable-v1",DEFAULT_CDN="https://static.sdkassets.chime.aws",DEFAULT_PATHS={processors:`${DEFAULT_CDN}/processors/`,workers:`${DEFAULT_CDN}/workers/`,wasm:`${DEFAULT_CDN}/wasm/`,models:`${DEFAULT_CDN}/wasm/`},DEFAULT_CONTEXT_HINT={latencyHint:0},BASE_AUDIO_CONSTRAINTS={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},DEFAULT_AUDIO_CONSTRAINTS_WITH_BUILTIN_AGC=Object.assign(Object.assign({},BASE_AUDIO_CONSTRAINTS),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),DEFAULT_AUDIO_CONSTRAINTS_WITHOUT_BUILTIN_AGC=Object.assign(Object.assign({},BASE_AUDIO_CONSTRAINTS),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),PROCESSORS={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:worklet_worker_sab_node_js_1.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:worklet_worker_postMessage_node_js_1.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:worklet_inline_node_js_1.default}},validateAssetSpec=(assetGroup,revisionID)=>{if(void 0!==assetGroup&&!fetch_js_1.isValidAssetGroup(assetGroup))throw new Error(`Invalid asset group ${assetGroup}`);if(void 0!==revisionID&&!fetch_js_1.isValidRevisionID(revisionID))throw new Error(`Invalid revision ID ${revisionID}`)},urlForModel=(model,paths)=>`${paths.models}${decider_js_1.decideModel(model)}.wasm`;class VoiceFocus{constructor(worker,processorURL,nodeConstructor,nodeOptions,executionQuanta){this.processorURL=processorURL,this.nodeConstructor=nodeConstructor,this.nodeOptions=nodeOptions,this.executionQuanta=executionQuanta,this.internal={worker,nodeOptions,isDestroyed:!1}}static isSupported(spec,options){const{fetchBehavior,logger}=options||{};if("undefined"==typeof globalThis)return null==logger||logger.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!support_js_1.supportsAudioWorklet(globalThis,logger))return null==logger||logger.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!support_js_1.supportsWASM(globalThis,logger))return null==logger||logger.debug("Browser does not support WASM."),Promise.resolve(!1);support_js_1.supportsWASMStreaming(globalThis,logger)||null==logger||logger.debug("Browser does not support streaming WASM compilation.");const{assetGroup=DEFAULT_ASSET_GROUP,revisionID,paths=DEFAULT_PATHS}=spec||{};validateAssetSpec(assetGroup,revisionID);const assetConfig=revisionID?{revisionID}:{assetGroup},updatedFetchBehavior=fetch_js_1.addQueryParams(fetchBehavior,assetConfig),fetchConfig=Object.assign(Object.assign({},updatedFetchBehavior),{paths});return support_js_1.supportsVoiceFocusWorker(globalThis,fetchConfig,logger)}static mungeExecutionPreference(preference,logger){const isAuto=void 0===preference||"auto"===preference;if(support_js_1.isSafari(globalThis)){if(isAuto||"inline"===preference)return"inline";if(!isAuto)throw new Error(`Unsupported execution preference ${preference}`)}if("worker-sab"===preference&&!support_js_1.supportsSharedArrayBuffer(globalThis,globalThis,logger))throw new Error(`Unsupported execution preference ${preference}`);return preference||"auto"}static configure(spec,options){return __awaiter(this,void 0,void 0,(function*(){const{fetchBehavior,preResolve,logger}=options||{},{category="voicefocus",name="default",variant:variantPreference="auto",assetGroup=DEFAULT_ASSET_GROUP,revisionID,simd="detect",executionPreference="auto",executionQuantaPreference,usagePreference="interactivity",estimatorBudget=100,paths=DEFAULT_PATHS,thresholds}=spec||{};if(null==logger||logger.debug("Configuring Voice Focus with spec",spec),void 0!==category&&"voicefocus"!==category)throw new Error(`Unrecognized category ${category}`);if(void 0!==name&&"default"!==name&&"ns_es"!==name)throw new Error(`Unrecognized feature name ${name}`);if(void 0!==variantPreference&&!["auto","c100","c50","c20","c10"].includes(variantPreference))throw new Error(`Unrecognized feature variant ${variantPreference}`);if(void 0!==executionQuantaPreference&&![1,2,3].includes(executionQuantaPreference))throw new Error(`Unrecognized execution quanta preference ${executionQuantaPreference}`);if(validateAssetSpec(assetGroup,revisionID),void 0!==simd&&!["detect","force","disable"].includes(simd))throw new Error(`Unrecognized SIMD option ${simd}`);if(void 0!==executionPreference&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(executionPreference))throw new Error(`Unrecognized execution preference ${executionPreference}`);if(void 0!==usagePreference&&!["quality","interactivity"].includes(usagePreference))throw new Error(`Unrecognized usage preference ${usagePreference}`);const executionSpec={executionPreference:this.mungeExecutionPreference(executionPreference,logger),usagePreference,executionQuantaPreference,variantPreference,namePreference:name,simdPreference:simd,estimatorBudget},assetConfig=revisionID?{revisionID}:{assetGroup},updatedFetchBehavior=fetch_js_1.addQueryParams(fetchBehavior,assetConfig),fetchConfig=Object.assign({paths},updatedFetchBehavior),executionDefinition=yield decider_js_1.measureAndDecideExecutionApproach(executionSpec,fetchConfig,logger,thresholds);if(!1===executionDefinition.supported)return{supported:!1,reason:executionDefinition.reason};null==logger||logger.info("Decided execution approach",executionDefinition);const{useSIMD,processor,variant,executionQuanta}=executionDefinition,model={category:category||"voicefocus",name:name||"default",variant,simd:useSIMD};if(preResolve){const startingURL=urlForModel(model,paths);model.url=yield fetch_js_1.resolveURL(startingURL,updatedFetchBehavior)}return{fetchConfig,model,processor,executionQuanta,supported:!0}}))}static init(configuration,{delegate,preload=!0,logger}){return __awaiter(this,void 0,void 0,(function*(){if(!1===configuration.supported)throw new Error("Voice Focus not supported. Reason: "+configuration.reason);const{model,processor,fetchConfig,executionQuanta}=configuration,{simd,name}=model,{paths}=fetchConfig;if("voicefocus-inline-processor"!==processor&&"voicefocus-worker-postMessage-processor"!==processor&&"voicefocus-worker-sab-processor"!==processor)throw new Error(`Unknown processor ${processor}`);const modelURL=model.url||urlForModel(model,paths);null==logger||logger.debug(`Using model URL ${modelURL}.`);const audioBufferURL=`${paths.wasm}audio_buffer-v1${simd?"_simd":""}.wasm`,resamplerURL=`${paths.wasm}resampler-v1${simd?"_simd":""}.wasm`,workerURL=`${paths.workers}worker-v1.js`,{file,node}=PROCESSORS[processor],processorURL=`${paths.processors}${file}`,worker=yield loader_js_1.loadWorker(workerURL,"VoiceFocusWorker",fetchConfig,logger);if(preload){null==logger||logger.debug("Preloading",modelURL);let message=support_js_1.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";worker.postMessage({message,preload:!0,key:"model",fetchBehavior:fetchConfig,path:modelURL})}const factory=new VoiceFocus(worker,processorURL,node,{processor,worker,audioBufferURL,resamplerURL,fetchBehavior:fetchConfig,modelURL,delegate,logger,numberOfInputs:"ns_es"===name?2:1},executionQuanta);return Promise.resolve(factory)}))}createNode(context,options){var _a;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate=16e3===context.sampleRate?16e3:48e3,enabled=!0,agc=DEFAULT_AGC_SETTING}=options||{},supportFarendStream=null==options?void 0:options.es,processorOptions={voiceFocusSampleRate,enabled,sendBufferCount:10,prefill:6,agc,executionQuanta:this.executionQuanta,supportFarendStream},url=fetch_js_1.withQueryString(this.processorURL,null===(_a=this.nodeOptions)||void 0===_a?void 0:_a.fetchBehavior);return context.audioWorklet.addModule(url).then((()=>new this.nodeConstructor(context,Object.assign(Object.assign({},this.nodeOptions),{processorOptions}))))}applyToStream(stream,context,options){return __awaiter(this,void 0,void 0,(function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const source=context.createMediaStreamSource(stream),node=yield this.applyToSourceNode(source,context,options),destination=context.createMediaStreamDestination();return node.connect(destination),{node,source,destination,stream:destination.stream}}))}applyToSourceNode(source,context,options){return __awaiter(this,void 0,void 0,(function*(){const node=yield this.createNode(context,options);return source.connect(node),node}))}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}}exports.VoiceFocus=VoiceFocus;exports.createAudioContext=(contextHint=DEFAULT_CONTEXT_HINT)=>new(window.AudioContext||window.webkitAudioContext)(contextHint);exports.getAudioInput=(context,inputOptions,voiceFocusOptions)=>__awaiter(void 0,void 0,void 0,(function*(){var _a,_b;const{constraints,spec,delegate,preload=!0,options}=inputOptions,{logger}=voiceFocusOptions,config=yield VoiceFocus.configure(spec,voiceFocusOptions);if(!config.supported)return null===(_a=voiceFocusOptions.logger)||void 0===_a||_a.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(constraints);const factory=yield VoiceFocus.init(config,{delegate,preload,logger}),agc=(null===(_b=inputOptions.options)||void 0===_b?void 0:_b.agc)||DEFAULT_AGC_SETTING,input=yield window.navigator.mediaDevices.getUserMedia(((constraints,agc)=>{let defaultConstraints;if(defaultConstraints=agc.useBuiltInAGC?DEFAULT_AUDIO_CONSTRAINTS_WITH_BUILTIN_AGC:DEFAULT_AUDIO_CONSTRAINTS_WITHOUT_BUILTIN_AGC,!constraints)return{audio:defaultConstraints};if(!constraints.audio)return constraints;if(constraints.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},constraints),{audio:!0===constraints.audio?defaultConstraints:Object.assign(Object.assign({},constraints.audio),defaultConstraints)})})(constraints,agc));return factory.applyToStream(input,context,options).then((result=>result.stream))}))},"./node_modules/amazon-chime-sdk-js/libs/voicefocus/worklet-inline-node.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const support_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/support.js"),types_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/types.js");class VoiceFocusInlineNode extends types_js_1.VoiceFocusAudioWorkletNode{constructor(context,options){super(context,options.processor,options),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL,worker,fetchBehavior,logger,delegate}=options;this.logger=logger,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=delegate,logger&&logger.debug("VoiceFocusInlineNode:",modelURL),this.worker=worker,this.worker.onmessage=this.onWorkerMessage.bind(this);const message=support_js_1.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message,key:"model",fetchBehavior,path:modelURL})}onModuleBufferLoaded(buffer,key){this.port.postMessage({message:"module-buffer",buffer,key})}onModuleLoaded(module,key){this.port.postMessage({message:"module",module,key})}enable(){return __awaiter(this,void 0,void 0,(function*(){this.port.postMessage({message:"enable"})}))}disable(){return __awaiter(this,void 0,void 0,(function*(){this.port.postMessage({message:"disable"})}))}stop(){var _a;return __awaiter(this,void 0,void 0,(function*(){this.port.postMessage({message:"stop"});try{null===(_a=this.worker)||void 0===_a||_a.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()}))}onProcessorMessage(event){var _a,_b,_c;const data=event.data;if("cpu"===data.message){this.cpuWarningCount++;const now=Date.now(),before=this.cpuWarningLastTriggered||now,diff=Math.abs(now-before);(!this.cpuWarningLastTriggered||diff>5e3)&&(null===(_a=this.logger)||void 0===_a||_a.warn(`CPU warning (count: ${this.cpuWarningCount}):`,data.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=now),null===(_b=this.delegate)||void 0===_b||_b.onCPUWarning()}else null===(_c=this.logger)||void 0===_c||_c.debug("Ignoring processor message.")}onWorkerMessage(event){const data=event.data;switch(data.message){case"module-buffer":if(!data.buffer||!data.key)return;this.onModuleBufferLoaded(data.buffer,data.key);break;case"module":if(!data.module||!data.key)return;this.onModuleLoaded(data.module,data.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}}exports.default=VoiceFocusInlineNode},"./node_modules/amazon-chime-sdk-js/libs/voicefocus/worklet-worker-postMessage-node.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const support_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/support.js"),types_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/types.js");class VoiceFocusWorkerPostMessageNode extends types_js_1.VoiceFocusAudioWorkletNode{constructor(context,options){super(context,options.processor,options),this.channelCountMode="explicit",this.channelCount=1;const{modelURL,audioBufferURL,worker,fetchBehavior,delegate}=options;this.delegate=delegate,this.worker=worker,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled,agc,supportFarendStream}=options.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:16e3===context.sampleRate?160:480,enabled,agc,fetchBehavior,model:modelURL,supportFarendStream});const message=support_js_1.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message,key:"buffer",fetchBehavior,path:audioBufferURL})}enable(){return __awaiter(this,void 0,void 0,(function*(){this.worker.postMessage({message:"enable"})}))}disable(){return __awaiter(this,void 0,void 0,(function*(){this.worker.postMessage({message:"disable"})}))}stop(){return __awaiter(this,void 0,void 0,(function*(){try{this.worker.postMessage({message:"stop"})}catch(e){}this.disconnect()}))}onWorkerMessage(event){var _a;const data=event.data;switch(data.message){case"ready":this.port.postMessage({message:"ready",shared:data.shared},data.shared?Object.values(data.shared):[]);break;case"data":if(!data.buffer)return;this.port.postMessage({message:"data",buffer:data.buffer},[data.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":case"processing":this.port.postMessage(data);break;case"cpu":null===(_a=this.delegate)||void 0===_a||_a.onCPUWarning();break;default:return}}onProcessorMessage(event){var _a;const data=event.data;switch(data.message){case"data":if(!data.buffer)return;this.worker.postMessage({message:"data",buffer:data.buffer},[data.buffer]);break;case"cpu":null===(_a=this.delegate)||void 0===_a||_a.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(data);break;default:return}}}exports.default=VoiceFocusWorkerPostMessageNode},"./node_modules/amazon-chime-sdk-js/libs/voicefocus/worklet-worker-sab-node.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const support_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/support.js"),types_js_1=__webpack_require__("./node_modules/amazon-chime-sdk-js/libs/voicefocus/types.js"),INDICES_ready=0,INDICES_enabled=1,STATES_disabled=0,STATES_enabled=1,STATES_stopped=2;class VoiceFocusWorkerBufferNode extends types_js_1.VoiceFocusAudioWorkletNode{constructor(context,options){super(context,options.processor,options),this.channelCountMode="explicit",this.channelCount=1;const{modelURL,resamplerURL,worker,fetchBehavior,delegate}=options;this.delegate=delegate,this.worker=worker,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled,supportFarendStream}=options.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:16e3===context.sampleRate?160:480,enabled,model:modelURL,supportFarendStream});const message=support_js_1.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message,key:"resampler",fetchBehavior,path:resamplerURL})}enable(){return __awaiter(this,void 0,void 0,(function*(){this.state?(Atomics.store(this.state,INDICES_enabled,STATES_enabled),Atomics.notify(this.state,INDICES_ready,1)):this.worker.postMessage({message:"enable"})}))}disable(){return __awaiter(this,void 0,void 0,(function*(){this.state?(Atomics.store(this.state,INDICES_enabled,STATES_disabled),Atomics.notify(this.state,INDICES_ready,1)):this.worker.postMessage({message:"disable"})}))}stop(){return __awaiter(this,void 0,void 0,(function*(){if(this.state)Atomics.store(this.state,INDICES_enabled,STATES_stopped),Atomics.notify(this.state,INDICES_ready,1);else try{this.worker.postMessage({message:"stop"})}catch(e){}this.disconnect()}))}onWorkerMessage(event){var _a;const data=event.data;switch(data.message){case"ready":if(!data.shared)throw new Error("No shared state.");this.state=new Int32Array(data.shared.state),this.port.postMessage(data);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":case"processing":this.port.postMessage(data);break;case"cpu":null===(_a=this.delegate)||void 0===_a||_a.onCPUWarning();break;default:return}}onProcessorMessage(event){var _a;const data=event.data;switch(data.message){case"cpu":null===(_a=this.delegate)||void 0===_a||_a.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(data)}}}exports.default=VoiceFocusWorkerBufferNode},"./node_modules/bowser/es5.js":function(module){module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var i=e.getVersionPrecision(t),s=e.getVersionPrecision(r),a=Math.max(i,s),o=0,u=e.map([t,r],(function(t){var r=a-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(o=a-Math.min(i,s)),a-=1;a>=o;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===o)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var i=e[r];if(t(i,r))return i}},e.assign=function(e){for(var t,r,n=e,i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var o=function(){var e=s[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){n[t]=e[t]}))};for(t=0,r=s.length;t<r;t+=1)o();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(91))&&n.__esModule?n:{default:n},s=r(18);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){}var t,r,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(r=null)&&a(t.prototype,r),n&&a(t,n),e}();t.default=o,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=u(r(92)),i=u(r(93)),s=u(r(94)),a=u(r(95)),o=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=o.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=o.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=o.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=o.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return o.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,i={},s=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(i[t]=a,s+=1):"object"==typeof a&&(r[t]=a,n+=1)})),n>0){var a=Object.keys(r),u=o.default.find(a,(function(e){return t.isOS(e)}));if(u){var d=this.satisfies(r[u]);if(void 0!==d)return d}var c=o.default.find(a,(function(e){return t.isPlatform(e)}));if(c){var f=this.satisfies(r[c]);if(void 0!==f)return f}}if(s>0){var l=Object.keys(i),h=o.default.find(l,(function(e){return t.isBrowser(e,!0)}));if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),i=o.default.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(o.default.compareVersions(i,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=d,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=i.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:s.OS_MAP.iOS},r=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=i.default.getMacOSVersionName(t),n={name:s.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=i.default.getAndroidVersionName(t),n={name:s.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=a,e.exports=t.default}})},"./node_modules/detect-browser/es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BotInfo:()=>BotInfo,BrowserInfo:()=>BrowserInfo,NodeInfo:()=>NodeInfo,ReactNativeInfo:()=>ReactNativeInfo,SearchBotDeviceInfo:()=>SearchBotDeviceInfo,browserName:()=>browserName,detect:()=>detect,detectOS:()=>detectOS,getNodeVersion:()=>getNodeVersion,parseUserAgent:()=>parseUserAgent});var process=__webpack_require__("./node_modules/process/browser.js"),__spreadArray=function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},BrowserInfo=function BrowserInfo(name,version,os){this.name=name,this.version=version,this.os=os,this.type="browser"},NodeInfo=function NodeInfo(version){this.version=version,this.type="node",this.name="node",this.os=process.platform},SearchBotDeviceInfo=function SearchBotDeviceInfo(name,version,os,bot){this.name=name,this.version=version,this.os=os,this.bot=bot,this.type="bot-device"},BotInfo=function BotInfo(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},ReactNativeInfo=function ReactNativeInfo(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS=3,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(userAgent){return userAgent?parseUserAgent(userAgent):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new ReactNativeInfo:"undefined"!=typeof navigator?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent(ua){return""!==ua&&userAgentRules.reduce((function(matched,_a){var browser=_a[0],regex=_a[1];if(matched)return matched;var uaMatch=regex.exec(ua);return!!uaMatch&&[browser,uaMatch]}),!1)}function browserName(ua){var data=matchUserAgent(ua);return data?data[0]:null}function parseUserAgent(ua){var matchedRule=matchUserAgent(ua);if(!matchedRule)return null;var name=matchedRule[0],match=matchedRule[1];if("searchbot"===name)return new BotInfo;var versionParts=match[1]&&match[1].split(".").join("_").split("_").slice(0,3);versionParts?versionParts.length<REQUIRED_VERSION_PARTS&&(versionParts=__spreadArray(__spreadArray([],versionParts,!0),function createVersionParts(count){for(var output=[],ii=0;ii<count;ii++)output.push("0");return output}(REQUIRED_VERSION_PARTS-versionParts.length),!0)):versionParts=[];var version=versionParts.join("."),os=detectOS(ua),searchBotMatch=SEARCHBOT_OS_REGEX.exec(ua);return searchBotMatch&&searchBotMatch[1]?new SearchBotDeviceInfo(name,version,os,searchBotMatch[1]):new BrowserInfo(name,version,os)}function detectOS(ua){for(var ii=0,count=operatingSystemRules.length;ii<count;ii++){var _a=operatingSystemRules[ii],os=_a[0];if(_a[1].exec(ua))return os}return null}function getNodeVersion(){return void 0!==process&&process.version?new NodeInfo(process.version.slice(1)):null}},"./node_modules/pako/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const{Deflate,deflate,deflateRaw,gzip}=__webpack_require__("./node_modules/pako/lib/deflate.js"),{Inflate,inflate,inflateRaw,ungzip}=__webpack_require__("./node_modules/pako/lib/inflate.js"),constants=__webpack_require__("./node_modules/pako/lib/zlib/constants.js");module.exports.Deflate=Deflate,module.exports.deflate=deflate,module.exports.deflateRaw=deflateRaw,module.exports.gzip=gzip,module.exports.Inflate=Inflate,module.exports.inflate=inflate,module.exports.inflateRaw=inflateRaw,module.exports.ungzip=ungzip,module.exports.constants=constants},"./node_modules/pako/lib/deflate.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const zlib_deflate=__webpack_require__("./node_modules/pako/lib/zlib/deflate.js"),utils=__webpack_require__("./node_modules/pako/lib/utils/common.js"),strings=__webpack_require__("./node_modules/pako/lib/utils/strings.js"),msg=__webpack_require__("./node_modules/pako/lib/zlib/messages.js"),ZStream=__webpack_require__("./node_modules/pako/lib/zlib/zstream.js"),toString=Object.prototype.toString,{Z_NO_FLUSH,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED}=__webpack_require__("./node_modules/pako/lib/zlib/constants.js");function Deflate(options){this.options=utils.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},options||{});let opt=this.options;opt.raw&&opt.windowBits>0?opt.windowBits=-opt.windowBits:opt.gzip&&opt.windowBits>0&&opt.windowBits<16&&(opt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;let status=zlib_deflate.deflateInit2(this.strm,opt.level,opt.method,opt.windowBits,opt.memLevel,opt.strategy);if(status!==Z_OK)throw new Error(msg[status]);if(opt.header&&zlib_deflate.deflateSetHeader(this.strm,opt.header),opt.dictionary){let dict;if(dict="string"==typeof opt.dictionary?strings.string2buf(opt.dictionary):"[object ArrayBuffer]"===toString.call(opt.dictionary)?new Uint8Array(opt.dictionary):opt.dictionary,status=zlib_deflate.deflateSetDictionary(this.strm,dict),status!==Z_OK)throw new Error(msg[status]);this._dict_set=!0}}function deflate(input,options){const deflator=new Deflate(options);if(deflator.push(input,!0),deflator.err)throw deflator.msg||msg[deflator.err];return deflator.result}Deflate.prototype.push=function(data,flush_mode){const strm=this.strm,chunkSize=this.options.chunkSize;let status,_flush_mode;if(this.ended)return!1;for(_flush_mode=flush_mode===~~flush_mode?flush_mode:!0===flush_mode?Z_FINISH:Z_NO_FLUSH,"string"==typeof data?strm.input=strings.string2buf(data):"[object ArrayBuffer]"===toString.call(data)?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;;)if(0===strm.avail_out&&(strm.output=new Uint8Array(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),(_flush_mode===Z_SYNC_FLUSH||_flush_mode===Z_FULL_FLUSH)&&strm.avail_out<=6)this.onData(strm.output.subarray(0,strm.next_out)),strm.avail_out=0;else{if(status=zlib_deflate.deflate(strm,_flush_mode),status===Z_STREAM_END)return strm.next_out>0&&this.onData(strm.output.subarray(0,strm.next_out)),status=zlib_deflate.deflateEnd(this.strm),this.onEnd(status),this.ended=!0,status===Z_OK;if(0!==strm.avail_out){if(_flush_mode>0&&strm.next_out>0)this.onData(strm.output.subarray(0,strm.next_out)),strm.avail_out=0;else if(0===strm.avail_in)break}else this.onData(strm.output)}return!0},Deflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Deflate.prototype.onEnd=function(status){status===Z_OK&&(this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg},module.exports.Deflate=Deflate,module.exports.deflate=deflate,module.exports.deflateRaw=function deflateRaw(input,options){return(options=options||{}).raw=!0,deflate(input,options)},module.exports.gzip=function gzip(input,options){return(options=options||{}).gzip=!0,deflate(input,options)},module.exports.constants=__webpack_require__("./node_modules/pako/lib/zlib/constants.js")},"./node_modules/pako/lib/inflate.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const zlib_inflate=__webpack_require__("./node_modules/pako/lib/zlib/inflate.js"),utils=__webpack_require__("./node_modules/pako/lib/utils/common.js"),strings=__webpack_require__("./node_modules/pako/lib/utils/strings.js"),msg=__webpack_require__("./node_modules/pako/lib/zlib/messages.js"),ZStream=__webpack_require__("./node_modules/pako/lib/zlib/zstream.js"),GZheader=__webpack_require__("./node_modules/pako/lib/zlib/gzheader.js"),toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=__webpack_require__("./node_modules/pako/lib/zlib/constants.js");function Inflate(options){this.options=utils.assign({chunkSize:65536,windowBits:15,to:""},options||{});const opt=this.options;opt.raw&&opt.windowBits>=0&&opt.windowBits<16&&(opt.windowBits=-opt.windowBits,0===opt.windowBits&&(opt.windowBits=-15)),!(opt.windowBits>=0&&opt.windowBits<16)||options&&options.windowBits||(opt.windowBits+=32),opt.windowBits>15&&opt.windowBits<48&&0==(15&opt.windowBits)&&(opt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;let status=zlib_inflate.inflateInit2(this.strm,opt.windowBits);if(status!==Z_OK)throw new Error(msg[status]);if(this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header),opt.dictionary&&("string"==typeof opt.dictionary?opt.dictionary=strings.string2buf(opt.dictionary):"[object ArrayBuffer]"===toString.call(opt.dictionary)&&(opt.dictionary=new Uint8Array(opt.dictionary)),opt.raw&&(status=zlib_inflate.inflateSetDictionary(this.strm,opt.dictionary),status!==Z_OK)))throw new Error(msg[status])}function inflate(input,options){const inflator=new Inflate(options);if(inflator.push(input),inflator.err)throw inflator.msg||msg[inflator.err];return inflator.result}Inflate.prototype.push=function(data,flush_mode){const strm=this.strm,chunkSize=this.options.chunkSize,dictionary=this.options.dictionary;let status,_flush_mode,last_avail_out;if(this.ended)return!1;for(_flush_mode=flush_mode===~~flush_mode?flush_mode:!0===flush_mode?Z_FINISH:Z_NO_FLUSH,"[object ArrayBuffer]"===toString.call(data)?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;;){for(0===strm.avail_out&&(strm.output=new Uint8Array(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),status=zlib_inflate.inflate(strm,_flush_mode),status===Z_NEED_DICT&&dictionary&&(status=zlib_inflate.inflateSetDictionary(strm,dictionary),status===Z_OK?status=zlib_inflate.inflate(strm,_flush_mode):status===Z_DATA_ERROR&&(status=Z_NEED_DICT));strm.avail_in>0&&status===Z_STREAM_END&&strm.state.wrap>0&&0!==data[strm.next_in];)zlib_inflate.inflateReset(strm),status=zlib_inflate.inflate(strm,_flush_mode);switch(status){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(status),this.ended=!0,!1}if(last_avail_out=strm.avail_out,strm.next_out&&(0===strm.avail_out||status===Z_STREAM_END))if("string"===this.options.to){let next_out_utf8=strings.utf8border(strm.output,strm.next_out),tail=strm.next_out-next_out_utf8,utf8str=strings.buf2string(strm.output,next_out_utf8);strm.next_out=tail,strm.avail_out=chunkSize-tail,tail&&strm.output.set(strm.output.subarray(next_out_utf8,next_out_utf8+tail),0),this.onData(utf8str)}else this.onData(strm.output.length===strm.next_out?strm.output:strm.output.subarray(0,strm.next_out));if(status!==Z_OK||0!==last_avail_out){if(status===Z_STREAM_END)return status=zlib_inflate.inflateEnd(this.strm),this.onEnd(status),this.ended=!0,!0;if(0===strm.avail_in)break}}return!0},Inflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Inflate.prototype.onEnd=function(status){status===Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg},module.exports.Inflate=Inflate,module.exports.inflate=inflate,module.exports.inflateRaw=function inflateRaw(input,options){return(options=options||{}).raw=!0,inflate(input,options)},module.exports.ungzip=inflate,module.exports.constants=__webpack_require__("./node_modules/pako/lib/zlib/constants.js")},"./node_modules/pako/lib/utils/common.js":module=>{"use strict";const _has=(obj,key)=>Object.prototype.hasOwnProperty.call(obj,key);module.exports.assign=function(obj){const sources=Array.prototype.slice.call(arguments,1);for(;sources.length;){const source=sources.shift();if(source){if("object"!=typeof source)throw new TypeError(source+"must be non-object");for(const p in source)_has(source,p)&&(obj[p]=source[p])}}return obj},module.exports.flattenChunks=chunks=>{let len=0;for(let i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;const result=new Uint8Array(len);for(let i=0,pos=0,l=chunks.length;i<l;i++){let chunk=chunks[i];result.set(chunk,pos),pos+=chunk.length}return result}},"./node_modules/pako/lib/utils/strings.js":module=>{"use strict";let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1,module.exports.string2buf=str=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(str);let buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)c=str.charCodeAt(m_pos),55296==(64512&c)&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),56320==(64512&c2)&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=new Uint8Array(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)c=str.charCodeAt(m_pos),55296==(64512&c)&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),56320==(64512&c2)&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|63&c):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c);return buf};module.exports.buf2string=(buf,max)=>{const len=max||buf.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(buf.subarray(0,max));let i,out;const utf16buf=new Array(2*len);for(out=0,i=0;i<len;){let c=buf[i++];if(c<128){utf16buf[out++]=c;continue}let c_len=_utf8len[c];if(c_len>4)utf16buf[out++]=65533,i+=c_len-1;else{for(c&=2===c_len?31:3===c_len?15:7;c_len>1&&i<len;)c=c<<6|63&buf[i++],c_len--;c_len>1?utf16buf[out++]=65533:c<65536?utf16buf[out++]=c:(c-=65536,utf16buf[out++]=55296|c>>10&1023,utf16buf[out++]=56320|1023&c)}}return((buf,len)=>{if(len<65534&&buf.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,buf.length===len?buf:buf.subarray(0,len));let result="";for(let i=0;i<len;i++)result+=String.fromCharCode(buf[i]);return result})(utf16buf,out)},module.exports.utf8border=(buf,max)=>{(max=max||buf.length)>buf.length&&(max=buf.length);let pos=max-1;for(;pos>=0&&128==(192&buf[pos]);)pos--;return pos<0||0===pos?max:pos+_utf8len[buf[pos]]>max?pos:max}},"./node_modules/pako/lib/zlib/adler32.js":module=>{"use strict";module.exports=(adler,buf,len,pos)=>{let s1=65535&adler|0,s2=adler>>>16&65535|0,n=0;for(;0!==len;){n=len>2e3?2e3:len,len-=n;do{s1=s1+buf[pos++]|0,s2=s2+s1|0}while(--n);s1%=65521,s2%=65521}return s1|s2<<16|0}},"./node_modules/pako/lib/zlib/constants.js":module=>{"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"./node_modules/pako/lib/zlib/crc32.js":module=>{"use strict";const crcTable=new Uint32Array((()=>{let c,table=[];for(var n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=1&c?3988292384^c>>>1:c>>>1;table[n]=c}return table})());module.exports=(crc,buf,len,pos)=>{const t=crcTable,end=pos+len;crc^=-1;for(let i=pos;i<end;i++)crc=crc>>>8^t[255&(crc^buf[i])];return-1^crc}},"./node_modules/pako/lib/zlib/deflate.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=__webpack_require__("./node_modules/pako/lib/zlib/trees.js"),adler32=__webpack_require__("./node_modules/pako/lib/zlib/adler32.js"),crc32=__webpack_require__("./node_modules/pako/lib/zlib/crc32.js"),msg=__webpack_require__("./node_modules/pako/lib/zlib/messages.js"),{Z_NO_FLUSH,Z_PARTIAL_FLUSH,Z_FULL_FLUSH,Z_FINISH,Z_BLOCK,Z_OK,Z_STREAM_END,Z_STREAM_ERROR,Z_DATA_ERROR,Z_BUF_ERROR,Z_DEFAULT_COMPRESSION,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY,Z_UNKNOWN,Z_DEFLATED}=__webpack_require__("./node_modules/pako/lib/zlib/constants.js"),err=(strm,errorCode)=>(strm.msg=msg[errorCode],errorCode),rank=f=>2*f-(f>4?9:0),zero=buf=>{let len=buf.length;for(;--len>=0;)buf[len]=0},slide_hash=s=>{let n,m,p,wsize=s.w_size;n=s.hash_size,p=n;do{m=s.head[--p],s.head[p]=m>=wsize?m-wsize:0}while(--n);n=wsize,p=n;do{m=s.prev[--p],s.prev[p]=m>=wsize?m-wsize:0}while(--n)};let HASH=(s,prev,data)=>(prev<<s.hash_shift^data)&s.hash_mask;const flush_pending=strm=>{const s=strm.state;let len=s.pending;len>strm.avail_out&&(len=strm.avail_out),0!==len&&(strm.output.set(s.pending_buf.subarray(s.pending_out,s.pending_out+len),strm.next_out),strm.next_out+=len,s.pending_out+=len,strm.total_out+=len,strm.avail_out-=len,s.pending-=len,0===s.pending&&(s.pending_out=0))},flush_block_only=(s,last)=>{_tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last),s.block_start=s.strstart,flush_pending(s.strm)},put_byte=(s,b)=>{s.pending_buf[s.pending++]=b},putShortMSB=(s,b)=>{s.pending_buf[s.pending++]=b>>>8&255,s.pending_buf[s.pending++]=255&b},read_buf=(strm,buf,start,size)=>{let len=strm.avail_in;return len>size&&(len=size),0===len?0:(strm.avail_in-=len,buf.set(strm.input.subarray(strm.next_in,strm.next_in+len),start),1===strm.state.wrap?strm.adler=adler32(strm.adler,buf,len,start):2===strm.state.wrap&&(strm.adler=crc32(strm.adler,buf,len,start)),strm.next_in+=len,strm.total_in+=len,len)},longest_match=(s,cur_match)=>{let match,len,chain_length=s.max_chain_length,scan=s.strstart,best_len=s.prev_length,nice_match=s.nice_match;const limit=s.strstart>s.w_size-262?s.strstart-(s.w_size-262):0,_win=s.window,wmask=s.w_mask,prev=s.prev,strend=s.strstart+258;let scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len];s.prev_length>=s.good_match&&(chain_length>>=2),nice_match>s.lookahead&&(nice_match=s.lookahead);do{if(match=cur_match,_win[match+best_len]===scan_end&&_win[match+best_len-1]===scan_end1&&_win[match]===_win[scan]&&_win[++match]===_win[scan+1]){scan+=2,match++;do{}while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);if(len=258-(strend-scan),scan=strend-258,len>best_len){if(s.match_start=cur_match,best_len=len,len>=nice_match)break;scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len]}}}while((cur_match=prev[cur_match&wmask])>limit&&0!=--chain_length);return best_len<=s.lookahead?best_len:s.lookahead},fill_window=s=>{const _w_size=s.w_size;let n,more,str;do{if(more=s.window_size-s.lookahead-s.strstart,s.strstart>=_w_size+(_w_size-262)&&(s.window.set(s.window.subarray(_w_size,_w_size+_w_size-more),0),s.match_start-=_w_size,s.strstart-=_w_size,s.block_start-=_w_size,s.insert>s.strstart&&(s.insert=s.strstart),slide_hash(s),more+=_w_size),0===s.strm.avail_in)break;if(n=read_buf(s.strm,s.window,s.strstart+s.lookahead,more),s.lookahead+=n,s.lookahead+s.insert>=3)for(str=s.strstart-s.insert,s.ins_h=s.window[str],s.ins_h=HASH(s,s.ins_h,s.window[str+1]);s.insert&&(s.ins_h=HASH(s,s.ins_h,s.window[str+3-1]),s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++,s.insert--,!(s.lookahead+s.insert<3)););}while(s.lookahead<262&&0!==s.strm.avail_in)},deflate_stored=(s,flush)=>{let len,left,have,min_block=s.pending_buf_size-5>s.w_size?s.w_size:s.pending_buf_size-5,last=0,used=s.strm.avail_in;do{if(len=65535,have=s.bi_valid+42>>3,s.strm.avail_out<have)break;if(have=s.strm.avail_out-have,left=s.strstart-s.block_start,len>left+s.strm.avail_in&&(len=left+s.strm.avail_in),len>have&&(len=have),len<min_block&&(0===len&&flush!==Z_FINISH||flush===Z_NO_FLUSH||len!==left+s.strm.avail_in))break;last=flush===Z_FINISH&&len===left+s.strm.avail_in?1:0,_tr_stored_block(s,0,0,last),s.pending_buf[s.pending-4]=len,s.pending_buf[s.pending-3]=len>>8,s.pending_buf[s.pending-2]=~len,s.pending_buf[s.pending-1]=~len>>8,flush_pending(s.strm),left&&(left>len&&(left=len),s.strm.output.set(s.window.subarray(s.block_start,s.block_start+left),s.strm.next_out),s.strm.next_out+=left,s.strm.avail_out-=left,s.strm.total_out+=left,s.block_start+=left,len-=left),len&&(read_buf(s.strm,s.strm.output,s.strm.next_out,len),s.strm.next_out+=len,s.strm.avail_out-=len,s.strm.total_out+=len)}while(0===last);return used-=s.strm.avail_in,used&&(used>=s.w_size?(s.matches=2,s.window.set(s.strm.input.subarray(s.strm.next_in-s.w_size,s.strm.next_in),0),s.strstart=s.w_size,s.insert=s.strstart):(s.window_size-s.strstart<=used&&(s.strstart-=s.w_size,s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0),s.matches<2&&s.matches++,s.insert>s.strstart&&(s.insert=s.strstart)),s.window.set(s.strm.input.subarray(s.strm.next_in-used,s.strm.next_in),s.strstart),s.strstart+=used,s.insert+=used>s.w_size-s.insert?s.w_size-s.insert:used),s.block_start=s.strstart),s.high_water<s.strstart&&(s.high_water=s.strstart),last?4:flush!==Z_NO_FLUSH&&flush!==Z_FINISH&&0===s.strm.avail_in&&s.strstart===s.block_start?2:(have=s.window_size-s.strstart,s.strm.avail_in>have&&s.block_start>=s.w_size&&(s.block_start-=s.w_size,s.strstart-=s.w_size,s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0),s.matches<2&&s.matches++,have+=s.w_size,s.insert>s.strstart&&(s.insert=s.strstart)),have>s.strm.avail_in&&(have=s.strm.avail_in),have&&(read_buf(s.strm,s.window,s.strstart,have),s.strstart+=have,s.insert+=have>s.w_size-s.insert?s.w_size-s.insert:have),s.high_water<s.strstart&&(s.high_water=s.strstart),have=s.bi_valid+42>>3,have=s.pending_buf_size-have>65535?65535:s.pending_buf_size-have,min_block=have>s.w_size?s.w_size:have,left=s.strstart-s.block_start,(left>=min_block||(left||flush===Z_FINISH)&&flush!==Z_NO_FLUSH&&0===s.strm.avail_in&&left<=have)&&(len=left>have?have:left,last=flush===Z_FINISH&&0===s.strm.avail_in&&len===left?1:0,_tr_stored_block(s,s.block_start,len,last),s.block_start+=len,flush_pending(s.strm)),last?3:1)},deflate_fast=(s,flush)=>{let hash_head,bflush;for(;;){if(s.lookahead<262){if(fill_window(s),s.lookahead<262&&flush===Z_NO_FLUSH)return 1;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=3&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),0!==hash_head&&s.strstart-hash_head<=s.w_size-262&&(s.match_length=longest_match(s,hash_head)),s.match_length>=3)if(bflush=_tr_tally(s,s.strstart-s.match_start,s.match_length-3),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=3){s.match_length--;do{s.strstart++,s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart}while(0!=--s.match_length);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+1]);else bflush=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=s.strstart<2?s.strstart:2,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.sym_next&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2},deflate_slow=(s,flush)=>{let hash_head,bflush,max_insert;for(;;){if(s.lookahead<262){if(fill_window(s),s.lookahead<262&&flush===Z_NO_FLUSH)return 1;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=3&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=2,0!==hash_head&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-262&&(s.match_length=longest_match(s,hash_head),s.match_length<=5&&(s.strategy===Z_FILTERED||3===s.match_length&&s.strstart-s.match_start>4096)&&(s.match_length=2)),s.prev_length>=3&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-3,bflush=_tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-3),s.lookahead-=s.prev_length-1,s.prev_length-=2;do{++s.strstart<=max_insert&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart)}while(0!=--s.prev_length);if(s.match_available=0,s.match_length=2,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}else if(s.match_available){if(bflush=_tr_tally(s,0,s.window[s.strstart-1]),bflush&&flush_block_only(s,!1),s.strstart++,s.lookahead--,0===s.strm.avail_out)return 1}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(bflush=_tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<2?s.strstart:2,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.sym_next&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2};function Config(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length,this.max_lazy=max_lazy,this.nice_length=nice_length,this.max_chain=max_chain,this.func=func}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=strm=>{if(!strm)return 1;const s=strm.state;return!s||s.strm!==strm||42!==s.status&&57!==s.status&&69!==s.status&&73!==s.status&&91!==s.status&&103!==s.status&&113!==s.status&&666!==s.status?1:0},deflateResetKeep=strm=>{if(deflateStateCheck(strm))return err(strm,Z_STREAM_ERROR);strm.total_in=strm.total_out=0,strm.data_type=Z_UNKNOWN;const s=strm.state;return s.pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=2===s.wrap?57:s.wrap?42:113,strm.adler=2===s.wrap?0:1,s.last_flush=-2,_tr_init(s),Z_OK},deflateReset=strm=>{const ret=deflateResetKeep(strm);var s;return ret===Z_OK&&((s=strm.state).window_size=2*s.w_size,zero(s.head),s.max_lazy_match=configuration_table[s.level].max_lazy,s.good_match=configuration_table[s.level].good_length,s.nice_match=configuration_table[s.level].nice_length,s.max_chain_length=configuration_table[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0),ret},deflateInit2=(strm,level,method,windowBits,memLevel,strategy)=>{if(!strm)return Z_STREAM_ERROR;let wrap=1;if(level===Z_DEFAULT_COMPRESSION&&(level=6),windowBits<0?(wrap=0,windowBits=-windowBits):windowBits>15&&(wrap=2,windowBits-=16),memLevel<1||memLevel>9||method!==Z_DEFLATED||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>Z_FIXED||8===windowBits&&1!==wrap)return err(strm,Z_STREAM_ERROR);8===windowBits&&(windowBits=9);const s=new DeflateState;return strm.state=s,s.strm=strm,s.status=42,s.wrap=wrap,s.gzhead=null,s.w_bits=windowBits,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=memLevel+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<memLevel+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=level,s.strategy=strategy,s.method=method,deflateReset(strm)};module.exports.deflateInit=(strm,level)=>deflateInit2(strm,level,Z_DEFLATED,15,8,Z_DEFAULT_STRATEGY),module.exports.deflateInit2=deflateInit2,module.exports.deflateReset=deflateReset,module.exports.deflateResetKeep=deflateResetKeep,module.exports.deflateSetHeader=(strm,head)=>deflateStateCheck(strm)||2!==strm.state.wrap?Z_STREAM_ERROR:(strm.state.gzhead=head,Z_OK),module.exports.deflate=(strm,flush)=>{if(deflateStateCheck(strm)||flush>Z_BLOCK||flush<0)return strm?err(strm,Z_STREAM_ERROR):Z_STREAM_ERROR;const s=strm.state;if(!strm.output||0!==strm.avail_in&&!strm.input||666===s.status&&flush!==Z_FINISH)return err(strm,0===strm.avail_out?Z_BUF_ERROR:Z_STREAM_ERROR);const old_flush=s.last_flush;if(s.last_flush=flush,0!==s.pending){if(flush_pending(strm),0===strm.avail_out)return s.last_flush=-1,Z_OK}else if(0===strm.avail_in&&rank(flush)<=rank(old_flush)&&flush!==Z_FINISH)return err(strm,Z_BUF_ERROR);if(666===s.status&&0!==strm.avail_in)return err(strm,Z_BUF_ERROR);if(42===s.status&&0===s.wrap&&(s.status=113),42===s.status){let header=Z_DEFLATED+(s.w_bits-8<<4)<<8,level_flags=-1;if(level_flags=s.strategy>=Z_HUFFMAN_ONLY||s.level<2?0:s.level<6?1:6===s.level?2:3,header|=level_flags<<6,0!==s.strstart&&(header|=32),header+=31-header%31,putShortMSB(s,header),0!==s.strstart&&(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),strm.adler=1,s.status=113,flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK}if(57===s.status)if(strm.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead)put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,255&s.gzhead.time),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,9===s.level?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,255&s.gzhead.extra.length),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69;else if(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,9===s.level?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,3),s.status=113,flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK;if(69===s.status){if(s.gzhead.extra){let beg=s.pending,left=(65535&s.gzhead.extra.length)-s.gzindex;for(;s.pending+left>s.pending_buf_size;){let copy=s.pending_buf_size-s.pending;if(s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex,s.gzindex+copy),s.pending),s.pending=s.pending_buf_size,s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex+=copy,flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK;beg=0,left-=copy}let gzhead_extra=new Uint8Array(s.gzhead.extra);s.pending_buf.set(gzhead_extra.subarray(s.gzindex,s.gzindex+left),s.pending),s.pending+=left,s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex=0}s.status=73}if(73===s.status){if(s.gzhead.name){let val,beg=s.pending;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK;beg=0}val=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex=0}s.status=91}if(91===s.status){if(s.gzhead.comment){let val,beg=s.pending;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK;beg=0}val=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg))}s.status=103}if(103===s.status){if(s.gzhead.hcrc){if(s.pending+2>s.pending_buf_size&&(flush_pending(strm),0!==s.pending))return s.last_flush=-1,Z_OK;put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),strm.adler=0}if(s.status=113,flush_pending(strm),0!==s.pending)return s.last_flush=-1,Z_OK}if(0!==strm.avail_in||0!==s.lookahead||flush!==Z_NO_FLUSH&&666!==s.status){let bstate=0===s.level?deflate_stored(s,flush):s.strategy===Z_HUFFMAN_ONLY?((s,flush)=>{let bflush;for(;;){if(0===s.lookahead&&(fill_window(s),0===s.lookahead)){if(flush===Z_NO_FLUSH)return 1;break}if(s.match_length=0,bflush=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.sym_next&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2})(s,flush):s.strategy===Z_RLE?((s,flush)=>{let bflush,prev,scan,strend;const _win=s.window;for(;;){if(s.lookahead<=258){if(fill_window(s),s.lookahead<=258&&flush===Z_NO_FLUSH)return 1;if(0===s.lookahead)break}if(s.match_length=0,s.lookahead>=3&&s.strstart>0&&(scan=s.strstart-1,prev=_win[scan],prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan])){strend=s.strstart+258;do{}while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=258-(strend-scan),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=3?(bflush=_tr_tally(s,1,s.match_length-3),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(bflush=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.sym_next&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2})(s,flush):configuration_table[s.level].func(s,flush);if(3!==bstate&&4!==bstate||(s.status=666),1===bstate||3===bstate)return 0===strm.avail_out&&(s.last_flush=-1),Z_OK;if(2===bstate&&(flush===Z_PARTIAL_FLUSH?_tr_align(s):flush!==Z_BLOCK&&(_tr_stored_block(s,0,0,!1),flush===Z_FULL_FLUSH&&(zero(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(strm),0===strm.avail_out))return s.last_flush=-1,Z_OK}return flush!==Z_FINISH?Z_OK:s.wrap<=0?Z_STREAM_END:(2===s.wrap?(put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),put_byte(s,strm.adler>>16&255),put_byte(s,strm.adler>>24&255),put_byte(s,255&strm.total_in),put_byte(s,strm.total_in>>8&255),put_byte(s,strm.total_in>>16&255),put_byte(s,strm.total_in>>24&255)):(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),flush_pending(strm),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?Z_OK:Z_STREAM_END)},module.exports.deflateEnd=strm=>{if(deflateStateCheck(strm))return Z_STREAM_ERROR;const status=strm.state.status;return strm.state=null,113===status?err(strm,Z_DATA_ERROR):Z_OK},module.exports.deflateSetDictionary=(strm,dictionary)=>{let dictLength=dictionary.length;if(deflateStateCheck(strm))return Z_STREAM_ERROR;const s=strm.state,wrap=s.wrap;if(2===wrap||1===wrap&&42!==s.status||s.lookahead)return Z_STREAM_ERROR;if(1===wrap&&(strm.adler=adler32(strm.adler,dictionary,dictLength,0)),s.wrap=0,dictLength>=s.w_size){0===wrap&&(zero(s.head),s.strstart=0,s.block_start=0,s.insert=0);let tmpDict=new Uint8Array(s.w_size);tmpDict.set(dictionary.subarray(dictLength-s.w_size,dictLength),0),dictionary=tmpDict,dictLength=s.w_size}const avail=strm.avail_in,next=strm.next_in,input=strm.input;for(strm.avail_in=dictLength,strm.next_in=0,strm.input=dictionary,fill_window(s);s.lookahead>=3;){let str=s.strstart,n=s.lookahead-2;do{s.ins_h=HASH(s,s.ins_h,s.window[str+3-1]),s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++}while(--n);s.strstart=str,s.lookahead=2,fill_window(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=2,s.match_available=0,strm.next_in=next,strm.input=input,strm.avail_in=avail,s.wrap=wrap,Z_OK},module.exports.deflateInfo="pako deflate (from Nodeca project)"},"./node_modules/pako/lib/zlib/gzheader.js":module=>{"use strict";module.exports=function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},"./node_modules/pako/lib/zlib/inffast.js":module=>{"use strict";module.exports=function inflate_fast(strm,start){let _in,last,_out,beg,end,dmax,wsize,whave,wnext,s_window,hold,bits,lcode,dcode,lmask,dmask,here,op,len,dist,from,from_source,input,output;const state=strm.state;_in=strm.next_in,input=strm.input,last=_in+(strm.avail_in-5),_out=strm.next_out,output=strm.output,beg=_out-(start-strm.avail_out),end=_out+(strm.avail_out-257),dmax=state.dmax,wsize=state.wsize,whave=state.whave,wnext=state.wnext,s_window=state.window,hold=state.hold,bits=state.bits,lcode=state.lencode,dcode=state.distcode,lmask=(1<<state.lenbits)-1,dmask=(1<<state.distbits)-1;top:do{bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=lcode[hold&lmask];dolen:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,0===op)output[_out++]=65535&here;else{if(!(16&op)){if(0==(64&op)){here=lcode[(65535&here)+(hold&(1<<op)-1)];continue dolen}if(32&op){state.mode=16191;break top}strm.msg="invalid literal/length code",state.mode=16209;break top}len=65535&here,op&=15,op&&(bits<op&&(hold+=input[_in++]<<bits,bits+=8),len+=hold&(1<<op)-1,hold>>>=op,bits-=op),bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=dcode[hold&dmask];dodist:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,!(16&op)){if(0==(64&op)){here=dcode[(65535&here)+(hold&(1<<op)-1)];continue dodist}strm.msg="invalid distance code",state.mode=16209;break top}if(dist=65535&here,op&=15,bits<op&&(hold+=input[_in++]<<bits,bits+=8,bits<op&&(hold+=input[_in++]<<bits,bits+=8)),dist+=hold&(1<<op)-1,dist>dmax){strm.msg="invalid distance too far back",state.mode=16209;break top}if(hold>>>=op,bits-=op,op=_out-beg,dist>op){if(op=dist-op,op>whave&&state.sane){strm.msg="invalid distance too far back",state.mode=16209;break top}if(from=0,from_source=s_window,0===wnext){if(from+=wsize-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}else if(wnext<op){if(from+=wsize+wnext-op,op-=wnext,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);if(from=0,wnext<len){op=wnext,len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}}else if(from+=wnext-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}for(;len>2;)output[_out++]=from_source[from++],output[_out++]=from_source[from++],output[_out++]=from_source[from++],len-=3;len&&(output[_out++]=from_source[from++],len>1&&(output[_out++]=from_source[from++]))}else{from=_out-dist;do{output[_out++]=output[from++],output[_out++]=output[from++],output[_out++]=output[from++],len-=3}while(len>2);len&&(output[_out++]=output[from++],len>1&&(output[_out++]=output[from++]))}break}}break}}while(_in<last&&_out<end);len=bits>>3,_in-=len,bits-=len<<3,hold&=(1<<bits)-1,strm.next_in=_in,strm.next_out=_out,strm.avail_in=_in<last?last-_in+5:5-(_in-last),strm.avail_out=_out<end?end-_out+257:257-(_out-end),state.hold=hold,state.bits=bits}},"./node_modules/pako/lib/zlib/inflate.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const adler32=__webpack_require__("./node_modules/pako/lib/zlib/adler32.js"),crc32=__webpack_require__("./node_modules/pako/lib/zlib/crc32.js"),inflate_fast=__webpack_require__("./node_modules/pako/lib/zlib/inffast.js"),inflate_table=__webpack_require__("./node_modules/pako/lib/zlib/inftrees.js"),{Z_FINISH,Z_BLOCK,Z_TREES,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR,Z_BUF_ERROR,Z_DEFLATED}=__webpack_require__("./node_modules/pako/lib/zlib/constants.js"),BAD=16209,zswap32=q=>(q>>>24&255)+(q>>>8&65280)+((65280&q)<<8)+((255&q)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=strm=>{if(!strm)return 1;const state=strm.state;return!state||state.strm!==strm||state.mode<16180||state.mode>16211?1:0},inflateResetKeep=strm=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR;const state=strm.state;return strm.total_in=strm.total_out=state.total=0,strm.msg="",state.wrap&&(strm.adler=1&state.wrap),state.mode=16180,state.last=0,state.havedict=0,state.flags=-1,state.dmax=32768,state.head=null,state.hold=0,state.bits=0,state.lencode=state.lendyn=new Int32Array(852),state.distcode=state.distdyn=new Int32Array(592),state.sane=1,state.back=-1,Z_OK},inflateReset=strm=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR;const state=strm.state;return state.wsize=0,state.whave=0,state.wnext=0,inflateResetKeep(strm)},inflateReset2=(strm,windowBits)=>{let wrap;if(inflateStateCheck(strm))return Z_STREAM_ERROR;const state=strm.state;return windowBits<0?(wrap=0,windowBits=-windowBits):(wrap=5+(windowBits>>4),windowBits<48&&(windowBits&=15)),windowBits&&(windowBits<8||windowBits>15)?Z_STREAM_ERROR:(null!==state.window&&state.wbits!==windowBits&&(state.window=null),state.wrap=wrap,state.wbits=windowBits,inflateReset(strm))},inflateInit2=(strm,windowBits)=>{if(!strm)return Z_STREAM_ERROR;const state=new InflateState;strm.state=state,state.strm=strm,state.window=null,state.mode=16180;const ret=inflateReset2(strm,windowBits);return ret!==Z_OK&&(strm.state=null),ret};let lenfix,distfix,virgin=!0;const fixedtables=state=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let sym=0;for(;sym<144;)state.lens[sym++]=8;for(;sym<256;)state.lens[sym++]=9;for(;sym<280;)state.lens[sym++]=7;for(;sym<288;)state.lens[sym++]=8;for(inflate_table(1,state.lens,0,288,lenfix,0,state.work,{bits:9}),sym=0;sym<32;)state.lens[sym++]=5;inflate_table(2,state.lens,0,32,distfix,0,state.work,{bits:5}),virgin=!1}state.lencode=lenfix,state.lenbits=9,state.distcode=distfix,state.distbits=5},updatewindow=(strm,src,end,copy)=>{let dist;const state=strm.state;return null===state.window&&(state.wsize=1<<state.wbits,state.wnext=0,state.whave=0,state.window=new Uint8Array(state.wsize)),copy>=state.wsize?(state.window.set(src.subarray(end-state.wsize,end),0),state.wnext=0,state.whave=state.wsize):(dist=state.wsize-state.wnext,dist>copy&&(dist=copy),state.window.set(src.subarray(end-copy,end-copy+dist),state.wnext),(copy-=dist)?(state.window.set(src.subarray(end-copy,end),0),state.wnext=copy,state.whave=state.wsize):(state.wnext+=dist,state.wnext===state.wsize&&(state.wnext=0),state.whave<state.wsize&&(state.whave+=dist))),0};module.exports.inflateReset=inflateReset,module.exports.inflateReset2=inflateReset2,module.exports.inflateResetKeep=inflateResetKeep,module.exports.inflateInit=strm=>inflateInit2(strm,15),module.exports.inflateInit2=inflateInit2,module.exports.inflate=(strm,flush)=>{let state,input,output,next,put,have,left,hold,bits,_in,_out,copy,from,from_source,here_bits,here_op,here_val,last_bits,last_op,last_val,len,ret,here=0;const hbuf=new Uint8Array(4);let opts,n;const order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(strm)||!strm.output||!strm.input&&0!==strm.avail_in)return Z_STREAM_ERROR;state=strm.state,16191===state.mode&&(state.mode=16192),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,_in=have,_out=left,ret=Z_OK;inf_leave:for(;;)switch(state.mode){case 16180:if(0===state.wrap){state.mode=16192;break}for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(2&state.wrap&&35615===hold){0===state.wbits&&(state.wbits=15),state.check=0,hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0),hold=0,bits=0,state.mode=16181;break}if(state.head&&(state.head.done=!1),!(1&state.wrap)||(((255&hold)<<8)+(hold>>8))%31){strm.msg="incorrect header check",state.mode=BAD;break}if((15&hold)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=BAD;break}if(hold>>>=4,bits-=4,len=8+(15&hold),0===state.wbits&&(state.wbits=len),len>15||len>state.wbits){strm.msg="invalid window size",state.mode=BAD;break}state.dmax=1<<state.wbits,state.flags=0,strm.adler=state.check=1,state.mode=512&hold?16189:16191,hold=0,bits=0;break;case 16181:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.flags=hold,(255&state.flags)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=BAD;break}if(57344&state.flags){strm.msg="unknown header flags set",state.mode=BAD;break}state.head&&(state.head.text=hold>>8&1),512&state.flags&&4&state.wrap&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=16182;case 16182:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.time=hold),512&state.flags&&4&state.wrap&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,hbuf[2]=hold>>>16&255,hbuf[3]=hold>>>24&255,state.check=crc32(state.check,hbuf,4,0)),hold=0,bits=0,state.mode=16183;case 16183:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.xflags=255&hold,state.head.os=hold>>8),512&state.flags&&4&state.wrap&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=16184;case 16184:if(1024&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length=hold,state.head&&(state.head.extra_len=hold),512&state.flags&&4&state.wrap&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0}else state.head&&(state.head.extra=null);state.mode=16185;case 16185:if(1024&state.flags&&(copy=state.length,copy>have&&(copy=have),copy&&(state.head&&(len=state.head.extra_len-state.length,state.head.extra||(state.head.extra=new Uint8Array(state.head.extra_len)),state.head.extra.set(input.subarray(next,next+copy),len)),512&state.flags&&4&state.wrap&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,state.length-=copy),state.length))break inf_leave;state.length=0,state.mode=16186;case 16186:if(2048&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.name+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&4&state.wrap&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.name=null);state.length=0,state.mode=16187;case 16187:if(4096&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.comment+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&4&state.wrap&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.comment=null);state.mode=16188;case 16188:if(512&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(4&state.wrap&&hold!==(65535&state.check)){strm.msg="header crc mismatch",state.mode=BAD;break}hold=0,bits=0}state.head&&(state.head.hcrc=state.flags>>9&1,state.head.done=!0),strm.adler=state.check=0,state.mode=16191;break;case 16189:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}strm.adler=state.check=zswap32(hold),hold=0,bits=0,state.mode=16190;case 16190:if(0===state.havedict)return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,Z_NEED_DICT;strm.adler=state.check=1,state.mode=16191;case 16191:if(flush===Z_BLOCK||flush===Z_TREES)break inf_leave;case 16192:if(state.last){hold>>>=7&bits,bits-=7&bits,state.mode=16206;break}for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}switch(state.last=1&hold,hold>>>=1,bits-=1,3&hold){case 0:state.mode=16193;break;case 1:if(fixedtables(state),state.mode=16199,flush===Z_TREES){hold>>>=2,bits-=2;break inf_leave}break;case 2:state.mode=16196;break;case 3:strm.msg="invalid block type",state.mode=BAD}hold>>>=2,bits-=2;break;case 16193:for(hold>>>=7&bits,bits-=7&bits;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((65535&hold)!=(hold>>>16^65535)){strm.msg="invalid stored block lengths",state.mode=BAD;break}if(state.length=65535&hold,hold=0,bits=0,state.mode=16194,flush===Z_TREES)break inf_leave;case 16194:state.mode=16195;case 16195:if(copy=state.length,copy){if(copy>have&&(copy=have),copy>left&&(copy=left),0===copy)break inf_leave;output.set(input.subarray(next,next+copy),put),have-=copy,next+=copy,left-=copy,put+=copy,state.length-=copy;break}state.mode=16191;break;case 16196:for(;bits<14;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.nlen=257+(31&hold),hold>>>=5,bits-=5,state.ndist=1+(31&hold),hold>>>=5,bits-=5,state.ncode=4+(15&hold),hold>>>=4,bits-=4,state.nlen>286||state.ndist>30){strm.msg="too many length or distance symbols",state.mode=BAD;break}state.have=0,state.mode=16197;case 16197:for(;state.have<state.ncode;){for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.lens[order[state.have++]]=7&hold,hold>>>=3,bits-=3}for(;state.have<19;)state.lens[order[state.have++]]=0;if(state.lencode=state.lendyn,state.lenbits=7,opts={bits:state.lenbits},ret=inflate_table(0,state.lens,0,19,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid code lengths set",state.mode=BAD;break}state.have=0,state.mode=16198;case 16198:for(;state.have<state.nlen+state.ndist;){for(;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_val<16)hold>>>=here_bits,bits-=here_bits,state.lens[state.have++]=here_val;else{if(16===here_val){for(n=here_bits+2;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold>>>=here_bits,bits-=here_bits,0===state.have){strm.msg="invalid bit length repeat",state.mode=BAD;break}len=state.lens[state.have-1],copy=3+(3&hold),hold>>>=2,bits-=2}else if(17===here_val){for(n=here_bits+3;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=3+(7&hold),hold>>>=3,bits-=3}else{for(n=here_bits+7;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=11+(127&hold),hold>>>=7,bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg="invalid bit length repeat",state.mode=BAD;break}for(;copy--;)state.lens[state.have++]=len}}if(state.mode===BAD)break;if(0===state.lens[256]){strm.msg="invalid code -- missing end-of-block",state.mode=BAD;break}if(state.lenbits=9,opts={bits:state.lenbits},ret=inflate_table(1,state.lens,0,state.nlen,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid literal/lengths set",state.mode=BAD;break}if(state.distbits=6,state.distcode=state.distdyn,opts={bits:state.distbits},ret=inflate_table(2,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts),state.distbits=opts.bits,ret){strm.msg="invalid distances set",state.mode=BAD;break}if(state.mode=16199,flush===Z_TREES)break inf_leave;case 16199:state.mode=16200;case 16200:if(have>=6&&left>=258){strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,inflate_fast(strm,_out),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,16191===state.mode&&(state.back=-1);break}for(state.back=0;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_op&&0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(last_bits+here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,state.length=here_val,0===here_op){state.mode=16205;break}if(32&here_op){state.back=-1,state.mode=16191;break}if(64&here_op){strm.msg="invalid literal/length code",state.mode=BAD;break}state.extra=15&here_op,state.mode=16201;case 16201:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}state.was=state.length,state.mode=16202;case 16202:for(;here=state.distcode[hold&(1<<state.distbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(last_bits+here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,64&here_op){strm.msg="invalid distance code",state.mode=BAD;break}state.offset=here_val,state.extra=15&here_op,state.mode=16203;case 16203:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.offset+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}if(state.offset>state.dmax){strm.msg="invalid distance too far back",state.mode=BAD;break}state.mode=16204;case 16204:if(0===left)break inf_leave;if(copy=_out-left,state.offset>copy){if(copy=state.offset-copy,copy>state.whave&&state.sane){strm.msg="invalid distance too far back",state.mode=BAD;break}copy>state.wnext?(copy-=state.wnext,from=state.wsize-copy):from=state.wnext-copy,copy>state.length&&(copy=state.length),from_source=state.window}else from_source=output,from=put-state.offset,copy=state.length;copy>left&&(copy=left),left-=copy,state.length-=copy;do{output[put++]=from_source[from++]}while(--copy);0===state.length&&(state.mode=16200);break;case 16205:if(0===left)break inf_leave;output[put++]=state.length,left--,state.mode=16200;break;case 16206:if(state.wrap){for(;bits<32;){if(0===have)break inf_leave;have--,hold|=input[next++]<<bits,bits+=8}if(_out-=left,strm.total_out+=_out,state.total+=_out,4&state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,put-_out):adler32(state.check,output,_out,put-_out)),_out=left,4&state.wrap&&(state.flags?hold:zswap32(hold))!==state.check){strm.msg="incorrect data check",state.mode=BAD;break}hold=0,bits=0}state.mode=16207;case 16207:if(state.wrap&&state.flags){for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(4&state.wrap&&hold!==(4294967295&state.total)){strm.msg="incorrect length check",state.mode=BAD;break}hold=0,bits=0}state.mode=16208;case 16208:ret=Z_STREAM_END;break inf_leave;case BAD:ret=Z_DATA_ERROR;break inf_leave;case 16210:return Z_MEM_ERROR;default:return Z_STREAM_ERROR}return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,(state.wsize||_out!==strm.avail_out&&state.mode<BAD&&(state.mode<16206||flush!==Z_FINISH))&&updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out)?(state.mode=16210,Z_MEM_ERROR):(_in-=strm.avail_in,_out-=strm.avail_out,strm.total_in+=_in,strm.total_out+=_out,state.total+=_out,4&state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out)),strm.data_type=state.bits+(state.last?64:0)+(16191===state.mode?128:0)+(16199===state.mode||16194===state.mode?256:0),(0===_in&&0===_out||flush===Z_FINISH)&&ret===Z_OK&&(ret=Z_BUF_ERROR),ret)},module.exports.inflateEnd=strm=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR;let state=strm.state;return state.window&&(state.window=null),strm.state=null,Z_OK},module.exports.inflateGetHeader=(strm,head)=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR;const state=strm.state;return 0==(2&state.wrap)?Z_STREAM_ERROR:(state.head=head,head.done=!1,Z_OK)},module.exports.inflateSetDictionary=(strm,dictionary)=>{const dictLength=dictionary.length;let state,dictid,ret;return inflateStateCheck(strm)?Z_STREAM_ERROR:(state=strm.state,0!==state.wrap&&16190!==state.mode?Z_STREAM_ERROR:16190===state.mode&&(dictid=1,dictid=adler32(dictid,dictionary,dictLength,0),dictid!==state.check)?Z_DATA_ERROR:(ret=updatewindow(strm,dictionary,dictLength,dictLength),ret?(state.mode=16210,Z_MEM_ERROR):(state.havedict=1,Z_OK)))},module.exports.inflateInfo="pako inflate (from Nodeca project)"},"./node_modules/pako/lib/zlib/inftrees.js":module=>{"use strict";const lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);module.exports=(type,lens,lens_index,codes,table,table_index,work,opts)=>{const bits=opts.bits;let incr,fill,low,mask,next,match,len=0,sym=0,min=0,max=0,root=0,curr=0,drop=0,left=0,used=0,huff=0,base=null;const count=new Uint16Array(16),offs=new Uint16Array(16);let here_bits,here_op,here_val,extra=null;for(len=0;len<=15;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;for(root=bits,max=15;max>=1&&0===count[max];max--);if(root>max&&(root=max),0===max)return table[table_index++]=20971520,table[table_index++]=20971520,opts.bits=1,0;for(min=1;min<max&&0===count[min];min++);for(root<min&&(root=min),left=1,len=1;len<=15;len++)if(left<<=1,left-=count[len],left<0)return-1;if(left>0&&(0===type||1!==max))return-1;for(offs[1]=0,len=1;len<15;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)0!==lens[lens_index+sym]&&(work[offs[lens[lens_index+sym]]++]=sym);if(0===type?(base=extra=work,match=20):1===type?(base=lbase,extra=lext,match=257):(base=dbase,extra=dext,match=0),huff=0,sym=0,len=min,next=table_index,curr=root,drop=0,low=-1,used=1<<root,mask=used-1,1===type&&used>852||2===type&&used>592)return 1;for(;;){here_bits=len-drop,work[sym]+1<match?(here_op=0,here_val=work[sym]):work[sym]>=match?(here_op=extra[work[sym]-match],here_val=base[work[sym]-match]):(here_op=96,here_val=0),incr=1<<len-drop,fill=1<<curr,min=fill;do{fill-=incr,table[next+(huff>>drop)+fill]=here_bits<<24|here_op<<16|here_val|0}while(0!==fill);for(incr=1<<len-1;huff&incr;)incr>>=1;if(0!==incr?(huff&=incr-1,huff+=incr):huff=0,sym++,0==--count[len]){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){for(0===drop&&(drop=root),next+=min,curr=len-drop,left=1<<curr;curr+drop<max&&(left-=count[curr+drop],!(left<=0));)curr++,left<<=1;if(used+=1<<curr,1===type&&used>852||2===type&&used>592)return 1;low=huff&mask,table[low]=root<<24|curr<<16|next-table_index|0}}return 0!==huff&&(table[next+huff]=len-drop<<24|64<<16|0),opts.bits=root,0}},"./node_modules/pako/lib/zlib/messages.js":module=>{"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"./node_modules/pako/lib/zlib/trees.js":module=>{"use strict";function zero(buf){let len=buf.length;for(;--len>=0;)buf[len]=0}const extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),static_ltree=new Array(576);zero(static_ltree);const static_dtree=new Array(60);zero(static_dtree);const _dist_code=new Array(512);zero(_dist_code);const _length_code=new Array(256);zero(_length_code);const base_length=new Array(29);zero(base_length);const base_dist=new Array(30);function StaticTreeDesc(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree,this.extra_bits=extra_bits,this.extra_base=extra_base,this.elems=elems,this.max_length=max_length,this.has_stree=static_tree&&static_tree.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(dyn_tree,stat_desc){this.dyn_tree=dyn_tree,this.max_code=0,this.stat_desc=stat_desc}zero(base_dist);const d_code=dist=>dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)],put_short=(s,w)=>{s.pending_buf[s.pending++]=255&w,s.pending_buf[s.pending++]=w>>>8&255},send_bits=(s,value,length)=>{s.bi_valid>16-length?(s.bi_buf|=value<<s.bi_valid&65535,put_short(s,s.bi_buf),s.bi_buf=value>>16-s.bi_valid,s.bi_valid+=length-16):(s.bi_buf|=value<<s.bi_valid&65535,s.bi_valid+=length)},send_code=(s,c,tree)=>{send_bits(s,tree[2*c],tree[2*c+1])},bi_reverse=(code,len)=>{let res=0;do{res|=1&code,code>>>=1,res<<=1}while(--len>0);return res>>>1},gen_codes=(tree,max_code,bl_count)=>{const next_code=new Array(16);let bits,n,code=0;for(bits=1;bits<=15;bits++)code=code+bl_count[bits-1]<<1,next_code[bits]=code;for(n=0;n<=max_code;n++){let len=tree[2*n+1];0!==len&&(tree[2*n]=bi_reverse(next_code[len]++,len))}},init_block=s=>{let n;for(n=0;n<286;n++)s.dyn_ltree[2*n]=0;for(n=0;n<30;n++)s.dyn_dtree[2*n]=0;for(n=0;n<19;n++)s.bl_tree[2*n]=0;s.dyn_ltree[512]=1,s.opt_len=s.static_len=0,s.sym_next=s.matches=0},bi_windup=s=>{s.bi_valid>8?put_short(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0},smaller=(tree,n,m,depth)=>{const _n2=2*n,_m2=2*m;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]},pqdownheap=(s,tree,k)=>{const v=s.heap[k];let j=k<<1;for(;j<=s.heap_len&&(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)&&j++,!smaller(tree,v,s.heap[j],s.depth));)s.heap[k]=s.heap[j],k=j,j<<=1;s.heap[k]=v},compress_block=(s,ltree,dtree)=>{let dist,lc,code,extra,sx=0;if(0!==s.sym_next)do{dist=255&s.pending_buf[s.sym_buf+sx++],dist+=(255&s.pending_buf[s.sym_buf+sx++])<<8,lc=s.pending_buf[s.sym_buf+sx++],0===dist?send_code(s,lc,ltree):(code=_length_code[lc],send_code(s,code+256+1,ltree),extra=extra_lbits[code],0!==extra&&(lc-=base_length[code],send_bits(s,lc,extra)),dist--,code=d_code(dist),send_code(s,code,dtree),extra=extra_dbits[code],0!==extra&&(dist-=base_dist[code],send_bits(s,dist,extra)))}while(sx<s.sym_next);send_code(s,256,ltree)},build_tree=(s,desc)=>{const tree=desc.dyn_tree,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,elems=desc.stat_desc.elems;let n,m,node,max_code=-1;for(s.heap_len=0,s.heap_max=573,n=0;n<elems;n++)0!==tree[2*n]?(s.heap[++s.heap_len]=max_code=n,s.depth[n]=0):tree[2*n+1]=0;for(;s.heap_len<2;)node=s.heap[++s.heap_len]=max_code<2?++max_code:0,tree[2*node]=1,s.depth[node]=0,s.opt_len--,has_stree&&(s.static_len-=stree[2*node+1]);for(desc.max_code=max_code,n=s.heap_len>>1;n>=1;n--)pqdownheap(s,tree,n);node=elems;do{n=s.heap[1],s.heap[1]=s.heap[s.heap_len--],pqdownheap(s,tree,1),m=s.heap[1],s.heap[--s.heap_max]=n,s.heap[--s.heap_max]=m,tree[2*node]=tree[2*n]+tree[2*m],s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1,tree[2*n+1]=tree[2*m+1]=node,s.heap[1]=node++,pqdownheap(s,tree,1)}while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],((s,desc)=>{const tree=desc.dyn_tree,max_code=desc.max_code,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,extra=desc.stat_desc.extra_bits,base=desc.stat_desc.extra_base,max_length=desc.stat_desc.max_length;let h,n,m,bits,xbits,f,overflow=0;for(bits=0;bits<=15;bits++)s.bl_count[bits]=0;for(tree[2*s.heap[s.heap_max]+1]=0,h=s.heap_max+1;h<573;h++)n=s.heap[h],bits=tree[2*tree[2*n+1]+1]+1,bits>max_length&&(bits=max_length,overflow++),tree[2*n+1]=bits,n>max_code||(s.bl_count[bits]++,xbits=0,n>=base&&(xbits=extra[n-base]),f=tree[2*n],s.opt_len+=f*(bits+xbits),has_stree&&(s.static_len+=f*(stree[2*n+1]+xbits)));if(0!==overflow){do{for(bits=max_length-1;0===s.bl_count[bits];)bits--;s.bl_count[bits]--,s.bl_count[bits+1]+=2,s.bl_count[max_length]--,overflow-=2}while(overflow>0);for(bits=max_length;0!==bits;bits--)for(n=s.bl_count[bits];0!==n;)m=s.heap[--h],m>max_code||(tree[2*m+1]!==bits&&(s.opt_len+=(bits-tree[2*m+1])*tree[2*m],tree[2*m+1]=bits),n--)}})(s,desc),gen_codes(tree,max_code,s.bl_count)},scan_tree=(s,tree,max_code)=>{let n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),tree[2*(max_code+1)+1]=65535,n=0;n<=max_code;n++)curlen=nextlen,nextlen=tree[2*(n+1)+1],++count<max_count&&curlen===nextlen||(count<min_count?s.bl_tree[2*curlen]+=count:0!==curlen?(curlen!==prevlen&&s.bl_tree[2*curlen]++,s.bl_tree[32]++):count<=10?s.bl_tree[34]++:s.bl_tree[36]++,count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4))},send_tree=(s,tree,max_code)=>{let n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),n=0;n<=max_code;n++)if(curlen=nextlen,nextlen=tree[2*(n+1)+1],!(++count<max_count&&curlen===nextlen)){if(count<min_count)do{send_code(s,curlen,s.bl_tree)}while(0!=--count);else 0!==curlen?(curlen!==prevlen&&(send_code(s,curlen,s.bl_tree),count--),send_code(s,16,s.bl_tree),send_bits(s,count-3,2)):count<=10?(send_code(s,17,s.bl_tree),send_bits(s,count-3,3)):(send_code(s,18,s.bl_tree),send_bits(s,count-11,7));count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4)}};let static_init_done=!1;const _tr_stored_block=(s,buf,stored_len,last)=>{send_bits(s,0+(last?1:0),3),bi_windup(s),put_short(s,stored_len),put_short(s,~stored_len),stored_len&&s.pending_buf.set(s.window.subarray(buf,buf+stored_len),s.pending),s.pending+=stored_len};module.exports._tr_init=s=>{static_init_done||((()=>{let n,bits,length,code,dist;const bl_count=new Array(16);for(length=0,code=0;code<28;code++)for(base_length[code]=length,n=0;n<1<<extra_lbits[code];n++)_length_code[length++]=code;for(_length_code[length-1]=code,dist=0,code=0;code<16;code++)for(base_dist[code]=dist,n=0;n<1<<extra_dbits[code];n++)_dist_code[dist++]=code;for(dist>>=7;code<30;code++)for(base_dist[code]=dist<<7,n=0;n<1<<extra_dbits[code]-7;n++)_dist_code[256+dist++]=code;for(bits=0;bits<=15;bits++)bl_count[bits]=0;for(n=0;n<=143;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(;n<=255;)static_ltree[2*n+1]=9,n++,bl_count[9]++;for(;n<=279;)static_ltree[2*n+1]=7,n++,bl_count[7]++;for(;n<=287;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(gen_codes(static_ltree,287,bl_count),n=0;n<30;n++)static_dtree[2*n+1]=5,static_dtree[2*n]=bi_reverse(n,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,257,286,15),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,30,15),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,19,7)})(),static_init_done=!0),s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc),s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc),s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc),s.bi_buf=0,s.bi_valid=0,init_block(s)},module.exports._tr_stored_block=_tr_stored_block,module.exports._tr_flush_block=(s,buf,stored_len,last)=>{let opt_lenb,static_lenb,max_blindex=0;s.level>0?(2===s.strm.data_type&&(s.strm.data_type=(s=>{let n,block_mask=4093624447;for(n=0;n<=31;n++,block_mask>>>=1)if(1&block_mask&&0!==s.dyn_ltree[2*n])return 0;if(0!==s.dyn_ltree[18]||0!==s.dyn_ltree[20]||0!==s.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==s.dyn_ltree[2*n])return 1;return 0})(s)),build_tree(s,s.l_desc),build_tree(s,s.d_desc),max_blindex=(s=>{let max_blindex;for(scan_tree(s,s.dyn_ltree,s.l_desc.max_code),scan_tree(s,s.dyn_dtree,s.d_desc.max_code),build_tree(s,s.bl_desc),max_blindex=18;max_blindex>=3&&0===s.bl_tree[2*bl_order[max_blindex]+1];max_blindex--);return s.opt_len+=3*(max_blindex+1)+5+5+4,max_blindex})(s),opt_lenb=s.opt_len+3+7>>>3,static_lenb=s.static_len+3+7>>>3,static_lenb<=opt_lenb&&(opt_lenb=static_lenb)):opt_lenb=static_lenb=stored_len+5,stored_len+4<=opt_lenb&&-1!==buf?_tr_stored_block(s,buf,stored_len,last):4===s.strategy||static_lenb===opt_lenb?(send_bits(s,2+(last?1:0),3),compress_block(s,static_ltree,static_dtree)):(send_bits(s,4+(last?1:0),3),((s,lcodes,dcodes,blcodes)=>{let rank;for(send_bits(s,lcodes-257,5),send_bits(s,dcodes-1,5),send_bits(s,blcodes-4,4),rank=0;rank<blcodes;rank++)send_bits(s,s.bl_tree[2*bl_order[rank]+1],3);send_tree(s,s.dyn_ltree,lcodes-1),send_tree(s,s.dyn_dtree,dcodes-1)})(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1),compress_block(s,s.dyn_ltree,s.dyn_dtree)),init_block(s),last&&bi_windup(s)},module.exports._tr_tally=(s,dist,lc)=>(s.pending_buf[s.sym_buf+s.sym_next++]=dist,s.pending_buf[s.sym_buf+s.sym_next++]=dist>>8,s.pending_buf[s.sym_buf+s.sym_next++]=lc,0===dist?s.dyn_ltree[2*lc]++:(s.matches++,dist--,s.dyn_ltree[2*(_length_code[lc]+256+1)]++,s.dyn_dtree[2*d_code(dist)]++),s.sym_next===s.sym_end),module.exports._tr_align=s=>{send_bits(s,2,3),send_code(s,256,static_ltree),(s=>{16===s.bi_valid?(put_short(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=255&s.bi_buf,s.bi_buf>>=8,s.bi_valid-=8)})(s)}},"./node_modules/pako/lib/zlib/zstream.js":module=>{"use strict";module.exports=function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},"./node_modules/protobufjs/minimal.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("./node_modules/protobufjs/src/index-minimal.js")},"./node_modules/protobufjs/src/index-minimal.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var protobuf=exports;function configure(){protobuf.util._configure(),protobuf.Writer._configure(protobuf.BufferWriter),protobuf.Reader._configure(protobuf.BufferReader)}protobuf.build="minimal",protobuf.Writer=__webpack_require__("./node_modules/protobufjs/src/writer.js"),protobuf.BufferWriter=__webpack_require__("./node_modules/protobufjs/src/writer_buffer.js"),protobuf.Reader=__webpack_require__("./node_modules/protobufjs/src/reader.js"),protobuf.BufferReader=__webpack_require__("./node_modules/protobufjs/src/reader_buffer.js"),protobuf.util=__webpack_require__("./node_modules/protobufjs/src/util/minimal.js"),protobuf.rpc=__webpack_require__("./node_modules/protobufjs/src/rpc.js"),protobuf.roots=__webpack_require__("./node_modules/protobufjs/src/roots.js"),protobuf.configure=configure,configure()},"./node_modules/protobufjs/src/reader.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Reader;var BufferReader,util=__webpack_require__("./node_modules/protobufjs/src/util/minimal.js"),LongBits=util.LongBits,utf8=util.utf8;function indexOutOfRange(reader,writeLength){return RangeError("index out of range: "+reader.pos+" + "+(writeLength||1)+" > "+reader.len)}function Reader(buffer){this.buf=buffer,this.pos=0,this.len=buffer.length}var create_array="undefined"!=typeof Uint8Array?function create_typed_array(buffer){if(buffer instanceof Uint8Array||Array.isArray(buffer))return new Reader(buffer);throw Error("illegal buffer")}:function create_array(buffer){if(Array.isArray(buffer))return new Reader(buffer);throw Error("illegal buffer")},create=function create(){return util.Buffer?function create_buffer_setup(buffer){return(Reader.create=function create_buffer(buffer){return util.Buffer.isBuffer(buffer)?new BufferReader(buffer):create_array(buffer)})(buffer)}:create_array};function readLongVarint(){var bits=new LongBits(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(bits.lo=(bits.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return bits}return bits.lo=(bits.lo|(127&this.buf[this.pos++])<<7*i)>>>0,bits}for(;i<4;++i)if(bits.lo=(bits.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return bits;if(bits.lo=(bits.lo|(127&this.buf[this.pos])<<28)>>>0,bits.hi=(bits.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return bits;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(bits.hi=(bits.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return bits}else for(;i<5;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(bits.hi=(bits.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return bits}throw Error("invalid varint encoding")}function readFixed32_end(buf,end){return(buf[end-4]|buf[end-3]<<8|buf[end-2]<<16|buf[end-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=create(),Reader.prototype._slice=util.Array.prototype.subarray||util.Array.prototype.slice,Reader.prototype.uint32=function read_uint32_setup(){var value=4294967295;return function read_uint32(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}}(),Reader.prototype.int32=function read_int32(){return 0|this.uint32()},Reader.prototype.sint32=function read_sint32(){var value=this.uint32();return value>>>1^-(1&value)|0},Reader.prototype.bool=function read_bool(){return 0!==this.uint32()},Reader.prototype.fixed32=function read_fixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function read_sfixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function read_float(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var value=util.float.readFloatLE(this.buf,this.pos);return this.pos+=4,value},Reader.prototype.double=function read_double(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var value=util.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,value},Reader.prototype.bytes=function read_bytes(){var length=this.uint32(),start=this.pos,end=this.pos+length;if(end>this.len)throw indexOutOfRange(this,length);if(this.pos+=length,Array.isArray(this.buf))return this.buf.slice(start,end);if(start===end){var nativeBuffer=util.Buffer;return nativeBuffer?nativeBuffer.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,start,end)},Reader.prototype.string=function read_string(){var bytes=this.bytes();return utf8.read(bytes,0,bytes.length)},Reader.prototype.skip=function skip(length){if("number"==typeof length){if(this.pos+length>this.len)throw indexOutOfRange(this,length);this.pos+=length}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(wireType){switch(wireType){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(wireType=7&this.uint32());)this.skipType(wireType);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+wireType+" at offset "+this.pos)}return this},Reader._configure=function(BufferReader_){BufferReader=BufferReader_,Reader.create=create(),BufferReader._configure();var fn=util.Long?"toLong":"toNumber";util.merge(Reader.prototype,{int64:function read_int64(){return readLongVarint.call(this)[fn](!1)},uint64:function read_uint64(){return readLongVarint.call(this)[fn](!0)},sint64:function read_sint64(){return readLongVarint.call(this).zzDecode()[fn](!1)},fixed64:function read_fixed64(){return readFixed64.call(this)[fn](!0)},sfixed64:function read_sfixed64(){return readFixed64.call(this)[fn](!1)}})}},"./node_modules/protobufjs/src/reader_buffer.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=BufferReader;var Reader=__webpack_require__("./node_modules/protobufjs/src/reader.js");(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util=__webpack_require__("./node_modules/protobufjs/src/util/minimal.js");function BufferReader(buffer){Reader.call(this,buffer)}BufferReader._configure=function(){util.Buffer&&(BufferReader.prototype._slice=util.Buffer.prototype.slice)},BufferReader.prototype.string=function read_string_buffer(){var len=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+len,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+len,this.len))},BufferReader._configure()},"./node_modules/protobufjs/src/roots.js":module=>{"use strict";module.exports={}},"./node_modules/protobufjs/src/rpc.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";exports.Service=__webpack_require__("./node_modules/protobufjs/src/rpc/service.js")},"./node_modules/protobufjs/src/rpc/service.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Service;var util=__webpack_require__("./node_modules/protobufjs/src/util/minimal.js");function Service(rpcImpl,requestDelimited,responseDelimited){if("function"!=typeof rpcImpl)throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=rpcImpl,this.requestDelimited=Boolean(requestDelimited),this.responseDelimited=Boolean(responseDelimited)}(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function rpcCall(method,requestCtor,responseCtor,request,callback){if(!request)throw TypeError("request must be specified");var self=this;if(!callback)return util.asPromise(rpcCall,self,method,requestCtor,responseCtor,request);if(self.rpcImpl)try{return self.rpcImpl(method,requestCtor[self.requestDelimited?"encodeDelimited":"encode"](request).finish(),(function rpcCallback(err,response){if(err)return self.emit("error",err,method),callback(err);if(null!==response){if(!(response instanceof responseCtor))try{response=responseCtor[self.responseDelimited?"decodeDelimited":"decode"](response)}catch(err){return self.emit("error",err,method),callback(err)}return self.emit("data",response,method),callback(null,response)}self.end(!0)}))}catch(err){return self.emit("error",err,method),void setTimeout((function(){callback(err)}),0)}else setTimeout((function(){callback(Error("already ended"))}),0)},Service.prototype.end=function end(endedByRPC){return this.rpcImpl&&(endedByRPC||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},"./node_modules/protobufjs/src/util/longbits.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=LongBits;var util=__webpack_require__("./node_modules/protobufjs/src/util/minimal.js");function LongBits(lo,hi){this.lo=lo>>>0,this.hi=hi>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function fromNumber(value){if(0===value)return zero;var sign=value<0;sign&&(value=-value);var lo=value>>>0,hi=(value-lo)/4294967296>>>0;return sign&&(hi=~hi>>>0,lo=~lo>>>0,++lo>4294967295&&(lo=0,++hi>4294967295&&(hi=0))),new LongBits(lo,hi)},LongBits.from=function from(value){if("number"==typeof value)return LongBits.fromNumber(value);if(util.isString(value)){if(!util.Long)return LongBits.fromNumber(parseInt(value,10));value=util.Long.fromString(value)}return value.low||value.high?new LongBits(value.low>>>0,value.high>>>0):zero},LongBits.prototype.toNumber=function toNumber(unsigned){if(!unsigned&&this.hi>>>31){var lo=1+~this.lo>>>0,hi=~this.hi>>>0;return lo||(hi=hi+1>>>0),-(lo+4294967296*hi)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function toLong(unsigned){return util.Long?new util.Long(0|this.lo,0|this.hi,Boolean(unsigned)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(unsigned)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function fromHash(hash){return hash===zeroHash?zero:new LongBits((charCodeAt.call(hash,0)|charCodeAt.call(hash,1)<<8|charCodeAt.call(hash,2)<<16|charCodeAt.call(hash,3)<<24)>>>0,(charCodeAt.call(hash,4)|charCodeAt.call(hash,5)<<8|charCodeAt.call(hash,6)<<16|charCodeAt.call(hash,7)<<24)>>>0)},LongBits.prototype.toHash=function toHash(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function zzEncode(){var mask=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^mask)>>>0,this.lo=(this.lo<<1^mask)>>>0,this},LongBits.prototype.zzDecode=function zzDecode(){var mask=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^mask)>>>0,this.hi=(this.hi>>>1^mask)>>>0,this},LongBits.prototype.length=function length(){var part0=this.lo,part1=(this.lo>>>28|this.hi<<4)>>>0,part2=this.hi>>>24;return 0===part2?0===part1?part0<16384?part0<128?1:2:part0<2097152?3:4:part1<16384?part1<128?5:6:part1<2097152?7:8:part2<128?9:10}},"./node_modules/protobufjs/src/util/minimal.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var util=exports;function merge(dst,src,ifNotSet){for(var keys=Object.keys(src),i=0;i<keys.length;++i)void 0!==dst[keys[i]]&&ifNotSet||(dst[keys[i]]=src[keys[i]]);return dst}function newError(name){function CustomError(message,properties){if(!(this instanceof CustomError))return new CustomError(message,properties);Object.defineProperty(this,"message",{get:function(){return message}}),Error.captureStackTrace?Error.captureStackTrace(this,CustomError):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),properties&&merge(this,properties)}return CustomError.prototype=Object.create(Error.prototype,{constructor:{value:CustomError,writable:!0,enumerable:!1,configurable:!0},name:{get:function get(){return name},set:void 0,enumerable:!1,configurable:!0},toString:{value:function value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),CustomError}util.asPromise=__webpack_require__("./node_modules/@protobufjs/aspromise/index.js"),util.base64=__webpack_require__("./node_modules/@protobufjs/base64/index.js"),util.EventEmitter=__webpack_require__("./node_modules/@protobufjs/eventemitter/index.js"),util.float=__webpack_require__("./node_modules/@protobufjs/float/index.js"),util.inquire=__webpack_require__("./node_modules/@protobufjs/inquire/index.js"),util.utf8=__webpack_require__("./node_modules/@protobufjs/utf8/index.js"),util.pool=__webpack_require__("./node_modules/@protobufjs/pool/index.js"),util.LongBits=__webpack_require__("./node_modules/protobufjs/src/util/longbits.js"),util.isNode=Boolean(void 0!==__webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.process&&__webpack_require__.g.process.versions&&__webpack_require__.g.process.versions.node),util.global=util.isNode&&__webpack_require__.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,util.emptyArray=Object.freeze?Object.freeze([]):[],util.emptyObject=Object.freeze?Object.freeze({}):{},util.isInteger=Number.isInteger||function isInteger(value){return"number"==typeof value&&isFinite(value)&&Math.floor(value)===value},util.isString=function isString(value){return"string"==typeof value||value instanceof String},util.isObject=function isObject(value){return value&&"object"==typeof value},util.isset=util.isSet=function isSet(obj,prop){var value=obj[prop];return!(null==value||!obj.hasOwnProperty(prop))&&("object"!=typeof value||(Array.isArray(value)?value.length:Object.keys(value).length)>0)},util.Buffer=function(){try{var Buffer=util.inquire("buffer").Buffer;return Buffer.prototype.utf8Write?Buffer:null}catch(e){return null}}(),util._Buffer_from=null,util._Buffer_allocUnsafe=null,util.newBuffer=function newBuffer(sizeOrArray){return"number"==typeof sizeOrArray?util.Buffer?util._Buffer_allocUnsafe(sizeOrArray):new util.Array(sizeOrArray):util.Buffer?util._Buffer_from(sizeOrArray):"undefined"==typeof Uint8Array?sizeOrArray:new Uint8Array(sizeOrArray)},util.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,util.Long=util.global.dcodeIO&&util.global.dcodeIO.Long||util.global.Long||util.inquire("long"),util.key2Re=/^true|false|0|1$/,util.key32Re=/^-?(?:0|[1-9][0-9]*)$/,util.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,util.longToHash=function longToHash(value){return value?util.LongBits.from(value).toHash():util.LongBits.zeroHash},util.longFromHash=function longFromHash(hash,unsigned){var bits=util.LongBits.fromHash(hash);return util.Long?util.Long.fromBits(bits.lo,bits.hi,unsigned):bits.toNumber(Boolean(unsigned))},util.merge=merge,util.lcFirst=function lcFirst(str){return str.charAt(0).toLowerCase()+str.substring(1)},util.newError=newError,util.ProtocolError=newError("ProtocolError"),util.oneOfGetter=function getOneOf(fieldNames){for(var fieldMap={},i=0;i<fieldNames.length;++i)fieldMap[fieldNames[i]]=1;return function(){for(var keys=Object.keys(this),i=keys.length-1;i>-1;--i)if(1===fieldMap[keys[i]]&&void 0!==this[keys[i]]&&null!==this[keys[i]])return keys[i]}},util.oneOfSetter=function setOneOf(fieldNames){return function(name){for(var i=0;i<fieldNames.length;++i)fieldNames[i]!==name&&delete this[fieldNames[i]]}},util.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},util._configure=function(){var Buffer=util.Buffer;Buffer?(util._Buffer_from=Buffer.from!==Uint8Array.from&&Buffer.from||function Buffer_from(value,encoding){return new Buffer(value,encoding)},util._Buffer_allocUnsafe=Buffer.allocUnsafe||function Buffer_allocUnsafe(size){return new Buffer(size)}):util._Buffer_from=util._Buffer_allocUnsafe=null}},"./node_modules/protobufjs/src/writer.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Writer;var BufferWriter,util=__webpack_require__("./node_modules/protobufjs/src/util/minimal.js"),LongBits=util.LongBits,base64=util.base64,utf8=util.utf8;function Op(fn,len,val){this.fn=fn,this.len=len,this.next=void 0,this.val=val}function noop(){}function State(writer){this.head=writer.head,this.tail=writer.tail,this.len=writer.len,this.next=writer.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create=function create(){return util.Buffer?function create_buffer_setup(){return(Writer.create=function create_buffer(){return new BufferWriter})()}:function create_array(){return new Writer}};function writeByte(val,buf,pos){buf[pos]=255&val}function VarintOp(len,val){this.len=len,this.next=void 0,this.val=val}function writeVarint64(val,buf,pos){for(;val.hi;)buf[pos++]=127&val.lo|128,val.lo=(val.lo>>>7|val.hi<<25)>>>0,val.hi>>>=7;for(;val.lo>127;)buf[pos++]=127&val.lo|128,val.lo=val.lo>>>7;buf[pos++]=val.lo}function writeFixed32(val,buf,pos){buf[pos]=255&val,buf[pos+1]=val>>>8&255,buf[pos+2]=val>>>16&255,buf[pos+3]=val>>>24}Writer.create=create(),Writer.alloc=function alloc(size){return new util.Array(size)},util.Array!==Array&&(Writer.alloc=util.pool(Writer.alloc,util.Array.prototype.subarray)),Writer.prototype._push=function push(fn,len,val){return this.tail=this.tail.next=new Op(fn,len,val),this.len+=len,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=function writeVarint32(val,buf,pos){for(;val>127;)buf[pos++]=127&val|128,val>>>=7;buf[pos]=val},Writer.prototype.uint32=function write_uint32(value){return this.len+=(this.tail=this.tail.next=new VarintOp((value>>>=0)<128?1:value<16384?2:value<2097152?3:value<268435456?4:5,value)).len,this},Writer.prototype.int32=function write_int32(value){return value<0?this._push(writeVarint64,10,LongBits.fromNumber(value)):this.uint32(value)},Writer.prototype.sint32=function write_sint32(value){return this.uint32((value<<1^value>>31)>>>0)},Writer.prototype.uint64=function write_uint64(value){var bits=LongBits.from(value);return this._push(writeVarint64,bits.length(),bits)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function write_sint64(value){var bits=LongBits.from(value).zzEncode();return this._push(writeVarint64,bits.length(),bits)},Writer.prototype.bool=function write_bool(value){return this._push(writeByte,1,value?1:0)},Writer.prototype.fixed32=function write_fixed32(value){return this._push(writeFixed32,4,value>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function write_fixed64(value){var bits=LongBits.from(value);return this._push(writeFixed32,4,bits.lo)._push(writeFixed32,4,bits.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function write_float(value){return this._push(util.float.writeFloatLE,4,value)},Writer.prototype.double=function write_double(value){return this._push(util.float.writeDoubleLE,8,value)};var writeBytes=util.Array.prototype.set?function writeBytes_set(val,buf,pos){buf.set(val,pos)}:function writeBytes_for(val,buf,pos){for(var i=0;i<val.length;++i)buf[pos+i]=val[i]};Writer.prototype.bytes=function write_bytes(value){var len=value.length>>>0;if(!len)return this._push(writeByte,1,0);if(util.isString(value)){var buf=Writer.alloc(len=base64.length(value));base64.decode(value,buf,0),value=buf}return this.uint32(len)._push(writeBytes,len,value)},Writer.prototype.string=function write_string(value){var len=utf8.length(value);return len?this.uint32(len)._push(utf8.write,len,value):this._push(writeByte,1,0)},Writer.prototype.fork=function fork(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function reset(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function ldelim(){var head=this.head,tail=this.tail,len=this.len;return this.reset().uint32(len),len&&(this.tail.next=head.next,this.tail=tail,this.len+=len),this},Writer.prototype.finish=function finish(){for(var head=this.head.next,buf=this.constructor.alloc(this.len),pos=0;head;)head.fn(head.val,buf,pos),pos+=head.len,head=head.next;return buf},Writer._configure=function(BufferWriter_){BufferWriter=BufferWriter_,Writer.create=create(),BufferWriter._configure()}},"./node_modules/protobufjs/src/writer_buffer.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=BufferWriter;var Writer=__webpack_require__("./node_modules/protobufjs/src/writer.js");(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util=__webpack_require__("./node_modules/protobufjs/src/util/minimal.js");function BufferWriter(){Writer.call(this)}function writeStringBuffer(val,buf,pos){val.length<40?util.utf8.write(val,buf,pos):buf.utf8Write?buf.utf8Write(val,pos):buf.write(val,pos)}BufferWriter._configure=function(){BufferWriter.alloc=util._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util.Buffer&&util.Buffer.prototype instanceof Uint8Array&&"set"===util.Buffer.prototype.set.name?function writeBytesBuffer_set(val,buf,pos){buf.set(val,pos)}:function writeBytesBuffer_copy(val,buf,pos){if(val.copy)val.copy(buf,pos,0,val.length);else for(var i=0;i<val.length;)buf[pos++]=val[i++]}},BufferWriter.prototype.bytes=function write_bytes_buffer(value){util.isString(value)&&(value=util._Buffer_from(value,"base64"));var len=value.length>>>0;return this.uint32(len),len&&this._push(BufferWriter.writeBytesBuffer,len,value),this},BufferWriter.prototype.string=function write_string_buffer(value){var len=util.Buffer.byteLength(value);return this.uint32(len),len&&this._push(writeStringBuffer,len,value),this},BufferWriter._configure()},"./node_modules/ua-parser-js/src/ua-parser.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(window,undefined){"use strict";var MODEL="model",NAME="name",TYPE="type",VENDOR="vendor",VERSION="version",MOBILE="mobile",TABLET="tablet",SMARTTV="smarttv",enumerize=function(arr){for(var enums={},i=0;i<arr.length;i++)enums[arr[i].toUpperCase()]=arr[i];return enums},has=function(str1,str2){return"string"==typeof str1&&-1!==lowerize(str2).indexOf(lowerize(str1))},lowerize=function(str){return str.toLowerCase()},trim=function(str,len){if("string"==typeof str)return str=str.replace(/^\s\s*/,""),void 0===len?str:str.substring(0,500)},rgxMapper=function(ua,arrays){for(var j,k,p,q,matches,match,i=0;i<arrays.length&&!matches;){var regex=arrays[i],props=arrays[i+1];for(j=k=0;j<regex.length&&!matches&&regex[j];)if(matches=regex[j++].exec(ua))for(p=0;p<props.length;p++)match=matches[++k],"object"==typeof(q=props[p])&&q.length>0?2===q.length?"function"==typeof q[1]?this[q[0]]=q[1].call(this,match):this[q[0]]=q[1]:3===q.length?"function"!=typeof q[1]||q[1].exec&&q[1].test?this[q[0]]=match?match.replace(q[1],q[2]):undefined:this[q[0]]=match?q[1].call(this,match,q[2]):undefined:4===q.length&&(this[q[0]]=match?q[3].call(this,match.replace(q[1],q[2])):undefined):this[q]=match||undefined;i+=2}},strMapper=function(str,map){for(var i in map)if("object"==typeof map[i]&&map[i].length>0){for(var j=0;j<map[i].length;j++)if(has(map[i][j],str))return"?"===i?undefined:i}else if(has(map[i],str))return"?"===i?undefined:i;return map.hasOwnProperty("*")?map["*"]:str},windowsVersionMap={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},regexes={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[VERSION,[NAME,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[VERSION,[NAME,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[NAME,VERSION],[/opios[\/ ]+([\w\.]+)/i],[VERSION,[NAME,"Opera Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[VERSION,[NAME,"Opera GX"]],[/\bopr\/([\w\.]+)/i],[VERSION,[NAME,"Opera"]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[VERSION,[NAME,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[VERSION,[NAME,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[NAME,VERSION],[/quark(?:pc)?\/([-\w\.]+)/i],[VERSION,[NAME,"Quark"]],[/\bddg\/([\w\.]+)/i],[VERSION,[NAME,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[VERSION,[NAME,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[VERSION,[NAME,"WeChat"]],[/konqueror\/([\w\.]+)/i],[VERSION,[NAME,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[VERSION,[NAME,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[VERSION,[NAME,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[VERSION,[NAME,"Smart Lenovo Browser"]],[/(avast|avg)\/([\w\.]+)/i],[[NAME,/(.+)/,"$1 Secure Browser"],VERSION],[/\bfocus\/([\w\.]+)/i],[VERSION,[NAME,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[VERSION,[NAME,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[VERSION,[NAME,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[VERSION,[NAME,"Dolphin"]],[/coast\/([\w\.]+)/i],[VERSION,[NAME,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[VERSION,[NAME,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[VERSION,[NAME,"Firefox"]],[/\bqihoobrowser\/?([\w\.]*)/i],[VERSION,[NAME,"360"]],[/\b(qq)\/([\w\.]+)/i],[[NAME,/(.+)/,"$1Browser"],VERSION],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[NAME,/(.+)/,"$1 Browser"],VERSION],[/samsungbrowser\/([\w\.]+)/i],[VERSION,[NAME,"Samsung Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[VERSION,[NAME,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[NAME,"Sogou Mobile"],VERSION],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[NAME,VERSION],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[NAME],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[VERSION,NAME],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[NAME,"Facebook"],VERSION],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[NAME,VERSION],[/\bgsa\/([\w\.]+) .*safari\//i],[VERSION,[NAME,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[VERSION,[NAME,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[VERSION,[NAME,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[NAME,"Chrome WebView"],VERSION],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[VERSION,[NAME,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[NAME,VERSION],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[VERSION,[NAME,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[VERSION,NAME],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[NAME,[VERSION,strMapper,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[NAME,VERSION],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[NAME,"Netscape"],VERSION],[/(wolvic|librewolf)\/([\w\.]+)/i],[NAME,VERSION],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[VERSION,[NAME,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[NAME,[VERSION,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[NAME,[VERSION,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows (ce|mobile); ppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[["architecture",/ower/,"",lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[MODEL,[VENDOR,"Samsung"],[TYPE,TABLET]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[MODEL,[VENDOR,"Samsung"],[TYPE,MOBILE]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[MODEL,[VENDOR,"Apple"],[TYPE,MOBILE]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[MODEL,[VENDOR,"Apple"],[TYPE,TABLET]],[/(macintosh);/i],[MODEL,[VENDOR,"Apple"]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[MODEL,[VENDOR,"Sharp"],[TYPE,MOBILE]],[/(?:honor)([-\w ]+)[;\)]/i],[MODEL,[VENDOR,"Honor"],[TYPE,MOBILE]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[MODEL,[VENDOR,"Huawei"],[TYPE,TABLET]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[MODEL,[VENDOR,"Huawei"],[TYPE,MOBILE]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[MODEL,/_/g," "],[VENDOR,"Xiaomi"],[TYPE,MOBILE]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[MODEL,/_/g," "],[VENDOR,"Xiaomi"],[TYPE,TABLET]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[MODEL,[VENDOR,"OPPO"],[TYPE,MOBILE]],[/\b(opd2\d{3}a?) bui/i],[MODEL,[VENDOR,"OPPO"],[TYPE,TABLET]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[MODEL,[VENDOR,"Vivo"],[TYPE,MOBILE]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[MODEL,[VENDOR,"Realme"],[TYPE,MOBILE]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[MODEL,[VENDOR,"Motorola"],[TYPE,MOBILE]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[MODEL,[VENDOR,"Motorola"],[TYPE,TABLET]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[MODEL,[VENDOR,"LG"],[TYPE,TABLET]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[MODEL,[VENDOR,"LG"],[TYPE,MOBILE]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[MODEL,[VENDOR,"Lenovo"],[TYPE,TABLET]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[MODEL,/_/g," "],[VENDOR,"Nokia"],[TYPE,MOBILE]],[/(pixel c)\b/i],[MODEL,[VENDOR,"Google"],[TYPE,TABLET]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[MODEL,[VENDOR,"Google"],[TYPE,MOBILE]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[MODEL,[VENDOR,"Sony"],[TYPE,MOBILE]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[MODEL,"Xperia Tablet"],[VENDOR,"Sony"],[TYPE,TABLET]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[MODEL,[VENDOR,"OnePlus"],[TYPE,MOBILE]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[MODEL,[VENDOR,"Amazon"],[TYPE,TABLET]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[MODEL,/(.+)/g,"Fire Phone $1"],[VENDOR,"Amazon"],[TYPE,MOBILE]],[/(playbook);[-\w\),; ]+(rim)/i],[MODEL,VENDOR,[TYPE,TABLET]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[MODEL,[VENDOR,"BlackBerry"],[TYPE,MOBILE]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[MODEL,[VENDOR,"ASUS"],[TYPE,TABLET]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[MODEL,[VENDOR,"ASUS"],[TYPE,MOBILE]],[/(nexus 9)/i],[MODEL,[VENDOR,"HTC"],[TYPE,TABLET]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[VENDOR,[MODEL,/_/g," "],[TYPE,MOBILE]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[MODEL,[VENDOR,"TCL"],[TYPE,TABLET]],[/(itel) ((\w+))/i],[[VENDOR,lowerize],MODEL,[TYPE,strMapper,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[MODEL,[VENDOR,"Acer"],[TYPE,TABLET]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[MODEL,[VENDOR,"Meizu"],[TYPE,MOBILE]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[MODEL,[VENDOR,"Ulefone"],[TYPE,MOBILE]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[MODEL,[VENDOR,"Energizer"],[TYPE,MOBILE]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[MODEL,[VENDOR,"Cat"],[TYPE,MOBILE]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[MODEL,[VENDOR,"Smartfren"],[TYPE,MOBILE]],[/droid.+; (a(?:015|06[35]|142p?))/i],[MODEL,[VENDOR,"Nothing"],[TYPE,MOBILE]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[VENDOR,MODEL,[TYPE,TABLET]],[/(surface duo)/i],[MODEL,[VENDOR,"Microsoft"],[TYPE,TABLET]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[MODEL,[VENDOR,"Fairphone"],[TYPE,MOBILE]],[/(u304aa)/i],[MODEL,[VENDOR,"AT&T"],[TYPE,MOBILE]],[/\bsie-(\w*)/i],[MODEL,[VENDOR,"Siemens"],[TYPE,MOBILE]],[/\b(rct\w+) b/i],[MODEL,[VENDOR,"RCA"],[TYPE,TABLET]],[/\b(venue[\d ]{2,7}) b/i],[MODEL,[VENDOR,"Dell"],[TYPE,TABLET]],[/\b(q(?:mv|ta)\w+) b/i],[MODEL,[VENDOR,"Verizon"],[TYPE,TABLET]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[MODEL,[VENDOR,"Barnes & Noble"],[TYPE,TABLET]],[/\b(tm\d{3}\w+) b/i],[MODEL,[VENDOR,"NuVision"],[TYPE,TABLET]],[/\b(k88) b/i],[MODEL,[VENDOR,"ZTE"],[TYPE,TABLET]],[/\b(nx\d{3}j) b/i],[MODEL,[VENDOR,"ZTE"],[TYPE,MOBILE]],[/\b(gen\d{3}) b.+49h/i],[MODEL,[VENDOR,"Swiss"],[TYPE,MOBILE]],[/\b(zur\d{3}) b/i],[MODEL,[VENDOR,"Swiss"],[TYPE,TABLET]],[/\b((zeki)?tb.*\b) b/i],[MODEL,[VENDOR,"Zeki"],[TYPE,TABLET]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[VENDOR,"Dragon Touch"],MODEL,[TYPE,TABLET]],[/\b(ns-?\w{0,9}) b/i],[MODEL,[VENDOR,"Insignia"],[TYPE,TABLET]],[/\b((nxa|next)-?\w{0,9}) b/i],[MODEL,[VENDOR,"NextBook"],[TYPE,TABLET]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[VENDOR,"Voice"],MODEL,[TYPE,MOBILE]],[/\b(lvtel\-)?(v1[12]) b/i],[[VENDOR,"LvTel"],MODEL,[TYPE,MOBILE]],[/\b(ph-1) /i],[MODEL,[VENDOR,"Essential"],[TYPE,MOBILE]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[MODEL,[VENDOR,"Envizen"],[TYPE,TABLET]],[/\b(trio[-\w\. ]+) b/i],[MODEL,[VENDOR,"MachSpeed"],[TYPE,TABLET]],[/\btu_(1491) b/i],[MODEL,[VENDOR,"Rotor"],[TYPE,TABLET]],[/(shield[\w ]+) b/i],[MODEL,[VENDOR,"Nvidia"],[TYPE,TABLET]],[/(sprint) (\w+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/(kin\.[onetw]{3})/i],[[MODEL,/\./g," "],[VENDOR,"Microsoft"],[TYPE,MOBILE]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[MODEL,[VENDOR,"Zebra"],[TYPE,TABLET]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[MODEL,[VENDOR,"Zebra"],[TYPE,MOBILE]],[/smart-tv.+(samsung)/i],[VENDOR,[TYPE,SMARTTV]],[/hbbtv.+maple;(\d+)/i],[[MODEL,/^/,"SmartTV"],[VENDOR,"Samsung"],[TYPE,SMARTTV]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[VENDOR,"LG"],[TYPE,SMARTTV]],[/(apple) ?tv/i],[VENDOR,[MODEL,"Apple TV"],[TYPE,SMARTTV]],[/crkey/i],[[MODEL,"Chromecast"],[VENDOR,"Google"],[TYPE,SMARTTV]],[/droid.+aft(\w+)( bui|\))/i],[MODEL,[VENDOR,"Amazon"],[TYPE,SMARTTV]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[MODEL,[VENDOR,"Sharp"],[TYPE,SMARTTV]],[/(bravia[\w ]+)( bui|\))/i],[MODEL,[VENDOR,"Sony"],[TYPE,SMARTTV]],[/(mitv-\w{5}) bui/i],[MODEL,[VENDOR,"Xiaomi"],[TYPE,SMARTTV]],[/Hbbtv.*(technisat) (.*);/i],[VENDOR,MODEL,[TYPE,SMARTTV]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[VENDOR,trim],[MODEL,trim],[TYPE,SMARTTV]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[TYPE,SMARTTV]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[VENDOR,MODEL,[TYPE,"console"]],[/droid.+; (shield) bui/i],[MODEL,[VENDOR,"Nvidia"],[TYPE,"console"]],[/(playstation [345portablevi]+)/i],[MODEL,[VENDOR,"Sony"],[TYPE,"console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[MODEL,[VENDOR,"Microsoft"],[TYPE,"console"]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[MODEL,[VENDOR,"Samsung"],[TYPE,"wearable"]],[/((pebble))app/i],[VENDOR,MODEL,[TYPE,"wearable"]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[MODEL,[VENDOR,"Apple"],[TYPE,"wearable"]],[/droid.+; (glass) \d/i],[MODEL,[VENDOR,"Google"],[TYPE,"wearable"]],[/droid.+; (wt63?0{2,3})\)/i],[MODEL,[VENDOR,"Zebra"],[TYPE,"wearable"]],[/droid.+; (glass) \d/i],[MODEL,[VENDOR,"Google"],[TYPE,"wearable"]],[/(pico) (4|neo3(?: link|pro)?)/i],[VENDOR,MODEL,[TYPE,"wearable"]],[/; (quest( \d| pro)?)/i],[MODEL,[VENDOR,"Facebook"],[TYPE,"wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[VENDOR,[TYPE,"embedded"]],[/(aeobc)\b/i],[MODEL,[VENDOR,"Amazon"],[TYPE,"embedded"]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[MODEL,[TYPE,MOBILE]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[MODEL,[TYPE,TABLET]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[TYPE,TABLET]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[TYPE,MOBILE]],[/(android[-\w\. ]{0,9});.+buil/i],[MODEL,[VENDOR,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[VERSION,[NAME,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[NAME,VERSION],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[VERSION,[NAME,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[NAME,VERSION],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[VERSION,NAME]],os:[[/microsoft (windows) (vista|xp)/i],[NAME,VERSION],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[NAME,[VERSION,strMapper,windowsVersionMap]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[VERSION,strMapper,windowsVersionMap],[NAME,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[VERSION,/_/g,"."],[NAME,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[NAME,"Mac OS"],[VERSION,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[VERSION,NAME],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[NAME,VERSION],[/\(bb(10);/i],[VERSION,[NAME,"BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[VERSION,[NAME,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[VERSION,[NAME,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[VERSION,[NAME,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[VERSION,[NAME,"watchOS"]],[/crkey\/([\d\.]+)/i],[VERSION,[NAME,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[NAME,"Chromium OS"],VERSION],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[NAME,VERSION],[/(sunos) ?([\w\.\d]*)/i],[[NAME,"Solaris"],VERSION],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[NAME,VERSION]]},UAParser=function(ua,extensions){if("object"==typeof ua&&(extensions=ua,ua=undefined),!(this instanceof UAParser))return new UAParser(ua,extensions).getResult();var _navigator=void 0!==window&&window.navigator?window.navigator:undefined,_ua=ua||(_navigator&&_navigator.userAgent?_navigator.userAgent:""),_uach=_navigator&&_navigator.userAgentData?_navigator.userAgentData:undefined,_rgxmap=extensions?function(regexes,extensions){var mergedRegexes={};for(var i in regexes)extensions[i]&&extensions[i].length%2==0?mergedRegexes[i]=extensions[i].concat(regexes[i]):mergedRegexes[i]=regexes[i];return mergedRegexes}(regexes,extensions):regexes,_isSelfNav=_navigator&&_navigator.userAgent==_ua;return this.getBrowser=function(){var version,_browser={};return _browser[NAME]=undefined,_browser[VERSION]=undefined,rgxMapper.call(_browser,_ua,_rgxmap.browser),_browser.major="string"==typeof(version=_browser[VERSION])?version.replace(/[^\d\.]/g,"").split(".")[0]:void 0,_isSelfNav&&_navigator&&_navigator.brave&&"function"==typeof _navigator.brave.isBrave&&(_browser[NAME]="Brave"),_browser},this.getCPU=function(){var _cpu={architecture:undefined};return rgxMapper.call(_cpu,_ua,_rgxmap.cpu),_cpu},this.getDevice=function(){var _device={};return _device[VENDOR]=undefined,_device[MODEL]=undefined,_device[TYPE]=undefined,rgxMapper.call(_device,_ua,_rgxmap.device),_isSelfNav&&!_device[TYPE]&&_uach&&_uach.mobile&&(_device[TYPE]=MOBILE),_isSelfNav&&"Macintosh"==_device[MODEL]&&_navigator&&void 0!==_navigator.standalone&&_navigator.maxTouchPoints&&_navigator.maxTouchPoints>2&&(_device[MODEL]="iPad",_device[TYPE]=TABLET),_device},this.getEngine=function(){var _engine={};return _engine[NAME]=undefined,_engine[VERSION]=undefined,rgxMapper.call(_engine,_ua,_rgxmap.engine),_engine},this.getOS=function(){var _os={};return _os[NAME]=undefined,_os[VERSION]=undefined,rgxMapper.call(_os,_ua,_rgxmap.os),_isSelfNav&&!_os[NAME]&&_uach&&_uach.platform&&"Unknown"!=_uach.platform&&(_os[NAME]=_uach.platform.replace(/chrome os/i,"Chromium OS").replace(/macos/i,"Mac OS")),_os},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return _ua},this.setUA=function(ua){return _ua="string"==typeof ua&&ua.length>500?trim(ua,500):ua,this},this.setUA(_ua),this};UAParser.VERSION="1.0.40",UAParser.BROWSER=enumerize([NAME,VERSION,"major"]),UAParser.CPU=enumerize(["architecture"]),UAParser.DEVICE=enumerize([MODEL,VENDOR,TYPE,"console",MOBILE,SMARTTV,TABLET,"wearable","embedded"]),UAParser.ENGINE=UAParser.OS=enumerize([NAME,VERSION]),void 0!==exports?(module.exports&&(exports=module.exports=UAParser),exports.UAParser=UAParser):__webpack_require__.amdO?undefined===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return UAParser}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__):void 0!==window&&(window.UAParser=UAParser);var $=void 0!==window&&(window.jQuery||window.Zepto);if($&&!$.ua){var parser=new UAParser;$.ua=parser.getResult(),$.ua.get=function(){return parser.getUA()},$.ua.set=function(ua){parser.setUA(ua);var result=parser.getResult();for(var prop in result)$.ua[prop]=result[prop]}}}("object"==typeof window?window:this)},"./node_modules/uuid/dist/esm-browser/v4.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var getRandomValues;__webpack_require__.d(__webpack_exports__,{A:()=>esm_browser_v4});var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const esm_browser_validate=function validate(uuid){return"string"==typeof uuid&&regex.test(uuid)};for(var byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));const esm_browser_stringify=function stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!esm_browser_validate(uuid))throw TypeError("Stringified UUID is invalid");return uuid};const esm_browser_v4=function v4(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return esm_browser_stringify(rnds)}}}]);