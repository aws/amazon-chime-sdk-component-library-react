/*! For license information please see providers-VoiceFocusProvider-docs-useVoiceFocus-mdx.60ca4688.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkamazon_chime_sdk_component_library_react=self.webpackChunkamazon_chime_sdk_component_library_react||[]).push([[1029],{"./node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{BN:()=>MDXContext,RP:()=>useMDXComponents,gz:()=>withMDXComponents,xA:()=>MDXProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({});function withMDXComponents(Component){return function boundMDXComponent(props){const allComponents=useMDXComponents(props.components);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,{...props,allComponents})}}function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>"function"==typeof components?components(contextComponents):{...contextComponents,...components}),[contextComponents,components])}const emptyObject={};function MDXProvider({components,children,disableParentContext}){let allComponents;return allComponents=disableParentContext?"function"==typeof components?components({}):components||emptyObject:useMDXComponents(components),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MDXContext.Provider,{value:allComponents},children)}},"./src/providers/VoiceFocusProvider/docs/useVoiceFocus.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_home_runner_work_amazon_chime_sdk_component_library_react_amazon_chime_sdk_component_library_react_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs");function _createMdxContent(props){const _components=Object.assign({h1:"h1",p:"p",code:"code",h2:"h2",pre:"pre",a:"a",h3:"h3",ul:"ul",li:"li"},(0,_home_runner_work_amazon_chime_sdk_component_library_react_amazon_chime_sdk_component_library_react_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__.RP)(),props.components);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.W8,{title:"SDK Hooks/useVoiceFocus"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h1,{id:"usevoicefocus",children:"useVoiceFocus"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["The ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"useVoiceFocus"})," hook returns a function transforming a normal audio device to an Amazon Voice Focus device, and whether Amazon Voice Focus is supported.\nAmazon Voice Focus related logs can be found in the browser developer tools when Amazon Voice Focus is enabled."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"return-value",children:"Return Value"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{className:"language-typescript",children:"{\n  // Whether Amazon Voice Focus is supported. The default value is undefined, then changes to true or false.\n  isVoiceFocusSupported: boolean | undefined;\n\n  // A function to transform an audio input device to an Amazon Voice Focus device.\n  addVoiceFocus: (device: Device) =>\n    Promise<Device | VoiceFocusTransformDevice>;\n}\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"importing",children:"Importing"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{className:"language-javascript",children:"import { useVoiceFocus } from 'amazon-chime-sdk-component-library-react';\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"usage",children:"Usage"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["The hook depends on the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"VoiceFocusProvider"}),". You can use it with ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"MeetingProvider"}),".\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"joinInfo"})," here is the response of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.a,{href:"https://docs.aws.amazon.com/chime-sdk/latest/APIReference/API_CreateMeeting.html",target:"_blank",rel:"nofollow noopener noreferrer",children:"CreateMeeting"}),"\nfrom ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.a,{href:"https://docs.aws.amazon.com/chime-sdk/latest/dg/meeting-namespace-migration.html",target:"_blank",rel:"nofollow noopener noreferrer",children:"Amazon Chime SDK Meetings endpoint"}),".\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"joinInfo"})," is needed here so as to decide whether download Voice Focus or Echo Reduction model according to ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"CreatingMeetingResponse"}),"."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{className:"language-jsx",children:"import React from 'react';\nimport { VoiceFocusTransformDevice } from 'amazon-chime-sdk-js';\nimport {\n  MeetingProvider,\n  VoiceFocusProvider,\n  useMeetingManager,\n  useVoiceFocus,\n  useAudioInputs,\n} from 'amazon-chime-sdk-component-library-react';\n\nconst joinInfo = { Meeting: {} }\n\nfunction voiceFocusName(name: string): VoiceFocusModelName {\n  if (name && ['default', 'ns_es'].includes(name)) {\n    return name as VoiceFocusModelName;\n  }\n  return 'default';\n}\n\nfunction getVoiceFocusSpecName(): VoiceFocusModelName {\n  if (\n    joinInfo &&\n    joinInfo.Meeting?.MeetingFeatures?.Audio?.EchoReduction === 'AVAILABLE'\n  ) {\n    return voiceFocusName('ns_es');\n  }\n  return voiceFocusName('default');\n}\n\nconst vfConfigValue = {\n  spec: {name: getVoiceFocusSpecName()},\n  createMeetingResponse: joinInfo,\n};\n\nconst App = () => {\n  return (\n  <VoiceFocusProvider {...vfConfigValue}>\n    <MeetingProvider>\n      <MyChild />\n    </MeetingProvider>\n  </VoiceFocusProvider>\n);\n\nconst MyChild = () => {\n  const meetingManager = useMeetingManager();\n  const { selectedDevice } = useAudioInputs();\n  const [isVoiceFocusOn, setIsVoiceFocusOn] = useState(false);\n  const [isVoiceFocusEnabled, setIsVoiceFocusEnabled] = useState(false);\n  const { isVoiceFocusSupported, addVoiceFocus } = useVoiceFocus();\n\n  useEffect(() => {\n    if (selectedDevice instanceof VoiceFocusTransformDevice) {\n      setIsVoiceFocusEnabled(true);\n    } else {\n      setIsVoiceFocusEnabled(false);\n    }\n  }, [selectedDevice]);\n\n  useEffect(() => {\n    async function toggleVoiceFocus() {\n      try {\n        let current = selectedDevice;\n        if (isVoiceFocusOn) {\n          if (typeof selectedDevice === 'string') {\n            current = await addVoiceFocus(selectedDevice);\n          }\n        } else {\n          if (selectedDevice instanceof VoiceFocusTransformDevice) {\n            current = selectedDevice.getInnerDevice();\n          }\n        }\n        await meetingManager.startAudioInputDevice(current);\n      } catch (error) {\n        // Handle device selection failure here\n        console.error('Failed to toggle Voice Focus');\n      }\n    }\n\n    toggleVoiceFocus();\n  }, [isVoiceFocusOn]);\n\n  const onClick = () => {\n    setIsVoiceFocusOn((current) => !current);\n  };\n\n  return (\n    <div>\n      {isVoiceFocusSupported && (\n        <button onClick={onClick}>\n          {isVoiceFocusEnabled\n            ? 'Disable Amazon Voice Focus'\n            : 'Enable Amazon Voice Focus'}\n        </button>\n      )}\n    </div>\n  );\n};\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.li,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"MeetingProvider"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.li,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"VoiceFocusProvider"})}),"\n"]})]})}const __WEBPACK_DEFAULT_EXPORT__=function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,_home_runner_work_amazon_chime_sdk_component_library_react_amazon_chime_sdk_component_library_react_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__.RP)(),props.components);return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(MDXLayout,Object.assign({},props,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_createMdxContent,props)})):_createMdxContent(props)}},"./node_modules/memoizerific sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/memoizerific sync recursive",module.exports=webpackEmptyContext},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")}}]);